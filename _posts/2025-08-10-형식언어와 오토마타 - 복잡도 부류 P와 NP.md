---
layout: post
title: 형식언어와 오토마타 - 복잡도 부류 P와 NP
date: 2025-08-10 22:20:23 +0900
category: 형식언어와 오토마타
---
# 복잡도 부류 **P**와 **NP** — 정의, 직관, 예시, 닫힘 성질, 완전성, 미해결 과제, 실무적 함의

이 글은 계산 복잡도 이론의 중심인 **P**와 **NP**를 체계적으로 정리한다.  
핵심은 “**다항시간에 풀 수 있는가(P)**” vs “**다항시간에 검증할 수 있는가(NP)**”의 차이,  
그리고 **NP-완전성**과 **P ?= NP** 문제의 의미다. (수식은 MathJax, 절차는 코드 블록로 표기)

---

## 1) 형식적 정의와 직관

### 1.1 P (Polynomial time)
결정 문제 언어 \(L\subseteq \Sigma^*\)가
\[
L \in \mathbf{P} \iff \exists\ \text{결정적 TM } M,\ \exists k:\ \forall x,\ \text{시간 } O(|x|^k) \text{에 } M(x)\in\{0,1\},\ x\in L\Leftrightarrow M(x)=1.
\]
- **직관**: “**효율적으로 푼다**”의 표준 수학화(모델-독립적으로 강건).  
- **예시**: 정렬, 최단경로(Dijkstra, Bellman–Ford), 최대유량(Dinic/Push–Relabel), 최소신장트리, **2-SAT**, 이분 매칭, 선형계 풀이(Gaussian), **소수 판정**(AKS), **선형계획**(내부점법) 등.

### 1.2 NP (Nondeterministic Polynomial time)
\[
L \in \mathbf{NP} \iff \exists\ \text{다항시간 검증기 } V,\ \exists k:\ \forall x,\ 
x\in L \Rightarrow \exists y,\ |y|\le |x|^k\ \land\ V(x,y)=1,\quad
x\notin L \Rightarrow \forall y,\ V(x,y)=0.
\]
- **직관**: “**예(Yes)** 인 경우, 길이 다항식의 **증명서/증인** \(y\)가 있어 **빠르게 검증** 가능.”
- **동치 정의**: 비결정적 튜링 기계가 다항시간에 수용하는 언어.

> 기본 포함: \(\mathbf{P}\subseteq \mathbf{NP}\) (정답을 스스로 계산하면 그게 검증서).

---

## 2) P와 NP의 예시 스펙트럼

### 2.1 대표 **NP(및 NP-완전)** 문제들
- **SAT/3-SAT**: CNF식 만족성(쿠크–레빈 정리로 NP-완전의 출발점).  
- **CLIQUE/Independent Set/Vertex Cover**: 그래프 조합 최적화의 표준 삼형제(모두 NP-완전).  
- **Hamiltonian Path/Cycle**, **TSP(결정판)**, **Graph Coloring (k≥3)**.  
- **Subset-Sum/Partition**, **0/1 Knapsack(결정)**.

### 2.2 **P**에 속하는 흥미로운 사례
- **2-SAT**(함축 그래프 SCC), **Bipartite Matching**(Hopcroft–Karp), **최대 매칭(이분/일반)**,  
- **Linear Programming**(다항시간), **Primality Test**(AKS), **평면 그래프** 일부 문제들(선형/거의 선형).

---

## 3) 닫힘(폐포) 성질과 보수 계층

- **P**: 합집합/교집합/보수/연접에 **닫힘**. 결정기를 합성하면 됨.  
- **NP**: 합집합·교집합에는 **닫힘**(두 증명을 함께 제시/검증).  
  - 보수(Complement)는 미지수. **coNP**를 정의하지만 \(\mathbf{NP} \stackrel{?}{=} \mathbf{coNP}\)는 미해결.  
  - **SAT**의 보수 **UNSAT**는 **coNP-완전** 후보(증명: 짧은 반증은 일반적으론 알려지지 않음).

---

## 4) **다항식 시간 변환(감소)**과 **NP-완전성**

### 4.1 다항식 시간 many-one 감소
\[
A \le_m^p B \iff \exists\ f:\ \text{poly-time computable},\ \forall x:\ x\in A \Leftrightarrow f(x)\in B.
\]
- 직관: “\(B\)가 \(A\)만큼 **적어도** 어렵다.”  
- 성질: \(A\)가 NP-완전이고 \(A\le_m^p B\), \(B\in \text{NP}\) ⇒ \(B\)도 **NP-완전**.

### 4.2 Cook–Levin 정리
모든 \(\mathbf{NP}\) 문제 \(\le_m^p\) **SAT**.  
⇒ **SAT**가 **NP-완전**의 **원점**; 이후 Karp의 21문제 등 수많은 완전성이 연쇄적으로 확립.

---

## 5) 결정 ↔ 최적화 ↔ 탐색

- **결정판**: “예/아니오” 판정(복잡도 이론의 표준 객체).  
- **최적화판**: 최적값/해 자체를 구함(보통 NP-어려움).  
- **탐색(Search)**: 실제 해를 출력. 다수의 NP-완전 결정판에서 탐색은 **다항-동등**(self-reducible).

```text
# SAT: 결정 -> 탐색 (self-reduction 스케치)
for 변수 x_i:
  φ0 := φ with x_i := 0
  if φ0 is satisfiable: set x_i=0; φ := φ0
  else: set x_i=1; φ := φ with x_i := 1
```

---

## 6) P와 NP 사이: **Ladner 정리**와 중간 문제

- **Ladner(1975)**: \(\mathbf{P}\ne \mathbf{NP}\)라면, **NP-완전도 아니고 P도 아닌** NP-중간 문제가 존재.  
- **후보**: **Graph Isomorphism(GI)**, **정수 인수분해(Factoring)** 등은 아직 P 여부가 불명(GI는 최근 준다항 알고리즘, 팩토링은 양자에서 다항).  
- 함의: NP는 “P vs NP vs NP-완전”의 **삼분 구조**일 수 있다.

---

## 7) 확률·근사·파라미터: 난문을 우회하는 세 갈래

- **무작위화**: \(\mathbf{RP}\subseteq \mathbf{BPP}\subseteq \mathbf{Σ_2^P}\) (현재는 \( \mathbf{BPP}=\mathbf{P}\) 가능성도 논의).  
- **근사 알고리즘**: Metric-TSP 1.5, Vertex-Cover 2, Set-Cover \((1+\ln n)\), Max-Cut 0.878 등.  
- **파라미터화(FPT)**: Vertex-Cover(\(O(1.27^k+kn)\)), Treewidth 기반 DP 등.  
  (반면 Clique/Independent-Set은 \(k\)-파라미터에서 **W[1]-완전**)

---

## 8) **P = NP?** — 의미와 파급효과

- **P=NP**라면  
  - **모든 NP-완전** 문제가 다항시간에 풀림 ⇒ **암호학**(일방향성/NP-증명 기반)을 광범위하게 **붕괴**.  
  - **다항식 계층(PH)** 이 **P**로 **붕괴**.  
  - 수많은 조합 최적화가 효율화되나, 실제 상수·차수는 여전히 실무적 장벽일 수 있음.
- **P≠NP**라면  
  - **증명가능한 하한**을 세우는 것이 목표지만,  
    - **Relativization**(오라클 장벽), **Natural Proofs**, **Algebrization** 등 **증명 장벽**이 존재.

---

## 9) 실무 관점 요약 — “NP-완전”을 만났을 때의 전략

1) **구조 활용**: 특수 그래프(평면/유한 트리폭/이분), 제약의 제한(Horn-SAT, 2-SAT).  
2) **근사**: 보장 비율이 있는 빠른 해.  
3) **파라미터화**: 실제 작은 매개(해 크기, 트리폭, 컷수) 기준 FPT.  
4) **무작위화/휴리스틱**: SAT의 CDCL, 지역 탐색(WSAT), 메타휴리스틱.  
5) **문제 변형**: 정수계획(ILP)으로 옮겨 커팅 플레인/분기한계 사용.

---

## 10) 간단 표 — P vs NP 한눈 정리

| 항목 | P | NP |
|---|---|---|
| 정의 | 결정적 TM 다항시간에 **해결** | 다항시간 **검증** 가능한 증명서 존재 |
| 예 | 2-SAT, 최단경로, 최대유량, LP, 소수 판정 | SAT/3-SAT, Clique, TSP(dec), 3-Coloring, Knapsack(dec) |
| 닫힘 | \(\cup,\cap,\overline{\cdot}\) 등 대부분 | \(\cup,\cap\) (보수는 미지: NP vs coNP) |
| 핵심 기법 | 동적계획, 흐름/매칭, 그래프 알고리즘 | 다항식 시간 **감소**로 **완전성** 증명 |
| 미해결 | — | **P ?= NP**, **NP ?= coNP** |

---

## 11) 수식 몇 가지(정의·관계)

- \[
\mathbf{P}=\bigcup_{k\ge 1}\mathrm{TIME}(n^k),\quad
\mathbf{NP}=\{L\mid \exists\ \text{poly }p,\ \exists\ V\in \mathbf{P}:\ x\in L \Leftrightarrow \exists y,\ |y|\le p(|x|), V(x,y)=1\}.
\]
- \[
\mathbf{P}\subseteq \mathbf{NP},\quad
\mathbf{NP}\subseteq \mathbf{PSPACE},\quad
\mathbf{NP}\subseteq \mathbf{EXP}.
\]

---

## 12) 미니 예시: 3-SAT → CLIQUE 감소(스케치)

주어진 3-CNF \(\phi=\bigwedge_{j=1}^m ( \ell_{j1}\vee \ell_{j2}\vee \ell_{j3})\).  
그래프 \(G\)를 다음처럼 구성:
- 각 절의 각 리터럴을 **정점**으로(총 \(3m\)).  
- **같은 절**에 속하면 **간선 없음**.  
- **모순되는 쌍**(예: \(x\) vs \(\lnot x\))도 **간선 없음**.  
- 그 외 모든 쌍에는 간선. 그때
\[
\phi\ \text{만족 가능} \ \Longleftrightarrow\ G \text{에 크기 } m \text{의 clique 존재}.
\]

---

## 13) 결론

- **P**: “다항시간에 푼다.” **NP**: “다항시간에 검증한다.”  
- **NP-완전**: NP의 **핵심 난문**들 — 서로 다항식 시간 변환으로 얽혀 있음.  
- **P ?= NP**는 수학/암호/최적화 전반에 파급; 현재는 장벽 이론들로 **쉽지 않음**.  
- 실무에선 **구조 활용·근사·FPT·무작위화**가 사실상의 해법 계층을 이룬다.