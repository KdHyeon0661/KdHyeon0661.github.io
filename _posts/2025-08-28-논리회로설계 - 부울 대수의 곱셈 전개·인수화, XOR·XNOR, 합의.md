---
layout: post
title: 논리회로설계 - 부울 대수의 곱셈 전개·인수화, XOR·XNOR, 합의
date: 2025-08-28 17:25:23 +0900
category: 논리회로설계
---
# 부울대수 — 곱셈 전개·인수화, 배타적 OR(XOR)·등가(XNOR), 합의(Consensus) 정리

## 0. 개요·표기·범위
- **표기**: \(+\) = OR, \(\cdot\) 또는 생략 = AND, \(\overline{A}\) = NOT \(A\), \(\oplus\) = XOR, \(\odot\) = XNOR(등가).
- **목표**:  
  1) **전개/인수화 공식**으로 SOP↔POS를 왕복하며,  
  2) **XOR/XNOR**의 정의·등가식·성질을 정확히 쓰고,  
  3) **합의(Consensus) 정리**로 항을 **제거/추가**하는 기준을 익힌다(해저드 관점 포함).
- **구성**: 법칙 → 직관/증명 스케치 → 예제 → 자동 검증 코드.

---

## 1. 곱셈 전개와 인수화 — 핵심 공식과 테크닉

### 1.1 분배 법칙 (두 형태 모두 필수 암기)
$$
A(B+C) = AB + AC \quad\text{(AND가 OR에 분배)}
$$
$$
A + BC = (A+B)(A+C) \quad\text{(OR가 AND에 분배)}
$$

**직관**  
- 첫 번째: \(B\) 또는 \(C\)가 참이면 \(A\)와 각각 AND한 결과를 OR로 합친 것과 같다.  
- 두 번째: \(A\)가 참이면 전체가 참이고, \(A\)가 거짓이면 \(BC\)가 참이어야 한다 → POS 형태.

**전개/인수화 예시**
- 전개(Expansion, POS→SOP):  
  \((A+B)(C+D) = AC + AD + BC + BD\)
- 인수화(Factoring, SOP→POS):  
  \(AB + AC = A(B+C)\)

### 1.2 일반화·정규형 트릭
- 다항 분배:
  $$
  A(B_1+\cdots+B_n)=\sum_{i=1}^n AB_i,\qquad
  (A_1+\cdots+A_m)B=\sum_{i=1}^m A_iB
  $$
- **1의 삽입으로 정규형 만들기**
  $$
  X = X(Y+\overline{Y}) = XY + X\overline{Y}\quad(\text{SOP 확장})
  $$
  $$
  X = X\cdot(Y+\overline{Y}) = (X+Y)(X+\overline{Y})\quad(\text{POS 변환})
  $$

### 1.3 전개/인수화 + 흡수의 콤보
- 흡수(자주 쓰는 마무리):  
  $$A+AB = A,\qquad A(A+B)=A$$
- **예제 A**  
  \[
  (A+B)(A+\overline{B})
  = AA + A\overline{B} + AB + B\overline{B}
  = A + A(\overline{B}+B) + 0
  = A
  \]
- **예제 B(대칭 인수화 연습)**  
  \[
  AB + \overline{A}C = (A+C)(\overline{A}+B)\quad\text{(검산: 전개하면 원식에 복귀)}
  \]

---

## 2. 배타적 OR(XOR)과 등가(XNOR) — 정의, 등가식, 성질

### 2.1 정의와 대표 등가식
- **XOR (서로 다를 때 1)**
  $$
  A\oplus B=\overline{A}B + A\overline{B}
  = (A+B)(\overline{A}+\overline{B})
  = (A+B)\cdot \overline{AB}
  $$
- **XNOR (서로 같을 때 1)**
  $$
  A\odot B=\overline{A\oplus B}=AB+\overline{A}\,\overline{B}
  $$

> **해석**: XOR은 “한쪽만 참”을 의미(배타적). XNOR은 “같음” 판정기(등치).

### 2.2 성질(항등·교환·결합·분배)
- 교환/결합:
  $$
  A\oplus B=B\oplus A,\qquad (A\oplus B)\oplus C=A\oplus(B\oplus C)
  $$
- 항등/역원:
  $$
  A\oplus 0=A,\quad A\oplus 1=\overline{A},\quad A\oplus A=0
  $$
  $$
  A\odot 0=\overline{A},\quad A\odot 1=A,\quad A\odot A=1
  $$
- AND와의 결합(공통 인자에 대해 분배적):
  $$
  C(A\oplus B)=CA\oplus CB
  $$
  > **주의**: 일반적으로 \(A\oplus(BC)=(A\oplus B)(A\oplus C)\) 는 **성립하지 않음**.

### 2.3 진리표(요약)

| A | B | \(A\oplus B\) | \(A\odot B\) |
|:-:|:-:|:-------------:|:------------:|
| 0 | 0 | 0 | 1 |
| 0 | 1 | 1 | 0 |
| 1 | 0 | 1 | 0 |
| 1 | 1 | 0 | 1 |

### 2.4 활용 포인트
- **패리티(Parity) 검출/생성**: \(P=X_1\oplus\cdots\oplus X_n\) (홀수 개 1이면 1).  
- **Equal Detector**: \(E=(A\odot B)\odot C\odot\cdots\) — 모두 동일할 때 1.  
- **단순화**: \(\overline{A}B + A\overline{B}\) 형태 발견 시 **XOR로 치환**해 깊이/항수 감소.

---

## 3. 합의(Consensus) 정리 — 제거/추가의 기준

### 3.1 표준형·쌍대
$$
\boxed{AB+\overline{A}C+BC=AB+\overline{A}C}
$$
- \(BC\)는 **합의(consensus) 항** → **제거 가능**(기능 동일).
- **쌍대(dual)**:
  $$
  (A+B)(\overline{A}+C)(B+C)=(A+B)(\overline{A}+C)
  $$

### 3.2 직관·증명 스케치
- 목표: \(YZ \le XY + X'Z\) 보이기.  
  $$
  YZ = YZ(X+\overline{X}) = XYZ + \overline{X}YZ \le XY + \overline{X}Z
  $$
  따라서 \(XY+\overline{X}Z+YZ=XY+\overline{X}Z\).

### 3.3 설계적 해석(해저드)
- **정적-1 해저드**: \(F=AB+\overline{A}C\)에서 \(A\) 전이 순간, 두 곱항이 동시에 0이 되는 짧은 구간(글리치) 가능.  
  → **합의항 \(BC\)** 를 **추가**하여 커버를 연결하면 글리치 완화.  
  → **최소식**과 **안정성**은 트레이드오프.

### 3.4 적용/비적용 예
- 적용: \(F=AB+\overline{A}C+\color{gray}{BC}\Rightarrow AB+\overline{A}C\)  
- 비적용: \(XY+\overline{X}Z+Y\overline{Z}\) (리터럴 쌍이 맞지 않음).

---

## 4. 종합 예제 — 전개·인수화 × XOR × 합의

### 예제 1 — \((A+B)(A+C)\) 간단화
$$
(A+B)(A+C)=A+BC \quad(\text{전개 후 } A+AB=A,\ A+AC=A)
$$

### 예제 2 — XOR 치환으로 축약
$$
F=\overline{A}B + A\overline{B} + C\overline{D}
= (A\oplus B) + C\overline{D}
$$

### 예제 3 — 합의 정리로 항 제거/추가
$$
F=AB+\overline{A}C+\color{gray}{BC}
\Rightarrow \begin{cases}
AB+\overline{A}C & \text{(최소화)}\\
AB+\overline{A}C+\boxed{BC} & \text{(해저드 완화 목적이면 유지)}
\end{cases}
$$

### 예제 4 — 인수화로 즉시 축약
$$
F=AB+AC+\overline{A}C
=A(B+C)+\overline{A}C
=AB+C(A+\overline{A})
=AB+C
$$

### 예제 5 — AND와 XOR의 결합
$$
F=C(A\oplus B)=CA\oplus CB
$$
> 구현 팁: \(CA\oplus CB\) 구조는 두 단계에서 짧은 경로로 합성 가능(셀 라이브러리 의존).

---

## 5. 실수 방지 체크리스트
- **두 분배식** 모두 숙지:  
  \(\color{crimson}{A(B+C)=AB+AC}\), \(\color{crimson}{A+BC=(A+B)(A+C)}\).
- \(C(A\oplus B)=CA\oplus CB\) 가능. 그러나 \(A\oplus(BC)\) 의 “완전 분배”는 일반적으로 **거짓**.
- 합의 정리는 **꼴**이 정확히 맞아야 한다: \(AB+\overline{A}C+\underline{BC}\).
- 해저드 관점에서는 **합의항 추가**가 품질(안정성)에 유리할 수 있다.
- 드모르간은 **괄호 전체 반전**: \(\overline{A+BC}=\overline{A}(\overline{B}+\overline{C})\).
- 우선순위: NOT ＞ AND ＞ OR. \(A + BC = A + (BC)\).

---

## 6. 자동 검증·도우미 코드 (Python)

> 변수 수가 6 이하라면 **전수 진리표**로 등가성을 빠르게 확인 가능.

```python
from itertools import product

def check_equiv(vars_, f, g):
    for bits in product([0,1], repeat=len(vars_)):
        if f(bits) != g(bits):
            return False, dict(zip(vars_, bits))
    return True, None

# 1. 분배: A + BC == (A+B)(A+C)
def lhs1(b): A,B,C = b; return int(A or (B and C))
def rhs1(b): A,B,C = b; return int((A or B) and (A or C))
print(check_equiv(['A','B','C'], lhs1, rhs1))

# 2. XOR 등가식: A^B == (A+B)·~(AB)
def xor_l(b): A,B = b; return int((A and (not B)) or ((not A) and B))
def xor_r(b): A,B = b; return int((A or B) and (not (A and B)))
print(check_equiv(['A','B'], xor_l, xor_r))

# 3. 합의 정리: AB + A' C + BC == AB + A' C
def F(b): A,B,C = b; return int((A and B) or ((not A) and C) or (B and C))
def G(b): A,B,C = b; return int((A and B) or ((not A) and C))
print(check_equiv(['A','B','C'], F, G))
```

### 6.1 진리표→SOP/POS 자동 생성
```python
def truth_table(vars_, f):
    rows = []
    for bits in product([0,1], repeat=len(vars_)):
        rows.append((*bits, f(bits)))
    return rows

DIG = lambda v,b: v if b==1 else f'\\overline{{{v}}}'

def to_sop(vars_, f):
    terms = []
    for bits in product([0,1], repeat=len(vars_)):
        if f(bits)==1:
            terms.append(''.join(DIG(v,b) for v,b in zip(vars_, bits)))
    return ' + '.join(terms) if terms else '0'

def to_pos(vars_, f):
    terms = []
    for bits in product([0,1], repeat=len(vars_)):
        if f(bits)==0:
            parts = [ (v if b==0 else f'\\overline{{{v}}}') for v,b in zip(vars_, bits) ]
            terms.append('(' + ' + '.join(parts) + ')')
    return ' '.join(terms) if terms else '1'

# 사용 예: F = A'B + A C'
def F2(b): A,B,C = b; return int(((not A) and B) or (A and (not C)))
vars_ = ['A','B','C']
print("SOP:", to_sop(vars_, F2))
print("POS:", to_pos(vars_, F2))
```

---

## 7. 추가 예제 — 단계별 풀이 & 검증 포인트

### 7.1 문제: \(F=(A+B)(C+D)+AB\) 를 SOP로 전개 후 최소화
**전개**
$$
F=AC+AD+BC+BD+AB
$$
**흡수 정리 적용**
- \(AC + ABC = AC\) 유형은 없지만, 재정렬하여 공통 인수 관찰:
$$
F = AC + AD + AB + BC + BD
= A(C+D+B) + B(C+D)
= A + B(C+D)
= A + BC + BD
$$
**추가 흡수**  
\(A + BC = (A+B)(A+C)\) 역방향을 쓸 수 있으나 더 단순한 “항 수” 기준으로는 \(A + B(C+D)\) 도 간단.  
시험에서는 **\(F = A + BC + BD\)** 혹은 **\(F = A + B(C+D)\)** 로 마무리(둘 다 정답).

### 7.2 문제: \(F=\overline{A}B + A\overline{B} + \overline{C}D\) 를 XOR/XNOR로 표현
$$
F = (A\oplus B) + \overline{C}D
$$
필요 시 \(\overline{C}D = (C\oplus D)\overline{D} + CD\overline{D} = (C\oplus D)\overline{D}\) 로 변형 가능(상황 선택).

### 7.3 문제: \(F=XY+\overline{X}Z+YZ\) 에 합의 정리 적용
- 패턴 비교: \(AB + \overline{A}C + BC\) 와 대조 시 \(YZ\) 가 합의항 후보.  
  여기서는 \(X\leftrightarrow A\), \(Y\leftrightarrow B\), \(Z\leftrightarrow C\) 로 보면 정확히 일치:  
  $$F = XY + \overline{X}Z + \color{gray}{YZ} \Rightarrow XY + \overline{X}Z$$
  → **제거 가능 항**은 \(YZ\).

### 7.4 문제: \(F=A+BC\) 의 보수 \(\overline{F}\) 를 드모르간으로, 그리고 POS로
**보수**
$$
\overline{F}=\overline{A+BC}=\overline{A}\ \overline{BC}=\overline{A}(\overline{B}+\overline{C})
$$
**POS**
$$
\overline{F}=(\overline{A}+\overline{B})(\overline{A}+\overline{C})
$$
(분배 역방향: \(X(Y+Z)=(X+Y)(X+Z)\))

---

## 8. K-맵 관점 요약(3변수 예, SOP 최소화 직관)
그레이 순서(행: \(AB\)=00,01,11,10 / 열: \(C\)=0,1):
```
      C
      0 1
AB 00 0 1
   01 1 1
   11 1 0
   10 0 0
```
- \(1\) 블록 묶기(2의 거듭제곱 크기): \(\overline{A}C\), \(A\overline{C}\) → \(F=\overline{A}C + A\overline{C} = A\oplus C\).  
- **합의항 추가**는 블록을 “겹치게” 하여 해저드를 줄이는 효과가 있다.

---

## 9. 실전 요약 카드
- **분배(2형태)**: \(A(B+C)=AB+AC\), \(A+BC=(A+B)(A+C)\)  
- **흡수**: \(A+AB=A\), \(A(A+B)=A\)  
- **XOR/XNOR**:
  - \(A\oplus B=\overline{A}B + A\overline{B}=(A+B)\overline{AB}\)  
  - \(A\odot B=AB+\overline{A}\,\overline{B}\)  
  - \(C(A\oplus B)=CA\oplus CB\)
- **합의**: \(AB+\overline{A}C+BC=AB+\overline{A}C\) (쌍대 포함)  
- **해저드**: 최소화와 안정성(합의항 추가)은 목적에 따라 선택  
- **정규형 트릭**: \(X=X(Y+\overline{Y})\) (SOP), \(X=X\cdot(Y+\overline{Y})\) (POS)

---

## 10. 미니 연습문제
1) \(F=(A+B)(C+D)+AB\) 를 SOP로 전개 후 흡수로 최소화하라.  
2) \(F=\overline{A}B + A\overline{B} + \overline{C}D\) 를 XOR/XNOR로 간결히 표현하라.  
3) \(F=XY+\overline{X}Z+YZ\) 에 합의 정리를 적용할 때 제거되는 항을 지정하라.  
4) \(F=A+BC\) 의 보수 \(\overline{F}\) 를 드모르간으로 구하고 POS 형태로 쓰라.  
5) \(F=C(A\oplus B)+\overline{C}(A\odot B)\) 를 “A,B 비교기” 관점에서 해석하고 단순화해 보라.
