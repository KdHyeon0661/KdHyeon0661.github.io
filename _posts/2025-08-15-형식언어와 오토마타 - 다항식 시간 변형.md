---
layout: post
title: 형식언어와 오토마타 - 다항식 시간 변형
date: 2025-08-15 14:20:23 +0900
category: 형식언어와 오토마타
---
# 다항식 시간 변형(Polynomial-time Reductions) — 정의, 변형들의 종류, 사용법·체크리스트, 대표 예시와 함정

**핵심 요지**
- “변형(reduction)”은 **문제 A를 문제 B로 자동 번역**해, B를 풀 줄 알면 A도 풀게 만드는 절차다.
- **다항식 시간 변형**은 번역 절차가 **입력 크기에 대해 다항시간**이면 된다.
- NP-완전성 증명에선 보통 **Karp(=many-one) 변형**을 쓴다.  
  Turing(=oracle) 변형, logspace 변형, 근사·계수·파라미터 보존 변형 등 **맥락별 변형**도 많다.

---

## 1) 기본 정의와 성질

### 1.1 Karp(=many-one) 다항식 시간 변형
언어(결정 문제) \(A,B \subseteq \Sigma^*\) 에 대해
\[
A \le^{p}_{m} B
\iff
\exists\ f:\Sigma^*\to\Sigma^*,\ \text{poly-time s.t.}\ \forall x,\ x\in A \Leftrightarrow f(x)\in B.
\]
- “번역기” \(f\) 하나로 **한 방에** 옮긴다(oracle 호출 없음).
- **성질**: 전이성(Transitivity), 반사성(Reflexivity).  
  \(A \le^{p}_{m} B\)이고 \(B\in \mathbf{P}\)면 \(A\in \mathbf{P}\).

### 1.2 Turing(=oracle) 다항식 시간 변형
\[
A \le^{p}_{T} B
\]
는 다항시간 알고리즘이 **\(B\) 오라클을 여러 번 질의**해 \(A\)를 푸는 것.  
- Karp보다 **약한 제약**(더 강한 “돕는 힘”).  
- NP-완전성 표준은 **Karp 변형**이다(★). Turing 변형만으로 NP-완전이라 하긴 **부족**할 수 있음.

### 1.3 “어려움의 방향”
\[
A \le B \quad\Rightarrow\quad B\ \text{가} \ A\ \text{만큼 적어도 어렵다}.
\]
그래서 **어려운 문제에서 쉬운 문제로** 화살표를 그린다. (예: 3-SAT → CLIQUE)

---

## 2) 왜 중요한가 — NP-완전성 도구

- \(C\)가 NP에 있고, **NP의 모든 문제**가 \(C\)로 Karp 변형되면 \(C\)는 **NP-완전**.  
- 실무 해석: NP-완전 문제는 “일반적으로는 다항시간 해법이 기대되기 어렵다”(P≠NP 가정).

---

## 3) 변형의 **종류 지도**

### 3.1 고전
- **Karp(many-one) 변형**: NP-완전성 표준.
- **Turing 변형**: 오라클 질의 허용(쿡 변형); 복잡도 계층 논의에서 유용.

### 3.2 자원 제약
- **Logspace 변형(≤\_L)**: 보조 공간 \(O(\log n)\)로 \(f\)를 계산.  
  P-완전, NL-완전, L-완전 논의의 표준(예: STCON은 NL-완전(≤\_L)).

- **NC/AC 변형**: 병렬 회로 깊이 제약을 보존하는 변형.

### 3.3 목적 특화
- **Parsimonious 변형**: “해의 **개수**”까지 보존 → **#P**(계수 문제)에서 중요.  
- **AP/ptas/L-변형**: **근사 성질** 보존.  
  - **L-변형**(optimization): 최적값 왜곡을 선형적으로 묶어 근사 비율 전파.  
  - **AP-변형**: \((1+\varepsilon)\) 근사 가능성 보존.  
- **Levin 변형(탐색)**: 결정 ↔ 탐색의 다항 동등성(self-reduction) 논의에 씀.
- **FPT 변형**: 파라미터화 복잡도에서 **FPT-감소**(시간 \(f(k)\cdot n^{O(1)}\) 보존), **커널 보존** 변형 등.
- **미세 복잡도(Fine-grained) 변형**: \(O(n^{2-\varepsilon})\) 같은 **지수 개선 여부**를 전파(3SUM/SETH/OV/APS P 가설 기반).

- **무작위/평균 사례 변형**: RP/BPP-성질, 또는 분포를 보존하는 **average-case** 변형(Levin 의미).

---

## 4) 변형 **설계 체크리스트**

1) **입력→입력 변환** \(x\mapsto f(x)\) 가 **다항시간**인가? (길이 blow-up 점검)  
2) **정확성(iff)**:  
   \[
   x\in A \iff f(x)\in B
   \]
   양방향을 모두 증명. (⇒: **완성도**, ⇐: **정직성**)
3) **증인 대응**: NP 맥락이면 **증명서**(해)의 대응 관계를 명시(길이 다항 한계).  
4) **가젯 재사용**: 구분자 `#`, 인덱스 코딩, 변수·절 가젯, 선택 강제 장치 등.  
5) **약속 문제(promise)** 를 조심: B가 약속 문제면 **이미지**가 약속을 지키는지 증명.  
6) **목표 클래스를 보존**: 근사/파라미터/공간 제약을 **의도대로** 보존하는 변형 선택.

---

## 5) 대표 예시 ① — **3-SAT → CLIQUE** (Karp 변형)

입력: 3-CNF \(\phi=\bigwedge_{j=1}^m ( \ell_{j1}\vee \ell_{j2}\vee \ell_{j3})\).

**그래프 구성**
- 각 절의 **각 리터럴**을 정점으로(총 \(3m\)개).  
- **같은 절** 안의 정점끼리는 **간선 없음**.  
- **모순 쌍**(\(x\) vs \(\lnot x\))도 **간선 없음**.  
- 그 외 모든 쌍에 **간선**. 목표 크기 \(k=m\).

**정확성**
- (⇒) 만족 대입이 있으면 각 절에서 **참인 리터럴** 하나씩 뽑아 \(m\)개 정점 집합. 서로 모순이 아니므로 **완전 그래프**(clique).  
- (⇐) 크기 \(m\)인 clique이면 절마다 하나씩 선택되었고, **모순 간선 부재 규칙** 때문에 일관 대입 존재.

**복잡도**: 정점·간선 수 모두 \(O(m^2)\) 이내, 다항시간.

---

## 6) 대표 예시 ② — **3-SAT → VERTEX-COVER** (연쇄 변형)

CLIQUE 변형 뒤 **보완 그래프** \(\overline{G}\) 에서
\[
\text{CLIQUE}(G,k) \iff \text{VERTEX-COVER}(\overline{G},\ |V(G)|-k).
\]
따라서 3-SAT에서 VC로 **한 번 더** Karp 변형된다.

---

## 7) 결정·탐색·최적화 사이의 관계(자기감소 Self-reduction)

SAT(결정)를 풀 수 있으면 **해(탐색)** 도 다항횟수의 질의로 구한다:

```text
# SAT self-reduction
for 변수 x_i:
  if SAT(φ with x_i:=0) then set x_i=0 and continue
  else set x_i=1
return assignment
```

최적화판도 보통 “결정판 오라클”로 이분 탐색/증분 검증해 **값**을 회복(단, 근사 보존은 별개 논의).

---

## 8) 근사·계수·파라미터 맥락에서의 변형들

- **L-변형**(최적화): \((\alpha,\beta)\)-선형 바운드로 **근사 비율**을 전파(예: Max-Cut ↔ Max-2SAT).  
- **AP-변형 / PTAS-변형**: \((1+\varepsilon)\) 근사 가능성 보존.  
- **Parsimonious 변형**: 해의 개수를 그대로 보존 → **#SAT → #CSP** 등 **#P-완전** 증명에 필수.  
- **FPT-감소**: \((x,k)\mapsto (x',k')\) 가 \(f(k)\cdot n^{O(1)}\)에 계산되고 \(k'\le g(k)\).  
  W[1]/W[2] 완전성, 커널화 가능성 분석에 사용.  
- **Fine-grained 변형**: “만약 A가 \(O(n^{2-\varepsilon})\)이면, B도 \(O(n^{2-\varepsilon'})\)” 같은 **지수 개선의 전파**.

---

## 9) 실전 **레시피 템플릿**

```text
# 다항식 시간 변형 설계 틀
Input: x (A-인스턴스)
1) x의 구조를 분석해 '국소 제약'과 '전역 목표'를 명확히 한다.
2) 가젯 카탈로그에서 선택: 선택 강제, 일관성 검사, 충돌 금지, 카운팅… 
3) f(x)를 구성: 그래프/식/집합 시스템 등으로 번역.
4) (⇒) 방향: A의 '예' 증인 -> B의 '예' 증인으로 매핑.
5) (⇐) 방향: B의 '예' 증인 -> A의 '예' 증인을 복원(충돌·누락이 없음을 보임).
6) 시간·크기 분석: |f(x)| ≤ poly(|x|).
7) (맥락별) 근사/파라미터/공간 제약 보존을 확인.
```

---

## 10) 흔한 **함정과 주의점**

- **Turing 변형만으로 NP-완전 주장**: 표준은 **Karp 변형**이다. (Turing은 더 강해 주장의 힘이 약해질 수 있음)  
- **약속 문제**: 변형 이미지가 약속을 위반하면 정리가 깨진다.  
- **크기 폭증**: \(f(x)\)가 지수로 불어나면 **다항식 시간 변형이 아님**.  
- **증인의 길이**: NP 검증 프레임에선 증인이 **다항 길이**인지 꼭 확인.  
- **근사·계수 맥락 혼용**: NP-완전 변형이 **근사 성질**이나 **해 개수**를 보존하지는 않는다—전용 변형을 써야 한다.

---

## 11) 한 페이지 요약

- **정의**: \(A \le^{p}_{m} B\) ⇔ 다항시간 함수 \(f\)로 \(x\in A \Leftrightarrow f(x)\in B\).  
- **용도**: NP-완전성·완전성 전파(“A가 어렵다 ⇒ B도 어렵다”).  
- **종류**: Karp / Turing / logspace / 근사 보존(AP, L) / 계수(Parsimonious) / FPT / Fine-grained.  
- **예시**: 3-SAT → CLIQUE(정점-리터럴 가젯, 모순 금지 간선), → VERTEX-COVER(보완 그래프).  
- **체크리스트**: 다항시간·iff·증인 대응·약속 준수·크기 상계·맥락 보존.