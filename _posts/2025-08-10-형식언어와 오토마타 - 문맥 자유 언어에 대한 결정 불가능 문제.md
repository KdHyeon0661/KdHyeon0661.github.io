---
layout: post
title: 형식언어와 오토마타 - 문맥 자유 언어에 대한 결정 불가능 문제
date: 2025-08-10 14:20:23 +0900
category: 형식언어와 오토마타
---
# 문맥 자유 언어(CFL)에 대한 **결정 불가능 문제** — 지형도, 대표 정리, 전형적 감소 스케치

문맥 자유 언어는 파싱과 컴파일러 이론의 핵심이지만, **많은 전역적 성질**은 일반적으로 **결정 불가능**이다.  
아래에서는 (1) 무엇이 *결정 가능*하고 무엇이 *결정 불가능*한지 큰 그림을 먼저 정리하고, (2) 대표적인 **결정 불가능 문제**(보편성, 포함/동치, 모호성 등)를 나열·설명하며, (3) 그 증명에 쓰이는 **감소(변형) 패턴**을 스케치한다

---

## 1) 빠른 지형도 — CFL에 대한 결정/반결정의 경계

### 1.1 **결정 가능한** 고전 문제
- **소속성(멤버십)**: \(w\in L(G)\)? — CYK/Earley 등으로 **다항시간** 결정.
- **공백성(emptiness)**: \(L(G)=\varnothing\)? — **결정 가능**(도달 가능한 비단말·생성가능 기호만 남겨 검사).
- **유한성/무한성**: \(L(G)\)가 유한/무한? — **결정 가능**(유도 그래프의 순환·펌핑 증거 검사).
- **CFL ∩ 정규언어의 공백성**: \(L(G)\cap R=\varnothing\)? — **결정 가능**(CFL×DFA 제품 → CFL 공백성).
- **포함(한쪽이 정규)**: \(L(G)\subseteq R\)? — **결정 가능**  
  \(\iff L(G)\cap \overline{R}=\varnothing\)이고 \(\overline{R}\)은 정규.

### 1.2 **결정 불가능**(Undecidable)로 유명한 문제들
- **보편성(Universality)**: \(L(G)=\Sigma^*\)? — **결정 불가능**.
- **포함(둘 다 CFL)**: \(L(G_1)\subseteq L(G_2)\)? — **결정 불가능**.
- **동치(둘 다 CFL)**: \(L(G_1)=L(G_2)\)? — **결정 불가능**.
- **교집합 공백성**: \(L(G_1)\cap L(G_2)=\varnothing\)? — **결정 불가능**.
- **모호성(Ambiguity)**: 주어진 CFG가 **모호한가**? — **결정 불가능**.  
  (더 나아가, **본질적(고유) 모호성** 여부도 **결정 불가능**.)
- **정규성 여부**: 주어진 CFG가 **정규 언어**를 생성하는가? — **결정 불가능**.
- **DCFL 여부**: \(L(G)\)가 **결정적 문맥 자유 언어**(DPDA로 인식)인가? — **결정 불가능**.

> 요점: **정규 언어와 섞인 연산**(정규와의 교·보수 활용)은 종종 결정 가능하지만,  
> **CFL끼리의 전역 비교**(포함/동치/보편성/교집합 공백성)나 **구문-의미 성질**(모호성/정규성/결정성)은 **결정 불가능**으로 떨어진다.

---

## 2) 대표 **결정 불가능 문제**와 직관

### 2.1 보편성 \(L(G)=\Sigma^*\)
- **의미**: “문법이 모든 문자열을 생성하나?”
- **왜 어려운가**: 보수(Complement)에 닫혀 있지 않고, “모든 문자열”은 \(\forall w\) 양화를 뜻해 **전역 검증**을 요구.
- **증 개요(감소)**: 튜링 기계의 수용 계산을 문자열로 “**계산 테이블**”처럼 암호화하여,  
  기계가 **수용하지 않는 경우에만** 빠져나가는 문자열을 하나 남기는 CFG를 구성.  
  그러면 \(M\)이 입력을 수용 ⇔ “빈틈 없이” **모든 문자열**이 생성됨.

### 2.2 포함 \(L(G_1)\subseteq L(G_2)\) & 동치 \(L(G_1)=L(G_2)\)
- **포함**: 보편성에서 쉽게 나온다. \(L(G)\subseteq \Sigma^*\)는 항상 참이지만,  
  반대로 \(\Sigma^*\subseteq L(G)\)는 **보편성** 그 자체.  
  일반적으로 포함/동치는 \(\forall w\) 전역 비교라 **결정 불가능**.

### 2.3 교집합 공백성 \(L(G_1)\cap L(G_2)=\varnothing\)
- **핵심 사실**: CFL은 교집합에 **닫혀 있지 않음**.  
- **증 개요(PCP 감소)**: PCP 인스턴스가 해를 가지면 두 CFG가 **같은 문자열**을 만들어 교집합이 **비공백**,  
  해가 없으면 어떤 문자열도 동시에 생성 못 해 **공백**.  
  ⇒ PCP의 결정 불가능성이 그대로 옮겨온다.

### 2.4 모호성(Ambiguity)
- **정의**: 어떤 문자열 \(w\)에 대해 **둘 이상의 서로 다른 유도(좌측/우측 우선 유도, 혹은 파스 트리)** 가 존재하면 **모호**.
- **문제**: “주어진 CFG가 모호한가?” — **결정 불가능**.  
  (PCP류에서 온 고전적 감소. 또, “**본질적 모호성**”(그 언어를 생성하는 모든 CFG가 모호) 여부도 **결정 불가능**.)
- **직관**: 복수의 유도 경로가 **계산의 선택 분기**를 암호화할 수 있어,  
  임의 계산의 “존재/비존재”를 모호성으로 구현 가능.

### 2.5 정규성 여부, DCFL 여부
- **정규성 여부**: “\(L(G)\)가 정규인가?” — **결정 불가능**.  
  정규성과 비정규성을 가르는 **전역 동기화**(펌핑 정리의 역방향)는 일반 검사로는 포착 불가.
- **DCFL 여부**: “결정적 PDA로 인식 가능한가?” — **결정 불가능**.  
  (참고: **DPDA끼리의 동치성**은 매우 난해하지만 *결정 가능*(Sénizergues),  
  반면 **일반 PDA 동치성**은 **결정 불가능**.)

---

## 3) 전형적인 **감소(변형) 패턴** — 어떻게 “불가능”을 옮겨오나

### 3.1 PCP → CFL 교집합 공백성
- **입력**: PCP 인스턴스 \(\{(u_i,v_i)\}_{i=1}^k\).
- **구성**: 두 CFG \(G_1,G_2\)를 만들어,  
  \(G_1\)은 위쪽 문자열 접합 \(u_{i_1}\cdots u_{i_m}\), \(G_2\)는 아래쪽 \(v_{i_1}\cdots v_{i_m}\)를 생성(중간에 동일한 인덱스열을 강제).  
- **정직성**: PCP에 해 ⇔ 둘이 같은 문자열을 하나라도 생성 ⇔ 교집합 비공백.

### 3.2 A\_TM/정지 문제 → 보편성/포함/동치
- **아이디어**: “**옳은 계산만 통과**”하도록 **지역 제약**을 CFG 규칙으로 심는다.  
  계산이 **성공**하면 특정 문자열 집합이 “구멍 없이” 채워져 **보편**/**동치**가 성립.  
  실패하면 어디엔가 **빈틈**이 생겨 성립하지 않음.

### 3.3 모호성으로 암호화
- **구성**: 같은 문자열을 두 방식으로 유도하게 만드는 **가젯 문법**을 심고,  
  그 두 방식 중 하나가 “올바른 계산”을, 다른 하나가 “다른 경로”를 나타내게 한다.  
  올바른 계산이 존재할 때만 **두 유도 모두 가능** ⇒ **모호**.

> 공통 레시피: 구분자 `#`, 시작/종료 마커, “지역 전이 검사” 규칙(길이 2~3 윈도우),  
> 중간 단계 제거용 호모모르피즘 등을 반복 활용한다.

---

## 4) 수식 관점 — 왜 상위 계층으로 “뛰는가”?

많은 질의는 자연스럽게 **전역 양화**를 포함한다.

- **보편성**: \(L(G)=\Sigma^*\iff \forall w\ \ w\in L(G)\).  
  한편 \(w\in L(G)\)는 “\(\exists\) 유도 길이 \(\exists\) 파스 트리 …” 같이 **존재 양화**를 포함.  
  ⇒ 전반적으로 \(\forall\exists\) 형태(산술계층 \(\Pi^0_2\) 류) → **결정 불가능**.

- **동치/포함**: \(\forall w\ ( w\in L(G_1) \Rightarrow w\in L(G_2) )\) 류 역시 \(\forall\exists\) 구조.

- **모호성**: \(\exists w\,\exists\) (서로 다른 두 유도) — 모양은 \(\Sigma^0_1\)처럼 보이지만,  
  “서로 다름” 판단에 필요한 구조와 감수 과정이 PCP/정지문제의 난도를 **내장**한다.

---

## 5) 대조: **정규와 섞이면** 왜 쉬워지는가?

정규 \(R\) 에 대해
\[
L(G)\subseteq R \iff L(G)\cap \overline{R}=\varnothing.
\]
\(\overline{R}\)도 정규이므로 **CFL ∩ 정규 = CFL**, 그리고 **CFL 공백성**은 결정 가능 ⇒  
**CFL ⊆ REG** 는 결정 가능.  
그러나 **REG ⊆ CFL** 은 “\(\Sigma^* \subseteq L(G)\)?”(= **보편성**)으로 귀결되어 **결정 불가능**.

---

## 6) 간단 표 — CFL 관련 결정 불가능 문제 모음

| 문제 | 입력 | 판정 | 상태 |
|---|---|---|---|
| 보편성 | CFG \(G\) | \(L(G)=\Sigma^*\)? | **Undecidable** |
| 포함 | CFG \(G_1,G_2\) | \(L(G_1)\subseteq L(G_2)\)? | **Undecidable** |
| 동치 | CFG \(G_1,G_2\) | \(L(G_1)=L(G_2)\)? | **Undecidable** |
| 교집합 공백성 | CFG \(G_1,G_2\) | \(L(G_1)\cap L(G_2)=\varnothing\)? | **Undecidable** |
| 모호성 | CFG \(G\) | \(G\)가 모호한가? | **Undecidable** |
| 본질적 모호성 | CFG \(G\) | \(L(G)\)가 어떤 CFG로도 비모호화 불가? | **Undecidable** |
| 정규성 여부 | CFG \(G\) | \(L(G)\)가 정규? | **Undecidable** |
| DCFL 여부 | CFG \(G\) | \(L(G)\)가 DCFL? | **Undecidable** |

*(대비: 멤버십/공백성/유한성/ \(L(G)\subseteq R\)/ \(L(G)\cap R=\varnothing\) 등은 **결정 가능**.)*

---

## 7) 미니 스니펫 — PCP → CFL 교집합 공백성 감소 틀

```text
# PCP 인스턴스 P = { (u1,v1), ..., (uk,vk) }가 주어졌을 때
# 두 CFG G1, G2를 구성:

G1: 모든 i1...im에 대해 u_{i1} ... u_{im}  (구분자/정렬 가젯 포함)
G2: 모든 i1...im에 대해 v_{i1} ... v_{im}

# 올바름:
#   P에 해가 있음  ⇔  ∃ i1...im s.t. u_{...}=v_{...}
#                    ⇔  L(G1) ∩ L(G2) ≠ ∅
#   해가 없음       ⇔  L(G1) ∩ L(G2) = ∅
```

---

## 8) 마무리

- CFL은 파싱이 쉬워 **멤버십/공백성/정규와의 조합**은 잘 풀리지만,  
  **전역 비교/전역 성질**(보편성·포함·동치·교집합 공백성·모호성·정규성/결정성)은 **결정 불가능**이다.
- 증명은 대개 **PCP**나 **정지 문제**에서 오는 **감소**로 이뤄지며,  
  구분자/가젯/지역 전이 검사를 조합해 “**올바른 계산** ↔ **언어 성질**”의 동치를 만든다.
