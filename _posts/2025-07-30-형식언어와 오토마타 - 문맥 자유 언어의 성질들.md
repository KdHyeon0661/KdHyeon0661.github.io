---
layout: post
title: 형식언어와 오토마타 - 문맥 자유 언어의 성질들
date: 2025-07-30 15:20:23 +0900
category: 형식언어와 오토마타
---
# 문맥 자유 언어의 성질들 — 두 가지 펌핑 보조 정리
- **목표**: (1) 문맥 자유 언어(CFL)에 대한 펌핑 보조 정리, (2) **선형 언어(Linear language)**에 대한 펌핑 보조 정리를 정리하고, 사용법(증명 스케치, 적용 예, 흔한 함정)을 체계적으로 설명한다.  
- 표기: 입력 알파벳을 \(\Sigma\), 문자열 길이를 \(|w|\)라 한다.

---

## 1) 문맥 자유 언어에 대한 펌핑 보조 정리 (Bar-Hillel–Perles–Shamir)

### 정리(표준 형태)
임의의 문맥 자유 언어 \(L\)에 대해, 어떤 정수 \(p\ge 1\) (펌핑 길이) 가 존재하여,  
모든 \(w\in L\) 중 \(|w|\ge p\)인 것에 대하여
\[
w = u v x y z
\]
로 분해할 수 있고, 다음을 만족한다.
1. \(|v y|\ge 1\)  (둘 중 하나는 비어 있지 않다)
2. \(|v x y|\le p\)  (펌핑되는 부분이 “가까운” 좁은 구간 안에 있다)
3. \(\forall i\ge 0:\quad u\,v^{i}\,x\,y^{i}\,z \in L\)

즉, **\(v\)와 \(y\)** 를 같은 지수 \(i\)로 동시에 반복(또는 제거)해도 여전히 \(L\) 안에 있어야 한다.

### 직관
CFL의 유도 트리(파스 트리)에서, 길이가 충분히 긴 문장은 **루트에서 잎까지 가는 경로**에 같은 비단말 기호(변수)가 반복된다(유한 개의 변수 + 비둘기집 원리).  
그 반복 구간을 “접었다/폈다” 하는 과정이 바로 \(v,y\)의 동시 펌핑으로 나타난다.

### 사용 요령(증명 전략)
- **반증법**: 언어가 CFL이라고 가정하고 펌핑 정리를 적용 → 임의의 분해 \(u v x y z\)에 대해 모순을 유도.
- 핵심은 \(|vxy|\le p\) 제약을 **길이가 큰 균질 블록**(예: \(a^p b^p c^p\)의 중간 \(b^p\))에 걸치게 만들어,  
  펌핑이 특정 구간의 개수만 바꾸도록 강제하는 것.
- 보통 \(i=0\) 또는 \(i=2\)를 대입하면 불일치가 생긴다.

### 예제: \(L = \{\,a^n b^n c^n \mid n\ge 0\,\}\) 가 CFL 아님
- 가정: \(L\)이 CFL. 펌핑 길이 \(p\)를 받자.
- \(w = a^p b^p c^p \in L\). 분해 \(w = u v x y z\)에 \(|vxy|\le p\).
- 중앙의 \(b^p\)가 길이 \(p\)이므로, \(|vxy|\le p\) 때문에 \(v, y\)는 **최대 두 인접 블록**(예: \(a\)/\(b\) 또는 \(b\)/\(c\))에만 걸칠 수 있다. 특히 \(a\)와 \(c\) 양쪽에 동시에 걸칠 수 없다.
- 경우 나눔:
  - (i) \(v,y\)가 \(a\)와 \(b\) 쪽에만 있음 ⇒ 펌핑으로 \(a,b\)만 변하고 \(c\)는 그대로. \(i\neq 1\)이면 \(a,b,c\)의 세 개수가 달라짐 ⇒ \(\notin L\).
  - (ii) \(v,y\)가 \(b\)와 \(c\) 쪽에만 있음 ⇒ 같은 이유로 모순.
  - (iii) \(v,y\) 둘 다 \(b\) 안에만 있음 ⇒ \(b\)만 바뀌고 \(a,c\)는 그대로 ⇒ 모순.
- 모든 경우 모순 ⇒ \(L\)은 CFL이 아님.

> ⚠️ 주의: 펌핑 정리는 **필요조건**이지 충분조건이 아니다. 어떤 **비CFL**이 우연히 펌핑 정리를 “통과”할 수도 있다. 더 강한 도구로는 **오그덴 보조 정리(Ogden’s lemma)**, **교환 보조 정리(Interchange Lemma)** 등이 있다.

---

## 2) **선형 언어**에 대한 펌핑 보조 정리

### 배경: 선형 언어(Linear language)
- **선형 문법**: 모든 생성규칙의 오른쪽에 **비단말이 최대 하나**만 등장  
  (\(A\to u B v\) 또는 \(A\to w\), \(u,v,w\in\Sigma^*\)).
- 선형 언어는 \( \text{Regular} \subsetneq \text{Linear} \subsetneq \text{CFL} \).
  (예: \( \{a^n b^n\} \), 모든 팰린드롬은 선형; 균형괄호(Dyck)는 CFL이지만 **비선형**)

### 정리(전형적 형태: “좌·우 대칭 펌핑”)
임의의 **선형 언어** \(L\)에 대해 어떤 정수 \(p\ge 1\)가 존재하여,  
모든 \(w\in L\) 중 \(|w|\ge p\)에 대해
\[
w = u\, v\, x\, y\, z
\]
로 분해되며 다음을 만족한다.
1. \(|v| + |y| \ge 1\)  (둘 중 적어도 하나는 비어 있지 않음)
2. \(|v x y| \le p\)  (펌핑 코어가 좁은 구간)
3. \(\forall i\ge 0:\quad u\, v^{\,i}\, x\, y^{\,i}\, z \in L\)

즉, **왼쪽 블록 \(v\)** 와 **오른쪽 블록 \(y\)** 를 **같은 횟수로 동시에** 펌핑할 수 있다(대칭 펌핑).

> 직관: 선형 문법의 유도는 매 단계에 비단말이 최대 하나이므로, 파스 트리가 **하나의 “척추(spine)”**를 갖는다.  
> 이 척추에서 같은 비단말이 반복되는 지점을 골라 **좌측 단말 블록 \(v\)** 와 **우측 단말 블록 \(y\)** 를 함께 늘였다 줄였다 할 수 있다.

### 스케치 증명(아이디어)
- 유도과정에서 도달하는 **문장형태**는 항상 \(u\, A\, v\) 꼴(비단말 \(A\) 하나)이다.  
- 길이가 충분히 길면 같은 비단말 \(A\)가 다시 나타나는 단계가 있고,
  \[
  u_1\, A\, v_1 \Rightarrow^* u_1\, u_2\, A\, v_2\, v_1 \Rightarrow^* \cdots
  \]
  같은 패턴이 반복된다.  
- 이 반복을 “한 번 덜/더” 적용한 것이 곧 \(v, y\)를 같은 지수로 펌핑하는 효과를 낸다.

### 적용 예: \( \{ a^n b^n c^n \mid n\ge 0 \} \) 는 **비선형**
- 선형이라고 가정하고 펌핑 길이 \(p\)를 받자.
- \(w=a^p b^p c^p\). 선형 펌핑에 따라 \(w=u v x y z\), \(|vxy|\le p\), \(|v|+|y|\ge 1\),  
  그리고 \(\forall i\ge 0: u v^{i} x y^{i} z \in L\).
- \(|vxy|\le p\)이므로 \(v\)와 \(y\)는 **멀리 떨어진 양 끝 \(a^p\)·\(c^p\)** 를 동시에 포함할 수 없다(두 블록 사이에 \(b^p\)가 가로막음).
- 경우 분석:
  - (i) \(v,y\)가 \(a\)/\(b\) 쪽에만 위치 → 펌핑하면 \(a\)와/또는 \(b\)만 변하고 \(c\)는 고정 ⇒ \(a=b=c\) 깨짐.
  - (ii) \(v,y\)가 \(b\)/\(c\) 쪽에만 위치 → 같은 이유로 깨짐.
  - (iii) 둘 다 \(b\) 안에만 위치 → \(b\)만 변함 ⇒ 깨짐.
- 모순 ⇒ 비선형. (물론 이 언어는 애초에 **비CFL**이므로 비선형임은 더 강한 사실에 종속됨. 여기서는 **선형 펌핑**만으로도 반증 가능함을 보였다.)

> 팁: “세 구간(\(a^p|b^p|c^p\))”처럼 중간에 **두꺼운 장벽**이 있는 문자열을 고르면 \(|vxy|\le p\) 제약을 효과적으로 이용할 수 있다.

---

## 3) 두 펌핑 보조 정리의 차이점·활용 팁·함정

### 차이점 요약
- **CFL 펌핑**: \(u v x y z\)에서 **\(v, y\)를 동시에** 펌핑 (제약: \(|vxy|\le p\), \(|vy|\ge 1\)).  
  구조상 \(v,y\)가 가까이 모여 있음(같은 “좁은 창” 안).
- **선형 펌핑**: 똑같이 \(u v x y z\) 형태지만, 선형 문법의 “한 개 비단말” 특성 때문에 \(v\)와 \(y\)를 **좌·우 대칭**으로 보는 해석이 자연스럽다. (공식 제약 \(|vxy|\le p\), \(|v|+|y|\ge 1\)은 표준형)

### 언제 무엇을 쓰나
- **비CFL 증명**: 보통 **CFL 펌핑** 또는 더 강한 **오그덴 보조 정리**를 우선 고려.  
- **비선형 증명**: 선형 펌핑을 쓰면 간단히 막히는 경우가 많다(예: 세 블록 균형류).  
  균형괄호(단일 Dyck)는 **비선형**이므로 선형 펌핑으로도 반증을 시도할 수 있으나, 문자열 선택과 경우분석이 섬세해야 한다. (실무에선 **1-turn PDA 불가능성** 등 다른 특징을 쓰는 편이 간결)

### 흔한 함정
- 펌핑 보조 정리는 **필요조건**이다. 어떤 언어가 펌핑 조건을 “충족”한다고 해도 그 언어가 반드시 CFL/선형이라는 뜻은 아니다.  
- **분해의 보편성**: “모든” 분해에 대해 모순을 내야 한다. 특정 분해 하나만 반례를 보이는 것은 부족하다.  
- \(|vxy|\le p\)를 빼먹거나 잘못 쓰면 논증이 무력화된다.

---

## 4) 미니 체크리스트 (적용 절차)

1. **목표 언어의 구조 파악**: 동일·상호의존 개수, 구간 장벽, 대칭성 등.
2. **충분히 긴 문자열 \(w\)** 선택: 보통 \(p\)를 상정하고 \(a^p b^p\cdots\)처럼 균질 블록을 준비.
3. **\(|vxy|\le p\)** 를 이용해 \(v,y\)의 위치를 **제한**: “이 창 안에서는 OOO만 변한다”.
4. **\(i=0\) 또는 \(i=2\)** 로 펌핑해 모순: 개수 평형/패턴 붕괴를 명확히 적시.
5. **모든 경우를 포괄**: 블록 경계를 기준으로 경우 나눔을 완결.

---

## 5) 요약
- **CFL 펌핑 보조 정리**: \(w=uvxyz\), \(|vxy|\le p\), \(|vy|\ge 1\), \(\forall i\ge 0: uv^i x y^i z\in L\).  
  길고 좁은 “펌핑 창”을 강제해 **비CFL**을 반증하는 표준 도구.
- **선형 펌핑 보조 정리**: \(w=uvxyz\), \(|vxy|\le p\), \(|v|+|y|\ge 1\), \(\forall i\ge 0: uv^i x y^i z\in L\).  
  선형 문법의 **척추 구조**로부터 나오는 **좌·우 동시 펌핑**. 비선형성 증명에 유용.
- 두 정리는 **필요조건**이며, 더 강한 도구(오그덴, 교환 보조 정리)를 알아두면 난해한 사례에 대응하기 좋다.
