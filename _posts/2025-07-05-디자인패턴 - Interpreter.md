---
layout: post
title: ë””ìì¸íŒ¨í„´ - Interpreter
date: 2025-07-05 19:20:23 +0900
category: ë””ìì¸íŒ¨í„´
---
# Interpreter (ì¸í„°í”„ë¦¬í„° íŒ¨í„´)

## âœ… ì •ì˜

**Interpreter íŒ¨í„´**ì€ **ë¬¸ë²•ì´ ì •ì˜ëœ ì–¸ì–´(í‘œí˜„)**ë¥¼ í•´ì„í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ë¥¼ êµ¬ì„±í•˜ì—¬,  
ê·¸ **ë¬¸ì¥ì„ í•´ì„(interpret)**í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” **í–‰ìœ„ íŒ¨í„´(Behavioral Pattern)**ì…ë‹ˆë‹¤.

> â€œì–¸ì–´ì˜ ë¬¸ë²•ì„ ê°ì²´ êµ¬ì¡°ë¡œ í‘œí˜„í•˜ê³ , ê·¸ êµ¬ì¡°ë¥¼ ì´ìš©í•´ ë¬¸ì¥ì„ í•´ì„â€

---

## ğŸ¯ ì˜ë„ (Intent)

- íŠ¹ì • **ì–¸ì–´ì˜ ë¬¸ë²•ì„ ì •ì˜í•˜ê³ **, ê·¸ ì–¸ì–´ë¡œ ì“°ì¸ ë¬¸ì¥ì„ **í•´ì„í•˜ëŠ” êµ¬ì¡°ë¥¼ í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„**
- ë³µì¡í•œ í‘œí˜„ì‹ì„ **ê°ì²´ íŠ¸ë¦¬(íŒŒìŠ¤ íŠ¸ë¦¬)ë¡œ í‘œí˜„**í•˜ê³  ì¬ê·€ì ìœ¼ë¡œ í•´ì„

---

## ğŸ“¦ êµ¬ì¡° (UML)

```
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚  AbstractExpr  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”
             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
      â–¼                          â–¼      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ Terminal   â”‚           â”‚ NonTerminalâ”‚â—„â”˜
â”‚ Expression â”‚           â”‚ Expression â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                        â”‚
     â–¼                        â–¼
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ Context      â”‚     â”‚ Client         â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **AbstractExpression**: ëª¨ë“  í‘œí˜„ì‹ì˜ ê³µí†µ ì¸í„°í˜ì´ìŠ¤ (`interpret(Context)` í¬í•¨)
- **TerminalExpression**: ìµœì¢… ë…¸ë“œ(ìˆ«ì, ë¬¸ì ë“±), ë” ì´ìƒ ë¶„í•´ë˜ì§€ ì•ŠìŒ
- **NonTerminalExpression**: ë‹¤ë¥¸ í‘œí˜„ì‹ì„ ì¡°í•©í•˜ì—¬ êµ¬ì„± (ì˜ˆ: ë”í•˜ê¸°, ë¹¼ê¸° ë“±)
- **Context**: í•´ì„ ê³¼ì •ì—ì„œ í•„ìš”í•œ ì™¸ë¶€ ì •ë³´ë¥¼ ë‹´ëŠ” í™˜ê²½
- **Client**: íŒŒìŠ¤ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ê³  í•´ì„ì„ ìš”ì²­í•˜ëŠ” ì‚¬ìš©ì

---

## ğŸ§‘â€ğŸ’» êµ¬í˜„ ì˜ˆì‹œ (Python): ê°„ë‹¨í•œ ìˆ˜ì‹ í•´ì„ê¸°

ì˜ˆ: ë¬¸ìì—´ `"5 + 3 - 2"`ë¥¼ í•´ì„í•˜ì—¬ ê³„ì‚°í•˜ê¸°

```python
from abc import ABC, abstractmethod

# ì¶”ìƒ í‘œí˜„ì‹
class Expression(ABC):
    @abstractmethod
    def interpret(self):
        pass

# ìˆ«ì í‘œí˜„ì‹ (í„°ë¯¸ë„ ë…¸ë“œ)
class Number(Expression):
    def __init__(self, value):
        self.value = int(value)

    def interpret(self):
        return self.value

# ë§ì…ˆ í‘œí˜„ì‹
class Add(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self):
        return self.left.interpret() + self.right.interpret()

# ëº„ì…ˆ í‘œí˜„ì‹
class Subtract(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self):
        return self.left.interpret() - self.right.interpret()

# ìˆ˜ì‹ í•´ì„ê¸°
def parse_expression(expression: str):
    tokens = expression.split()
    stack = []

    i = 0
    while i < len(tokens):
        token = tokens[i]

        if token.isdigit():
            stack.append(Number(token))
        elif token == "+":
            left = stack.pop()
            right = Number(tokens[i + 1])
            stack.append(Add(left, right))
            i += 1
        elif token == "-":
            left = stack.pop()
            right = Number(tokens[i + 1])
            stack.append(Subtract(left, right))
            i += 1
        i += 1

    return stack.pop()

# ì‚¬ìš© ì˜ˆì‹œ
expr = "5 + 3 - 2"
parsed = parse_expression(expr)
print(f"ğŸ§® ìˆ˜ì‹: {expr}")
print(f"ğŸ” ê²°ê³¼: {parsed.interpret()}")
```

**ì¶œë ¥ ì˜ˆì‹œ:**
```
ğŸ§® ìˆ˜ì‹: 5 + 3 - 2
ğŸ” ê²°ê³¼: 6
```

---

## âœ… ì¥ì 

- **ë¬¸ë²•ê³¼ í•´ì„ì„ ë¶„ë¦¬**í•˜ì—¬ ì½”ë“œ êµ¬ì¡°ê°€ ëª…í™•í•´ì§
- **ì¬ê·€ì  ë¬¸ë²• êµ¬ì¡°**ì— ìì—°ìŠ¤ëŸ½ê²Œ ì ìš© ê°€ëŠ¥ (ex. ìˆ˜ì‹, ì–¸ì–´ ë¬¸ë²•)
- ìƒˆë¡œìš´ ë¬¸ë²• ì¶”ê°€ ì‹œ **í´ë˜ìŠ¤ë§Œ ì¶”ê°€í•˜ë©´ ë¨** (í™•ì¥ ìš©ì´)

---

## âš ï¸ ë‹¨ì 

- ë¬¸ë²•ì´ ë³µì¡í•˜ê±°ë‚˜ í‘œí˜„ì‹ì´ ë§ì•„ì§ˆìˆ˜ë¡ **í´ë˜ìŠ¤ ìˆ˜ê°€ ê¸‰ì¦**
- ì‹¤í–‰ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•ŠìŒ â†’ **íŒŒì‹± ìµœì í™”ì— ë¶€ì í•©**
- AST ê¸°ë°˜ì˜ ì»´íŒŒì¼ëŸ¬ë‚˜ ì¸í„°í”„ë¦¬í„°ê°€ ë” ë‚˜ì€ ê²½ìš°ë„ ë§ìŒ

---

## ğŸ“Œ ì‚¬ìš© ì‚¬ë¡€

| ë¶„ì•¼ | ì˜ˆì‹œ |
|------|------|
| ìˆ˜ì‹ ê³„ì‚°ê¸° | ìˆ˜í•™ì‹ ê³„ì‚°, ë…¼ë¦¬ ì—°ì‚° |
| SQL í•´ì„ê¸° | ì§ˆì˜ë¬¸ í•´ì„ ë° ì‹¤í–‰ |
| ì •ê·œì‹ ì—”ì§„ | íŒ¨í„´ í•´ì„ ë° ì‹¤í–‰ |
| Rule Engine | ë„ë©”ì¸ ì–¸ì–´(DSL)ë¥¼ í•´ì„ |
| ì»´íŒŒì¼ëŸ¬ í”„ë¡ íŠ¸ì—”ë“œ | AST ìƒì„± ë° í•´ì„ ë‹¨ê³„ |

---

## ğŸ§  Interpreter vs Visitor vs Composite

| íŒ¨í„´ | ëª©ì  | ìœ ì‚¬ì  | ì°¨ì´ì  |
|------|------|--------|--------|
| Interpreter | ë¬¸ë²• í•´ì„ | êµ¬ì¡°ë¥¼ íŠ¸ë¦¬ë¡œ êµ¬ì„± | í•´ì„ì´ ëª©ì  |
| Visitor | ì—°ì‚° ë¶„ë¦¬ | íŠ¸ë¦¬ êµ¬ì¡° ìˆœíšŒ | ì—°ì‚°ì´ ëª©ì  |
| Composite | ê³„ì¸µ êµ¬ì¡° í‘œí˜„ | íŠ¸ë¦¬ êµ¬ì¡° í™œìš© | êµ¬ì¡° ì¡°í•© ì¤‘ì‹¬ |

---

## âœ… ì‹¤ë¬´ íŒ

- ì‹¤ì œ ì‚¬ìš© ì‹œ, ì¸í„°í”„ë¦¬í„° íŒ¨í„´ë³´ë‹¤ëŠ” **íŒŒì„œ ìƒì„±ê¸°(ANTLR, yacc, PEG)** ë“±ì˜ ë„êµ¬ë¥¼ ë§ì´ ì‚¬ìš©
- í•˜ì§€ë§Œ DSL(ë„ë©”ì¸ íŠ¹í™” ì–¸ì–´) êµ¬í˜„ì´ë‚˜ ê·œì¹™ í•´ì„ê¸° ë“±ì—ì„  ì—¬ì „íˆ ìœ ìš©
- ê°„ë‹¨í•œ ìˆ˜ì‹ì´ë‚˜ ì¡°ê±´ë¬¸(ì˜ˆ: "ê¸ˆì•¡ > 5000")ì„ ëŸ°íƒ€ì„ì— ë™ì ìœ¼ë¡œ í•´ì„í•  ë•Œ í™œìš© ê°€ëŠ¥

---

## ğŸ§  ë§ˆë¬´ë¦¬

**Interpreter íŒ¨í„´ì€ ë¬¸ë²•ì´ ì¡´ì¬í•˜ëŠ” ì–¸ì–´ë‚˜ ìˆ˜ì‹ êµ¬ì¡°ë¥¼ ê°ì²´ë¡œ ëª¨ë¸ë§í•˜ê³ ,**  
ê·¸ êµ¬ì¡°ë¥¼ í•´ì„í•˜ì—¬ ë™ì‘í•˜ê²Œ ë§Œë“œëŠ” ë° ê°•ë ¥í•œ ìœ ì—°ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.

ë³µì¡í•œ í‘œí˜„ì‹ ì²˜ë¦¬ì—ëŠ” ë¶€ì í•©í•  ìˆ˜ ìˆì§€ë§Œ,  
**ì‘ê³  ë°˜ë³µë˜ëŠ” ë¬¸ë²• êµ¬ì¡°ì˜ í•´ì„ ì‘ì—…ì—ì„  ë§¤ìš° ì§ê´€ì ì´ê³  íš¨ê³¼ì ì¸ ì†”ë£¨ì…˜**ì…ë‹ˆë‹¤.
