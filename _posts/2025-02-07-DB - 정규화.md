---
layout: post
title: DB - 정규화
date: 2025-02-07 19:20:23 +0900
category: DB
---
# 📌 정규화와 성능의 관계

정규화는 **데이터 중복 제거, 무결성 유지, 논리적 구조 설계**를 위한 핵심 기법입니다.  
그러나 설계와 운영상의 목적이 다르기 때문에 **정규화는 성능에 직접적으로 긍정적 또는 부정적 영향을 줄 수도 있습니다.**

## ✅ 정규화의 이점

- **중복 데이터 제거** → 저장 공간 절감
- **업데이트 이상 방지** → 유지보수 용이
- **데이터 일관성 보장** → 무결성 강화
- **명확한 데이터 구조** → 논리적 이해 용이

## ⚠️ 성능 관점의 고려

- **과도한 정규화 → 조인 증가** → 조회 성능 저하 가능
- **운영 쿼리 복잡화** → 실시간 처리 성능 이슈 발생
- **쓰기(Writes)는 유리, 읽기(Reads)는 불리**한 구조가 되기 쉬움

> ✅ 따라서 성능 모델링은 **정규화를 먼저 수행한 뒤**, 실제 성능 병목이 발견된 경우 **선택적으로 반정규화**를 적용하는 것이 바람직합니다.

---

# 🧱 정규형의 종류 (1NF ~ 5NF)

## 🔹 제1정규형 (1NF: First Normal Form)

### 📌 정의
- 테이블의 모든 속성값은 **원자값(Atomic value)**으로 구성되어야 함.
- **반복 속성, 다중 값 금지**

### 📌 예시 (비정규화 상태)

| 고객ID | 이름   | 전화번호                        |
|--------|--------|---------------------------------|
| 101    | 홍길동 | 010-1111-2222, 010-3333-4444    |

→ 전화번호가 **복수** 존재 → 비정규형

### ✅ 정규화된 1NF

| 고객ID | 이름   | 전화번호       |
|--------|--------|----------------|
| 101    | 홍길동 | 010-1111-2222 |
| 101    | 홍길동 | 010-3333-4444 |

---

## 🔹 제2정규형 (2NF: Second Normal Form)

### 📌 정의
- **1NF 만족 + 기본키의 부분집합에 종속된 속성 제거**
- **부분 함수 종속 제거**

### 📌 예시

| 주문ID | 상품ID | 상품명 | 주문수량 |
|--------|--------|--------|----------|
| 1001   | A001   | 키보드 | 3        |

→ `상품명`은 `상품ID`에만 종속됨 → **부분 함수 종속**

### ✅ 정규화

- 주문 테이블: `주문ID`, `상품ID`, `주문수량`
- 상품 테이블: `상품ID`, `상품명`

---

## 🔹 제3정규형 (3NF: Third Normal Form)

### 📌 정의
- **2NF 만족 + 이행적 종속 제거**
- 속성 A → B → C 관계가 있다면 제거

### 📌 예시

| 사원ID | 부서ID | 부서명 |
|--------|--------|--------|
| 001    | D01    | 영업팀 |

→ `부서명`은 `부서ID`를 통해 결정됨 → **이행적 종속**

### ✅ 정규화

- 사원 테이블: `사원ID`, `부서ID`
- 부서 테이블: `부서ID`, `부서명`

---

## 🔹 BCNF (보이스-코드 정규형)

### 📌 정의
- 제3정규형보다 강화된 개념
- **모든 결정자가 후보키여야 함**

### 📌 예시

| 강의실 | 교수   | 과목       |
|--------|--------|------------|
| 101    | 김교수 | DB론       |
| 101    | 김교수 | 네트워크   |

→ (강의실, 과목) → 교수 이지만, `교수` → `강의실` 도 성립 → **결정자가 후보키 아님**

### ✅ 정규화

- 강의 배정 테이블: `교수`, `강의실`
- 강의 과목 테이블: `교수`, `과목`

---

## 🔹 제4정규형 (4NF: Fourth Normal Form)

### 📌 정의
- **다치 종속(Multivalued Dependency)** 제거
- 하나의 키에 대해 **독립된 다치 값**이 존재할 경우 분리

### 📌 예시

| 학생 | 자격증      | 취미     |
|------|-------------|----------|
| 철수 | 정보처리기사 | 독서     |
| 철수 | 정보처리기사 | 음악     |
| 철수 | 컴활        | 독서     |
| 철수 | 컴활        | 음악     |

→ 자격증과 취미는 서로 독립 → 다치 종속

### ✅ 정규화

- 학생-자격증 테이블
- 학생-취미 테이블

---

## 🔹 제5정규형 (5NF: Fifth Normal Form)

### 📌 정의
- **조인 종속(Join Dependency)** 제거
- 데이터가 여러 테이블로 분해되어도 **손실 없이 조인 가능**해야 함

### 📌 예시

| 프로젝트 | 부서 | 직원 |
|----------|------|------|
| P1       | D1   | 철수 |
| P1       | D2   | 영희 |
| P2       | D1   | 철수 |

→ 프로젝트-부서, 부서-직원, 프로젝트-직원이 따로 존재해야 함

### ✅ 정규화

- 프로젝트-부서 테이블
- 부서-직원 테이블
- 프로젝트-직원 테이블

> 💡 5NF는 **복잡한 다대다대 관계**에서 고려됨 (예: 세 엔터티 간 관계)

---

## 📌 정규형 요약 정리

| 정규형 | 목적                           | 제거 대상               |
|--------|--------------------------------|--------------------------|
| 1NF    | 원자값 보장                    | 반복/다중 속성          |
| 2NF    | 부분 함수 종속 제거            | 일부 키에 종속된 속성   |
| 3NF    | 이행적 종속 제거               | 비주요 속성의 종속      |
| BCNF   | 후보키 아닌 결정자 제거        | 모든 결정자가 후보키    |
| 4NF    | 다치 종속 제거                 | 독립된 다치 관계         |
| 5NF    | 조인 종속 제거                 | 손실 없는 분해 어려움    |

---

## ✅ 고차 정규형(BCNF, 4NF, 5NF)의 실무 적용 현실

- **BCNF, 4NF, 5NF는 이론적으로는 중요하지만 실무에서는 드물게 적용**됩니다.
  - 대부분의 실무 시스템은 **3NF 수준에서 모델링을 마무리**하며,
  - 이후는 성능, 유지보수, 구현 난이도를 고려해 **비정규화 또는 커스터마이징**이 우선됩니다.

> 📌 고차 정규형은 **데이터 무결성과 논리 일관성을 극대화**하기 위한 수단으로,  
> 특히 **복잡한 학술용/연구용 모델** 또는 **제3자 데이터를 통합하는 시스템**에서 간혹 활용됩니다.

---

## 🚀 쓰기/읽기 성능 vs 데이터베이스 유형 비교

| 항목        | 관계형 DB(RDBMS)          | NoSQL(DBMS)             | 인메모리 DB (e.g. Redis)   |
|-------------|----------------------------|--------------------------|-----------------------------|
| **쓰기 성능** | 트랜잭션/제약 조건으로 다소 느림 | 제약이 적어 고속 처리 가능 | 초고속 (RAM 기반)         |
| **읽기 성능** | 인덱스/쿼리 최적화 필요     | Document 기반 조회 효율적 | 빠름 (캐시 용도 최적화)    |
| **정규화 수준** | 3NF까지 일반적 적용         | 구조 유연함 (정규화 약함) | 비정규 구조, Key-Value     |
| **데이터 무결성** | 강력 (PK/FK 등)            | 약함 (앱 레벨에서 관리)   | 거의 없음                  |
| **스키마 구조** | 엄격한 스키마               | 유연하거나 없음          | 단순한 구조 (KV)           |

> ✅ 관계형 DB는 **무결성 중심의 시스템에 적합**하고,  
> NoSQL/인메모리 DB는 **확장성, 실시간 처리에 강점**을 보입니다.

---

## 📌 정리

- 고차 정규형은 실무에서는 **이론 학습용 또는 특수 목적에 국한**되며,  
  **현실적으로는 3NF 전후 + 성능 조정**이 일반적입니다.
- 데이터베이스 유형별로 **정규화·비정규화 전략 및 성능 접근 방식이 다르므로**,  
  **데이터 특성, 트랜잭션 특성, 시스템 SLA 요구사항에 따라 선택**하는 것이 중요합니다.

  
> ✅ 정규화는 **데이터 구조의 논리적 정확성 확보**에 반드시 필요하며,  
> **성능 이슈 발생 시에만 선택적으로 반정규화(Denormalization)를 고려**해야 합니다.