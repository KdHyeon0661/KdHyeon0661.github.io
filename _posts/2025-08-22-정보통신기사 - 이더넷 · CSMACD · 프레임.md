---
layout: post
title: 정보통신기사 - 이더넷 · CSMA/CD · 프레임
date: 2025-08-22 13:25:23 +0900
category: 정보통신기사
---
# 이더넷 · CSMA/CD · 프레임 구조 총정리 (tx-ethernet-csma-cd-frame)

> **목표**: 정보통신기사 필기/실무에서 자주 묻는 **이더넷 역사/PHY**, **CSMA/CD 원리와 한계**, **프레임 구조/주소/오버헤드**, **스위칭/흐름제어/오류유형**을  
> (1) 원리 → (2) 수식/수치 → (3) 예제/계산기 → (4) 트러블슈팅 순으로 **생략 없이** 정리합니다.  
> 수식은 **MathJax**, 계산/표는 **코드 블록**을 사용합니다.

---

## 0) 큰 그림 한 장

- **이더넷(Ethernet)** = **LAN의 사실상 표준**. 1970s 버스형 동축(10BASE-5/2) → 1990s 허브(공유 매체) → **스위치 기반**(전이중, CSMA/CD 불필요).  
- **CSMA/CD**는 **공유 매체+반이중**에서만 의미. 오늘날 **스위치+전이중** 환경에선 **사용되지 않음**(규격엔 남아있음).  
- **프레임 구조**는 시대를 관통: **Preamble/SFD + MAC 헤더(DA/SA/Type/Length + (VLAN)) + Payload + FCS**.  
- 성능/용량 계산의 핵심: **프레임 오버헤드(프리앰블/IFG 포함)**, **최소/최대 프레임**, **BDP와 pps** 감.

---

## 1) 이더넷 한눈에: 물리/매체/속도 타임라인

| 세대 | 매체/부호화 | 대표 표기 | 속도 | 특징 |
|---|---|---|---:|---|
| 동축 버스 | Baseband, Manchester | 10BASE-5/2 | 10 Mb/s | CSMA/CD, 굵은/얇은 동축 |
| 트위스티드 페어 | Manchester | **10BASE-T** | 10 Mb/s | 허브/스타 토폴로지 |
| 트위스티드 페어 | **4B5B + MLT-3** | **100BASE-TX** | 100 Mb/s | Cat5, 허브/스위치 과도기 |
| 트위스티드 페어 | **PAM-5** | **1000BASE-T** | 1 Gb/s | Cat5e, 전이중 일반화 |
| 광/백플레인 | **8b/10b → 64b/66b** | 1000BASE-X/10GBASE-R | 1/10 Gb/s | PCS/PMD 분리, FEC 도입(10G↑) |
| 트위스티드 페어 | **PAM-16 + LDPC** | **10GBASE-T** | 10 Gb/s | Cat6A, 링크 트레이닝 |
| 고속 집약 | 64b/66b + **RS-FEC** | 25/40/50/100/200/400G | — | 레인 합성, 광 위주 |

> **암기 포인트**: 100BASE-TX=**4B5B/MLT-3**, 1000BASE-T=**PAM-5**, 10GBASE-T=**PAM-16**.

---

## 2) MAC 주소 · 프레임 구조 · VLAN/LLC

### 2.1 MAC 주소(48비트, EUI-48)
- **형식**: 6바이트, 대표 표기 `aa:bb:cc:dd:ee:ff`  
- **첫 바이트 비트 의미**:  
  - **I/G**(LSB): 0=유니캐스트, 1=멀티캐스트  
  - **U/L**(2nd LSB): 0=전역(공장), 1=로컬(관리자가 부여)  
- **특수**: **브로드캐스트** `ff:ff:ff:ff:ff:ff`  
- **IP 멀티캐스트 매핑**:  
  - IPv4 → `01:00:5e:0x:xx:xx` (하위 23비트 매핑)  
  - IPv6 → `33:33:xx:xx:xx:xx`

### 2.2 이더넷 프레임(DIX/802.3 공통)

```
|Preamble(7)|SFD(1)|  DA(6)  |  SA(6)  | Type/Length(2) | VLAN(4)* | Payload(46~1500) | FCS(4) |
                 ^^^^^^^^^^^ MAC 헤더 ^^^^^^^^^^^
```
- **Preamble**: `0x55` 반복 7바이트(클록 동기), **SFD**: `0xD5`(Start of Frame Delimiter).  
- **DA/SA**: 목적/출발 MAC.  
- **Type/Length**:  
  - `≥ 1536 (0x0600)` → **EtherType** (예: IPv4=0x0800, ARP=0x0806, IPv6=0x86DD).  
  - `≤ 1500` → **802.3 Length**(이 경우 이어서 **LLC/SNAP** 헤더가 옴: DSAP/SSAP/Control + SNAP(OUI/EtherType)).  
- **VLAN(옵션, 802.1Q)**: **TPID 0x8100**, **TCI(PCP 3b / DEI 1b / VID 12b)** → **4B** 추가.  
  - **Q-in-Q**(Provider, 0x88a8)로 **S-Tag + C-Tag** 중첩 가능.
- **Payload**: **46~1500B**(패딩 포함). VLAN이 있어도 **최소 64B 프레임** 유지(패딩이 줄어듦).  
- **FCS**: **CRC-32**(다항식 0x04C11DB7, 반사/초기/최종 XOR 규칙 적용).

> **최대 프레임 크기(전통)**: **1518B**(VLAN 시 **1522B**). *점보프레임*은 장비 합의로 **~9000B**대 사용.

### 2.3 802.3x MAC Control & PAUSE
- **EtherType 0x8808**, **Opcode 0x0001**=PAUSE, **타이머 단위**=**512비트타임**.  
- 전이중에서 **링크 단위 흐름제어**(혼잡전파 우려). DCN/저지연 환경은 **PFC(802.1Qbb)** 사용.

### 2.4 CRC-32(IEEE 802.3) 메모
- **다항식** \(G(x)=x^{32}+x^{26}+x^{23}+...+1\) (0x04C11DB7)  
- 초기값 **0xFFFFFFFF**, **리플렉트 입력/출력**, 최종 **XOR 0xFFFFFFFF**.  
- 계산 범위= **DA~Payload+Pad** (FCS 제외).

---

## 3) CSMA/CD: 동작, 슬롯타임, 백오프

### 3.1 절차(반이중·공유 매체에서만)
1. **CS**(Carrier Sense): 매체 유휴인지 감지.  
2. **MA**(Multiple Access): 유휴면 전송 시작.  
3. **CD**(Collision Detect): 송신 중에도 충돌 신호 감시.  
4. 충돌 시 **Jam**(≥ 32비트) 전송 → 모두 인지.  
5. **이진 지수 백오프**: 시도 \(i\)번째 → 무작위 \(k\in[0,2^i-1]\), **대기 시간** \(=k\times \text{slotTime}\).  
   \(i\)는 최대 10에 클램프, 16회 실패 시 **포기**(에러 보고).

### 3.2 슬롯타임(slotTime)
\[
\text{slotTime} = \mathbf{512\ \text{bit-times}} 
\]
- **10 Mb/s**: 51.2 µs, **100 Mb/s**: 5.12 µs, **1 Gb/s**: 0.512 µs(반이중 희귀).  
- **의미**: 프레임 최소길이(64B)를 **왕복 전파** 안에 보장 → **늦은 충돌** 방지.  
- **길이 제한**: 케이블/리피터 지연 합이 slotTime 내여야 한다는 설계 제약(고전 **5-4-3 규칙** 등).

### 3.3 기가반이중 특수(역사)
- **Carrier Extension**(448B까지 확장) + **Frame Bursting**로 슬롯 조건 유지.  
- 현실은 **전이중 스위칭** 보편 → **CSMA/CD 비활성**.

---

## 4) 허브 vs 스위치: 충돌 도메인 → 전이중

- **허브(리피터)**: 비트 레벨 재생성, 전체 포트가 **하나의 충돌 도메인** → **CSMA/CD 필수**.  
- **스위치**: MAC 주소 **러닝**(CAM 테이블) + 포트 기반 **프레임 포워딩**, 포트당 **충돌 도메인 분리**.  
  - **전이중(Full Duplex)**: 송/수신 동시, **충돌 없음**, CSMA/CD 불필요.  
  - **STP/RSTP**: 루프 방지, 브로드캐스트 스톰 억제.  
  - **저지연**: **Cut-through**(헤더만 보고 포워드) vs **Store-and-Forward**(FCS 검사 후)

---

## 5) 효율/오버헤드 계산 — “와이어 시간” 감각

### 5.1 프레임 1개가 차지하는 선로 시간(on-the-wire)
\[
T_\text{wire} = \frac{(L_\text{MAC} + 8 + 12)\times 8}{R}
\]
- \(L_\text{MAC}\): **MAC 프레임 길이**(프리앰블/SFD/FCS/IFG 제외)  
- 8B=**Preamble+SFD**, 12B=**IFG**(Inter-Frame Gap, 96비트타임)

**예)** 1 Gb/s, **최소 프레임 64B** → \((64+8+12)\times8=672\)비트 →  
**1e9 / 672 ≈ 1.488 Mpps**, **선로 점유 672 ns/프레임**

### 5.2 최대 PPS & Goodput(대표값)
| 링크 | 최소프레임 PPS(64B) | 1500B 페이로드 goodput(대략) |
|---:|---:|---:|
| 1 Gb/s | **1.488 Mpps** | ≈ **~0.985 Gb/s**(프리앰블/IFG/FCS 제외 후) |
| 10 Gb/s | **14.88 Mpps** | ≈ **~9.85 Gb/s** |
| 100 Mb/s | **148.8 kpps** | ≈ **~98.5 Mb/s** |

> **참고**: VLAN 4B는 페이로드 패딩이 줄어 **64B 최소**는 유지. 점보프레임(9KB)은 **헤더 비율↓ → 효율↑**.

### 5.3 CSMA/CD 환경 효율(근사)
- **낙관적**: \( \eta \approx \frac{1}{1 + 5a} \) (Poisson 모델, a=전파/전송시간 비)  
- **Stop-and-Wait**와 유사 직감: a↑(긴 케이블/짧은 프레임) → 효율 급락.  
- 오늘날 전이중 스위치에선 **해당 없음**.

---

## 6) 자동협상(Autoneg), MDI-X, 링크 트레이닝

- **Clause 28 Autoneg**(10/100/1000T): **FLP**(Fast Link Pulse)로 능력 교환(속도/듀플렉스/PAUSE).  
- **MDI/MDI-X 자동**: 크로스/스트레이트 케이블 구분 불필요.  
- **10GBASE-T↑**: **링크 트레이닝**(채널 보정, 에코/크로스토크 상쇄), **LDPC/FEC** 내장.  
- **광/백플레인**: **Clause 73/72**(Autoneg/Training), PCS/PMD 계층 분리.

---

## 7) 오류 유형 · 진단 포인트

| 증상 | 의미/원인 | 조치 |
|---|---|---|
| **Runt**(<64B) | 충돌/조기중단 | 케이블/허브/반이중 충돌 체크 |
| **Giant**(>1518/1522B) | MTU/점보 불일치 | MTU 일치, 점보 통일 |
| **FCS 에러** | 전기/EMI/케이블/광감쇠 | 케이블/모듈 교체, 접지, 광세기 |
| **Alignment 에러** | 비트타이밍/클록 불일치 | 포트 속도/듀플렉스/케이블 확인 |
| **Late Collision** | 슬롯타임 이후 충돌(규격 위반 길이) | 케이블 길이/리피터 수 초과 |

> 오늘날 스위치+전이중에서 **Collision 카운트** 증가는 보통 **반이중/속도 불일치** 설정 오류 신호.

---

## 8) 예제 ① — 백오프 시간 분포(10 Mb/s)

- **slotTime**=512비트=**51.2 µs**  
- 충돌 \(i\)회 후 랜덤 **k∈[0,2^i-1]**  
  - 1회 후: 0 or 1 → **0/51.2 µs**  
  - 2회 후: 0..3 → **0/51.2/102.4/153.6 µs**  
  - … 최대 i=10 → 0..1023 슬롯(≈ **0~52.4 ms**)

---

## 9) 예제 ② — 1G 링크에서 최소/최대 프레임 성능

- **최소 프레임(64B)**: 1.488 Mpps, 선로 점유 672 ns/프레임 → CPU/NIC에 **pps 부담 큼**.  
- **1500B 페이로드**: MAC=1518B, on-the-wire=**(1518+20)=1538B**? (주의)  
  - 계산은 `MAC(1518) + Preamble/SFD(8) + IFG(12) = 1538B`가 아니라 **1538B 전송시간 = (1518 + 8 + 12) × 8 / R**  
  - Goodput ≈ \(1500 / (1518 + 20)\) 가 아니라 L2만 보려면 **1518:1500**, L1 포함이면 **(1500 / (1518+20))**로 비율 감.

---

## 10) 예제 ③ — VLAN·Q-in-Q 프레임 길이

- **802.1Q 단일 태그**: 1518→**1522B**(최대)  
- **Q-in-Q**: 1518→**1526B**(S+C 태그) → 일부 장비에서 **Baby Giant** 허용 필요.

---

## 11) 프레임 헤더 예시(HEX)

### 11.1 IPv4/ARP/LLDP EtherType
```
DA           : ff ff ff ff ff ff   ; Broadcast
SA           : 00 11 22 33 44 55
Type         : 08 06               ; ARP (0x0806)
Payload(ARP) : ...
FCS          : ab cd ef 01
```

### 11.2 802.1Q Tagged IPv4
```
DA           : 01 00 5e 00 00 fb   ; 224.0.0.251 (mDNS)
SA           : 0c 9d 92 1a 2b 3c
TPID         : 81 00               ; VLAN tag
TCI          : a0 64               ; PCP=5, DEI=0, VID=100
Type         : 08 00               ; IPv4
Payload      : ...
FCS          : ....
```

---

## 12) Wireshark 실무 필터

```
eth && !vlan
vlan && ip
eth.addr == 00:11:22:33:44:55
eth.type == 0x88cc       # LLDP
eth.type == 0x8100       # 802.1Q
eth.type == 0x8808       # MAC Control(예: Pause)
frame.len < 64 || frame.len > 1518
```

---

## 13) Python 미니 계산기

```python
# 1) on-the-wire 시간과 pps
def pps_min_frame(link_bps):
    # 64B MAC + 8B Preamble/SFD + 12B IFG
    return link_bps / ((64+8+12)*8)

def wire_time_ns(frame_mac_bytes, link_bps):
    return (frame_mac_bytes + 8 + 12) * 8 / link_bps * 1e9

def goodput_ratio(payload_bytes, mac_bytes):
    # L1 포함 비율(프리앰블/IFG까지 고려)
    return payload_bytes / (mac_bytes + 8 + 12)

for r in [100e6, 1e9, 10e9]:
    print(int(r), "min-frame PPS ≈", round(pps_min_frame(r), 3))
print("1G, 1518B frame wire time(ns):", round(wire_time_ns(1518, 1e9), 1))
print("Goodput ratio(1500/1518 L1):", round(goodput_ratio(1500,1518), 4))
```

---

## 14) 자주 묻는 Q&A

- **Q. 오늘날 CSMA/CD가 왜 안 쓰이나요?**  
  **A.** 스위치+전이중으로 충돌 도메인이 제거되어 **감지할 충돌이 없음**. Half-duplex로 강제하면 여전히 동작.

- **Q. 최소 64바이트인 이유?**  
  **A.** **왕복 전파(slotTime)** 동안 프레임이 남아 있어야 충돌을 **보장** 감지 → 최소길이=**512bit + 헤더/패딩**.

- **Q. Type/Length 구분 기준은?**  
  **A.** **0x0600(1536)** 경계. 이보다 크면 EtherType, 작으면 Length(→ LLC/SNAP).

- **Q. 점보프레임은 표준?**  
  **A.** 코어/데이터센터에서 **사실상 합의**(약 9KB) 수준. 기기 간 **동일 MTU** 필수.

- **Q. Pause는 왜 논란?**  
  **A.** 혼잡을 상류로 **전파**시켜 **HOL blocking** 유발. DCN은 **PFC(우선순위별 정지)**나 ECN 기반 제어를 선호.

---

## 15) 연습문제(풀이 포함)

### Q1. 1G 링크에서 최소 프레임 기준 최대 PPS는?
**A.** \(\displaystyle \frac{10^9}{(64+8+12)\times 8} \approx \mathbf{1.488\ \text{Mpps}}\).

### Q2. 100Mb/s 반이중, a=\(T_p/T_{tx}=2\). GBN 윈도우 \(W=3\)일 때 무오류 이용률은?
**A.** \(1+2a=5\), \(W=3\) → \(U=3/5=\mathbf{0.6}\).

### Q3. VLAN(802.1Q) 태그 추가 시 최대 MAC 프레임 크기는?
**A.** **1522바이트**.

### Q4. 이더넷의 FCS는 어떤 CRC를 사용?
**A.** **CRC-32(IEEE 802.3)**, 다항식 0x04C11DB7(리플렉트/초기/최종 XOR 규칙).

### Q5. Late collision의 의미와 원인은?
**A.** **슬롯타임 이후** 충돌 감지(규격 위반 길이나 리피터 과다). 케이블/리피터 구성 점검.

### Q6. Pause 프레임의 시간 단위는?
**A.** **512 비트타임** 단위(=slotTime 단위와 동일 기준).

---

## 16) 설치/디버깅 체크리스트

- [ ] 포트 **속도/듀플렉스** 자동협상 정상? (Half로 고정된 포트 없는지)  
- [ ] **케이블 규격/길이** 준수(Cat5e/6A, 최대 100m); 광 모듈/파이버 손실 확인  
- [ ] **MTU/점보** 일관성(경로 전체)  
- [ ] **VLAN/Q-in-Q** 태깅 규칙 및 트렁크/액세스 포트 구성  
- [ ] **Spanning Tree** 활성(루프 방지), **BPDU Guard/Root Guard** 정책  
- [ ] **Pause/PFC** 정책(필요한 도메인에만), **ECN/AQM** 고려  
- [ ] 모니터링: **FCS/Alignment/Runt/Giant/Late Collisions** 카운터

---

## 17) 콤팩트 암기표(시험 직전 12줄)

1) **프리앰블7 + SFD1** + **DA6 SA6 Type2 (VLAN4) Payload 46~1500 FCS4**  
2) **Type≥1536**=EtherType / **≤1500**=Length(→ LLC/SNAP)  
3) **최소 64B / 최대 1518B(1522B)**  
4) **FCS=CRC-32**(0x04C11DB7)  
5) **IFG=96bit(12B)**, **프리앰블+SFD=8B**  
6) **CSMA/CD**: Jam(32b), **slotTime=512bit**, **백오프 k×slot**  
7) **전이중**에선 CSMA/CD **불필요**  
8) **100BASE-TX=4B5B/MLT-3**, **1000BASE-T=PAM-5**, **10GBASE-T=PAM-16+LDPC**  
9) **Autoneg**(속도/듀플렉스/PAUSE), **MDI-X 자동**  
10) **Pause(0x8808)** 타이머=512비트타임  
11) **Min-frame PPS(1G)** ≈ 1.488 Mpps  
12) **VLAN=0x8100**, **PCP/DEI/VID** 포함

---

## 18) 마무리

- 오늘의 핵심: **프레임 구조/오버헤드**를 **와이어 시간**으로 느끼고, **CSMA/CD는 역사적 맥락**임을 기억하세요.  
- 실무 성능은 **pps**, **MTU/점보**, **스위칭/버퍼/흐름제어**가 좌우합니다.  
- 장비 카운터(**FCS/Alignment/Runt/Giant/Late**)와 **Wireshark 필터**만 잘 다뤄도 절반은 먹고 들어갑니다.
