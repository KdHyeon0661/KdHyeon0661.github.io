---
layout: post
title: AWS - S3 비용 분석 및 절감
date: 2025-07-18 20:20:23 +0900
category: AWS
---
# 💸 AWS S3 비용 분석 및 절감 전략 총정리

---

## 🧭 개요

AWS S3는 뛰어난 확장성과 가용성을 제공하지만,  
**무분별하게 사용하면 불필요한 비용이 누적**될 수 있습니다.

이 글에서는 S3의 **비용 구조를 분석**하고,  
**구체적인 절감 전략과 도구 사용법**을 예제 중심으로 설명합니다.

---

## 💰 S3 비용 구조 이해

S3 비용은 다음 요소에 따라 과금됩니다:

| 항목 | 설명 | 대표 요금 기준 |
|------|------|----------------|
| **저장 공간** | 저장된 객체의 용량 및 스토리지 클래스 | GB/월 |
| **요청 횟수** | PUT, GET, LIST 등의 API 호출 수 | 1,000건당 |
| **전송 비용** | S3에서 인터넷으로 나가는 트래픽 | GB당 |
| **복원 비용** | Glacier 등에서 복원 시 발생 | GB당 복원 +
요청당 요금 |
| **관리 기능** | 수명 주기, 버전 관리, 복제, 이벤트 | 일부 무료 or 추가 요금 |

---

## 📊 S3 비용 분석 도구

### 1️⃣ AWS Cost Explorer

- S3 사용량 및 비용을 날짜/서비스/스토리지 클래스별로 시각화 가능
- [https://console.aws.amazon.com/cost-management/home](https://console.aws.amazon.com/cost-management/home)

### 2️⃣ S3 Storage Lens

- S3 버킷 사용량, 객체 수, 수명 주기 정책 적용률 등을 분석
- 콘솔 > S3 > Storage Lens 탭에서 활성화
- **무료 요약 리포트 제공** (자세한 보고서 = 유료)

### 3️⃣ AWS Budgets

- S3 월간 예산 초과 시 알림 설정 가능
- 예: 월 50,000원 초과 시 이메일 경고

---

## 💡 절감 전략 ① 스토리지 클래스 최적화

### ✅ 전략: **객체 접근 빈도에 따라 적절한 스토리지 클래스 선택**

| 클래스 | 비용 | 사용 사례 |
|--------|------|-----------|
| Standard | 💰💰 | 웹사이트 이미지, 자주 쓰는 API |
| Standard-IA | 💰 | 백업, 월간 리포트 |
| Intelligent-Tiering | 💰~ | 사용 패턴이 불규칙할 때 |
| One Zone-IA | 💰↓ | 재생 가능한 백업, 로그 |
| Glacier IR | 💰↓ | 자주 안 쓰지만 빠른 복원이 필요한 아카이브 |
| Glacier / Deep Archive | 💰↓↓ | 규제용 장기 보관 |

#### 실전 팁:

```bash
aws s3 cp myfile.txt s3://my-bucket/ --storage-class STANDARD_IA
```

또는 `boto3` 사용:

```python
s3.upload_file("file.txt", "my-bucket", "file.txt", ExtraArgs={"StorageClass": "GLACIER"})
```

---

## 💡 절감 전략 ② 수명 주기 정책 (Lifecycle Policy)

### ✅ 전략: 오래된 객체를 자동으로 스토리지 이전 또는 삭제

#### 예: 로그 파일의 절감 시나리오

| 경과일 | 작업 |
|--------|------|
| 30일 | IA로 이전 |
| 90일 | Glacier로 이전 |
| 180일 | 삭제 |

#### 설정 예시 (JSON):

```json
{
  "Rules": [
    {
      "ID": "ArchiveLogs",
      "Filter": { "Prefix": "logs/" },
      "Status": "Enabled",
      "Transitions": [
        { "Days": 30, "StorageClass": "STANDARD_IA" },
        { "Days": 90, "StorageClass": "GLACIER" }
      ],
      "Expiration": { "Days": 180 }
    }
  ]
}
```

> 수천 ~ 수백만 객체도 자동 이동 → 비용 대폭 감소

---

## 💡 절감 전략 ③ 중복 제거 및 데이터 정리

| 문제 | 해결 방안 |
|------|------------|
| 동일한 파일 여러 버전 저장 | 버전 관리 + 수명 주기 정책 적용 |
| 불필요한 파일 보관 | 정기적으로 스캔 후 수동 삭제 |
| 테스트 파일/임시 객체 누적 | 접두사(prefix)별 수명 주기 설정 |

#### 버전 정리 예시:

```json
"NoncurrentVersionExpiration": {
  "NoncurrentDays": 30
}
```

---

## 💡 절감 전략 ④ S3 요청 비용 최적화

| 요청 유형 | 요금 발생 여부 |
|-----------|----------------|
| PUT, COPY, POST, LIST | 과금 |
| GET, SELECT | 과금 |
| DELETE | 무료 |

### ✅ 전략

- 객체를 대량으로 `Batch Upload`하여 PUT 요청 수 줄이기
- 자주 사용하는 리스트 작업은 **CloudFront 캐시**로 대체
- `S3 Select`로 필요한 부분만 읽어 **전송량 절감**

---

## 💡 절감 전략 ⑤ 데이터 전송 비용 절감

| 전송 방향 | 요금 |
|-----------|------|
| **S3 → 인터넷** | 과금 |
| S3 → EC2 (같은 리전) | **무료** |
| 리전 간 전송 | 과금 (데이터 이동비 발생) |

### ✅ 전략

- EC2와 같은 리전에 S3 버킷 배치
- 데이터 전송 많은 작업은 **S3 Transfer Acceleration 대신 CloudFront 사용 고려**
- 필요한 경우 **S3 Access Point** 또는 **VPC Endpoint**로 사설 네트워크 구성

---

## 📋 실전 절감 시나리오

### 📌 시나리오 A: 로그 저장소 최적화

- `logs/` 접두사의 파일
  - 30일 후 → IA
  - 90일 후 → Glacier
  - 365일 후 → 삭제

**결과:**  
월 수십 TB 단위의 로그 저장 비용 → 최대 80% 절감 가능

---

### 📌 시나리오 B: 데이터 과금 줄이기

- EC2 → S3: 무료  
- S3 → 인터넷: 과금  
→ EC2 내 분석 도구로 처리 후 최소한의 결과만 외부로 전송

---

### 📌 시나리오 C: S3 Intelligent-Tiering + 수명 주기

- 사용 패턴 예측 어려움 → `Intelligent-Tiering`
- 오래된 객체 자동 삭제 → 수명 주기 정책 병행

---

## 🧠 추천 조합 전략

| 전략 조합 | 설명 |
|-----------|------|
| 버전 관리 + 수명 주기 | 변경 이력 보관 + 오래된 버전 자동 정리 |
| Intelligent-Tiering + 수명 주기 | 자동 계층 이동 + 삭제까지 자동화 |
| CloudFront + S3 | 대역폭 + 요청 수 최적화 |
| Glacier + 저장 기간 | 장기 보관 대상은 아카이빙 |

---

## 🔐 보안과 절감 병행

| 기능 | 비용 최적화 관점 |
|------|----------------|
| Object Lock | 규정 준수 장기 보관 → Glacier와 병행 |
| 암호화(SSE) | SSE-S3는 무료, SSE-KMS는 KMS 요금 발생 |
| 접근 로그 | 비활성화하거나 CloudTrail 대신 사용 고려 |

---

## 📘 S3 비용 분석 요약표

| 항목 | 확인 방법 | 절감 전략 |
|------|-----------|-----------|
| 저장 공간 | S3 콘솔, Storage Lens | 스토리지 클래스 조정 |
| 요청 수 | Cost Explorer, CloudWatch | 캐싱, 일괄 처리 |
| 버전 수 | 버전 관리 설정 | 수명 주기 자동 삭제 |
| 데이터 전송 | Cost Explorer | 동일 리전 사용, 캐시 |

---

## ✅ 마무리 요약

| 절감 전략 | 핵심 요약 |
|-----------|-----------|
| 스토리지 클래스 | 사용 빈도에 따라 변경 |
| 수명 주기 정책 | 오래된 데이터 자동 이전/삭제 |
| 버전 관리 조합 | 변경 이력 유지 + 오래된 버전 정리 |
| 요청/전송 최적화 | 캐시, 일괄 처리, 지역 고려 |
| 분석 도구 활용 | Storage Lens, Cost Explorer로 지속 모니터링 |