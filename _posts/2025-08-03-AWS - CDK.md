---
layout: post
title: AWS - CDK
date: 2025-08-03 16:20:23 +0900
category: AWS
---
# π“¦ CDK: AWS Cloud Development Kit

AWS CDK(Cloud Development Kit)λ” AWS μΈν”„λΌλ¥Ό ν”„λ΅κ·Έλλ° μ–Έμ–΄λ¥Ό μ΄μ©ν•΄ μ •μν•  μ μκ² ν•΄μ£Όλ” **μΈν”„λΌ μ½”λ“ν™”(Infrastructure as Code, IaC)** ν΄μ…λ‹λ‹¤. CDKλ” AWS CloudFormationμ„ μ¶”μƒν™”ν•μ—¬, μΈν”„λΌ κµ¬μ„±μ„ μ‰½κ³  λ¨λ“ν™”ν•  μ μκ² λ„μ™€μ¤λ‹λ‹¤.

---

## π”§ CDKμ ν•µμ‹¬ κ°λ…

### 1. **μ–Έμ–΄ μ§€μ›**
CDKλ” μ—¬λ¬ ν”„λ΅κ·Έλλ° μ–Έμ–΄λ¥Ό μ§€μ›ν•©λ‹λ‹¤:

- TypeScript / JavaScript
- Python
- Java
- C#
- Go (experimental)

μ΄ μ¤‘ κ°€μ¥ ν™λ°ν•κ² μ‚¬μ©λλ” μ–Έμ–΄λ” **TypeScript**μ™€ **Python**μ…λ‹λ‹¤.

---

### 2. **μ¤νƒ(Stack)κ³Ό μ•±(App)**

CDKλ” CloudFormationμ Stack κ°λ…μ„ κΈ°λ°μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤.

- **App**: ν•λ‚ μ΄μƒμ Stackμ„ ν¬ν•¨ν•λ” λ£¨νΈ κµ¬μ΅°μ…λ‹λ‹¤.
- **Stack**: λ¦¬μ†μ¤λ¥Ό μ„ μ–Έν•λ” λ‹¨μ„. AWS CloudFormation μ¤νƒκ³Ό μΌλ€μΌλ΅ λ§¤ν•‘λ©λ‹λ‹¤.
- **Construct**: λ¦¬μ†μ¤λ¥Ό μ¶”μƒν™”ν• κ°μ²΄. AWS λ¦¬μ†μ¤λ¥Ό μ„ μ–Έν•  μ μμµλ‹λ‹¤.

```ts
// TypeScript μμ 
import * as cdk from 'aws-cdk-lib';
import { Bucket } from 'aws-cdk-lib/aws-s3';

class MyStack extends cdk.Stack {
  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    new Bucket(this, 'MyFirstBucket', {
      versioned: true
    });
  }
}

const app = new cdk.App();
new MyStack(app, 'MyS3Stack');
```

---

### 3. **Construct (μƒμ„±μ)**

CDKμ—μ„ λ¨λ“  λ¦¬μ†μ¤λ” **Construct**λ΅ μƒμ„±λ©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, S3 Bucketμ€ `Bucket`, Lambda ν•¨μλ” `Function`, DynamoDB ν…μ΄λΈ”μ€ `Table` λ“±μΌλ΅ ν‘ν„λ©λ‹λ‹¤.

Constructλ” 3λ‹¨κ³„ κ³„μΈµ κµ¬μ΅°λ¥Ό κ°€μ§‘λ‹λ‹¤:

1. **L1 Construct**: CloudFormation λ¦¬μ†μ¤λ¥Ό μ§μ ‘ λ€μ‘ (μ: `CfnBucket`)
2. **L2 Construct**: AWS λ¦¬μ†μ¤λ¥Ό λ” μ¶”μƒν™”ν•μ—¬ μ‰½κ² μ‚¬μ©ν•  μ μλ„λ΅ μ κ³µ
3. **L3 Construct**: μ—¬λ¬ λ¦¬μ†μ¤λ¥Ό λ¬¶μ€ ν¨ν„΄ (ex: ECS + ALB + AutoScaling λ“±)

---

## π›  CDK μ„¤μΉ λ° μ΄κΈ°ν™”

### 1. μ„¤μΉ

```bash
npm install -g aws-cdk
```

### 2. ν”„λ΅μ νΈ μƒμ„±

```bash
cdk init app --language typescript
```

### 3. μμ΅΄μ„± μ„¤μΉ

```bash
npm install aws-cdk-lib constructs
```

---

## π μ‹¤μµ μμ : S3 + Lambda μ—°κ²°

```ts
import * as cdk from 'aws-cdk-lib';
import { Bucket } from 'aws-cdk-lib/aws-s3';
import { Function, Runtime, Code } from 'aws-cdk-lib/aws-lambda';
import { S3EventSource } from 'aws-cdk-lib/aws-lambda-event-sources';

class LambdaS3Stack extends cdk.Stack {
  constructor(scope: cdk.App, id: string, props?: cdk.StackProps) {
    super(scope, id, props);

    const bucket = new Bucket(this, 'MyBucket');

    const fn = new Function(this, 'MyFunction', {
      runtime: Runtime.NODEJS_18_X,
      handler: 'index.handler',
      code: Code.fromAsset('lambda'),
    });

    fn.addEventSource(new S3EventSource(bucket, {
      events: ['s3:ObjectCreated:*']
    }));
  }
}
```

---

## π”„ λ°°ν¬ λ° κ΄€λ¦¬

### 1. CloudFormation ν…ν”λ¦Ώ ν™•μΈ

```bash
cdk synth
```

### 2. μ‹¤μ  μ¤νƒ λ°°ν¬

```bash
cdk deploy
```

### 3. μ¤νƒ μ‚­μ 

```bash
cdk destroy
```

---

## π§© CDKμ μ¥μ 

| ν•­λ© | μ„¤λ… |
|------|------|
| **λ¨λ“ν™”** | μΌλ° μ½”λ“μ²λΌ ν΄λμ¤, ν•¨μ λ“±μΌλ΅ μ¬μ‚¬μ© κ°€λ¥ |
| **ν…μ¤νΈ** | μ λ‹› ν…μ¤νΈ, ν†µν•© ν…μ¤νΈ μ μ© κ°€λ¥ |
| **μ¶”μƒν™”** | λ³µμ΅ν• λ¦¬μ†μ¤λ¥Ό κ°„λ‹¨ν• μ½”λ“λ΅ κµ¬μ„± κ°€λ¥ |
| **κ°•λ ¥ν• νƒ€μ… μ§€μ›** | IDE μλ™μ™„μ„±, νƒ€μ… κ²€μ¦ λ“± κ°λ° μƒμ‚°μ„± ν–¥μƒ |
| **CloudFormation μ—°λ™** | κΈ°μ΅΄ IaC μ¤νƒκ³Όλ„ νΈν™μ„± μ μ§€ |

---

## β οΈ μ£Όμν•  μ 

1. **κΈ°μ΅΄ CloudFormation ν…ν”λ¦Ώκ³Ό μ§μ ‘ νΈν™ λ¶κ°€** (λ³€ν™ λ¶κ°€λ¥)
2. **AWS λ¦¬μ†μ¤ λ…μ„Έ λ³€κ²½ μ‹, μµμ‹  CDK λ²„μ „ μ μ§€ ν•„μ”**
3. **λ³µμ΅ν• μ΅°κ±΄, λ£¨ν”„κ°€ μ¤νλ ¤ μ½κΈ° μ–΄λ µκ² λ§λ“¤ μ μμ**

---

## π§ ν…μ¤νΈ λ° CI/CD

- **jest**, **pytest** λ“±μΌλ΅ μ λ‹› ν…μ¤νΈ κ°€λ¥
- **GitHub Actions / CodePipeline** κ³Ό ν†µν•©ν•μ—¬ μλ™ λ°°ν¬ κµ¬μ„± κ°€λ¥

```ts
test('Lambda Created', () => {
  const app = new cdk.App();
  const stack = new LambdaS3Stack(app, 'TestStack');

  expect(stack).toHaveResource('AWS::Lambda::Function');
});
```

---

## π§± μμ£Ό μ‚¬μ©ν•λ” λ¦¬μ†μ¤ κµ¬μ„± μ”μ†

| λ¦¬μ†μ¤ | Construct |
|--------|-----------|
| S3     | `aws-cdk-lib/aws-s3` |
| Lambda | `aws-cdk-lib/aws-lambda` |
| API Gateway | `aws-cdk-lib/aws-apigateway` |
| DynamoDB | `aws-cdk-lib/aws-dynamodb` |
| VPC     | `aws-cdk-lib/aws-ec2` |
| IAM     | `aws-cdk-lib/aws-iam` |

---

## π” λ§λ¬΄λ¦¬

CDKλ” AWS μΈν”„λΌλ¥Ό **κ°λ°μ μΉν™”μ μΈ λ°©μ‹**μΌλ΅ μ •μν•  μ μκ² ν•΄μ£Όλ” κ°•λ ¥ν• λ„κµ¬μ…λ‹λ‹¤. μ½”λ“ κΈ°λ°μΌλ΅ μΈν”„λΌλ¥Ό κµ¬μ„±ν•κ³ , μ¬μ‚¬μ©μ„±κ³Ό ν…μ¤νΈ κ°€λ¥μ„±, ν™•μ¥μ„±μ„ ν™•λ³΄ν•  μ μμ–΄ DevOps, SRE, ν΄λΌμ°λ“ κ°λ°μμ—κ² ν•„μμ μΈ λ„κµ¬λ΅ μλ¦¬ μ΅κ³  μμµλ‹λ‹¤.

> μ•μΌλ΅ IaCλ” λ‹¨μ μ„ μ–Έν•μ—μ„, μ μ  λ” **ν”„λ΅κ·Έλλ° κΈ°λ° μ¶”μƒν™”**λ΅ μ΄λ™ν•  κ²ƒμ…λ‹λ‹¤. CDKλ” κ·Έ μ¤‘μ‹¬μ— μλ” λ„κµ¬μ…λ‹λ‹¤.
