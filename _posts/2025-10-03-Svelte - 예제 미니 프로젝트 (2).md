---
layout: post
title: Svelte - ì˜ˆì œ ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ (2)
date: 2025-10-03 23:30:23 +0900
category: Svelte
---
# 16. ì‹¤ì „ ì˜ˆì œ ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ (2) â€” **ë¸”ë¡œê·¸/ë¬¸ì„œ ì‚¬ì´íŠ¸ (SSG Â· RSS Â· ê²€ìƒ‰)**
**SvelteKit + mdsvex(ë§ˆí¬ë‹¤ìš´/MDX) Â· ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG) Â· RSS/Atom Â· ê²€ìƒ‰(JSON ì¸ë±ìŠ¤/Minisearch) Â· íƒœê·¸/ëª©ì°¨/ìˆ˜í•™ Â· ì½”ë“œ í•˜ì´ë¼ì´íŠ¸(Shiki) Â· ì´ë¯¸ì§€ ìµœì í™”**

> ëª©í‘œ: SvelteKitë¡œ **ë¹ ë¥´ê³  ì ‘ê·¼ì„± ì¢‹ì€** ë¸”ë¡œê·¸/ë¬¸ì„œ(Documentation) ì‚¬ì´íŠ¸ë¥¼ ë§Œë“ ë‹¤.
> - **SSG**: ë¹Œë“œ ì‹œê°„ì— ëª¨ë“  í˜ì´ì§€/í”¼ë“œ/ê²€ìƒ‰ ì¸ë±ìŠ¤ë¥¼ ìƒì„±
> - **ì½˜í…ì¸ **: `/content`ì˜ Markdown/MDX + **frontmatter**
> - **í”¼ë“œ**: `/rss.xml`, `/atom.xml` ì •ì  ìƒì„±
> - **ê²€ìƒ‰**: `/search.json`(ë©”íƒ€/í† í°) + **Minisearch**(í´ë¼ì´ì–¸íŠ¸)
> - **ìˆ˜í•™**: $$ â€¦ $$ (remark-math + MathJax or KaTeX)
> - **ë¬¸ì„œ ì‚¬ì´íŠ¸**: ì‚¬ì´ë“œë°” ë„¤ë¹„, ë²„ì „/ì„¹ì…˜, ìë™ ëª©ì°¨(TOC)

---

## 16.1 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
project/
  svelte.config.js
  mdsvex.config.js
  vite.config.ts
  static/
    favicon.ico
    images/...
  content/
    posts/
      2025-01-hello-sveltekit.md
      2025-02-ssg-deep-dive.md
      ...
    docs/
      getting-started.md
      guide/
        01-installation.md
        02-configuration.md
        advanced/
          01-ssg-strategy.md
    pages/
      about.md
  src/
    lib/
      content/
        posts.ts       # ê¸€ ë©”íƒ€/ë³¸ë¬¸ ë¡œë”
        docs.ts        # ë¬¸ì„œ íŠ¸ë¦¬/ë©”íƒ€
        markdown.ts    # ê³µí†µ íŒŒì„œ ìœ í‹¸
        rss.ts         # RSS/Atom builder
        search.ts      # ê²€ìƒ‰ ì¸ë±ìŠ¤ builder
      components/
        Layout.svelte
        BlogCard.svelte
        PostMeta.svelte
        Toc.svelte
        DocSidebar.svelte
        SearchBox.svelte
      styles/
        prose.css
    routes/
      +layout.svelte
      +layout.server.ts
      +page.svelte              # í™ˆ(ìµœê·¼ ê¸€)
      blog/
        +page.svelte            # ëª©ë¡/í˜ì´ì§€ë„¤ì´ì…˜
        [slug]/
          +page.svelte          # ìƒì„¸
          +page.ts
      tags/
        [tag]/
          +page.svelte
      docs/
        +layout.svelte
        +layout.ts
        +page.svelte            # ë¬¸ì„œ í™ˆ(ê°œìš”)
        [slug]/
          +page.svelte
          +page.ts
      pages/
        [slug]/
          +page.svelte
          +page.ts
      rss.xml/+server.ts
      atom.xml/+server.ts
      search.json/+server.ts
```

- **SSG**: ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ/ì„œë²„ì—ì„œ `export const prerender = true` ì„ ì–¸ â†’ ëª¨ë“  ë¼ìš°íŠ¸ **ì •ì  HTML/JSON** ìƒì„±
- ì»¨í…ì¸ ëŠ” **íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜**. ë¹Œë“œ ì‹œ `import.meta.glob`ìœ¼ë¡œ ìˆ˜ì§‘/íŒŒì‹± â†’ ë©”íƒ€/ë³¸ë¬¸/TOC/ìš”ì•½ ìƒì„±
- ë¬¸ì„œ ì„¹ì…˜ì€ **í´ë” íŠ¸ë¦¬ ìì²´**ê°€ ë„¤ë¹„ê²Œì´ì…˜ì´ ë¨

---

## 16.2 mdsvex & ë§ˆí¬ë‹¤ìš´ íŒŒì´í”„ë¼ì¸

### 16.2.1 mdsvex ì„¤ì • (Shiki + remark/rehype í”ŒëŸ¬ê·¸ì¸)
```js
// mdsvex.config.js
import { defineMDSveXConfig as defineConfig } from 'mdsvex';
import remarkFrontmatter from 'remark-frontmatter';
import remarkGfm from 'remark-gfm';
import remarkMath from 'remark-math';
import rehypeSlug from 'rehype-slug';
import rehypeAutolink from 'rehype-autolink-headings';
import rehypeToc from '@jsdevtools/rehype-toc'; // ê°„ë‹¨ TOC
import rehypePrettyCode from 'rehype-pretty-code';

const shikiTheme = 'github-dark'; // ë˜ëŠ” 'one-dark-pro'

export default defineConfig({
  extensions: ['.md', '.svx', '.mdx'],
  remarkPlugins: [remarkFrontmatter, remarkGfm, remarkMath],
  rehypePlugins: [
    rehypeSlug,
    [rehypeAutolink, { behavior: 'wrap' }],
    [rehypePrettyCode, {
      theme: shikiTheme,
      keepBackground: false
    }],
    [rehypeToc, { headings: ['h2', 'h3'], cssClasses: { toc: 'toc' } }]
  ],
  layout: {
    posts: './src/lib/components/Layout.svelte',
    docs:  './src/lib/components/Layout.svelte',
    pages: './src/lib/components/Layout.svelte'
  }
});
```

### 16.2.2 svelte.config.js ì—°ê²°
```js
// svelte.config.js
import adapter from '@sveltejs/adapter-static';
import preprocess from 'svelte-preprocess';
import { mdsvex } from 'mdsvex';
import mdsvexConfig from './mdsvex.config.js';

const config = {
  extensions: ['.svelte', ...mdsvexConfig.extensions],
  preprocess: [preprocess(), mdsvex(mdsvexConfig)],
  kit: {
    adapter: adapter(),
    alias: { $content: 'content', $lib: 'src/lib' }
  }
};
export default config;
```

> **ì–´ëŒ‘í„°**: ì •ì  í˜¸ìŠ¤íŒ…(Vercel/Netlify/Cloudflare Pages)ì— ë§ì¶° **adapter-static** ì‚¬ìš©. SSR ê¸°ëŠ¥ì´ í•„ìš”í•˜ë©´ ë‹¤ë¥¸ ì–´ëŒ‘í„°ë¡œ êµì²´í•˜ë˜, ì´ë²ˆ ì˜ˆì œëŠ” **í’€ SSG** ì „ì œ.

---

## 16.3 ì½˜í…ì¸  í¬ë§· (frontmatter)

### 16.3.1 í¬ìŠ¤íŠ¸ ì˜ˆì‹œ (`/content/posts/2025-01-hello-sveltekit.md`)
```md
---
title: "Hello SvelteKit"
slug: "hello-sveltekit"
date: "2025-01-15"
updated: "2025-01-20"
summary: "SvelteKit ì†Œê°œ ë° ìƒì‚°ì„± íŒ"
tags: ["sveltekit","intro"]
draft: false
cover: "/images/hello-sveltekit.webp"
---

# Hello SvelteKit

ì—¬ê¸°ì— ë³¸ë¬¸ **ë§ˆí¬ë‹¤ìš´**.
ìˆ˜ì‹ì€ $$E = mc^2$$ ì²˜ëŸ¼ ì…ë ¥í•©ë‹ˆë‹¤.

```ts
export const greet = (name: string) => `Hello, ${name}!`;
```
```

### 16.3.2 ë¬¸ì„œ ì˜ˆì‹œ (`/content/docs/guide/01-installation.md`)
```md
---
title: "ì„¤ì¹˜"
slug: "guide/installation"
order: 1
---

# ì„¤ì¹˜

Node 20+ ê¶Œì¥, PNPM ì‚¬ìš© ì˜ˆ:

```bash
pnpm create svelte@latest mydocs
```
```

---

## 16.4 ì½˜í…ì¸  ë¡œë”(ë¹Œë“œ íƒ€ì„ ìˆ˜ì§‘)

### 16.4.1 ê³µí†µ íƒ€ì… & ìœ í‹¸
```ts
// src/lib/content/markdown.ts
export type Frontmatter = {
  title: string;
  slug?: string;
  date?: string;
  updated?: string;
  summary?: string;
  tags?: string[];
  draft?: boolean;
  cover?: string;
  order?: number;
};

export type PostMeta = Frontmatter & {
  slug: string; // ìµœì¢… í™•ì •
  type: 'post' | 'page' | 'doc';
  readingTime: string;
  path: string;     // ë¼ìš°íŠ¸ path
};

export function calcReadingTime(text: string) {
  const words = text.trim().split(/\s+/).length;
  const mins = Math.max(1, Math.round(words / 250));
  return `${mins} min read`;
}

export function normalizeSlug(file: string, fmSlug?: string) {
  if (fmSlug) return fmSlug;
  return file
    .replace(/^.*\/content\/(posts|docs|pages)\//, '')
    .replace(/\.mdx?$/, '')
    .replace(/^\d{4}-\d{2}-\d{2}-/, ''); // ë‚ ì§œ prefix ì œê±°(í¬ìŠ¤íŠ¸)
}
```

### 16.4.2 í¬ìŠ¤íŠ¸ ìˆ˜ì§‘
```ts
// src/lib/content/posts.ts
import { calcReadingTime, normalizeSlug, type PostMeta } from './markdown';

const postFiles = import.meta.glob('/content/posts/**/*.md', { eager: true });
type M = { metadata: any; default: { render: () => { html: string } } };

export const posts: PostMeta[] = Object
  .entries(postFiles as Record<string, M>)
  .map(([file, mod]) => {
    const fm = mod.metadata ?? {};
    const slug = normalizeSlug(file, fm.slug);
    const html = mod.default?.render?.().html ?? '';
    const readingTime = calcReadingTime(html.replace(/<[^>]+>/g,' '));
    return {
      ...fm,
      slug,
      type: 'post',
      readingTime,
      path: `/blog/${slug}`
    } as PostMeta;
  })
  .filter(p => !p.draft)
  .sort((a, b) => (b.date?.localeCompare(a.date ?? '') ?? 0));
```

### 16.4.3 ë¬¸ì„œ ìˆ˜ì§‘(íŠ¸ë¦¬/ì‚¬ì´ë“œë°”)
```ts
// src/lib/content/docs.ts
import { normalizeSlug, type PostMeta } from './markdown';

const docFiles = import.meta.glob('/content/docs/**/*.md', { eager: true });
type M = { metadata: any };

export const docs: PostMeta[] = Object.entries(docFiles as any).map(([file, mod]) => {
  const fm = (mod as any).metadata ?? {};
  const slug = normalizeSlug(file, fm.slug); // e.g. guide/installation
  return {
    ...fm,
    slug,
    type: 'doc',
    path: `/docs/${slug}`
  };
}).sort((a, b) => (a.order ?? 999) - (b.order ?? 999));

// ì‚¬ì´ë“œë°” íŠ¸ë¦¬: 'guide/installation' -> ['guide', 'installation']
export type DocNode = { title: string; path?: string; children?: Record<string, DocNode> };
export function buildTree(items: PostMeta[]) {
  const root: Record<string, DocNode> = {};
  for (const it of items) {
    const parts = it.slug.split('/');
    let cur = root;
    let acc = '';
    parts.forEach((p, i) => {
      acc = acc ? `${acc}/${p}` : p;
      cur[p] ??= { title: i === parts.length - 1 ? it.title : p, path: i === parts.length - 1 ? it.path : undefined, children: {} };
      cur = cur[p].children!;
    });
  }
  return root;
}
```

---

## 16.5 ë ˆì´ì•„ì›ƒ & ì „ì—­ SSG

### 16.5.1 ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
```svelte
<!-- src/routes/+layout.svelte -->
<script lang="ts">
  export let data: { site: { title:string; url:string; description:string } };
</script>

<svelte:head>
  <title>{data.site.title}</title>
  <meta name="description" content={data.site.description} />
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"/>
  <link rel="alternate" type="application/atom+xml" title="Atom" href="/atom.xml"/>
</svelte:head>

<a class="skip" href="#main">ë³¸ë¬¸ ë°”ë¡œê°€ê¸°</a>
<header class="site">
  <a href="/">ğŸ  {data.site.title}</a>
  <nav>
    <a href="/blog">ë¸”ë¡œê·¸</a>
    <a href="/docs">ë¬¸ì„œ</a>
    <a href="/pages/about">ì†Œê°œ</a>
  </nav>
</header>
<main id="main"><slot/></main>
<footer class="foot">Â© {new Date().getFullYear()} â€¢ CC BY-NC</footer>

<style>
.skip{position:absolute;left:-9999px}.skip:focus{left:10px;top:10px;background:#fff;padding:8px;border:2px solid}
.site{display:flex;justify-content:space-between;align-items:center;padding:12px}
.foot{margin-top:4rem;padding:2rem 0;border-top:1px solid #eee;color:#667}
</style>
```

```ts
// src/routes/+layout.server.ts
import type { LayoutServerLoad } from './$types';
export const prerender = true;

export const load: LayoutServerLoad = async ({ url }) => {
  return {
    site: {
      title: 'SvelteKit Docs/Blog',
      description: 'SSG, RSS, ê²€ìƒ‰ê¹Œì§€ í•œ ë²ˆì—',
      url: url.origin
    }
  };
};
```

---

## 16.6 í™ˆ & ë¸”ë¡œê·¸ ëª©ë¡/í˜ì´ì§€ë„¤ì´ì…˜

### 16.6.1 í™ˆ (ìµœê·¼ ê¸€)
```svelte
<!-- src/routes/+page.svelte -->
<script lang="ts">
  import { posts } from '$lib/content/posts';
  const latest = posts.slice(0, 5);
</script>

<h1>ìµœì‹  ê¸€</h1>
<ul class="cards">
  {#each latest as p}
    <li>
      <a href={p.path}><strong>{p.title}</strong></a>
      <div class="muted">{p.date} â€¢ {p.readingTime}</div>
      <p>{p.summary}</p>
      {#if p.tags?.length}<small>#{p.tags.join(' #')}</small>{/if}
    </li>
  {/each}
</ul>

<style>
.cards{display:grid;gap:1rem}
.muted{color:#667}
</style>
```

### 16.6.2 ë¸”ë¡œê·¸ ì¸ë±ìŠ¤ + í˜ì´ì§€ë„¤ì´ì…˜
```svelte
<!-- src/routes/blog/+page.svelte -->
<script lang="ts">
  import { posts } from '$lib/content/posts';
  export let url: URL;
  const page = Number(url.searchParams.get('page') ?? 1);
  const size = 10;
  const start = (page - 1) * size;
  const items = posts.slice(start, start + size);
  const pages = Math.ceil(posts.length / size);
</script>

<h1>ë¸”ë¡œê·¸</h1>
<ul class="cards">
  {#each items as p}
    <li><a href={p.path}><strong>{p.title}</strong></a><div class="muted">{p.date} â€¢ {p.readingTime}</div><p>{p.summary}</p></li>
  {/each}
</ul>

<nav class="pager">
  {#if page>1}<a href={`?page=${page-1}`}>â† ì´ì „</a>{/if}
  <span>{page} / {pages}</span>
  {#if page<pages}<a href={`?page=${page+1}`}>ë‹¤ìŒ â†’</a>{/if}
</nav>
```

---

## 16.7 í¬ìŠ¤íŠ¸ ìƒì„¸(TOC/ë©”íƒ€/ìˆ˜í•™/ì½”ë“œ)

### 16.7.1 ë¡œë“œ(+page.ts)
```ts
// src/routes/blog/[slug]/+page.ts
import type { PageLoad } from './$types';
import { posts } from '$lib/content/posts';

export const load: PageLoad = async ({ params }) => {
  const meta = posts.find(p => p.slug === params.slug);
  if (!meta) return { notFound: true };
  // mdsvexëŠ” Svelte ì»´í¬ë„ŒíŠ¸ë¡œ ë³€í™˜ë¨ â†’ ë™ì  import
  const mod = await import(`../../../../content/posts/${meta.slug}.md`);
  return { meta, Content: mod.default };
};
```

> **ì£¼ì˜**: slugê°€ íŒŒì¼ëª…ê³¼ ì •í™•íˆ ë§¤í•‘ë˜ë„ë¡ `normalizeSlug` ê·œì¹™ì„ ë§ì¶˜ë‹¤.
> ë‚ ì§œ prefix ë“± ê·œì¹™ì„ ì‚¬ìš©í•˜ë©´ ë™ì¼í•˜ê²Œ ë³€í™˜í•´ì„œ import ê²½ë¡œë¥¼ êµ¬ì„±.

### 16.7.2 í˜ì´ì§€(+page.svelte)
```svelte
<!-- src/routes/blog/[slug]/+page.svelte -->
<script lang="ts">
  export let data: { meta?: any; Content?: any; notFound?: boolean };
</script>

{#if data.notFound}
  <h1>404</h1><p>ê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
{:else}
  <svelte:head>
    <title>{data.meta.title} â€“ SvelteKit Docs/Blog</title>
    <meta name="description" content={data.meta.summary}/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content={data.meta.title}/>
    <meta property="og:description" content={data.meta.summary}/>
    {#if data.meta.cover}<meta property="og:image" content={data.meta.cover}/>{/if}
    <link rel="canonical" href={data.meta.path}/>
  </svelte:head>

  <article class="prose">
    <header>
      <h1>{data.meta.title}</h1>
      <p class="muted">{data.meta.date} Â· {data.meta.readingTime}</p>
      {#if data.meta.tags?.length}
        <p class="tags">{#each data.meta.tags as t}<a href={`/tags/${t}`}>#{t}</a>{/each}</p>
      {/if}
    </header>

    <!-- ë³¸ë¬¸ (mdsvex ì»´í¬ë„ŒíŠ¸) -->
    <svelte:component this={data.Content} />

    <footer class="muted">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {data.meta.updated ?? data.meta.date}</footer>
  </article>
{/if}

<style>
.prose{max-width:800px}
.muted{color:#667}
.tags a{margin-right:.4rem}
</style>
```

### 16.7.3 ìˆ˜í•™(Markdown $$â€¦$$) â€” MathJax
> ìš”êµ¬ì‚¬í•­: â€œìˆ˜í•™ì´ ìˆìœ¼ë©´ **ë¬´ì¡°ê±´ $$ ë¡œ ê°ì‹¸** (MathJax)â€.

- `app.html`ì— MathJax ë¡œë”:
```html
<!-- src/app.html (ë°œì·Œ) -->
<head>
  <!-- ... -->
  <script>
    window.MathJax = { tex: { inlineMath: [['$', '$']], displayMath: [['$$','$$']] }, svg: { fontCache: 'global' } };
  </script>
  <script id="mathjax" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
```

- ë„¤ë¹„ê²Œì´ì…˜ í›„ ì¬ë Œë”(í´ë¼ì´ì–¸íŠ¸ í›…):
```ts
// src/hooks.client.ts
import { afterNavigate } from '$app/navigation';
afterNavigate(() => {
  // @ts-expect-error
  window.MathJax?.typeset?.();
});
```

> KaTeXë¡œ ì •ì  ë Œë”ë§ì„ í•˜ê³  ì‹¶ë‹¤ë©´ `rehype-katex` + CSSë¥¼ ì“°ë©´ ë” ë¹ ë¥´ë‹¤.
> ì—¬ê¸°ì„œëŠ” **ìš”êµ¬ì‚¬í•­ì— ë§ì¶° MathJax**ë¡œ êµ¬í˜„.

---

## 16.8 íƒœê·¸ í˜ì´ì§€

```svelte
<!-- src/routes/tags/[tag]/+page.svelte -->
<script lang="ts">
  import { posts } from '$lib/content/posts';
  export let params: { tag: string };
  const list = posts.filter(p => p.tags?.includes(params.tag));
</script>

<h1>#{params.tag}</h1>
{#if list.length===0}
  <p>ì´ íƒœê·¸ì˜ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
{:else}
  <ul class="cards">
    {#each list as p}
      <li><a href={p.path}><strong>{p.title}</strong></a> <span class="muted">{p.date}</span><p>{p.summary}</p></li>
    {/each}
  </ul>
{/if}
```

---

## 16.9 ì •ì  í˜ì´ì§€ (About ë“±)

```ts
// src/routes/pages/[slug]/+page.ts
import type { PageLoad } from './$types';
import { normalizeSlug } from '$lib/content/markdown';

const pageFiles = import.meta.glob('/content/pages/**/*.md');

export const load: PageLoad = async ({ params }) => {
  const slug = params.slug;
  const key = Object.keys(pageFiles).find(f => normalizeSlug(f).endsWith(slug));
  if (!key) return { notFound: true };
  const mod: any = await pageFiles[key]();
  return { Content: mod.default, meta: mod.metadata ?? { title: slug } };
};
```

```svelte
<!-- src/routes/pages/[slug]/+page.svelte -->
<script lang="ts">
  export let data;
</script>

{#if data.notFound}<h1>404</h1>{:else}
  <svelte:head><title>{data.meta.title}</title></svelte:head>
  <article class="prose"><svelte:component this={data.Content}/></article>
{/if}
```

---

## 16.10 RSS/Atom í”¼ë“œ

### 16.10.1 RSS ë¹Œë” ìœ í‹¸
```ts
// src/lib/content/rss.ts
import type { PostMeta } from './markdown';

const esc = (s: string) => s.replace(/[<>&'"]/g, (c) => ({'<':'&lt;','>':'&gt;','&':'&amp;',"'":'&apos;','"':'&quot;'}[c]!));

export function buildRSS({ site, items }: { site: { title:string; url:string; description:string }, items: PostMeta[] }) {
  const feedItems = items.map((p) => `
    <item>
      <title>${esc(p.title)}</title>
      <link>${site.url}${p.path}</link>
      <guid>${site.url}${p.path}</guid>
      <pubDate>${new Date(p.date ?? '').toUTCString()}</pubDate>
      <description>${esc(p.summary ?? '')}</description>
    </item>`).join('');

  return `<?xml version="1.0" encoding="UTF-8"?>
  <rss version="2.0">
    <channel>
      <title>${esc(site.title)}</title>
      <link>${site.url}</link>
      <description>${esc(site.description)}</description>
      ${feedItems}
    </channel>
  </rss>`;
}

export function buildAtom({ site, items }: { site: { title:string; url:string; description:string }, items: PostMeta[] }) {
  const updated = items[0]?.updated ?? items[0]?.date ?? new Date().toISOString();
  const entries = items.map((p) => `
    <entry>
      <title>${esc(p.title)}</title>
      <link href="${site.url}${p.path}"/>
      <id>${site.url}${p.path}</id>
      <updated>${new Date(p.updated ?? p.date ?? '').toISOString()}</updated>
      <summary>${esc(p.summary ?? '')}</summary>
    </entry>`).join('');

  return `<?xml version="1.0" encoding="utf-8"?>
  <feed xmlns="http://www.w3.org/2005/Atom">
    <title>${esc(site.title)}</title>
    <link href="${site.url}/atom.xml" rel="self"/>
    <link href="${site.url}"/>
    <updated>${new Date(updated).toISOString()}</updated>
    <id>${site.url}/</id>
    ${entries}
  </feed>`;
}
```

### 16.10.2 ì„œë²„ ë¼ìš°íŠ¸(+server.ts) â€” **SSG**
```ts
// src/routes/rss.xml/+server.ts
import type { RequestHandler } from './$types';
import { posts } from '$lib/content/posts';
import { buildRSS } from '$lib/content/rss';

export const prerender = true;

export const GET: RequestHandler = async ({ url }) => {
  const xml = buildRSS({
    site: { title:'SvelteKit Docs/Blog', url:url.origin, description:'SSG, RSS, ê²€ìƒ‰' },
    items: posts.slice(0, 50)
  });
  return new Response(xml, { headers: { 'content-type': 'application/rss+xml; charset=utf-8', 'cache-control':'public, max-age=3600' } });
};
```

```ts
// src/routes/atom.xml/+server.ts
import type { RequestHandler } from './$types';
import { posts } from '$lib/content/posts';
import { buildAtom } from '$lib/content/rss';

export const prerender = true;

export const GET: RequestHandler = async ({ url }) => {
  const xml = buildAtom({ site: { title:'SvelteKit Docs/Blog', url:url.origin, description:'SSG, RSS, ê²€ìƒ‰' }, items: posts.slice(0, 50) });
  return new Response(xml, { headers: { 'content-type': 'application/atom+xml; charset=utf-8', 'cache-control':'public, max-age=3600' } });
};
```

---

## 16.11 ê²€ìƒ‰(ì •ì  ì¸ë±ìŠ¤ + Minisearch)

### 16.11.1 ì„œë²„ì—ì„œ **ê²€ìƒ‰ JSON** ìƒì„±(SSG)
```ts
// src/lib/content/search.ts
import type { PostMeta } from './markdown';

// ê°„ë‹¨ ì¸ë±ìŠ¤: ì œëª©/ìš”ì•½/íƒœê·¸ë§Œ
export function buildSearchIndex(items: PostMeta[]) {
  return items.map(p => ({
    id: p.slug,
    url: p.path,
    title: p.title,
    summary: p.summary ?? '',
    tags: p.tags ?? []
  }));
}
```

```ts
// src/routes/search.json/+server.ts
import type { RequestHandler } from './$types';
import { posts } from '$lib/content/posts';
import { buildSearchIndex } from '$lib/content/search';

export const prerender = true;

export const GET: RequestHandler = async () => {
  const json = JSON.stringify(buildSearchIndex(posts));
  return new Response(json, { headers: { 'content-type':'application/json; charset=utf-8', 'cache-control': 'public, max-age=3600' } });
};
```

### 16.11.2 í´ë¼ì´ì–¸íŠ¸ ê²€ìƒ‰ UI (Minisearch)
```bash
pnpm add minisearch
```

```svelte
<!-- src/lib/components/SearchBox.svelte -->
<script lang="ts">
  import MiniSearch from 'minisearch';
  import { onMount } from 'svelte';

  let q = '';
  let hits: any[] = [];
  let ms: MiniSearch;

  onMount(async () => {
    const data = await fetch('/search.json').then(r=>r.json());
    ms = new MiniSearch({
      fields: ['title', 'summary', 'tags'], // ê²€ìƒ‰ í•„ë“œ
      storeFields: ['title', 'url', 'summary', 'tags']
    });
    ms.addAll(data);
  });

  $: if (ms && q.trim()) {
    hits = ms.search(q, { prefix: true, fuzzy: 0.1 }).slice(0, 10);
  } else { hits = []; }
</script>

<input placeholder="ê²€ìƒ‰â€¦" bind:value={q} aria-label="ê²€ìƒ‰" />
{#if hits.length}
  <ul class="panel" role="listbox">
    {#each hits as h}
      <li><a href={h.url}><strong>{@html h.title}</strong> <small>{h.tags?.join(', ')}</small><div class="muted">{h.summary}</div></a></li>
    {/each}
  </ul>
{/if}

<style>
.panel{position:absolute;z-index:20;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:.6rem;max-width:40rem;width:min(90vw,40rem);box-shadow:0 10px 30px rgba(0,0,0,.08)}
.muted{color:#667}
</style>
```

> ëŒ€ì•ˆ: **lunr**, **FlexSearch**. ëŒ€ìš©ëŸ‰ì´ë©´ **Algolia/Meilisearch**ë¡œ ì•„ì›ƒì†Œì‹±.

---

## 16.12 ë¬¸ì„œ(Documentation) ë ˆì´ì•„ì›ƒ

### 16.12.1 DOC ë ˆì´ì•„ì›ƒ
```svelte
<!-- src/routes/docs/+layout.svelte -->
<script lang="ts">
  import { docs, buildTree } from '$lib/content/docs';
  import DocSidebar from '$lib/components/DocSidebar.svelte';
  const tree = buildTree(docs);
</script>

<div class="doc">
  <aside><DocSidebar {tree}/></aside>
  <section><slot/></section>
</div>

<style>
.doc{display:grid;grid-template-columns:280px 1fr;gap:1.5rem}
@media (max-width: 900px){.doc{grid-template-columns:1fr}}
aside{position:sticky;top:1rem;align-self:start;height:max-content}
</style>
```

```svelte
<!-- src/lib/components/DocSidebar.svelte -->
<script lang="ts">
  export let tree: Record<string, any>;
</script>

<nav class="toc">
  {#each Object.entries(tree) as [seg, node]}
    <details open>
      <summary>{node.title}</summary>
      {#if node.children}
        <ul>
          {#each Object.values(node.children) as child}
            <li>
              {#if child.path}<a href={child.path}>{child.title}</a>{:else}{child.title}{/if}
              {#if child.children}
                <ul>
                  {#each Object.values(child.children) as sub}
                    <li>{#if sub.path}<a href={sub.path}>{sub.title}</a>{:else}{sub.title}{/if}</li>
                  {/each}
                </ul>
              {/if}
            </li>
          {/each}
        </ul>
      {/if}
    </details>
  {/each}
</nav>

<style>
summary{cursor:pointer}
ul{list-style:none;padding-left:1rem}
a{color:#0ea5e9}
</style>
```

### 16.12.2 ë¬¸ì„œ í˜ì´ì§€ ë¡œë“œ
```ts
// src/routes/docs/[slug]/+page.ts
import type { PageLoad } from './$types';
import { docs } from '$lib/content/docs';

const fileMap = import.meta.glob('/content/docs/**/*.md');

export const load: PageLoad = async ({ params }) => {
  const meta = docs.find(d => d.slug === params.slug);
  if (!meta) return { notFound: true };

  const fileKey = Object.keys(fileMap).find(k => k.includes(meta.slug));
  if (!fileKey) return { notFound: true };

  const mod: any = await fileMap[fileKey]!();
  return { meta, Content: mod.default };
};
```

```svelte
<!-- src/routes/docs/[slug]/+page.svelte -->
<script lang="ts">
  export let data;
</script>

{#if data.notFound}<h1>404</h1>{:else}
  <svelte:head><title>{data.meta.title} â€“ ë¬¸ì„œ</title></svelte:head>
  <article class="prose">
    <h1>{data.meta.title}</h1>
    <svelte:component this={data.Content}/>
  </article>
{/if}
```

---

## 16.13 SSG ì—”íŠ¸ë¦¬(ëª¨ë“  ì •ì  ê²½ë¡œ ë‚´ë³´ë‚´ê¸°)

> SvelteKit **ì •ì  í”„ë¦¬ë Œë”**ì—ì„œëŠ” í¬ë¡¤ë§ìœ¼ë¡œ ì¶©ë¶„íˆ ë°œê²¬ë˜ì§€ ì•ŠëŠ” ë¼ìš°íŠ¸ë¥¼ **entries**ì— ì¶”ê°€í•´ì¤˜ì•¼ í•œë‹¤. (ì˜ˆ: `/blog/[slug]`, `/docs/[slug]`, `/tags/[tag]`, `/pages/[slug]`)

```ts
// src/routes/docs/+layout.ts (í˜¹ì€ ë£¨íŠ¸ +layout.ts)
import type { EntryGenerator } from './$types';
import { posts } from '$lib/content/posts';
import { docs } from '$lib/content/docs';

export const prerender = true;

export const entries: EntryGenerator = () => {
  const blog = posts.map(p => `/blog/${p.slug}`);
  const doc = docs.map(d => `/docs/${d.slug}`);
  const tags = Array.from(new Set(posts.flatMap(p => p.tags ?? []))).map(t => `/tags/${t}`);
  const pages = ['/pages/about']; // í•„ìš” ì‹œ ì¶”ê°€
  return ['/', '/blog', '/docs', ...blog, ...doc, ...tags, ...pages, '/rss.xml', '/atom.xml', '/search.json'];
};
```

---

## 16.14 ìŠ¤íƒ€ì¼ & í”„ë¡œì¦ˆ

### 16.14.1 í”„ë¡œì¦ˆ ê¸°ë³¸
```css
/* src/lib/styles/prose.css */
.prose { line-height: 1.7; }
.prose h1, .prose h2, .prose h3 { scroll-margin-top: 5rem; }
.prose pre { padding: .8rem; border-radius: 12px; overflow:auto; border:1px solid #eee; }
.prose img { max-width: 100%; border-radius: 12px; }
.prose table { border-collapse: collapse; }
.prose th, .prose td { border: 1px solid #eee; padding:.4rem .6rem; }
.toc { border-left: 3px solid #eee; padding-left: .8rem; margin: 1rem 0; }
```

ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì—ì„œ í•œ ë²ˆ ì„í¬íŠ¸:
```svelte
<!-- src/routes/+layout.svelte -->
<script>
  import '$lib/styles/prose.css';
</script>
```

---

## 16.15 ì´ë¯¸ì§€ ìµœì í™”(ì„ íƒ)

- ì •ì  `/static/images/*`ì— WebP/AVIF ì œê³µ
- LCP í›„ë³´ëŠ” `<link rel="preload" as="image">`
- ë³¸ë¬¸ ì´ë¯¸ì§€ëŠ” `width/height` ë˜ëŠ” CSS `aspect-ratio`ë¡œ CLS ë°©ì§€

```svelte
<picture>
  <source srcset="/images/cover.avif" type="image/avif"/>
  <source srcset="/images/cover.webp" type="image/webp"/>
  <img src="/images/cover.jpg" width="1200" height="630" alt="cover"/>
</picture>
```

---

## 16.16 ì ‘ê·¼ì„± & SEO

- `<svelte:head>`ì—ì„œ ê° í˜ì´ì§€ë³„ **title/description/canonical/OG**
- ë¬¸ì„œ/í¬ìŠ¤íŠ¸ h2/h3ì— ìë™ slug(ë§í¬ ë³µì‚¬ ìš©ì´)
- í‚¤ë³´ë“œ ë‚´ë¹„/ìŠ¤í‚µ ë§í¬/ëª…í™•í•œ í¬ì»¤ìŠ¤ í‘œì‹œ
- `robots.txt`/`sitemap.xml`(14ì¥/11ì¥ ì˜ˆì œ ë³€í˜•)

---

## 16.17 ë°°í¬(ì •ì  í˜¸ìŠ¤íŒ…)

- `adapter-static`ìœ¼ë¡œ **ì •ì  íŒŒì¼** ìƒì„± â†’ Netlify/Vercel/Cloudflare Pagesì— ì—…ë¡œë“œ
- ì»¤ìŠ¤í…€ ë„ë©”ì¸ + HTTPS
- ìºì‹œ: `/_app/immutable` ìì‚°ì€ ë¬´ê¸°í•œ ìºì‹œ, í˜ì´ì§€ëŠ” **í”„ë¦¬ë Œë” ê²°ê³¼** ì œê³µ

`package.json`:
```json
{
  "scripts": {
    "build": "svelte-kit build",
    "preview": "svelte-kit preview"
  }
}
```

---

## 16.18 í™•ì¥ ê¸°ëŠ¥

1) **ì½”ë©˜íŠ¸**: GitHub Issues/Utterances â†’ ì •ì  í˜ì´ì§€ì— ìœ„ì ¯ ì‚½ì…
2) **OG ì´ë¯¸ì§€**: `/og/[slug]` ì„œë²„ ë¼ìš°íŠ¸ë¡œ ë™ì  ì´ë¯¸ì§€(11ì¥ ì°¸ì¡°) í”„ë¦¬ë Œë”
3) **ë‹¤êµ­ì–´**: `[[lang]]` ì„¸ê·¸ë¨¼íŠ¸ + `hreflang`(11ì¥)
4) **ë²„ì „ ë¬¸ì„œ**: `/docs/v1`, `/docs/v2` í´ë” ë¶„ë¦¬ + ë²„ì „ ìŠ¤ìœ„ì²˜
5) **ê²€ìƒ‰ ê°•í™”**: ì¹´í…Œê³ ë¦¬/ê°€ì¤‘ì¹˜/ìŠ¤ë‹ˆí« í•˜ì´ë¼ì´íŠ¸, Web Workerë¡œ ì¸ë±ìŠ¤ ë¡œë“œ
6) **ë“œë˜í”„íŠ¸ ë¯¸ë¦¬ë³´ê¸°**: `draft: true`ëŠ” ë¹Œë“œ ì œì™¸. í”„ë¦¬ë·° í† í°ìœ¼ë¡œ ì„ì‹œ ë¹Œë“œ

---

## 16.19 ì „ì²´ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ìš”ì•½)

- [ ] `adapter-static` + `prerender = true`
- [ ] `import.meta.glob`ìœ¼ë¡œ **ëª¨ë“  ì½˜í…ì¸ ** ë¡œë“œ â†’ ë©”íƒ€/TOC/ì½ê¸°ì‹œê°„
- [ ] ë¼ìš°íŠ¸ `entries`ì— **ë™ì  ê²½ë¡œ**(blog/docs/tags/pages) ë“±ë¡
- [ ] **RSS/Atom**: `/rss.xml` `/atom.xml` ì •ì  ìƒì„±
- [ ] **ê²€ìƒ‰**: `/search.json` ì •ì  ìƒì„± + **Minisearch UI**
- [ ] **ìˆ˜í•™**: $$â€¦$$ + MathJax(typeset after navigate)
- [ ] **ì½”ë“œ í•˜ì´ë¼ì´íŠ¸**: Shiki( rehype-pretty-code )
- [ ] **ì ‘ê·¼ì„±/SEO**: ì œëª©/ìš”ì•½/OG/í‚¤ë³´ë“œ/ëŒ€ë¹„
- [ ] **ì´ë¯¸ì§€/í°íŠ¸**: LCP ìµœì í™”, í­/ë†’ì´ ì§€ì •

---

## 16.20 ë§ˆë¬´ë¦¬

- ì´ ì˜ˆì œëŠ” **SSG ë¸”ë¡œê·¸/ë¬¸ì„œ ì‚¬ì´íŠ¸ì˜ ê¸°ë³¸ê¸°**ë¥¼ ëª¨ë‘ ë‹´ì•˜ë‹¤:
  - **ë¹ ë¥¸ ë°°í¬/ë‚®ì€ ë¹„ìš©**(ì •ì  í˜¸ìŠ¤íŒ…)
  - **ì™„ì „í•œ SEO**(ì •ì  HTML + í”¼ë“œ)
  - **ì˜¤í”„ë¼ì¸ ì¹œí™”**(í´ë¼ì´ì–¸íŠ¸ ê²€ìƒ‰)
- ì½˜í…ì¸ ë§Œ ì±„ìš°ë©´ **ì¦‰ì‹œ ìš´ì˜ ê°€ëŠ¥**í•˜ë©°, í•„ìš” ì‹œ 14ì¥(ë°°í¬/ìš´ì˜), 12ì¥(ì„±ëŠ¥), 11ì¥(SEO/A11y) ë‚´ìš©ì„ í•©ì³ **í”„ë¡œë•ì…˜ í’ˆì§ˆ**ë¡œ í™•ì¥í•˜ë©´ ëœë‹¤.
