---
layout: post
title: TCPIP - BOOTP
date: 2025-12-02 22:25:23 +0900
category: TCPIP
---
# TCP/IP 부트스트랩 프로토콜 (BOOTP)

## BOOTP의 역사적 배경과 설계 철학

1980년대 중반, TCP/IP 네트워크가 학술 및 연구 기관을 넘어 기업 환경으로 확장되면서 네트워크 관리의 새로운 도전과제가 부상했습니다. 당시 네트워크 관리자는 수백 대의 호스트에 IP 주소, 서브넷 마스크, 게이트웨이 주소 등을 수동으로 구성해야 했으며, 특히 디스크리스 워크스테이션(dickless workstation)이 보급되면서 네트워크를 통한 원격 부팅 체계가 절실히 필요해졌습니다.

BOOTP(Bootstrap Protocol)는 1985년 RFC 951로 표준화된 프로토콜로, "네트워크 부팅을 위한 부트스트랩 메커니즘"이라는 원래의 명칭이 시사하듯 단순한 IP 주소 할당을 넘어 완전한 네트워크 부팅 솔루션을 제공하려는 야심찬 목표를 가지고 있었습니다. 이 프로토콜은 이전의 RARP(Reverse Address Resolution Protocol)가 가진 근본적 한계—서브넷 경계를 넘지 못하는 문제, 추가 구성 파라미터 전달 불가능—를 극복하기 위해 설계되었습니다.

BOOTP의 설계 철학은 당시의 기술적 제약 속에서도 최대한의 유연성을 확보하는 데 있었습니다. 고정된 300바이트 메시지 크기, 확장을 위한 벤더 특정 영역, 릴레이 에이전트 개념 등은 모두 제한된 네트워크 자원과 다양한 하드웨어 환경을 고려한 실용적 선택이었습니다.

## BOOTP 네트워크 토폴로지와 통신 흐름

### 기본 BOOTP 통신 시퀀스

```
BOOTP 기본 통신 시퀀스 (단일 세그먼트)
┌───────────┐          ┌───────────┐
│ BOOTP     │          │ BOOTP     │
│ 클라이언트│          │ 서버      │
└─────┬─────┘          └─────┬─────┘
      │                      │
      │ 1. BOOTREQUEST       │
      │  SRC: 0.0.0.0:68     │
      │  DST: 255.255.255.255:67│
      │  MAC: AA:BB:CC:DD:EE:FF│
      │──────────────────────>│
      │                      │
      │ 2. 서버 처리         │
      │   DB 조회: MAC→IP    │
      │   구성 정보 준비     │
      │                      │
      │ 3. BOOTREPLY         │
      │  SRC: 서버IP:67      │
      │  DST: 255.255.255.255:68│
      │  YOUR_IP: 192.168.1.100│
      │<──────────────────────│
      │                      │
      │ 4. 클라이언트 구성   │
      │   IP: 192.168.1.100  │
      │   게이트웨이: 192.168.1.1│
      │   DNS: 8.8.8.8       │
      │                      │
      │ 5. 추가 단계 (선택)  │
      │   TFTP로 부팅 파일 다운로드│
      │   운영체제 부팅      │
      │                      │
```

### 다중 세그먼트 환경의 릴레이 에이전트 동작

```
BOOTP 릴레이 에이전트 시나리오 (3-세그먼트 네트워크)
┌───────────┐    ┌──────────────┐    ┌───────────┐    ┌───────────┐
│ 클라이언트│    │ 릴레이       │    │ 릴레이    │    │ BOOTP     │
│ 세그먼트 A│    │ 에이전트 1   │    │ 에이전트 2│    │ 서버      │
│ 10.1.1.0/24│   │ (라우터)    │    │ (라우터)  │    │ 세그먼트 C│
│           │    │ 10.1.1.1/24  │    │ 172.16.1.1│    │ 192.168.1.0│
│           │    │ 172.16.1.254 │    │ 192.168.1.254│  │           │
└─────┬─────┘    └──────┬───────┘    └─────┬─────┘    └─────┬─────┘
      │                 │                  │                │
      │ 1. BOOTREQUEST  │                  │                │
      │ SRC: 0.0.0.0:68 │                  │                │
      │ DST: 255.255.255.255:67│           │                │
      │────────────────>│                  │                │
      │                 │                  │                │
      │ 2. 릴레이 처리  │                  │                │
      │ GIADDR ← 10.1.1.1│                  │                │
      │ HOPS: 0 → 1     │                  │                │
      │                 │ 3. 포워딩        │                │
      │                 │ SRC: 10.1.1.1:67 │                │
      │                 │ DST: 172.16.1.1:67│               │
      │                 │──────────────────>│               │
      │                 │                  │                │
      │                 │                  │ 4. 릴레이 처리 │
      │                 │                  │ GIADDR: 10.1.1.1│
      │                 │                  │ HOPS: 1 → 2    │
      │                 │                  │                │
      │                 │                  │ 5. 포워딩      │
      │                 │                  │ SRC: 172.16.1.1:67│
      │                 │                  │ DST: 192.168.1.10:67│
      │                 │                  │────────────────>│
      │                 │                  │                │
      │                 │                  │                │ 6. 서버 처리
      │                 │                  │                │ GIADDR=10.1.1.1 확인
      │                 │                  │                │ 클라이언트 서브넷 인식
      │                 │                  │                │
      │                 │                  │                │ 7. BOOTREPLY
      │                 │                  │                │ SRC: 192.168.1.10:67
      │                 │                  │                │ DST: 172.16.1.1:67
      │                 │                  │<───────────────│
      │                 │                  │                │
      │                 │                  │ 8. 릴레이 전달 │
      │                 │                  │ DST: 10.1.1.1:67│
      │                 │<─────────────────│                │
      │                 │                  │                │
      │                 │ 9. 최종 전달     │                │
      │                 │ 브로드캐스트     │                │
      │<────────────────│                  │                │
```

## BOOTP의 핵심 작동 메커니즘

### 클라이언트-서버 상호작용의 기술적 특성

BOOTP는 클라이언트가 아직 IP 주소를 갖지 않은 상태에서의 통신이라는 독특한 문제를 해결해야 했습니다. 이를 위해 프로토콜은 몇 가지 혁신적인 접근법을 도입했습니다.

**이중 브로드캐스트 메커니즘**이 그 핵심입니다. 클라이언트는 자신의 IP 주소가 0.0.0.0인 상태에서 브로드캐스트 주소 255.255.255.255로 요청을 전송합니다. 서버 역시 클라이언트의 정확한 IP 주소를 알지 못하므로 응답도 브로드캐스트로 전송합니다.

포트 할당에서도 BOOTP는 독특한 접근법을 취했습니다. 클라이언트는 UDP 68번 포트를 사용하고 서버는 UDP 67번 포트를 사용하는데, 이는 일반적인 클라이언트-서버 모델과 반대되는 배치입니다. 이러한 설계는 다중 클라이언트 환경에서의 패킷 처리를 최적화하기 위한 의도적 선택이었습니다.

### 트랜잭션 관리와 신뢰성 보장

BOOTP는 신뢰할 수 없는 UDP 프로토콜 위에서 동작하면서도 신뢰성 있는 트랜잭션 관리를 구현해야 했습니다. 이를 위해 프로토콜은 여러 가지 메커니즘을 도입했습니다.

**트랜잭션 ID**는 각 요청-응답 쌍을 고유하게 식별하는 4바이트 값으로, 클라이언트가 무작위로 생성하고 서버가 동일한 값으로 응답합니다. 이 메커니즘은 네트워크 지연이나 패킷 재전송으로 인한 중복 응답 문제를 해결합니다.

**지수 백오프 재시도 알고리즘**은 네트워크 장애 상황에서의 시스템 안정성을 보장합니다. 초기 요청 후 응답이 없으면 클라이언트는 4초, 8초, 16초, 32초 등 지수적으로 증가하는 간격으로 재시도합니다. 이 알고리즘은 네트워크 과부하를 방지하면서도 중요한 부팅 과정이 완료될 가능성을 최대화합니다.

**초과 시간(Seconds Elapsed)** 필드는 부팅 과정의 진행 상황을 추적하는 데 사용됩니다. 이 값은 클라이언트가 부팅을 시작한 후 경과한 시간을 초 단위로 기록하며, 서버가 여러 클라이언트의 요청을 처리할 때 우선순위를 결정하는 참고 정보로 활용됩니다.

## BOOTP 메시지 형식의 설계적 우아함

### 전체 메시지 구조 레이아웃

```
BOOTP 메시지 (300 바이트 고정 길이)
바이트 오프셋 ┌─────────────────────────────────────────────────────────┐
             │                    UDP 헤더 (8바이트)                   │
             ├─────────────────────────────────────────────────────────┤
        0    │ OP (1) │ HTYPE (1)│ HLEN (1) │ HOPS (1) │               │
             ├─────────────────────────────────────────────────────────┤
        4    │              트랜잭션 ID (4바이트)                      │
             ├─────────────────────────────────────────────────────────┤
        8    │      초과 시간 (2바이트)     │    플래그 (2바이트)      │
             ├─────────────────────────────────────────────────────────┤
       12    │                    클라이언트 IP 주소 (4바이트)         │
             ├─────────────────────────────────────────────────────────┤
       16    │                    "당신의" IP 주소 (4바이트)           │
             ├─────────────────────────────────────────────────────────┤
       20    │                    서버 IP 주소 (4바이트)               │
             ├─────────────────────────────────────────────────────────┤
       24    │                    게이트웨이 IP 주소 (4바이트)         │
             ├─────────────────────────────────────────────────────────┤
       28    │                    클라이언트 하드웨어 주소 (16바이트)  │
             │  실제 주소 길이: HLEN (예: 6), 나머지: 0으로 패딩       │
             ├─────────────────────────────────────────────────────────┤
       44    │                    서버 호스트 이름 (64바이트)          │
             │  NULL 종료 문자열, 나머지: 0으로 패딩                  │
             ├─────────────────────────────────────────────────────────┤
      108    │                    부팅 파일 이름 (128바이트)           │
             │  NULL 종료 문자열, 나머지: 0으로 패딩                  │
             ├─────────────────────────────────────────────────────────┤
      236    │                    벤더 특정 영역 (64바이트)            │
             │  옵션 4: 99.130.83.99 (마법 쿠키)                      │
             │  나머지 60바이트: 가변 길이 옵션들                     │
             └─────────────────────────────────────────────────────────┘
```

### 메시지 필드의 세부적 의미

**하드웨어 타입(HTYPE)과 하드웨어 길이(HLEN)** 필드는 BOOTP가 이더넷에 국한되지 않는 다양한 네트워크 기술을 지원할 수 있게 하는 핵심 요소입니다. HTYPE 값 1은 10Mb 이더넷을, 6은 IEEE 802 네트워크를, 11은 LocalTalk을 나타냅니다. 이 다중 하드웨어 지원은 당시 이기종 네트워크 환경이 혼재하던 상황에서 BOOTP의 채택을 촉진한 중요한 요소였습니다.

**HOPS 필드**는 릴레이 에이전트 체인에서의 라우팅 루프 방지를 위한 간단하면서도 효과적인 메커니즘입니다. 각 릴레이 에이전트는 패킷을 전달할 때마다 이 값을 증가시키고, 값이 임계치(일반적으로 16)에 도달하면 패킷을 폐기합니다.

**게이트웨이 IP 주소(GIADDR)** 필드는 릴레이 에이전트 아키텍처의 핵심입니다. 이 필드는 릴레이 에이전트가 자신의 IP 주소로 설정함으로써 서버가 클라이언트가 위치한 실제 서브넷을 식별할 수 있게 합니다. 서버는 이 정보를 기반으로 적절한 IP 주소 풀에서 주소를 할당하고, 해당 서브넷에 맞는 구성 파라미터(서브넷 마스크, 게이트웨이 등)를 제공합니다.

### 클라이언트 하드웨어 주소 필드의 설계 철학

16바이트의 클라이언트 하드웨어 주소 필드는 다양한 네트워크 기술의 주소 길이 차이를 수용하기 위한 고안이었습니다. 이더넷의 6바이트 MAC 주소는 이 필드의 처음 6바이트만 사용하고 나머지는 0으로 채웁니다. 반면 더 긴 주소를 가진 네트워크 기술도 이 필드에 전체 주소를 수용할 수 있었습니다.

이 설계는 "최대 공통 분모" 접근법의 전형으로, 모든 가능한 하드웨어를 지원하기 위해 충분한 공간을 할당하면서도 실제 사용에서는 효율적으로 공간을 활용할 수 있게 했습니다.

## 벤더 특정 영역: 확장성의 시작

RFC 1048에서 도입된 벤더 특정 영역은 BOOTP의 가장 중요한 진화 중 하나입니다. 이 64바이트 영역은 "마법 쿠키" 메커니즘을 통해 구조화된 확장 시스템으로 변환되었습니다.

### 마법 쿠키의 기술적 의미

값 99.130.83.99(16진수로 0x63 0x82 0x53 0x63)으로 시작하는 마법 쿠키는 단순한 식별자를 넘어 중요한 설계 철학을 구현합니다. 이 값은:
1. 확장된 옵션 형식의 시작을 명확히 표시
2. 이전 버전 BOOTP 구현과의 호환성 유지 (구형 서버는 이 영역을 무시함)
3. 옵션 파싱의 표준화된 접근법 제공

### 벤더 특정 영역 옵션 형식

```
벤더 특정 영역 구조 (64바이트):
┌─────────────────────┬─────────────────────┬─────────────────────┬─────────────────────┐
│  바이트 0-3: 마법 쿠키                   │  바이트 4-63: 옵션들                        │
│  99.130.83.99 (0x63 0x82 0x53 0x63)      │  TLV (Type-Length-Value) 형식              │
└─────────────────────┴─────────────────────┴─────────────────────┴─────────────────────┘

옵션 TLV 형식 상세:
┌──────────┬──────────┬─────────────────────────────────┐
│  타입    │  길이    │  값 (길이 바이트)                │
│ (1바이트)│ (1바이트)│                                 │
└──────────┴──────────┴─────────────────────────────────┘
```

### 핵심 옵션들의 실제적 의미

**서브넷 마스크(옵션 1)**와 **라우터 주소(옵션 3)**는 BOOTP가 RARP의 근본적 한계를 극복하게 한 결정적 요소들입니다. 이 옵션들을 통해 클라이언트는 단순한 IP 주소뿐만 아니라 네트워크에 정상적으로 참여하는 데 필요한 모든 기본 구성을 얻을 수 있었습니다.

**DNS 서버(옵션 6)**와 **도메인 이름(옵션 15)** 옵션은 BOOTP가 단순한 네트워크 계층 구성을 넘어 응용 계층 서비스까지 지원할 수 있음을 보여줍니다. 특히 DNS 서버 정보의 자동 구성은 대규모 네트워크에서의 관리 부담을 획기적으로 줄였습니다.

**부팅 파일 이름** 필드(메인 메시지의 128바이트 영역)는 BOOTP의 원래 목적—네트워크 부팅—을 구현하는 핵심 요소입니다. 이 필드에 지정된 파일은 이후 TFTP(Trivial File Transfer Protocol)를 통해 다운로드되어 클라이언트에서 실행됩니다. 부팅 파일은 운영체제 커널일 수도 있고, 더 작은 부트로더일 수도 있었으며, 이 유연성이 BOOTP를 다양한 하드웨어와 소프트웨어 환경에 적합하게 만들었습니다.

## BOOTP 트랜잭션 상태 다이어그램

### 클라이언트 상태 머신

```
BOOTP 클라이언트 상태 다이어그램:
┌─────────────────────────────────────────────────────────────┐
│                      초기 상태 (INIT)                       │
│  - 네트워크 인터페이스 초기화                              │
│  - IP 주소: 0.0.0.0 설정                                    │
│  - 소켓 바인딩: 0.0.0.0:68                                  │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                   선택 상태 (SELECTING)                     │
│  - BOOTREQUEST 전송                                        │
│  - 트랜잭션 ID 생성                                        │
│  - 초과 시간 카운터 시작                                   │
│  - 재시도 타이머 설정 (초기: 4초)                          │
└──────────────┬──────────────────────────────────────────────┘
               │
        ┌──────┴──────┐
        │             │
        ▼             ▼
┌─────────────┐ ┌─────────────┐
│ BOOTREPLY   │ │ 타임아웃    │
│ 수신        │ │ 발생        │
└─────────────┘ └─────────────┘
        │             │
        ▼             │
┌─────────────┐       │
│ 응답 검증   │       │
│ - 트랜잭션ID│       │
│ - 하드웨어주소│     │
└─────────────┘       │
        │             │
        ▼             │
┌─────────────┐       │
│ 구성 적용   │       │
│ - IP 주소   │       │
│ - 서브넷마스크│     │
│ - 게이트웨이 │     │
└─────────────┘       │
        │             │
        ▼             │
┌─────────────┐       │
│ 부팅 파일   │◄──────┘
│ 확인        │
└─────────────┘
        │
        ▼
┌─────────────────────────────────────────────────────────────┐
│                    TFTP 상태 (TFTP)                         │
│  - 부팅 파일 이름 있으면:                                  │
│    1. TFTP 클라이언트 시작                                 │
│    2. 서버IP:69에 연결                                     │
│    3. 파일 다운로드                                        │
│  - 없으면: 운영체제 로드 대기                               │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                    완료 상태 (COMPLETE)                     │
│  - 네트워크 구성 완료                                      │
│  - 부팅 파일 실행 (있는 경우)                              │
│  - 시스템 초기화 계속                                      │
└─────────────────────────────────────────────────────────────┘
```

### 서버 상태 머신

```
BOOTP 서버 상태 다이어그램:
┌─────────────────────────────────────────────────────────────┐
│                       대기 상태 (IDLE)                      │
│  - UDP 67번 포트 수신 대기                                  │
│  - 구성 데이터베이스 로드                                   │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                   요청 수신 상태 (RECV)                     │
│  - 패킷 소스: 브로드캐스트 또는 릴레이                     │
│  - HOPS 필드 확인 (최대값 초과시 폐기)                     │
│  - GIADDR 필드 확인 (릴레이 여부 판단)                     │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                   클라이언트 인증 상태 (AUTH)               │
│  - 하드웨어 주소 추출                                      │
│  - 데이터베이스 조회                                       │
│    ┌─────────────────────────────────┐                     │
│    │ 데이터베이스 레이아웃           │                     │
│    │ MAC 주소       │ IP 주소        │ 구성 정보          │
│    ├─────────────────────────────────┤                     │
│    │ AA:BB:CC:DD:EE:FF │ 192.168.1.100│ subnet=255.255.255.0│
│    │ 00:11:22:33:44:55 │ 192.168.1.101│ gateway=192.168.1.1│
│    │ ...              │ ...          │ ...               │
│    └─────────────────────────────────┘                     │
└──────────────┬──────────────────────────────────────────────┘
               │
        ┌──────┴──────┐
        │             │
        ▼             ▼
┌─────────────┐ ┌─────────────┐
│ 레코드      │ │ 레코드      │
│ 발견        │ │ 없음        │
└─────────────┘ └─────────────┘
        │             │
        ▼             ▼
┌─────────────┐ ┌─────────────┐
│ 구성 정보   │ │ 기본 구성   │
│ 추출        │ │ 적용        │
│ - IP 주소   │ │ - 풀에서 IP │
│ - 부팅 파일 │ │   주소 선택 │
│ - 옵션들    │ │ - 기본 옵션 │
└─────────────┘ └─────────────┘
        │             │
        └─────┬───────┘
              │
              ▼
┌─────────────────────────────────────────────────────────────┐
│                   응답 생성 상태 (GEN)                      │
│  - BOOTREPLY 패킷 구성                                     │
│  - 트랜잭션 ID 복사                                        │
│  - "당신의 IP" 필드 설정                                   │
│  - 옵션들 추가                                             │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                   응답 전송 상태 (SEND)                     │
│  - GIADDR 있으면: 유니캐스트로 릴레이에 전송               │
│  - GIADDR 없으면: 브로드캐스트로 클라이언트 세그먼트에 전송│
│  - 플래그 비트 확인 (브로드캐스트 요청 여부)               │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
┌─────────────────────────────────────────────────────────────┐
│                   로깅 상태 (LOG)                           │
│  - 트랜잭션 로그 기록                                      │
│    ┌──────────────────────────────────────┐                │
│    │ 시간       │ 클라이언트     │ 할당IP │ 상태          │
│    │──────────────────────────────────────│                │
│    │ 10:30:01  │ AA:BB:CC:DD:EE:FF│ 192.168.1.100│ 성공   │
│    │ 10:30:05  │ 00:11:22:33:44:55│ (없음)      │ 실패   │
│    └──────────────────────────────────────┘                │
│  - 통계 업데이트                                           │
└──────────────┬──────────────────────────────────────────────┘
               │
               ▼
            [IDLE]
            (대기 상태로 복귀)
```

## BOOTP 네트워크 토폴로지 시나리오

### 시나리오 1: 단일 세그먼트 소규모 네트워크

```
단일 세그먼트 BOOTP 환경 (클래스 C 네트워크):
┌─────────────────────────────────────────────────────────────┐
│ 세그먼트: 192.168.1.0/24                                    │
│ 브로드캐스트 도메인: 전체 세그먼트                          │
│                                                            │
│         ┌──────────┐       ┌──────────┐       ┌──────────┐ │
│         │ 워크스테이션1    │ 워크스테이션2    │ 워크스테이션3│ │
│         │ MAC: AA:BB:CC:   │ MAC: BB:CC:DD:   │ MAC: CC:DD:EE:│
│         │       DD:EE:FF   │       EE:FF:00   │       FF:00:11│
│         │ IP: 192.168.1.100│ IP: 192.168.1.101│ IP: 192.168.1.102│
│         └─────┬────┘       └─────┬────┘       └─────┬────┘ │
│               │                  │                  │       │
│               ├──────────────────┼──────────────────┤       │
│               │                  │                  │       │
│           ┌───┴───┐          ┌───┴───┐          ┌───┴───┐   │
│           │  Hub/ │          │  Hub/ │          │  Hub/ │   │
│           │ Switch│          │ Switch│          │ Switch│   │
│           └───┬───┘          └───┬───┘          └───┬───┘   │
│               │                  │                  │       │
│               └──────────────────┼──────────────────┘       │
│                                  │                          │
│                            ┌─────┴─────┐                    │
│                            │ BOOTP 서버│                    │
│                            │ IP: 192.168.1.10               │
│                            │ TFTP 서버 포함                 │
│                            │ /tftpboot/ 디렉토리:           │
│                            │   - vmlinuz (Linux 커널)       │
│                            │   - boot.img (부트 이미지)     │
│                            │   - dosboot.com (DOS 부트)     │
│                            └───────────┘                    │
└─────────────────────────────────────────────────────────────┘

BOOTP 데이터베이스 내용 (텍스트 파일 형식):
# 주석: MAC 주소, IP 주소, 호스트명, 부팅 파일
AA:BB:CC:DD:EE:FF 192.168.1.100 ws1.example.com vmlinuz
BB:CC:DD:EE:FF:00 192.168.1.101 ws2.example.com boot.img
CC:DD:EE:FF:00:11 192.168.1.102 ws3.example.com dosboot.com
# 기본 항목 (MAC 주소 없는 경우)
* 192.168.1.200 default.example.com default.boot
```

## BOOTP의 실제 구현과 운영 고려사항

### 서버 측 구현 패턴

BOOTP 서버 구현은 일반적으로 두 가지 주요 구성 요소로 이루어집니다: **구성 데이터베이스**와 **패킷 처리 엔진**.

구성 데이터베이스는 클라이언트의 하드웨어 주소(MAC 주소)와 할당할 IP 주소의 매핑을 저장합니다. 초기 구현에서는 단순한 텍스트 파일이 사용되었지만, 이후 데이터베이스 기반 시스템으로 발전했습니다. 이 매핑 테이블은 정적이었기 때문에 각 클라이언트의 추가 정보(호스트 이름, 부팅 파일 경로, 임대 기간 등)도 함께 저장되었습니다.

패킷 처리 엔진은 UDP 67번 포트에서 수신 대기하며, 들어오는 BOOTREQUEST 패킷을 처리합니다. 처리 과정은 다음과 같습니다:

1. 클라이언트 하드웨어 주소 추출
2. 구성 데이터베이스 조회
3. 해당 클라이언트에 대한 구성 정보 수집
4. BOOTREPLY 패킷 구성
5. 응답 전송 (GIADDR 필드가 있으면 해당 주소로, 없으면 브로드캐스트로)

### 클라이언트 측의 부팅 시퀀스

디스크리스 워크스테이션의 부팅 과정은 정교하게 조율된 일련의 단계로 이루어집니다:

**ROM 기반 부트로더 단계**: 머신 전원이 켜지면 네트워크 카드의 ROM에 내장된 작은 부트로더가 실행됩니다. 이 코드는 최소한의 네트워크 스택을 초기화하고 BOOTP 클라이언트 기능을 포함합니다.

**BOOTP 트랜잭션 단계**: 부트로더는 BOOTP 요청을 브로드캐스트하고 응답을 기다립니다. 성공적인 응답을 받으면 네트워크 인터페이스를 구성하고 부팅 파일 정보를 추출합니다.

**TFTP 파일 전송 단계**: 부트로더는 BOOTP 응답에 지정된 부팅 파일을 TFTP로 다운로드합니다. TFTP는 간단한 프로토콜이므로 작은 ROM 구현에도 포함하기 적합했습니다.

**부팅 파일 실행 단계**: 다운로드된 파일은 일반적으로 2단계 부트로더나 작은 운영체제 커널입니다. 이 코드는 더 풍부한 기능을 가지고 나머지 시스템 초기화를 완료합니다.

### 네트워크 운영의 실제적 도전

BOOTP 운영에서 네트워크 관리자가 직면한 주요 도전 과제들은 다음과 같습니다:

**주소 충돌 관리**: BOOTP는 정적 매핑을 사용하므로 두 클라이언트에 동일한 IP 주소가 할당되지 않도록 관리해야 했습니다. 대규모 네트워크에서는 이 작업이 상당한 관리 부담이었습니다.

**부팅 파일 관리**: 각 클라이언트 유형(하드웨어 아키텍처, 운영체제 버전 등)에 맞는 부팅 파일을 유지하고 올바르게 매핑하는 것이 중요했습니다.

**릴레이 에이전트 구성**: 복잡한 네트워크 토폴로지에서 적절한 릴레이 에이전트 구성은 BOOTP 서비스의 성공적 운영을 위해 필수적이었습니다.

**보안 고려사항**: 초기 BOOTP에는 인증 메커니즘이 없었기 때문에 악의적인 클라이언트가 다른 클라이언트의 구성을 가로채거나 서버를 공격할 수 있었습니다.

## BOOTP에서 DHCP로의 진화: 기술적 연속성과 단절

BOOTP의 설계는 이후 DHCP(Dynamic Host Configuration Protocol)의 기반이 되었으며, 두 프로토콜 사이에는 깊은 기술적 연속성이 존재합니다. 그러나 DHCP가 도입한 몇 가지 근본적 혁신은 네트워크 자동 구성의 패러다임을 완전히 바꾸었습니다.

### 프로토콜 호환성과 차이점

BOOTP와 DHCP는 메시지 형식과 기본 작동 방식에서 높은 호환성을 유지합니다. DHCP 메시지는 BOOTP 메시지 형식을 확장하여 사용하며, 동일한 포트 번호(67/68)와 릴레이 에이전트 메커니즘을 공유합니다. 이 호환성은 점진적 전환과 이기종 네트워크 환경에서의 공존을 가능하게 했습니다.

그러나 몇 가지 중요한 차이점이 존재합니다:

1. **임대 개념**: DHCP는 IP 주소 임대를 도입하여 주소의 동적 할당과 재활용을 가능하게 했습니다. 이는 BOOTP의 정적 매핑 한계를 극복했습니다.

2. **상태 기반 프로토콜**: DHCP는 임대 상태를 관리하는 상태 기반 프로토콜인 반면, BOOTP는 기본적으로 상태가 없었습니다.

3. **확장된 옵션 공간**: DHCP는 312바이트의 옵션 공간을 지원하여 BOOTP의 64바이트 제한을 크게 확장했습니다.

4. **메시지 유형 구분**: DHCP는 메시지 유형 옵션(옵션 53)을 도입하여 다양한 트랜잭션 유형(DISCOVER, OFFER, REQUEST, ACK 등)을 지원합니다.

### 역사적 평가와 유산

BOOTP는 기술 역사에서 과도기적 솔루션으로 평가받지만, 그 유산은 오늘날까지 지속되고 있습니다. BOOTP가 제시한 몇 가지 핵심 개념—릴레이 에이전트 아키텍처, TLV 기반 옵션 시스템, 네트워크 부팅 프레임워크—은 현대 네트워크 프로토콜 설계의 기본 패턴이 되었습니다.

특히 BOOTP의 "작동하는 단순성"은 제한된 자원 환경에서도 효과적인 솔루션을 설계할 수 있음을 보여주는 교훈을 제공합니다. 300바이트의 고정 메시지, 마법 쿠키를 통한 이전 호환성 유지, 브로드캐스트의 현명한 사용 등은 모두 제약 조건 속에서 창의성을 발휘한 설계 결정들입니다.

또한 BOOTP는 네트워크 서비스의 중앙화와 자동화 필요성을 처음으로 체계적으로 제시했습니다. 수동 구성을 벗어나 자동 구성 시스템을 구축하려는 시도는 이후 네트워크 관리 분야의 다양한 혁신을 촉진하는 계기가 되었습니다.

오늘날 BOOTP는 주로 특수한 레거시 시스템이나 내장 장치에서 제한적으로 사용되지만, 그 프로토콜의 정신과 설계 원리는 여전히 현대 네트워크 인프라의 DNA에 남아 있습니다. 네트워크 역사를 연구하는 이들에게 BOOTP는 단순한 기술 유물이 아닌, 인터넷이 오늘날의 모습을 갖추는 데 기여한 중요한 진화적 단계를 이해하는 열쇠입니다.