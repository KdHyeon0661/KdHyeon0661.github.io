---
layout: post
title: CSS - 배경 스타일링
date: 2025-04-06 21:20:23 +0900
category: CSS
---
# 배경 스타일링 정리

## 배경 레이어의 정신모델

- **모든 배경은 레이어(층)**입니다. `background-*` 속성에 콤마(,)로 나열하면 **맨 앞**이 **가장 위**에 그려집니다.
- 각 레이어는 **색/이미지/그라디언트** 등을 포함하고, **반복/위치/크기/클립/오리진/부착**을 **레이어별로** 가질 수 있습니다.
- 지정 개수가 서로 다르면 **마지막 값이 반복**되어 나머지 레이어에 적용됩니다.

```css
.box {
  background:
    linear-gradient(#00000066, #00000066), /* 1번(최상위) */
    url(hero@2x.jpg);                      /* 2번(아래)   */
}
```

---

## `background-color` — 배경 색상

```css
body { background-color: #f5f5f5; }      /* hex */
.card { background-color: hsl(210 40% 98%); } /* HSL */
.badge{ background-color: transparent; }
```

- **그라디언트**도 색상을 대체할 수 있습니다(`linear-gradient()`/`radial-gradient()`).

---

## `background-image` — 이미지/그라디언트/멀티 레이어

```css
.hero {
  background-image:
    linear-gradient(to bottom, rgba(0,0,0,.6), rgba(0,0,0,.6)),
    url('bg.jpg');
}
```

### 레티나/가변 해상도: `image-set()` (지원 브라우저 우선)

```css
.logo {
  background-image: image-set(
    url('logo.png') 1x,
    url('logo@2x.png') 2x
  );
  background-size: contain; width: 160px; height: 48px;
}
```

### 스프라이트(한 장에서 잘라 쓰기)

```css
.icon {
  background-image: url('icons-sprite.png');
  background-size: 300% 100%; /* 3개 아이콘 가로로 */
  width: 24px; height: 24px;
}
.icon.home { background-position: 0% 0; }
.icon.search { background-position: 50% 0; }
.icon.user { background-position: 100% 0; }
```

---

## `background-repeat` — 패턴 제어

```css
.tile  { background-repeat: repeat; }     /* 기본 */
.once  { background-repeat: no-repeat; }
.xonly { background-repeat: repeat-x; }
.space { background-repeat: space; }      /* 남는 공간 균등 분배 */
.round { background-repeat: round; }      /* 크기를 조정해 정확한 타일 수 맞춤 */
```

- `space`/`round`는 **패턴 배경** 제작 시 유용합니다.

---

## `background-position` — 좌표와 기준

```css
.card { background-position: center center; }  /* 키워드 */
.thumb{ background-position: 20px 30px; }      /* px */
.hero { background-position: 50% 50%; }        /* % */
```

### 퍼센트의 의미(중요)

`x% y%`는 **이미지의 해당 지점을 요소의 해당 지점에 맞춘다**는 뜻입니다.
- `0% 0%` → 이미지 **좌상**이 요소 **좌상**
- `50% 50%` → 이미지 **중앙**이 요소 **중앙**
- `100% 100%` → 이미지 **우하**가 요소 **우하**

### 오프셋 합성(키워드 + 길이)

```css
/* 중앙에서 오른쪽으로 20px, 위로 10px */
background-position: center calc(50% - 10px);
```

---

## `background-size` — 크기 재계산

```css
.cover   { background-size: cover; }   /* 요소를 꽉 채움 (일부 잘림) */
.contain { background-size: contain; } /* 전부 보이게 (letter-box 가능) */
.fixed   { background-size: 100% 50%; }/* 가로:요소 100% / 세로:요소 50% */
```

### `cover/contain` 직관 수식

요소 크기 \(W, H\), 이미지 원본 크기 \(w, h\).
스케일 \(s\)는 다음 중 택1:

- **contain**:
  \( s = \min\left(\dfrac{W}{w}, \dfrac{H}{h}\right) \)
- **cover**:
  \( s = \max\left(\dfrac{W}{w}, \dfrac{H}{h}\right) \)

이후 표시 크기: \( (s\,w,\ s\,h) \) — cover는 잘릴 수 있고, contain은 여백이 남습니다.

---

## `background-attachment` — 스크롤 동작

```css
.scroll  { background-attachment: scroll; } /* 요소와 함께 이동(기본) */
.fixedbg { background-attachment: fixed; }  /* 뷰포트 기준 고정 */
.local   { background-attachment: local; }  /* 요소 내부 스크롤에 반응 */
```

> 모바일(특히 iOS Safari)에서 `fixed`가 제한되거나 **주소창 표시 변화로 점프**가 날 수 있음.
> **대안**: 스크롤 리스너 없이도 패럴럭스 느낌을 주는 **perspective + transform** 또는 **content 스크롤만 고정** 레이아웃을 고려.

---

## `background-origin` & `background-clip` — 배경의 기준과 잘림

### origin: **위치·반복 계산의 기준 박스**

```css
.pad { background-origin: padding-box; } /* 기본: 패딩 박스 기준 */
.bor { background-origin: border-box; }  /* 테두리까지 포함한 박스 기준 */
.con { background-origin: content-box; } /* 콘텐츠 박스 기준 */
```

### clip: **실제 그려질(클리핑) 경계**

```css
.pad { background-clip: padding-box; }  /* 기본 */
.bor { background-clip: border-box; }   /* 보더 뒤까지 채움 */
.con { background-clip: content-box; }  /* 콘텐츠 영역만 칠함 */

/* 텍스트 그라디언트 트릭 */
.gtext {
  background: linear-gradient(90deg, #ff8a00, #e52e71);
  -webkit-background-clip: text; background-clip: text;
  color: transparent;
}
```

- **`origin`은 좌표계 기준**, **`clip`은 그려지는 영역 경계**입니다.
- 레이아웃/테두리 효과 정밀 제어 시 **둘 다** 사용하면 강력합니다.

---

## `background-blend-mode` — 레이어 혼합

```css
.banner {
  background-image:
    linear-gradient(#00000080, #00000080),
    url('photo.jpg');
  background-blend-mode: multiply; /* overlay | screen | soft-light | ... */
}
```

- **위 레이어**와 **아래 레이어**를 **포토샵처럼** 합성.
- 사진 위에 컬러 그라디언트를 얹어 **톤 맞추기/브랜딩**에 유용.

---

## `background` 단축(shorthand) — 레이어별 선언

```css
.panel {
  background:
    /* 1층(위)  : 어둡게 오버레이 */
    linear-gradient(rgba(0,0,0,.4), rgba(0,0,0,.4))
      no-repeat center/cover padding-box border-box scroll,
    /* 2층(아래) : 실제 사진 */
    url('bg.jpg')
      no-repeat center/cover border-box border-box fixed,
    /* 마지막: 단색(가장 아래) */
    #0f172a;
}
```

> 일반적인 순서(기억용):
> ```
> [color] | [image] [repeat] [position] / [size] [origin] [clip] [attachment]
> ```
> 실제 스펙은 유연하지만, **`position / size`는 반드시 슬래시(/)**로 구분한다는 점이 핵심입니다.

---

## 실전 레시피

### 히어로 섹션(당신 초안 확장)

```css
.hero {
  min-height: 100vh;
  display: grid; place-items: center; color: #fff;
  background:
    linear-gradient(to bottom, rgba(0,0,0,.6), rgba(0,0,0,.6)),
    image-set(url('hero.jpg') 1x, url('hero@2x.jpg') 2x);
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  background-attachment: fixed; /* 모바일 이슈 시 제거/미디어쿼리 분기 */
}
```

### 카드: 그라디언트 보더 + 내부 질감

```css
.card {
  border-radius: 1rem; padding: 1px; /* 보더용 */
  background: linear-gradient(90deg, #8ec5fc, #e0c3fc);
}
.card > .inner {
  border-radius: inherit; padding: 1rem; background:
    linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0) 40%),
    #fff;
  background-clip: padding-box;          /* 내부만 페인트 */
}
```

### 스켈레톤 로딩(샤인)

```css
.skeleton { position: relative; overflow: hidden; background: #e5e7eb; }
.skeleton::after {
  content: ""; position: absolute; inset: 0;
  background: linear-gradient(90deg, #0000, #ffffff40, #0000);
  transform: translateX(-100%); animation: shine 1.2s infinite;
}
@keyframes shine { to { transform: translateX(100%); } }
```

### 미세 노이즈로 밴딩 억제

```css
.subtle-noise {
  background:
    url('data:image/png;base64,iVBORw0K...') repeat, /* 매우 약한 노이즈 */
    linear-gradient(180deg, #0ea5e9, #6366f1);
  background-blend-mode: overlay, normal;
}
```

### 패럴럭스(안전 대안: 3D 컨테이너)

```css
.scene { perspective: 1px; height: 100vh; overflow-y: auto; }
.layer {
  transform: translateZ(-1px) scale(2);  /* 멀리 있는 것처럼 느리게 움직임 */
  background: url('mountain.jpg') center/cover no-repeat;
  height: 100vh;
}
```
- 스크립트 없이도 자연스러운 패럴럭스 느낌.
- 고전 `background-attachment: fixed`보다 **모바일 호환**이 좋음.

### 아이콘 스프라이트 + 반응형

```css
@media (min-resolution: 2dppx) {
  .icon { background-image: url('icons@2x.png'); background-size: 300% 100%; }
}
```

---

## 성능·접근성·호환성 체크리스트

- **이미지 최적화**: WebP/AVIF 등 차세대 포맷 고려, 적정 품질/용량.
- **크기 지정**: 불필요한 리페인트/리레이아웃 최소화.
- **스크롤 + fixed 주의**: 모바일 주소창 변화/합성 레이어 증가로 프레임 드랍 가능.
- **대비 확보**: 텍스트 위 이미지에는 **오버레이**나 **블러/블렌드**로 가독성 보장.
- **밴딩 완화**: 중간 스톱 추가, 미세 노이즈, LCH/OKLCH(지원 시).
- **다크/라이트 테마**: `@media (prefers-color-scheme)`로 배경 대비 유지.
- **네트워크 전략**: 큰 배경은 **크리티컬 폴드 밖**에서 사용하거나 **프리로드**/`image-set()` 분기.

---

## 확장 표 — 속성별 핵심 요약

| 속성 | 핵심 |
|---|---|
| `background-color` | 단색/투명. 그라디언트와 혼용 가능 |
| `background-image` | `url()/gradient/image-set()`·멀티 레이어 콤마 |
| `background-repeat` | `repeat|no-repeat|repeat-x|repeat-y|space|round` |
| `background-position` | 키워드/퍼센트/px. `%`는 “이미지 좌표 ↔ 요소 좌표” 정렬 |
| `background-size` | `auto|contain|cover|<w> <h>`. `cover/contain`은 비율 유지 |
| `background-attachment` | `scroll|fixed|local`. 모바일 `fixed` 제약 주의 |
| `background-origin` | 좌표·반복 계산 기준: `padding-box`(기본)/`border-box`/`content-box` |
| `background-clip` | 실제 그려질 영역: `padding-box`(기본)/`border-box`/`content-box`/`text` |
| `background-blend-mode` | 레이어 혼합: `multiply|overlay|screen|…` |
| `background` | 단축. `position / size`에 **슬래시 필수** |

---

## 통합 데모

```html
<!doctype html>
<meta charset="utf-8" />
<title>Background Toolkit</title>
<style>
  :root {
    --overlay: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.55));
  }
  body { margin: 0; font: 16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Malgun Gothic,sans-serif; color:#0f172a; }

  .hero {
    min-height: 60vh; display:grid; place-items:center; color:#fff; text-align:center; padding: 4rem 1rem;
    background:
      var(--overlay),
      image-set(url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?w=1400&q=70&auto=format&fit=crop') 1x);
    background-position: center; background-size: cover; background-repeat: no-repeat;
  }
  .hero h1 {
    margin: 0 0 .5rem;
    background: linear-gradient(90deg, #ff8a00, #e52e71);
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }
  .grid { display:grid; gap:1.25rem; grid-template-columns: repeat(auto-fill, minmax(260px,1fr)); padding: 2rem; }

  .card { border-radius: 1rem; padding: 1px; background: linear-gradient(90deg, #8ec5fc, #e0c3fc); }
  .card > .inner {
    border-radius: inherit; padding: 1rem;
    background:
      linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0) 40%),
      #fff;
    background-clip: padding-box;
  }

  .badge {
    display:inline-block; padding:.25rem .5rem; border-radius:.5rem; color:#111;
    background:
      repeating-linear-gradient(90deg, #0001 0 10px, #0000 10px 20px),
      #fff;
    background-blend-mode: multiply, normal;
  }

  .sprite { width: 48px; height: 48px; border-radius:.5rem;
    background: url('https://dummyimage.com/144x48/ddd/000&text=H+S+U') no-repeat;
    background-size: 300% 100%;
  }
  .sprite.home   { background-position: 0% 0; }
  .sprite.search { background-position: 50% 0; }
  .sprite.user   { background-position: 100% 0; }

  .skeleton { height: 8rem; border-radius:.75rem; position:relative; overflow:hidden; background:#e5e7eb; }
  .skeleton::after {
    content:""; position:absolute; inset:0;
    background: linear-gradient(90deg, #0000, #ffffff40, #0000);
    transform: translateX(-100%); animation: shine 1.2s infinite;
  }
  @keyframes shine { to { transform: translateX(100%); } }
</style>

<section class="hero">
  <div>
    <h1>Background Toolkit</h1>
    <p>레이어·클립·블렌드·반복·크기/위치·레티나·스프라이트까지 한 번에.</p>
  </div>
</section>

<section class="grid">
  <article class="card"><div class="inner">
    <h3>Gradient Overlay</h3>
    <p>이미지 위에 어둡게 덮어 텍스트 대비를 확보합니다.</p>
    <span class="badge">overlay</span>
  </div></article>

  <article class="card"><div class="inner">
    <h3>Sprite Icons</h3>
    <div style="display:flex; gap:.5rem;">
      <div class="sprite home"   title="home"></div>
      <div class="sprite search" title="search"></div>
      <div class="sprite user"   title="user"></div>
    </div>
  </div></article>

  <article class="card"><div class="inner">
    <h3>Skeleton Shine</h3>
    <div class="skeleton" aria-hidden="true"></div>
  </div></article>
</section>
```

---

## 수학 메모 — `cover/contain`의 스케일 결정

요소 \(W\times H\), 이미지 \(w\times h\)일 때,
- **contain**:
  $$ s = \min\left(\frac{W}{w}, \frac{H}{h}\right) $$
- **cover**:
  $$ s = \max\left(\frac{W}{w}, \frac{H}{h}\right) $$

최종 렌더링 크기 \((s\,w, s\,h)\)를 **`background-position`** 규칙으로 정렬합니다(기본 `50% 50%`).

---

## 마지막 요약

- **레이어 관점**으로 생각하라: 맨 앞 선언이 맨 위로 페인트.
- **`position / size`는 슬래시(/)**로 구분(단축에서 가장 흔한 실수).
- **`origin`(좌표 기준) vs `clip`(칠해지는 영역)**을 구분해 정밀 제어.
- **블렌드 모드**로 사진/그라디언트 톤을 **한 번에** 맞춘다.
- **반응형**: `cover` + 중앙 정렬, 레티나 대응은 `image-set()`/미디어쿼리.
- **모바일 `fixed` 주의**: 3D 패럴럭스 대안 고려.
- **성능/가독성**: 오버레이/노이즈/중간 스톱으로 대비/밴딩 문제 해결.
