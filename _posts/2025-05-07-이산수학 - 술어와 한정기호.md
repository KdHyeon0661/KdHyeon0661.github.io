---
layout: post
title: 이산수학 - 술어와 한정기호
date: 2025-05-07 21:20:23 +0900
category: 이산수학
---
# 술어와 한정기호(Predicate and Quantifiers)

본 장은 명제 논리를 넘어서 **변수와 구조를 다루는 술어 논리**의 핵심을 체계적으로 정리한다.

---

## 0. 학습 목표

- 술어, 항, 원자식, 논리식의 구성을 정의할 수 있다.
- 전칭(∀), 존재(∃)의 의미와 부정 규칙(드모르간)을 자유롭게 다룬다.
- 자유변수·결합변수, 스코프, 치환과 변수 포획 문제를 설명하고 피하는 법을 안다.
- 양화사와 논리연산자의 배치·순서에 따른 의미 차이를 구별한다.
- 도메인 제한, 유일성(∃!), 적어도/기껏해야 수량화 표현을 정확히 쓴다.
- 코드·데이터베이스·형식명세로의 변환 패턴을 익히고, 작은 모델에서 자동 점검한다.
- 프레넥스 정규형, 스코렘화(만족가능성 보존) 등 실전 변환의 목적 차이를 이해한다.

---

## 1. 왜 술어 논리가 필요한가

명제 논리는 참/거짓이 고정된 문장만을 다룬다.
현실의 문장 대부분은 변수에 따라 참/거짓이 달라진다.

예:
- “x는 짝수이다.”는 x가 무엇인가에 따라 달라진다. 이는 **명제**가 아니라 **술어**다.
- “모든 정수 x에 대해 x+1>x” 같은 문장은 **양화사**를 필요로 한다.

---

## 2. 술어, 항, 원자식

- **항(term)**: 변수, 상수, 함수기호 적용 결과. 예: $$x,\ 0,\ \mathrm{succ}(x),\ f(x,y)$$
- **술어(predicate)**: 항들에 대해 참/거짓을 반환하는 기호. 예: $$E(x)$$(짝수), $$<(\cdot,\cdot)$$
- **원자식(atomic formula)**: 술어가 항들에 적용된 식. 예: $$E(x),\ x<y,\ P(f(x),y)$$

관례:
- 변수는 보통 $$x,y,z,\dots$$
- 상수는 $$0,1,a,b,\dots$$
- 함수기호: $$f,g,h$$
- 술어기호: $$P,Q,R,=,\ <,\ \le$$

---

## 3. 한정기호(양화사)

- **전칭**: $$\forall x\,\varphi(x)$$  — “모든 x에 대해 $$\varphi(x)$$.”
- **존재**: $$\exists x\,\varphi(x)$$ — “어떤 x가 존재하여 $$\varphi(x)$$.”

도메인(정의역)이 필수다. 같은 식이라도 도메인에 따라 진리값이 달라진다.

예:
- $$\forall x\ (x>0)$$ 가 자연수 도메인에서는 참(여기서 자연수를 $$\{1,2,\dots\}$$ 로 잡을 때), 정수 도메인에서는 거짓.
- $$\exists x\ (x/2=1)$$ 는 정수 도메인에서는 거짓, 유리수 도메인에서는 참($$x=2$$).

---

## 4. 도메인 제한을 나타내는 두 가지 표기

1) **타입형 표기**: $$\forall x\in S\ \varphi(x)$$, $$\exists x\in S\ \varphi(x)$$
2) **술어로 제한**:
   - $$\forall x\ (S(x)\to \varphi(x))$$
   - $$\exists x\ (S(x)\land \varphi(x))$$

두 표기는 동치다. 실전에서 도메인 제약은 거의 항상 이 패턴으로 들어간다.

---

## 5. 자유변수와 결합변수, 스코프

- **결합(bound) 변수**: 양화사에 의해 범위(스코프) 안에서 묶인 변수.
- **자유(free) 변수**: 어떤 양화사에도 속하지 않는 변수.

예:
- $$\forall x\ (P(x,y))$$ 에서 $$x$$ 는 결합, $$y$$ 는 자유.
- 문장(sentence)은 자유변수가 없는 식.

스코프를 명확히 하려면 괄호를 충분히 사용한다.
혼란의 전형적 예: $$\forall x\, P(x) \land Q(x)$$ 는 보통 $$ (\forall x\, P(x)) \land Q(x) $$ 로 읽힌다.
만약 $$\forall x (P(x)\land Q(x))$$ 를 뜻한다면 괄호로 명확히 해야 한다.

---

## 6. 부정과 양화사(드모르간)

$$
\lnot \forall x\,\varphi(x)\ \equiv\ \exists x\,\lnot \varphi(x), \qquad
\lnot \exists x\,\varphi(x)\ \equiv\ \forall x\,\lnot \varphi(x).
$$

예:
- “모든 학생이 스마트폰을 가진다”의 부정은 “스마트폰을 갖지 않은 학생이 존재한다.”
  $$\lnot \forall x\,\mathrm{Student}(x)\to \mathrm{HasPhone}(x) \equiv \exists x\, \mathrm{Student}(x)\land \lnot\mathrm{HasPhone}(x).$$

---

## 7. 양화사 순서의 중요성

- $$\forall x\,\exists y\ (x<y)$$: 모든 $$x$$ 에 대해 더 큰 $$y$$ 가 있다 → 정수에서 참(예: $$y=x+1$$).
- $$\exists y\,\forall x\ (x<y)$$: 모든 $$x$$ 보다 큰 단 하나의 $$y$$ 가 있다 → 정수에서 거짓.

순서가 바뀌면 의미가 달라진다.

---

## 8. 조건문과 양화사의 상호작용(측면 조건 주의)

- 항상 성립: $$\forall x(\varphi\land\psi)\ \equiv\ (\forall x\,\varphi)\land(\forall x\,\psi).$$
- 항상 성립: $$\exists x(\varphi\lor\psi)\ \equiv\ (\exists x\,\varphi)\lor(\exists x\,\psi).$$
- **주의**:
  - $$\forall x(\varphi\lor\psi)\ \equiv\ (\forall x\,\varphi)\lor(\forall x\,\psi)$$ 는 일반적으로 거짓.
  - $$\exists x(\varphi\land\psi)\ \equiv\ (\exists x\,\varphi)\land(\exists x\,\psi)$$ 도 일반적으로 거짓.
- **변수 비자유 조건**이 있으면 단순화 가능:
  - $$x$$ 가 $$\psi$$ 에 자유로 나타나지 않으면
    $$\forall x(\varphi\lor\psi) \equiv (\forall x\,\varphi)\lor \psi,$$
    $$\exists x(\varphi\land\psi) \equiv (\exists x\,\varphi)\land \psi.$$

또한
$$
\forall x\,(\varphi \to \psi) \ \equiv\  (\exists x\,\varphi) \to \psi \quad\text{단, } x\text{가 }\psi\text{에 자유로 나타나지 않을 때}
$$
처럼 조건이 붙는 동치들이 자주 등장한다.

---

## 9. 유일성, 적어도/기껏해야

- **유일존재** $$\exists ! x\, \varphi(x)$$ 는
  $$\exists x\,\big(\varphi(x)\ \land\ \forall y(\varphi(y)\to y=x)\big)$$ 로 전개.
- **적어도 k 개**: $$\exists x_1\dots \exists x_k\,\Big(\bigwedge_{i\neq j} x_i\neq x_j \ \land\ \bigwedge_{i=1}^k \varphi(x_i)\Big)$$
- **기껏해야 k 개**: 모든 $$k+1$$ 개의 서로 다른 원소에 대해 그 중 적어도 하나는 성질을 만족하지 않음을 표현.
  예: 기껏해야 1개는 $$\forall x\forall y\,\big(\varphi(x)\land \varphi(y)\to x=y\big).$$

---

## 10. 평등(=)과 기본 공리

대부분의 1차 논리 체계는 **평등 기호**를 포함하고 다음을 공리로 둔다.

- 반사성: $$\forall x\ (x=x)$$
- 대칭성: $$\forall x\forall y\ (x=y \to y=x)$$
- 추이성: $$\forall x\forall y\forall z\ ((x=y\land y=z)\to x=z)$$
- 치환성: $$\forall x\forall y\ (x=y \to (\varphi(x)\leftrightarrow\varphi(y)))$$  단, $$\varphi$$ 에서 자유로운 위치의 모든 $$x$$ 가 $$y$$ 로 치환됨.

---

## 11. 추론 규칙(1차 논리 핵심)

- 전칭 도입(UG): $$\varphi(x)$$ 에 대해, x가 임의라는 가정 하에 $$\forall x\,\varphi(x)$$
- 전칭 제거(UI): $$\forall x\,\varphi(x) \vdash \varphi(t)$$
- 존재 도입(EI): $$\varphi(t) \vdash \exists x\,\varphi(x)$$
- 존재 제거(EE): $$\exists x\,\varphi(x)$$ 로부터 새로운 상수 $$c$$ 를 가정해 $$\varphi(c)$$ 로 추론 후, $$c$$ 가 새롭고 임의라는 제약 아래 결론을 얻는다.

실전에서는 UI/EI 가 가장 자주 쓰인다. UG/EE 는 변수의 임의성·신선성 조건을 주의.

---

## 12. 변수 치환과 포획 방지(알파 변환)

치환 $$\varphi[t/x]$$ 는 식의 자유한 $$x$$ 를 항 $$t$$ 로 바꾸는 것.
이때 **변수 포획(capture)** 을 피해야 한다. 즉, $$t$$ 안에 있는 자유변수가 치환 과정에서 양화사에 포획되지 않도록 알파-변환(결합 변수 이름 바꾸기)을 먼저 수행.

예:
- $$\forall y\, P(x,y)$$ 에서 $$x\mapsto y$$ 를 무심코 대입하면 $$\forall y\, P(y,y)$$ 가 되어 자유 변수였던 $$y$$ 가 포획된다.
- 안전하게 하려면 $$\forall y\, P(x,y) \equiv \forall z\, P(x,z)$$ 로 알파-변환 후 $$x\mapsto y$$ 를 적용해 $$\forall z\, P(y,z)$$ 로 만든다.

---

## 13. 자연어 → 논리 변환 패턴

- 모든 S는 P이다: $$\forall x\,(\mathrm{S}(x)\to \mathrm{P}(x))$$
- 어떤 S는 P이다: $$\exists x\,(\mathrm{S}(x)\land \mathrm{P}(x))$$
- S 중에서 정확히 하나만 P이다: $$\exists ! x\,(\mathrm{S}(x)\land \mathrm{P}(x))$$
- 어떤 학생은 모든 과목을 수강한다: $$\exists x\,\big(\mathrm{Student}(x)\land \forall y(\mathrm{Course}(y)\to \mathrm{Takes}(x,y))\big)$$
- 모든 과목에는 최소 한 명의 학생이 있다: $$\forall y\,(\mathrm{Course}(y)\to \exists x\,\mathrm{Takes}(x,y))$$

**순서 주의**: “모든 학생마다 한 과목이 존재”와 “어떤 한 과목이 모든 학생에 대해 존재”는 다르다.
$$\forall x\exists y\,\mathrm{Takes}(x,y) \not\equiv \exists y\forall x\,\mathrm{Takes}(x,y).$$

---

## 14. 작은 모델에서의 자동 점검(파이썬)

아래 스니펫들은 유한 도메인에서 식의 진리값을 실험적으로 확인한다.
증명을 대체하지는 않지만, 반례 탐색과 직관 점검에 매우 유용하다.

### 14.1 ∀, ∃ 시뮬레이션(1변수)

```python
def ForAll(domain, P):
    return all(P(x) for x in domain)

def Exists(domain, P):
    return any(P(x) for x in domain)

D = range(-3, 4)  # 도메인: -3..3

# 예: ∀x ∃y (x<y)  vs  ∃y ∀x (x<y)
def less(a, b): return a < b

def phi_forall_exists(D):
    return all(any(less(x, y) for y in D) for x in D)

def phi_exists_forall(D):
    return any(all(less(x, y) for x in D) for y in D)

print(phi_forall_exists(D))  # True (유한 D라도 보통 True)
print(phi_exists_forall(D))  # False (최대원이 없으면 불가)
```

### 14.2 드모르간(양화사 버전) 확인

```python
def dm1(D, P):  # ¬∀x P ≡ ∃x ¬P
    left  = not ForAll(D, P)
    right = Exists(D, lambda x: not P(x))
    return left == right

def dm2(D, P):  # ¬∃x P ≡ ∀x ¬P
    left  = not Exists(D, P)
    right = ForAll(D, lambda x: not P(x))
    return left == right

print(dm1(D, lambda x: x>=0))
print(dm2(D, lambda x: x<0))
```

### 14.3 관계의 전이성 검증

```python
D = {0,1,2,3}
R = {(0,1),(1,2),(0,2),(2,3),(0,3)}  # 예: 전이적일 법한 집합

def Transitive(D, R):
    return all(((a,b) in R and (b,c) in R) <= ((a,c) in R) for a in D for b in D for c in D)

print(Transitive(D, R))
```

---

## 15. 프로그래밍 관점 매핑

- 파이썬
  - $$\forall$$ ↔ `all(...)`, $$\exists$$ ↔ `any(...)`
- SQL
  - `EXISTS (subquery)`는 존재 양화사를 모델링한다.
  - 주의: SQL은 `NULL` 로 인해 삼값 논리이므로, 고전 2값 논리의 동치가 항상 보존되지 않는다.
- 정리증명기·SMT
  - 프레넥스 정규형, 스코렘화로 전처리 후 SAT/SMT로 푼다(동치가 아니라 만족가능성 보존).

예: 파이썬에서 도메인 제한

```python
nums = [1,2,3,4]
print(all(x > 0 for x in nums))     # ∀x∈nums, x>0
print(any(x % 2 == 0 for x in nums))# ∃x∈nums, even(x)
```

---

## 16. 프레넥스 정규형과 스코렘화

- **프레넥스 정규형(Prenex NF)**: 모든 양화사를 식의 맨 앞에 모으고, 뒤에는 양화사 없는 행위식(matrix)만 남긴 꼴.
- **스코렘화(Skolemization)**: 존재 양화사를 제거하고 스코렘 상수/함수로 대체.
  - 예: $$\forall x\,\exists y\,\varphi(x,y)$$ 를 $$\forall x\,\varphi(x,f(x))$$ 로.
  - **동치**가 아니라 **만족가능성 보존**만 보장한다. 즉, 원식이 만족가능하면 스코렘화 결과도 만족가능하고, 그 역도 성립한다.

변환 요지(개괄):
1) 함의 제거, 부정 이동(드모르간)으로 NNForm.
2) 양화사 이동(변수 충돌 방지 알파 변환).
3) 존재자에 스코렘 치환.

---

## 17. 전형적 오류와 반례

1) 순서 바꾸기 오류: $$\forall x\exists y\,\varphi \equiv \exists y\forall x\,\varphi$$ 라고 착각.
   - 반례는 7절 참조.

2) 분배 착각: $$\forall x(\varphi\lor\psi) \equiv (\forall x\varphi)\lor(\forall x\psi)$$ 라고 오해.
   - 반례: 도메인에 $$a,b$$ 가 있고, $$\varphi(x)\equiv (x=a)$$, $$\psi(x)\equiv (x=b)$$
     - 좌변은 참(각 x에 대해 둘 중 하나는 참), 우변은 거짓.

3) 포획 실수: 치환 시 자유변수가 결합변수에 포획.
   - 알파-변환으로 변수 이름을 먼저 바꿔라.

4) 도메인 모호성: “자연수”를 $$\{0,1,2,\dots\}$$ 로 보느냐 $$\{1,2,\dots\}$$ 로 보느냐에 따라 문장의 진리값이 바뀐다. 항상 도메인을 명기하라.

---

## 18. 미니 프로젝트: 유한 모델 검사기(교육용)

작은 도메인과 해석을 입력받아 1차 논리식의 진리값을 평가하는 토이 코드를 작성해 보자.
완전한 파서는 아니고, 파이썬 람다로 술어·함수를 지정하는 구조다.

```python
# 도메인과 해석
D = {0,1,2,3}

interp = {
    "Zero": 0,
    "Succ": lambda x: (x+1) % 4,   # 순환 후계자
    "Even": lambda x: x % 2 == 0,
    "LT":   lambda x,y: x < y
}

# 양화사 유틸
def FORALL(D, P): return all(P(x) for x in D)
def EXISTS(D, P): return any(P(x) for x in D)

# 문장 예: ∀x ∃y LT(x,y)
phi = FORALL(D, lambda x: EXISTS(D, lambda y: interp["LT"](x,y)))
print(phi)

# 문장 예: ∃x ∀y LT(y,x)   (최대원 존재)
psi = EXISTS(D, lambda x: FORALL(D, lambda y: interp["LT"](y,x)))
print(psi)
```

이렇게 모델을 바꿔 보며 문장의 진리값이 어떻게 달라지는지 체험할 수 있다.

---

## 19. 연습문제(풀이 또는 힌트 포함)

1) 부정 규칙 적용
- $$\lnot \forall x\, P(x) \ \equiv\ \ ?$$
- $$\lnot \exists x\, P(x) \ \equiv\ \ ?$$
정답: 각각 $$\exists x\,\lnot P(x),\ \forall x\,\lnot P(x).$$

2) 번역
- “모든 학생은 적어도 한 과목을 듣는다.”
  $$\forall x\,(\mathrm{Student}(x)\to \exists y\,(\mathrm{Course}(y)\land \mathrm{Takes}(x,y)))$$
- “어떤 과목은 모든 학생이 듣는다.”
  $$\exists y\,(\mathrm{Course}(y)\land \forall x\,(\mathrm{Student}(x)\to \mathrm{Takes}(x,y))).$$

3) 유일성
- “소수 중 가장 작은 수는 정확히 하나 존재한다.”
  $$\exists ! x\,(\mathrm{Prime}(x)\land \forall y\,(\mathrm{Prime}(y)\to x\le y)).$$

4) 분배 반례
도메인 $$\{a,b\}$$, $$P(x)\equiv(x=a)$$, $$Q(x)\equiv(x=b)$$ 일 때
$$\forall x(P(x)\lor Q(x))$$ 와 $$(\forall x P(x))\lor(\forall x Q(x))$$ 의 진리값을 비교하라.
정답: 전자는 참, 후자는 거짓.

5) 알파-변환
$$\forall x\,\exists x\,P(x)$$ 는 표준 형식이 아니다. 결합 변수 이름을 바꿔 깔끔히 쓰라.
정답: $$\forall x\,\exists y\,P(y).$$ 단, 원래 의미 보존 여부는 문맥에 따라 확인.

6) 조건식 변환(측면 조건)
$$\forall x(\varphi(x)\to \psi) \equiv (\exists x\,\varphi(x))\to \psi$$ 가 성립하려면 어떤 조건이 필요한가?
정답: $$x$$ 가 $$\psi$$ 에 자유로 나타나지 않아야 한다.

7) 관계 성질 표현
반사성, 대칭성, 추이성을 양화사로 각각 표현하라.
정답:
- 반사: $$\forall x\,R(x,x)$$
- 대칭: $$\forall x\forall y\ (R(x,y)\to R(y,x))$$
- 추이: $$\forall x\forall y\forall z\ ((R(x,y)\land R(y,z))\to R(x,z))$$

---

## 20. 요약

- 술어 논리는 변수·관계·함수·양화사를 도입해 명제 논리를 대폭 확장한다.
- 도메인 명시, 양화사 순서, 자유/결합 변수의 구분은 필수 역량이다.
- 드모르간(양화사 버전), 분배 규칙의 성립 범위, 조건부 동치의 **측면 조건**을 항상 확인하라.
- 작은 모델에서 코드로 실험하고, 필요한 경우 프레넥스 정규형·스코렘화를 통해 자동화 도구에 연결하라(동치와 만족가능성 보존의 차이를 구분).
