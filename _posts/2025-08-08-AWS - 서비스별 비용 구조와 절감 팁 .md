---
layout: post
title: AWS - 서비스별 비용 구조와 절감 팁 
date: 2025-08-08 22:20:23 +0900
category: AWS
---
# 서비스별 비용 구조와 절감 팁  
(VPC Endpoint · CloudFront · Global Accelerator · NLB · ALB · WAF)

아래는 각 서비스의 **비용 구조(무엇에 과금되는지)**와 **현실적인 절감(트레이드오프 포함)** 팁을 실무 관점에서 정리한 가이드입니다.  
요금은 리전·시점에 따라 달라지므로 “비율·구성 방식”과 **계산 방법**에 초점을 두고, 공식 문서(또는 AWS 블로그) 근거를 함께 적어뒀습니다. 필요하면 예산 계산용 숫자를 귀하의 리전/트래픽으로 넣어 계산해 드립니다.

---

## 1) VPC Endpoint — **Interface vs Gateway (비용 포인트 & 절감)**

### 비용 구조(핵심)
- **Gateway Endpoint** (S3, DynamoDB 전용)
  - **추가 요금 없음** — 라우트 테이블을 통해 접근(무료). :contentReference[oaicite:0]{index=0}
- **Interface Endpoint (AWS PrivateLink)**
  - **시간(엔드포인트 * AZ당)** 요금 + **데이터 처리(GB당)** 요금이 붙음. (리전별 단가 상이) — 즉, `엔드포인트 수 × AZ 수 × hourly_rate` + `GB × per_GB_rate`. :contentReference[oaicite:1]{index=1}

### 실전 절감 팁
1. **가능하면 Gateway Endpoint를 사용하라.**  
   S3/DynamoDB 트래픽의 경우 Gateway Endpoint는 무료이므로 데이터 전송·NAT 비용을 크게 줄일 수 있음(대량 트래픽 시 효과 큼). :contentReference[oaicite:2]{index=2}

2. **Interface Endpoint는 필요한 서비스에만, AZ당 하나씩만 배치**  
   - Interface Endpoint는 AZ당 엔드포인트(ENI)가 생성되므로 AZ마다 비용이 발생. 전체 VPC/AZ에 무분별하게 생성하면 비용 폭증. :contentReference[oaicite:3]{index=3}

3. **인터페이스 엔드포인트의 데이터 요금 비교**  
   - NAT Gateway 를 통한 외부 접근(또는 리전 경유)은 엔드포인트보다 더 비쌀 수 있음. (NAT는 시간+GB 요금이 높음) → S3/DynamoDB용 트래픽은 Gateway Endpoint로 우회하자. :contentReference[oaicite:4]{index=4}

4. **중앙화(Shared-services VPC) 전략의 주의점**  
   - 중앙 VPC에 Endpoint를 모으면 엔드포인트 수는 줄어들지만 각 계정/VPC에서 중앙 VPC로 데이터가 왕복하면서 **크로스-AZ/크로스-VPC 전송비**가 발생할 수 있음. 비용·레이턴시 시뮬레이션 필수. :contentReference[oaicite:5]{index=5}

---

## 2) CloudFront — **캐시 효율 최적화으로 데이터 전송 비용 절감**

### 비용 구조(핵심)
- CloudFront 비용은 **전송(GB)** + **요청(HTTP/HTTPS 요청 수)** + **캐시 invalidation/기타 기능(함수 실행 등)** 으로 구성됩니다.  
- 중요한 건 **원본(Origin)으로 가는 요청 수와 Origin에서 빠져나가는 데이터량**이 최종 비용에 큰 영향을 줌. (캐시 히트가 높을수록 origin egress ↓) :contentReference[oaicite:6]{index=6}

### 캐시 최적화(절감) 팁 — 실제로 비용을 절감하는 방법
1. **캐시 키를 단순화하라 (Cache Key 설계)**  
   - 불필요한 쿼리 스트링·헤더·쿠키를 캐시 키에서 제외하면 동일 리소스가 여러 캐시에 나눠지는 현상을 줄여 **캐시 히트율**을 높일 수 있음. (AWS 권장) :contentReference[oaicite:7]{index=7}

2. **TTL(캐시 만료) 정책 튜닝**  
   - 정적 자원(이미지, JS/CSS)은 긴 `max-age` 설정. 자주 바뀌는 자원은 버전링(파일명에 hash)으로 캐싱을 길게 가져가자. :contentReference[oaicite:8]{index=8}

3. **압축·열결성 최적화 (gzip/brotli, HTTP/2)**  
   - 엣지에서 압축/최적화 후 전달하면 대역폭 절감. (CloudFront는 HTTP/2, Gzip 지원)

4. **Origin Shield 사용**  
   - Origin Shield(Regional cache)를 활성화하면 여러 엣지 노드의 Origin 요청을 합쳐 Origin 트래픽을 줄여 **Origin egress 비용** 절감 가능. (특히 글로벌 트래픽 많은 경우 효과적)

5. **캐시 무효화(Invalidation) 절제**  
   - 자주 invalidation 하면 비용·오버헤드 발생. 가능하면 객체 버전(파일명 해시) 변경 전략을 사용하라.

6. **S3 + OAC(Origin Access Control) 조합**  
   - S3를 오리진으로 쓸 때는 Origin Access Control 또는 OAI를 사용해 보안 유지하면서 캐시 효율을 그대로 활용.

(자세한 캐시 키·정책 팁은 CloudFront 개발자 가이드 참조). :contentReference[oaicite:9]{index=9}

---

## 3) Global Accelerator — **리전 수와 트래픽에 따른 비용 구조** (사용 기준 엄격 권장)

### 비용 구조(핵심)
- **고정 시간 요금(Accelerator-hour)** + **데이터 전송 프리미엄(시간당 지배적 방향 트래픽에 대한 DT-Premium)** + 표준 데이터 전송 요금. 즉:
  ```
  비용 = (accelerator_hourly_fee × hours) + (DT-Premium_per_GB × GB_dominant_direction) + (표준 DataTransfer 요금)
  ```
  - **Accelerator는 프로비저닝만 해도 시간당 요금이 붙음**. (enabled/disabled 모두 과금) :contentReference[oaicite:10]{index=10}

### 실전 해석 & 절감 팁
1. **Global Accelerator는 '글로벌 지연시간 민감' + '단일 Anycast IP' 필요한 서비스에만 사용**  
   - 단순 정적 콘텐츠 배포(CloudFront 사용 가능한 경우)보다 비용이 높을 수 있으니, 용도(예: 게임, 금융 API, TCP/UDP 전용 저지연 엔드포인트)에 맞게 선택. :contentReference[oaicite:11]{index=11}

2. **리전 수와 엔드포인트 구성에 주의**  
   - Accelerator 자체는 리전별 Endpoint Group을 사용하므로, 다수 리전으로 트래픽을 분산하면 DT-Premium 비용이 늘어날 수 있음. 비용 = (accelerator fixed) + (DT-Premium × GB). 트래픽 패턴(어디가 dominant인지)을 먼저 분석하자. :contentReference[oaicite:12]{index=12}

3. **CloudFront + Route53 + Regional ALB 조합과 비교 검토**  
   - 많은 경우 CloudFront(캐싱) + Route53 latency-based routing 로 지연·가용성 요구를 만족시키고 비용을 더 절감할 수 있음. Global Accelerator는 전용 백본(퍼포먼스)과 고가용성 라우팅이 필요한 애플리케이션에 투자 대가를 지불하는 옵션임. :contentReference[oaicite:13]{index=13}

---

## 4) NLB (Network Load Balancer) — **고성능/고스루풋 가용성 대가**

### 비용 구조(핵심)
- ELB 가격 책정 모델에 따라 **시간(또는 유닛) 요금 + 처리량 기반 요금(LCU/NLCU)**가 적용됩니다.  
- ALB는 **시간 요금 + LCU(Load Balancer Capacity Unit)** 요금으로 책정되며, LCU는 “처리 바이트·신규 연결·액티브 연결·룰 평가” 중 최대치로 계산됩니다. NLB도 유사하게 **시간 + LCU(또는 NLCU) 단위**로 과금됩니다(자세한 산정은 ELB pricing 문서 참조). :contentReference[oaicite:14]{index=14}

### NLB vs ALB 비용 관점 요약
- **NLB**: 초저지연·수백만 연결/초 환경에서 유리(정적 IP, TLS passthrough, UDP 지원). 처리 바이트 많고 연결 부담이 큰 경우 비용 효율적. :contentReference[oaicite:15]{index=15}  
- **ALB**: L7 기능(호스트/경로 라우팅, WebSocket, WAF 연동)이 필요할 때 사용. L7 룰 평가가 많으면 LCU 비용이 급증할 수 있음. :contentReference[oaicite:16]{index=16}

### 절감 팁
1. **ALB를 여러 개 띄우지 말고 호스트/경로 기반으로 서비스 통합**  
   - ALB 수가 늘어나면 고정 시간 요금이 중복되므로, 가능한 한 라우팅 규칙으로 서비스 통합(다만 규칙·LCU 증가 주의). :contentReference[oaicite:17]{index=17}

2. **룰·리다이렉션 최소화**  
   - 복잡한 리다이렉션/리라이트/많은 호스트 기반 룰은 LCU를 더 소비. 규칙을 단순화하고 필요시 애플리케이션 레벨로 위임.

3. **NLB는 초당 연결·대량 바이트 트래픽에 유리**  
   - 대용량 TCP/UDP(예: 게임 서버, IoT 브로커)는 NLB 쓰는 편이 비용·성능 측면에서 낫다. :contentReference[oaicite:18]{index=18}

---

## 5) ALB + WAF — **룰 최소화로 비용 제어 (WAF 요금 구조)**

### WAF 비용 구조(핵심)
- **Web ACL**: 월별 고정요금(예: $5 / Web ACL, 프로레이트 청구)  
- **Rule (규칙)**: 월별 규칙 수당(예: $1 / 규칙)  
- **Request 처리량**: 요청 수에 따라 요금(예: $0.60 per 1M requests) 등으로 과금 (예시 단가 — 리전/시점에 따라 변동). :contentReference[oaicite:19]{index=19}

### ALB와 WAF 결합 시 비용 포인트
- **ALB** 자체의 LCU 비용에 더해 WAF의 요청당 비용이 부과되므로, WAF를 ALB 앞에 두면 **요청 수 × WAF per-request 비용**이 추가됨. 높은 요청률은 WAF 비용을 빠르게 증가시킴. :contentReference[oaicite:20]{index=20}

### WAF 비용 절감 팁
1. **룰 수 줄이기 / 우선순위 조정**  
   - 불필요한 규칙 제거. 룰을 효율적으로 배치하여 초기에 차단되는 요청을 먼저 처리(Short-circuit)하게 한다. :contentReference[oaicite:21]{index=21}

2. **Managed Rules 신중히 선택**  
   - AWS 혹은 Marketplace의 관리형 규칙은 편리하지만 비용/요청 과금이 추가될 수 있음. 트래픽 패턴을 시범 적용 후 전체 적용 여부 결정. :contentReference[oaicite:22]{index=22}

3. **Rate-based rules로 공격성 트래픽을 조기에 축소**  
   - 비정상 트래픽(봇/스크래핑)을 빠르게 차단하면 전체 요청 수를 줄여 WAF·ALB 비용을 낮출 수 있음. 단, 규칙 평가 비용이 생길 수 있으므로 적절히 튜닝.

4. **Edge 레벨 필터링 고려**  
   - CloudFront + WAF 조합으로 엣지에서 불필요한 요청을 걸러내면 Origin/ALB로 가는 트래픽 자체를 줄여 비용 절감 가능.

---

## 6) 실무 체크리스트 (비용 절감 우선순위)

1. **S3/DynamoDB 트래픽** → **Gateway Endpoint**로 전환(가능하면) → NAT Gateway 데이터 요금 회피. :contentReference[oaicite:23]{index=23}  
2. **Interface Endpoint 사용 시** → AZ당 필요한지 점검(엔드포인트 수×AZ 비용 계산). :contentReference[oaicite:24]{index=24}  
3. **CloudFront 적용** → 캐시 키·TTL 정리, Origin Shield 사용 고려 (Origin egress 절감). :contentReference[oaicite:25]{index=25}  
4. **Global Accelerator는 성능-비용 타당성 검증 후 사용** (CloudFront/Route53 대안 검토). :contentReference[oaicite:26]{index=26}  
5. **ALB 최적화** → 호스트/경로 통합, 룰·리다이렉트 최소화로 LCU 절감. :contentReference[oaicite:27]{index=27}  
6. **WAF 비용 통제** → 룰 최소화·요청 전 필터링·Rate-based 룰로 폭증 비용 보호. :contentReference[oaicite:28]{index=28}

---

## 부록 — 간단한 **비용 계산 예시(개념)**

> (숫자는 예시이며, 실제 리전 요금은 공식 페이지 확인 필요)

- **Interface Endpoint** 예시  
  - 엔드포인트 1개 × 3 AZ = `3 * $0.01/hr ≈ $0.03/hr` + `데이터 500GB * $0.01/GB = $5` → 월간 약 `($0.03*720) + $5 ≈ $26.6 + $5 = $31.6` (단순 예시). :contentReference[oaicite:29]{index=29}

- **ALB 예시** (AWS 예시에서 인용 방식)  
  - ALB 시간요금 `~$0.0225/hr` + LCU(예: 2 LCU) `$0.008 × 2` → 시간당 총 = `0.0225 + 0.016 = $0.0385` → 월간 약 `$27.7` (30일 기준). (실제 LCU 산정은 바이트·요청·연결 수로 결정). :contentReference[oaicite:30]{index=30}

- **WAF 예시**  
  - Web ACL $5/month + 5 rules × $1 + 요청 10M × $0.60/1M = $5 + $5 + $6 = $16/month (예시). :contentReference[oaicite:31]{index=31}

---

## 마무리 — 선택 기준 요약
- **데이터 중심(대량 egress)** → CloudFront + Gateway Endpoint(가능하면) 로 원본 부하와 전송비 줄이기. :contentReference[oaicite:32]{index=32}  
- **저지연 글로벌 TCP/UDP 필요** → Global Accelerator(비용-성능 검증 필수). :contentReference[oaicite:33]{index=33}  
- **대량 연결/초고속 처리** → NLB (정적 IP, UDP/TCP) 선택. :contentReference[oaicite:34]{index=34}  
- **애플리케이션 라우팅·WebSocket·WAF** → ALB (단, LCU·WAF 비용 고려). :contentReference[oaicite:35]{index=35}
