---
layout: post
title: 정보통신기사 - 가상화 · 클라우드 서비스 모델
date: 2025-08-22 20:25:23 +0900
category: 정보통신기사
---
# 가상화 · 클라우드 서비스 모델 총정리 (tx-virt-cloud-service-models)

> **목표**: 정보통신기사/실무 엔지니어 관점에서 **가상화 원리**(CPU/메모리/스토리지/네트워크)와  
> **서비스 모델(IaaS/PaaS/SaaS/Serverless/CaaS/DBaaS)**, **배포 모델(퍼블릭/프라이빗/하이브리드/멀티클라우드)**,  
> **비용/성능/보안/운영(관측성·IaC)**까지 “원리 → 설계 → 예제 → 체크리스트 → 연습문제” 순으로 **생략 없이** 정리합니다.  
> 수식은 **MathJax**, 설정/코드는 **코드블록**으로 제시합니다.

---

## 0) 큰 그림: “가상화 → 표준화 → 자동화 → 서비스화(aaS)”

- **가상화(Virtualization)**: **하드웨어 자원**(CPU/메모리/스토리지/네트워크)을 **논리적 인스턴스**로 분할/추상화.  
- **클라우드(Cloud)**: 가상화 위에서 **셀프서비스/탄력성/미터링/탄력 확장**을 **API**로 제공(표준: **NIST SP 800-145**).  
- **서비스 모델**:  
  - **IaaS**: VM/블록스토리지/네트워크(보안그룹/VPC)  
  - **PaaS**: 런타임/미들웨어/빌드팩(앱 배포만)  
  - **SaaS**: 완성 서비스 구독(이메일/CRM 등)  
  - **서버리스/Function(FaaS)**, **CaaS(K8s)**, **DBaaS/메시지/캐시 등 Managed X**
- **배포 모델**: 퍼블릭/프라이빗/커뮤니티/하이브리드/멀티클라우드.

---

## 1) 가상화 분류와 하이퍼바이저

### 1.1 종류
- **Type-1(베어메탈)**: 하드웨어 위에 하이퍼바이저(ESXi, Hyper-V, KVM(host 커널) + libvirt/QEMU).  
- **Type-2(호스트형)**: OS 위에서 동작(VMware Workstation, VirtualBox) – 주로 데스크톱/랩.  
- **전가상화(Full)**: 하드웨어를 완전히 에뮬/격리.  
- **반가상화(Para)**: 게스트가 **하이퍼콜**로 하이퍼바이저 협조(Xen PV 역사).  
- **하드웨어 지원**: **Intel VT-x/EPT**, **AMD-V/NPT**로 **페이지 테이블 가속**.

### 1.2 컨테이너(운영체제 수준 가상화)
- **cgroups + namespaces**로 **프로세스 격리**(공유 커널).  
- 장점: 경량/빠른 기동/밀도↑. 단점: **커널 공유** → 하드 멀티테넌시엔 보안 고려.  
- **CaaS**(Kubernetes/Containerd)로 **스케줄링/자원/서비스**를 **API**로 관리.

---

## 2) CPU 가상화

### 2.1 스케줄링
- **vCPU → pCPU** 매핑: CFS/credit 스케줄러.  
- **오버커밋**: vCPU 합 > pCPU. 컨텍스트 스위치/스틸타임 고려.  
- **핀닝(affinity)**: 레이턴시 민감 워크로드에 vCPU→NUMA 노드 고정.

### 2.2 성능 팁
- **virtio/VMXNET3** 등 **para-virtualized 드라이버** 사용.  
- **HugePages/THP**로 TLB 미스↓.  
- **CPU 모델 고정**(라이브 마이그레이션/불일치 방지).

---

## 3) 메모리 가상화

### 3.1 기법
- **Shadow Page Table** vs **EPT/NPT**(하드웨어 2단 변환, 오버헤드↓).  
- **Ballooning**: 게스트에서 메모리 회수/반납.  
- **KSM/TP(페이지 공유)**: 동일 페이지를 **Copy-on-Write**로 공유.  
- **스와핑(호스트/게스트)**: 긴급 상황 외 금지.

### 3.2 계산 감(리틀의 법칙 형태)
\[
\text{VM 밀도} \approx \frac{\text{호스트 RAM} - \text{하이퍼바이저 오버헤드}}{\text{VM 평균 워킹셋}}
\]
- **워킹셋** 측정이 핵심(단순 vRAM 크기 아님).

---

## 4) 스토리지 가상화

### 4.1 가상 디스크 포맷
- **QCOW2**(CoW, 스냅샷/압축), **VMDK**, **VHDX**.  
- **Thin/Thick** 프로비저닝: Thin은 효율↑, 부족시 **over-provision risk** → 모니터링 필수.

### 4.2 스냅샷/체인
- **시점 고정(CoW)**: 체인 길어지면 **랜덤 I/O 레이턴시↑** → **합성/정리(merge)** 주기화.

### 4.3 성능 팁
- **멀티큐 블록/네트워크(virtio-scsi, vhost-net)**,  
- **NVMe 가상 디바이스**, **I/O 스케줄러 noop/deadline**.

---

## 5) 네트워크 가상화

- **vSwitch**: Linux bridge/OVS/NSX/vDS.  
- **VLAN/VXLAN(GENEVE)**: 오버레이로 L2 확장(DC/클라우드 네트워킹 표준).  
- **SR-IOV**: NIC 가상함수(VF)로 **직접 패스스루** → 레이턴시↓ Throughput↑(라이브 마이그레이션 제한).  
- **DPDK**: 폴링 모드로 커널 바이패스(고성능 NFV).  
- **보안**: 보안그룹/ACL, 마이크로세그멘테이션(NSX/Calico).

---

## 6) 라이브 마이그레이션/HA

- **라이브 마이그레이션**: 메모리 프리-복제 → 더티페이지 루프 → 짧은 스톱-앤-카피.  
- **스토리지 마이그레이션**: 백엔드 공유/복제 필요.  
- **클러스터 HA/DRS**: 호스트 장애 감지 후 자동 재시작/밸런싱.

---

## 7) 클라우드 서비스 모델

### 7.1 IaaS (Infrastructure as a Service)
- 제공: **VM/블록/오브젝트/VPC/로드밸런서**.  
- 고객 책임: **OS·미들웨어·앱·데이터·패치**.  
- 사용처: 커스텀 OS/네트워킹/리프트&시프트.

### 7.2 PaaS (Platform as a Service)
- 제공: **런타임/빌드팩/오토스케일/로그/모니터링**.  
- 고객 책임: **애플리케이션 코드/데이터**.  
- 사용처: 웹/백엔드 신속 배포, CI/CD 연동.

### 7.3 SaaS (Software as a Service)
- 제공: **완성 앱**(이메일/협업/ERP/CRM).  
- 고객 책임: **계정/권한/데이터 거버넌스**.  
- 사용처: 비핵심 기능 아웃소싱.

### 7.4 확장 모델
- **FaaS/서버리스**: 이벤트 기반 함수, **초단위 과금**, **무서버 관리**.  
- **CaaS**: **Kubernetes**를 서비스로 제공(제어면 운영 완화).  
- **DBaaS/Cache/MQ(Managed)**: 백업/패치/복제 SLA 포함.  
- **BaaS(Backend/MBaaS)**: 인증/스토리지/알림 등 모바일 백엔드.

---

## 8) 배포 모델

| 모델 | 설명 | 장점 | 유스케이스 |
|---|---|---|---|
| 퍼블릭 | 사업자 인프라 공유 | 탄력/속도/요금제 | 스타트업/변동 트래픽 |
| 프라이빗 | 전용 클라우드(온프레/호스팅) | 규제/커스텀 | 금융/공공/전용 HW |
| 하이브리드 | 온프레+퍼블릭 연동 | 점진 이전/데이터 인접성 | 백업/버스트 |
| 멀티클라우드 | 복수 사업자 | 종속성↓/비용최적화 | 글로벌/회피전략 |

---

## 9) 공유 책임 모델(핵심)

- **온프레**: 고객 100% 책임.  
- **IaaS**: **클라우드=물리/하이퍼바이저/기본 네트워크**, **고객=OS이상**.  
- **PaaS/SaaS**: **클라우드 책임↑**, 단 **데이터/접근/IAM**은 **항상 고객**.

---

## 10) 비용/요금제·용량 계획

### 10.1 과금 요소
- **컴퓨트**: vCPU·메모리·OS 라이선스.  
- **스토리지**: GB-월 + IOPS/처리량(지정 티어).  
- **네트워크**: **Egress** 중심(인터넷/리전간).  
- **관리형 서비스**: 인스턴스/시간당 또는 요청/GB.

### 10.2 구매옵션
- **온디맨드**: 유연, 단가↑.  
- **예약/약정(1~3년)**: 30~70%↓.  
- **스팟/프리엠티블**: 매우 저렴, **중단 가능** 워크로드.  
- **세이빙 플랜**: 사용량 약정형 할인.

### 10.3 간단 산식
\[
\text{월 비용} \approx \sum (\text{단가/hr} \times \text{시간}) + \sum (\text{GB-월}) + \text{Egress(GB)}\times\text{단가}
\]

**예)** vCPU 4/16GB 2대(0.12$/h), 블록 500GB(0.1$/GB-mo), egress 200GB(0.09$/GB)  
→ 컴퓨트 \(0.24 \times 720 \approx 172.8\$\) + 스토리지 \(50\$\) + egress \(18\$\) ≈ **241.8$/월**

---

## 11) 성능·SLA·가용성

### 11.1 SLA 조합(다중 AZ)
- AZ 가용성 \(A\). 독립이라 가정 시 **2AZ Active-Active**:
\[
A_\text{pair} = 1-(1-A)^2
\]
- A=99.9% → \(1-(10^{-3})^2 \approx 99.9999\%\) (이론 상한, 현실은 공통원인 실패 고려).

### 11.2 스토리지 IOPS/처리량
\[
\text{Throughput(MB/s)}\approx \frac{\text{IOPS}\times \text{블록크기(KB)}}{1024}
\]
- DB: 작은 블록/랜덤 I/O → **IOPS**가 중요.  
- DW/미디어: 큰 블록/순차 → **처리량**/병렬화 중요.

### 11.3 네트워킹
- **ENI/밴드폭 등급**, **초당 PPS 한도**, **보안그룹 룰 수** → 스케일 지표.  
- **옵션**: **SR-IOV**, **ENA/Accelerated Networking**.

---

## 12) 보안·거버넌스

- **IAM**: 최소권한/역할 기반/임시 자격(STS).  
- **네트워크 보안**: VPC/서브넷, 보안그룹(상태 기반), NACL(무상태), **프라이빗 엔드포인트**.  
- **데이터 보호**: KMS/HSM, 저장/전송 암호화, **키 수명/로테이션**.  
- **비밀관리**: Secrets Manager/Vault.  
- **감사**: CloudTrail/Activity Log, Config 규칙.  
- **제로 트러스트**: ID 중심, **프라이빗 액세스/BeyondCorp** 패턴.  
- **컴플라이언스**: ISO27001/SOC2/PCI/HIPAA – **공유책임** 명확히.

---

## 13) 운영: 관측성·자동화·배포

- **Observability**: 메트릭/로그/트레이스(OTel), 헬스체크/SLI/SLO.  
- **IaC**: Terraform/CloudFormation/Ansible – **불변 인프라**.  
- **CI/CD**: GitOps(Argo CD/Flux), Canary/Blue-Green, 롤백.  
- **비용 가시화**: 태그/코스트센터/쇼백·차지백.

---

## 14) 선택 가이드(의사결정 트리 요약)

1) **컨테이너 적합?**  
   - 예: **CaaS(Serverless/K8s)** 우선, 아니면 **PaaS**.  
   - 아니오: **IaaS**(OS 커스텀 필요/전용 드라이버).  
2) **상태 저장?**  
   - 예: **DBaaS/Managed Cache/Queue** 우선.  
3) **지연/성능 민감?**  
   - **SR-IOV/전용호스트/베어메탈** 검토.  
4) **규제/격리?**  
   - **프라이빗/전용호스트/전용VPC**.  
5) **비용 최적화?**  
   - **스팟/예약/오토스케일/라이트사이징**.

---

## 15) 아키텍처 예제

### 15.1 3-티어 웹(컨테이너 우선)
- **프론트**: CaaS(K8s) Deployment, Horizontal Pod Autoscaler.  
- **백엔드**: K8s + ConfigMap/Secret, StatefulSet(필요시).  
- **데이터**: DBaaS(멀티AZ), 캐시(ElastiCache류), 오브젝트 스토리지.  
- **네트워크**: L7 LB(ingress), WAF, 프라이빗 서브넷.  
- **CI/CD**: Git → Build → Registry → Argo CD.

### 15.2 레거시 리프트&시프트(IaaS)
- **VM**: ASG(오토스케일), 이미지 골든(AMI/템플릿).  
- **블록스토리지**: 성능 티어 고정 + 증분 스냅샷.  
- **DR**: 크로스리전 스냅샷 복제 + 예비 템플릿(Warm Standby).

---

## 16) 실습 스니펫

### 16.1 KVM(리눅스) – VM 생성(개념)
```bash
# Cloud-init 이미지를 이용해 간단 VM 생성
virt-install \
  --name web01 --ram 4096 --vcpus 2 \
  --disk size=30,backing_store=/var/lib/libvirt/images/ubuntu.qcow2,bus=virtio \
  --os-variant ubuntu22.04 \
  --network bridge=br0,model=virtio \
  --cloud-init user-data=cloudinit.yml \
  --graphics none --import
```

### 16.2 Docker/K8s – 컨테이너 배포
```bash
# Dockerfile (간단 웹)
FROM nginx:alpine
COPY ./public /usr/share/nginx/html

# k8s 배포
apiVersion: apps/v1
kind: Deployment
metadata: { name: web }
spec:
  replicas: 3
  selector: { matchLabels: { app: web } }
  template:
    metadata: { labels: { app: web } }
    spec:
      containers:
      - name: web
        image: registry.example.com/web:1.0
        ports: [ {containerPort: 80} ]
---
apiVersion: v1
kind: Service
metadata: { name: web-svc }
spec:
  type: ClusterIP
  selector: { app: web }
  ports: [ { port: 80, targetPort: 80 } ]
```

### 16.3 Terraform – IaaS 예시(개념)
```hcl
provider "aws" { region = "ap-northeast-2" }

resource "aws_vpc" "main" { cidr_block = "10.10.0.0/16" }

resource "aws_instance" "web" {
  ami           = "ami-xxxxxxxx"
  instance_type = "t3.small"
  subnet_id     = aws_subnet.public.id
  vpc_security_group_ids = [aws_security_group.web.id]
  user_data = <<-EOF
#!/bin/bash
yum -y install nginx && systemctl enable --now nginx
EOF
  tags = { Name = "web01" }
}
```

---

## 17) 서버리스/FaaS 설계 포인트

- **이벤트 소스**: HTTP/Queue/Object-put/Cron.  
- **콜드스타트**: 런타임/메모리/네트워킹에 비례 → **프로비저닝 동시성/프리워밍**.  
- **상태 관리**: **외부 스토리지**(KV/DB/오브젝트).  
- **과금**: 호출수 × GB-sec + egress.  
- **패턴**: **Fan-out/Fan-in**, **스텝 함수/워크플로**로 조합.

---

## 18) 멀티클라우드/이식성

- **공통 추상화**: **Kubernetes + Istio/Linkerd**(서비스메시), **OpenTelemetry**, **Terraform**.  
- **데이터 중력**: DB/데이터레이크의 **이행 비용↑** → **데이터 레이어 전략** 선결.  
- **네트워크**: 전용회선/글로벌 LB/Anycast, 하이브리드 DNS.

---

## 19) 비용 최적화 체크리스트

- [ ] 사이징: vCPU/메모리/디스크 **우측정** 후 **라이트사이징**.  
- [ ] 스토리지: **티어링**(핫/콜드), 수명주기 정책(오브젝트 IA/아카이브).  
- [ ] 컴퓨트: **예약/세이빙/스팟** 혼합, 탄력 스케줄(야간 감축).  
- [ ] 네트워크: **Egress 최소화**, 프라이빗 엔드포인트/캐시.  
- [ ] 관측: 태깅/코스트 대시보드, 알림 임계.

---

## 20) 보안 체크리스트

- [ ] **IAM 최소권한**, 권한 경계/서비스 제어 정책.  
- [ ] **MFA/조건부 액세스**, 일회성 크리덴셜.  
- [ ] **암호화**: 저장/전송 기본 활성, 키 로테이션/KMS 권한 분리.  
- [ ] **네트워크 세분화**: 퍼블릭/프라이빗, SG/NACL, 프라이빗 링크.  
- [ ] **감사/규정**: 로그 불변 저장, Config/정책 준수.  
- [ ] **비밀관리**: 중앙 금고(Vault/Secrets), 로테이션.

---

## 21) 운영/신뢰성 체크리스트

- [ ] **SLI/SLO** 정의(가용성/지연/오류율).  
- [ ] **헬스체크/리트라이/써킷브레이커**(서비스메시).  
- [ ] **오토스케일**: HPA/VPA/ASG, 예열.  
- [ ] **백업/DR**: RPO/RTO, 멀티AZ/리전 복제, 복구 훈련.  
- [ ] **IaC + GitOps**: 변경 추적/롤백.  
- [ ] **재해 모의훈련(Game Day)**, 카오스 엔지니어링.

---

## 22) 자주 틀리는 포인트(정오표)

1) **컨테이너 = 가상머신**이 아님(커널 공유).  
2) **스냅샷은 백업이 아니다**(동일 장애영역).  
3) **멀티AZ=무적** 아님(공통원인·구성실수·데이터층).  
4) **서버리스**도 비용 무한정↓ 아님(고빈도/고지속이면 컨테이너/IaaS가 유리).  
5) **SR-IOV**는 성능↑하지만 **이동성/가용성** 제약.  
6) **오버커밋 남용**은 지연폭증/스톨 유발.  
7) **공유책임**에서 데이터 보안/IAM은 **항상 고객 책임**.

---

## 23) 연습문제(풀이 포함)

**Q1.** Type-1 vs Type-2 하이퍼바이저의 차이와 사용처?  
**A.** Type-1은 베어메탈(ESXi/Hyper-V/KVM)로 서버/프로덕션, Type-2는 호스트OS 위(개발/테스트).

**Q2.** vCPU 오버커밋을 할 때 관찰해야 할 핵심 지표 2가지는?  
**A.** **CPU steal time**(게스트 대기), **런큐 길이**/컨텍스트 스위치(지연 지표).

**Q3.** IaaS·PaaS·SaaS 중 패치 책임이 가장 큰 것은?  
**A.** **IaaS**(OS/미들웨어까지 고객이). PaaS는 런타임까지 제공, SaaS는 앱까지 제공.

**Q4.** 2AZ 액티브-액티브에서 AZ당 가용성 99.95%면 이상적 조합 가용성은?  
**A.** \(1-(0.0005)^2=99.999975\%\) (현실은 공통원인 고려해 더 낮게 잡음).

**Q5.** 서버리스 콜드스타트를 완화하는 방법 2가지?  
**A.** **프로비저닝 동시성/프리워밍**, **경량 런타임/메모리 증가**로 초기화 가속.

**Q6.** DB 워크로드에서 스토리지 선택의 핵심 지표는?  
**A.** **IOPS/지연**, 로그/랜덤 I/O 중심. 처리량은 2순위.

**Q7.** 멀티클라우드에서 가장 큰 이동 장애 요소는?  
**A.** **데이터 중력(대용량 데이터/DB 이행 비용)**.

---

## 24) 압축 암기표(시험 직전 18줄)

1) 가상화: **Type-1/2**, 전가상화/반가상화, **EPT/NPT**  
2) 컨테이너: **cgroups/namespaces**, 커널 공유  
3) CPU: **vCPU→pCPU**, 오버커밋, **핀닝/NUMA**  
4) 메모리: **Ballooning/KSM/HugePages**, 워킹셋  
5) 스토리지: **QCOW2/VMDK**, Thin/Thick, 스냅샷 체인 관리  
6) 네트워크: **vSwitch/VXLAN**, **SR-IOV/DPDK**  
7) 마이그레이션: **라이브**(프리복제→스톱앤카피)  
8) IaaS/PaaS/SaaS + **FaaS/CaaS/DBaaS**  
9) 배포: **퍼블릭/프라이빗/하이브리드/멀티**  
10) 공유책임: 데이터/IAM은 **항상 고객**  
11) 비용: **컴퓨트+스토리지+이그레스**, 예약/스팟  
12) SLA 조합: \(1-(1-A)^n\) (독립 가정)  
13) 보안: **IAM 최소권한/KMS/프라이빗 링크/감사**  
14) 운영: **Observability, IaC, GitOps, 오토스케일**  
15) DR: **RPO/RTO**, 멀티AZ/리전, 복구훈련  
16) 서버리스: 이벤트/Fan-out, 콜드스타트  
17) 성능: **virtio/VMXNET3**, HugePages, 멀티큐  
18) 데이터 중력: 멀티클라우드는 **데이터 전략**부터

---

## 25) 마무리

가상화는 **표준 하드웨어를 소프트웨어적으로 쪼개어 다루는 기술**, 클라우드는 그 위에 **API·자동화·계량 과금**을 더한 **운영 모델**입니다.  
업무 특성에 맞춰 **IaaS↔PaaS↔SaaS**, **컨테이너/서버리스**를 적절히 조합하고, **공유책임/보안/비용/가용성**을 **수식과 체크리스트**로 관리하면  
확장성과 안정성을 동시에 잡을 수 있습니다.