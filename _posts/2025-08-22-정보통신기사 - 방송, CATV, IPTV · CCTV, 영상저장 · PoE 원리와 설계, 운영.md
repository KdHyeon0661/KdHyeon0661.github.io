---
layout: post
title: 정보통신기사 - 방송/CATV/IPTV · CCTV/영상저장 · PoE 원리와 설계/운영
date: 2025-08-22 10:25:23 +0900
category: 정보통신기사
---
# 방송/CATV/IPTV · CCTV/영상저장 · PoE 원리와 설계/운영 완전정리

## 큰 그림(1페이지)

```
[방송] 지상파/위성/케이블
   ├─ RF/변조 (OFDM, QAM) ─ 안테나/헤드엔드
   ├─ CATV(HFC) ─ 광노드/증폭기/동축망 ─ STB/TV
   └─ IPTV(멀티캐스트) ─ 코어/엣지/QoS ─ 홈게이트웨이/셋톱

[CCTV] 카메라(센서/코덱/PoE)
   ├─ 전송 (UTP/광, PoE 전원) ─ 스위치(IGMP/ QoS)
   ├─ 저장 (NVR/VMS/서버/NAS, RAID, 보관정책)
   └─ 보안 (암호/권한/로그/망분리)

[PoE] 802.3af/at/bt
   ├─ PSE(스위치/인젝터) ↔ PD(카메라/AP/폰)
   ├─ 협상(Class/LLDP) ─ 케이블 저항/전압강하/발열
   └─ 전원예산/번들링/온도상승
```

---

# PART A. 방송/CATV/IPTV

## A-1) 방송의 변조와 채널(핵심만)

- **지상파(DTV)**: **OFDM** 변조(다중경로에 강함), 채널 대역폭 6/7/8 MHz(국가별 상이), **PSIP**(프로그램/채널정보).
- **위성(DVB-S/S2)**: QPSK/8PSK, 고차변조+FEC. **LNB**로 Ku/Ka 변환 후 IF로.
- **케이블(CATV)**: **QAM**(64/256-QAM)로 다수 채널 다중, HFC망에서 전송.
- **IPTV**: IP 멀티캐스트(IGMP, PIM), MPEG-TS/RTP/UDP 스트림.

### 용어 스냅샷

- **QAM**: 직교진폭변조(케이블), 고차변조일수록 **대역 효율↑, SNR 요구↑**
- **OFDM**: 직교 다중부반송파(지상파), **다중경로/주파수 선택성**에 강함
- **MPEG-TS**: 전송스트림 188바이트 패킷, 7-TS 레이어링(연속성 카운터/PMT/PMI 등)

---

## A-2) CATV(HFC) 구조

```
[헤드엔드]─┬─CMTS(DOCSIS)/QAM 변조기/TS 라우터
            └─광 송신기(1550nm) ──[광분배]── [광노드] ── [동축증폭기체인] ── 가입자
```

- **헤드엔드**: 방송(라이브 인제스트), **CAS/DRM**, EPG, QAM 변조기.
- **HFC(Hybrid Fiber Coax)**: **광(백본)** + **동축(라스트 마일)**.
- **광노드**: 광→RF 변환, 세그먼트 분할(스플릿), 업링크(리턴패스) 잡음관리 중요.
- **증폭기**: 라인앰프/이퀄라이저(틸트 보정), 탭/스플리터에서 **수신레벨** 유지.

### 레벨 설계(개념)

- **다운스트림**: 헤드엔드 출력(dBmV) − 광/동축 손실 + 앰프이득 = 가입자단 **0~+15 dBmV** 목표(케이블모뎀/셋톱의 권장 입력범위).
- **업스트림**: 가입자 → 헤드엔드까지 **역방향 노이즈/레벨** 컨트롤(DOCSIS는 모뎀이 송신출력을 자동 조절).

---

## A-3) IPTV 구조(엔드투엔드)

```
[라이브/VoD 인코더] → [팩저(ABR/HLS/DASH or TS)] → [CDN/IGMP 코어]
   → (QoS/멀티캐스트) → [엣지 스위치(IGMP Snooping)]
      → [홈 게이트웨이/셋톱]
```

- **라이브 채널**: **멀티캐스트(IGMP/PIM)** 기반, 지연 최소화.
- **VoD/OTT**: **ABR(적응형 비트레이트)**, HLS/DASH(HTTP 기반), 캐시친화적.
- **QoS**: DSCP/CoS로 **EF/AF** 마킹, **혼잡시 우선순위** 보장.
- **IGMP**: v2(Leave 바로 전달 어려움), v3(소스별 멀티캐스트). **Snooping** 활성화 필수(불필요 포워딩 방지).

### 스위치 예시 설정(베이직)

```shell
# VLAN, IGMP 스누핑, 쿼리어

vlan 200
 igmp snooping
 ip igmp snooping querier 10.10.200.1

# 멀티캐스트 라우터 포트 힌트

interface gi1/0/24
 ip igmp snooping mrouter

# 가입자 포트

interface gi1/0/3
 switchport access vlan 200
 spanning-tree portfast
 storm-control multicast level 50.00
```

---

## A-4) 대역폭과 화질(코덱/프로파일)

| 코덱 | 해상도/프레임 | 평균 비트레이트(참고) |
|---|---|---|
| H.264 | 1080p@30 | 3~6 Mbps(라이브 방송) |
| H.265 | 1080p@30 | 1.5~3 Mbps |
| H.265 | 4K@60 HDR | 12~25 Mbps(방송/OTT) |

- **H.265/HEVC**: H.264 대비 **30~50% 절감** 가능, 장비/특허/라이선스 고려.
- **H.266/VVC**: 더 높은 효율, 실무 채택은 장비/에코시스템 성숙도 의존.

---

## A-5) 방송/케이블/IPTV 설계 체크리스트

- [ ] **채널 계획**(주파수/간섭/필터링), QAM 변조 스펙
- [ ] **레벨 플랜**(다운/업스트림 dBmV), 증폭기/탭 손실 밸런스
- [ ] **리턴패스 잡음** 관리(업링크 SNR)
- [ ] **IPTV 멀티캐스트**: IGMP Snooping/Querier, PIM 경로, DSCP 정책
- [ ] **CAS/DRM/EPG** 라이선스/키관리
- [ ] **STB/게이트웨이** 호환성(CEC/HDCP/HDMI/CEC Pass-Through)

---

# PART B. CCTV/영상저장

## B-1) 카메라 구성 요소

- **이미지 센서**: CMOS(이면조사/저조도 성능), 글로벌/롤링 셔터.
- **렌즈**: 초점거리/개방값(F)/IR 보정/오토아이리스(DC/P).
- **IR/저조도**: IR LED, **WDR**(광역역광), 3D NR(노이즈 리덕션).
- **코덱**: H.264/H.265, 프로파일(Main/High), GOP/키프레임 간격.
- **네트워크**: 100M/1G, ONVIF(프로파일 S/G/T), **RTSP/HTTP API**.
- **전원**: PoE/PoE+/PoE bt(아래 PART C).

### 설치 팁

- 얼굴/번호판 각도 **15°~30° 이내**, 수평선과 눈높이 고려.
- 카메라 흔들림 방지(브래킷 강성), **방수/결로 대책**(IP66/67, 실리카겔).

---

## B-2) 영상 품질과 비트레이트

비트레이트는 **해상도 × 프레임레이트 × 장면복잡도 × 코덱효율**에 좌우.

### 간이 경험값(‘일반 CCTV 장면’ 기준)

- H.264 1080p@15fps: **2~4 Mbps**
- H.265 1080p@15fps: **1~2 Mbps**
- H.265 4K@15fps: **6~12 Mbps**
- 실외 복잡 장면·WDR 켜면 ↑, 인코더 **CQP/CVBR** 설정에 따라 변동.

---

## B-3) 저장용량 계산(핵심 공식)

카메라 i의 평균 비트레이트 $R_i$ [Mbps], 보관일수 $D$ 일, 24시간 촬영이라면

$$
\text{Storage [TB]} \approx \frac{\sum_i R_i\ (\text{Mbps}) \times 3600 \times 24 \times D}{8\times 10^6}
= 0.0108 \times D \times \sum_i R_i
$$

> 유효값: 1TB = $10^{12}$ bytes(디스크 마케팅 단위)에 근사.

### 예제 1) 매장 30대, 1080p@15fps, H.265 1.5 Mbps/대, 30일 보관

- $\sum R_i = 30 \times 1.5 = 45$ Mbps
- $\text{TB} \approx 0.0108 \times 30 \times 45 = 14.58 $ → **약 15 TB**(+ 파일시스템/RAID 오버헤드 10~20% 여유)

### 예제 2) 주차장 4K 20대, 6 Mbps/대, 30일

- $\sum R_i = 120$ Mbps → $0.0108 \times 30 \times 120 = 38.88$ → **약 40 TB**

> **Tip**: 모션녹화(활동률 30~50%)를 쓰면 **용량 절감**. 단, **증거 보전** 정책과 상충되지 않는지 확인.

---

## B-4) NVR/VMS/스토리지 설계

- **NVR 일체형**: 소규모(≤32~64ch), 관리 간편.
- **VMS + 서버/NAS**: 중대형. **아키텍처**(레코딩 서버, DB/메타, 프록시, 클라이언트).
- **디스크**: Surveillance 전용 HDD, **RAID**(5/6/10), 핫스페어, **분산 녹화**(Failover).
- **네트워크**: 녹화 트래픽(카메라 → 레코더) + 클라이언트 재생 트래픽을 분리(VLAN/QoS).
- **보안**: 계정 최소권한, **암호 정책**, **로그**(접속/다운로드), **워터마킹**.

### RAID 용량 근사

- RAID5: $ (N-1) \times \text{Disk} $
- RAID6: $ (N-2) \times \text{Disk} $
- RAID10: $ (N/2) \times \text{Disk} $

**예**) 12TB × 8HDD, RAID6 → 유효 $= (8-2) \times 12 = 72$TB.
**주의**: 파일시스템/메타/스페어 여유 10~20% 추가.

---

## B-5) 네트워크 설계(멀티캐스트/유니캐스트)

- **녹화는 보통 유니캐스트(RTSP/RTP)**.
- 다수 클라이언트 라이브 모니터링은 **멀티캐스트** 고려(스위치 IGMP 스누핑 필요).
- **QoS**: 카메라(DSCP AF41 등), 관리/제어 트래픽 분리, **STP 루프 방지**, 포트보안.

### 스위치 샘플(카메라 VLAN + 관리 VLAN)

```shell
vlan 10  # CAMERA
vlan 99  # MGMT

interface gi1/0/1
 switchport access vlan 10
 power inline auto  # PoE
 spanning-tree portfast

interface vlan 10
 ip address 192.168.10.1/24

ip igmp snooping vlan 10
```

---

## B-6) 개인정보보호/운영정책 10포인트(요지)

- **안내판**(목적/범위/시간/연락처), **녹음 금지**, **임의조작 금지**
- **보관기간**: 목적 최소(산정 어려우면 30일 권고), 만료 시 **지체 없이 파기**
- **열람/사본**: 10일 내 처리(타인 모자이크), **로그 보관**(접근기록)
- **위탁**: 수탁자 표시·계약 보호조치, **정기점검**(패치/취약점)

---

## B-7) 설치 위치/사양 예시

- **매장**: 출입구(역광 WDR), 카운터(사생활 배려 각도), 통로(와이드). 1080p@15fps, H.265, 1~2 Mbps.
- **주차장**: 4~8MP, IR 30~80m, 번호판 인식(셔터 1/1000s 근처, 보행/차량 모드 분리).
- **엘리베이터**: 진동/노이즈, 플렉시블 케이블, PoE 전력/온도 확인.

---

# PART C. PoE(IEEE 802.3af/at/bt) — 전원/발열/전압강하

## C-1) PoE 표준 요약

| 표준 | 명칭 | PSE 포트 공급 | PD 보장 | 전압범위(대략) | 용도 |
|---|---|---|---|---|---|
| 802.3af | PoE(Type 1) | 15.4 W | 12.95 W | ~44–57 V | 소형 카메라/폰 |
| 802.3at | PoE+(Type 2) | 30.0 W | 25.5 W | ~50–57 V | PTZ 소형/듀얼밴드 AP |
| 802.3bt | PoE++(Type 3) | 60 W | 51 W | ~50–57 V | 고사양 AP/카메라 |
| 802.3bt | PoE++(Type 4) | 90~100 W | 71~90 W(벤더별) | ~52–57 V | PTZ 대형/멀티센서 |

- **Class/LLDP**로 전력 협상(최대치/동적).
- **4페어 공급**(bt)는 **동선 발열↓, 전압강하↓** 장점.
- **PSE 전원예산**: 총 PoE 파워 ≥ Σ(각 포트 Max) × 동시율 + 여유.

---

## C-2) 케이블 저항/전압강하/손실

동선 DC 루프저항(채널 기준, 2페어/4페어)에 따라 전압강하/손실이 결정.

- **대략**: Cat6 24AWG 기준 **DC 루프저항 ≈ 19 Ω/100m** (2페어 사용 시).
- 전류 $I = \frac{P_{PD}}{V_{cable}}$ (케이블 상 전압).
- 전압강하 $\Delta V = I \cdot R$, 손실 $P_{loss} = I^2 R$.

> **실무팁**: **채널 100m** 가깝고 **bt Type4**처럼 고전력일수록 **전압 강하/발열**이 민감. **케이블 등급/번들링**(온도)과 **환경**(상온/고온) 고려.

### 예제 1) 802.3at, PD 20W, 100m, 2페어

가정: 케이블 구간 전압 약 52V, 루프저항 19Ω/100m
- $I \approx \frac{20}{52} \approx 0.385 A$
- $\Delta V = 0.385 \times 19 \approx 7.3 V$
- 케이블 입력 ~52V → PD 단 ~44.7V (허용범위 내)
- 손실 $P_{loss} = I^2 R \approx 0.148 \times 19 \approx 2.8 W$

### 예제 2) 802.3bt Type 4, PD 70W, 90m, 4페어

4페어면 **루프저항 절반**으로 근사(병렬 효과). 19Ω → **~9.5Ω/100m** → 90m ≈ 8.55Ω
- $I \approx \frac{70}{52} \approx 1.346 A$ (4페어 분전으로 페어당 전류↓)
- $\Delta V \approx 1.346 \times 8.55 \approx 11.5 V$
- 케이블 입력 52V → PD 약 40.5V (경계). **케이블/연결부 품질·온도상승**에 따라 위험.
→ **대책**: 케이블 길이 단축, **굵은 도체/저저항 케이블**, **중간 스위치**, **48V보다 높은 소스(표준 범위 내)**, **동시율 제어**.

> **핵심**: **PD 최소동작전압**(보통 > 42V 수준) vs **케이블 후단 전압**을 비교하고 **여유 ≥ 2~3V** 확보.

---

## C-3) 번들링/온도상승

- PoE 다량 번들(예: 48가닥)에 고전력 **동시 공급** 시 케이블 내부 온도 상승.
- 대응: **통기형 트레이**, **소번들(12/24)**, **간격 유지**, **케이블 온도 정격 확인**(60/75/90℃), **상한온도 고려 길이/전력 디레이팅**.

---

## C-4) PSE 전원예산 계산

### 공식

$$
P_{PSE,\ total} \ge \sum_j P_{port,\ max,j} \times U \times \gamma
$$
- $U$: **동시사용율**(예: 0.6~0.8)
- $\gamma$: **여유계수**(예: 1.1~1.25, 환경/노후/확장 고려)

### 예제) 48포트 PoE+ 스위치, 카메라 30대(각 12W), AP 8대(각 20W), 동시율 0.8, 여유 1.15

- $ \sum P_{max} = 30 \times 12 + 8 \times 20 = 360 + 160 = 520 W$
- 필요 $ \approx 520 \times 0.8 \times 1.15 \approx 478 W$
→ **500~600W 파워 서플라이** 선택(팬/고온 시 추가 여유).

---

## C-5) LLDP-MED/PoE 협상

- **Class 기반**: 포트 클래스(0~8)로 예약.
- **LLDP-MED**: 장치가 **정확한 전력 요청**(예: 7.4W)이 가능 → **오버리저브 방지**.
- **실무팁**: 카메라 펌웨어 최신화, **IR/히터 Peak** 전력도 반영.

---

# PART D. “방송+CCTV+PoE” 통합 설계 예제

## D-1) 시나리오

- **대형 리테일몰**: 디지털 사이니지(방송/IPTV), 공용부 CCTV 220대, PoE 스위치 12개, 30일 보관.

### 요구

- IPTV 라이브 채널(뉴스/홍보) + VoD
- CCTV: 1080p@15fps, H.265, 평균 1.6 Mbps/대
- PoE: 일반 10W/대, PTZ 25W/대(20대), IR 펄스 고려

---

## D-2) 네트워크/멀티캐스트

- **IPTV VLAN 200**: 멀티캐스트 **IGMP Snooping** + Querier
- **CCTV VLAN 10**: 유니캐스트 녹화(멀티뷰는 멀티캐스트 옵션)
- **관리 VLAN 99**: 스위치/카메라/NVR 관리

### 핵심 설정 스니펫

```shell
vlan 10,200,99
ip igmp snooping vlan 200
ip igmp snooping querier 200 10.200.0.1

# 업링크 QoS

policy-map QOS_UPLINK
 class IPTV
  set dscp ef
 class CCTV
  set dscp af41
 class default
  set dscp be
```

---

## D-3) 저장 용량 산정

- CCTV 220대 × 1.6 Mbps = **352 Mbps** 평균
- TB ≈ 0.0108 × 30 × 352 ≈ **114 TB**
- **RAID6 유효 120TB** 타깃 → 12TB×12HDD = 144TB(RAID6 유효 120TB) **2셋** 구성(이중화/로드분산) 권장.

---

## D-4) PoE 전원예산

- 일반 200대 × 10W = 2000W
- PTZ 20대 × 25W = 500W
- 총 2500W, 동시율 0.7, 여유 1.15 → 필요 ≈ 2500×0.7×1.15 ≈ **2013W**
- **스위치 12대**면 대당 **≥ 180W** 필요 → **24포트/370W**급 섞어 배치, PTZ는 **bt 포트** 근처 분산.

---

## D-5) 케이블/전압강하 대책

- PTZ(25W) 장거리(>80m) 구간 **4페어 PoE(bt)** 지원 스위치 우선,
- **케이블 길이 70~80m 이하로 설계**, 장거리 구간에는 **중간 IDF** 증설 또는 **PoE 익스텐더(표준 호환)** 검토.

---

## D-6) 보안/운영

- **암호/인증**: 기본계정 변경, 2FA(가능 시), ONVIF 사용자 RBAC
- **업데이트**: 펌웨어 주기 점검, 취약점 공지 대응
- **로그**: 접속/다운로드/설정변경 로그 **1년+ 보관**, NTP 동기화
- **개인정보**: 안내판, 열람 10일, 모자이크 절차 문서화

---

# PART E. 현장 점검 체크리스트

### E-1) 방송/CATV/IPTV

- [ ] QAM/OFDM 파라미터, **레벨 플랜(dBmV)**
- [ ] 리턴패스 잡음/필터링, 증폭 틸트 보정
- [ ] IPTV **IGMP Snooping/Querier**, PIM 경로, **QoS(DSCP)**
- [ ] STB/게이트웨이 호환, DRM/CAS 라이선스

### E-2) CCTV/저장

- [ ] 카메라 **WDR/IR**, 각도/높이/흔들림 방지
- [ ] **비트레이트 프로파일**(H.265, GOP, fps), 모션/스케줄
- [ ] 저장 용량/RAID, **Failover**, 분산녹화
- [ ] VLAN 분리/QoS, STP/루프, 포트보안
- [ ] 개인정보(안내판/보관/열람/모자이크)

### E-3) PoE

- [ ] PSE 전원예산(동시율/여유)
- [ ] **길이/전압강하/발열**(번들링/통기)
- [ ] LLDP/클래스 협상, IR/히터 피크 고려
- [ ] 접지/서지(SPD), 커넥터 품질/토크

---

# PART F. 트러블슈팅 Q&A

**Q1. IPTV 채널 전환 시 전체 네트워크로 멀티캐스트 홍수가…**
A. **IGMP Snooping/Querier** 확인, 멀티캐스트 라우터 포트 지정, 스누핑 테이블 타임아웃 조정.

**Q2. 일부 카메라가 밤마다 재부팅**
A. IR LED 피크로 PoE 부족 가능. **포트 전력 제한 상향/LLDP 협상/PoE 예산 분산**, 케이블 길이/접속저항 확인.

**Q3. 녹화 누락/프레임 드랍**
A. 레코더/디스크 IO 부족, 네트워크 혼잡(QoS 미적용), 카메라 **GOP 너무 짧음**(키프레임 폭주), 스위치 버퍼.

**Q4. 장거리 PoE에서 간헐 재부팅**
A. 전압강하/접점저항. **케이블 교체(굵은도체/고품질)**, **길이 단축**, **중간 스위치/익스텐더**.

**Q5. 화면 플리커/노이즈**
A. 전원 접지/EMI, LED 등 조명 주파수, 셔터/게인 설정, UTP와 전력선 이격/교차 90°.

---

# PART G. 공식/계산 모음

1) **저장용량**
$$
\text{TB} \approx 0.0108 \times D \times \sum R_i(\text{Mbps})
$$

2) **전압강하/손실**
$$
\Delta V = I\cdot R,\quad P_{loss}=I^2R,\quad I \approx \frac{P_{PD}}{V}
$$

3) **PSE 예산**
$$
P_{total} \ge \sum P_{max} \cdot U \cdot \gamma
$$

4) **RAID 유효**
- R5: $(N-1)$, R6: $(N-2)$, R10: $N/2$ (× 디스크 용량)

---

# PART H. 설계 도면/라벨링 예

```
VLAN 10 (CCTV): 192.168.10.0/24
VLAN 200 (IPTV): 10.200.0.0/24
VLAN 99 (MGMT): 10.99.0.0/24

Label:
IDF1-PP1:01→L1-Entrance-01 (Cat6A)
MDF-ODF1:T2:F01→IDF3-ODF1:T1:F01 (SM 12C)
```

---

# PART I. 미니 실습

## I-1) 저장용량 산출 파이썬(개념 확인용)

```python
def storage_tb(avg_mbps_list, days):
    return 0.0108 * days * sum(avg_mbps_list)

# 예: 1080p H.265 1.5 Mbps 30대, 30일

print(round(storage_tb([1.5]*30, 30), 2))  # 14.58 TB
```

## I-2) PoE 전압강하 근사

```python
def poe_drop(pd_watt, cable_v=52.0, loop_ohm_per_100m=19.0, length_m=100.0, pairs=2):
    """pairs=2 (af/at), 4 (bt) → 루프저항 병렬 효과 근사"""
    R = loop_ohm_per_100m * (length_m/100.0) * (2.0/pairs)  # 4페어면 절반 근사
    I = pd_watt / cable_v
    dV = I * R
    v_pd = cable_v - dV
    loss_w = I*I*R
    return v_pd, dV, loss_w

print(poe_drop(20, 52.0, 19.0, 100.0, 2))   # (약 44.7V, 7.3V, 2.8W 근사)
```

> **시험 포인트**: 수치를 ‘정확히’ 요구하기보다, **관계/크기**(길이↑ → 전압강하↑, 4페어 → 강하↓)를 이해하는 게 관건.

---

# PART J. 오답노트/함정 정리

- **“PoE 케이블 100m면 다 된다”** → 고전력 bt, 고온/번들링 상황에서 **전압 부족** 가능.
- **“저장 30일은 무조건 30TB”** → 비트레이트/카메라수/코덱에 따라 **천차만별**.
- **“IPTV는 유니캐스트만”** → 라이브는 **멀티캐스트**가 기본(스누핑 필수).
- **“WDR 켜면 항상 좋다”** → **비트레이트 증가/노이즈**와 트레이드오프.
- **“IR만 세게”** → 근거리 **화이트아웃**(프리셋/게인/셔터 동조 필요).

---

# PART K. 한 장 요약

1) **CATV=QAM, 지상파=OFDM, IPTV=멀티캐스트**.
2) HFC는 **헤드엔드-광노드-동축**: **레벨 플랜**이 관건.
3) IPTV는 **IGMP Snooping/Querier + QoS** 없으면 홍수난다.
4) 카메라 비트레이트는 **장면/코덱/GOP**에 좌우.
5) 저장 TB ≈ **0.0108×일수×총Mbps**(근사).
6) NVR/RAID는 **여유 10~20%**, Failover 고려.
7) CCTV/개인정보: **안내판·녹음금지·열람10일·파기**.
8) PoE: **af/at/bt** → 전력/전압/발열/길이 계산.
9) 전압강하는 **I×R**, 손실은 **I²R**, 4페어가 유리.
10) 번들링은 **온도상승**— 통기/소번들화/고정격 케이블.
11) PTZ/IR은 **피크 전력**을 본다(LLDP/클래스 셋업).
12) **문서화/라벨/로그**가 유지보수의 반이다.
