---
layout: post
title: 형식언어와 오토마타 - Post 대응 문제
date: 2025-08-05 23:20:23 +0900
category: 형식언어와 오토마타
---
# Post 대응 문제(PCP, Post Correspondence Problem) — 정의, 성질(반결정/결정불가능), 변형(MPCP), 고전적 감소 증개요, 예시·연습

**핵심 요지**
- **PCP**는 두 목록의 문자열 쌍을 이어 붙여 **위·아래 문자열을 같게** 만들 수 있느냐를 묻는 문제다.
- PCP는 **반결정 가능(RE)** 이지만 **결정 불가능(undecidable)** 이다. (더 나아가 **RE-완전**)
- **수정형(MPCP)** 을 거쳐 **튜링 기계 수용성**이나 **정지 문제**로부터 표준 감소를 한다.
- 알파벳이 **이진**이어도(문자 2개) 여전히 결정 불가능.
- **유계(bounded) PCP**(해 길이를 상한으로 주면)는 **결정 가능**(완전 탐색으로 됨).
- **단문자(단일 알파벳) PCP**는 **결정 가능**(길이 합 문제로 환원됨).

---

## 1) 정의

알파벳 \(\Sigma\) 위의 문자열 쌍
\[
P=\big((u_1,v_1), (u_2,v_2),\dots,(u_k,v_k)\big),\quad u_i,v_i\in\Sigma^*
\]
가 주어졌을 때, **지수열** \(i_1,i_2,\dots,i_m\) (\(m\ge 1\))이 존재하여
\[
u_{i_1}u_{i_2}\cdots u_{i_m} \;=\; v_{i_1}v_{i_2}\cdots v_{i_m}
\]
가 되는지 묻는다. 존재하면 **해(solution)** 가 있다고 한다.

- **MPCP (Modified PCP)**: 해가 **반드시 1번 타일로 시작**해야 한다(즉, \(i_1=1\) 이도록 강제).

> 직관: **타일** \(\dfrac{u_i}{v_i}\) 를 줄 세워 **윗줄·아랫줄이 동일**한 긴 문자열을 만들 수 있느냐.

---

## 2) 간단 예시(해가 있는 경우)

\[
\Sigma=\{a,b\},\quad
P=\left\{
\frac{ab}{a},\;
\frac{b}{ba},\;
\frac{a}{ab}
\right\}
\]

열 \(1,2,3\)을 차례로 놓으면
\[
\text{위: } ab\cdot b\cdot a = abba,\qquad
\text{아래: } a\cdot ba\cdot ab = abba
\]
로 같아진다 ⇒ **해 존재**.

---

## 3) 알고리즘적 성질 — RE이지만 결정 불가능

### 3.1 반결정 가능(RE)
모든 지수열을 길이 1,2,3,… 순서로 **열거**하며 위·아래를 비교하면,
- 해가 **있으면** 언젠가 발견(accept),
- 해가 **없으면** 영원히 탐색(루프) → **반결정**.

```text
for m = 1,2,3,...:
  for all sequences (i1,...,im) ∈ {1..k}^m:
    if u_{i1}...u_{im} == v_{i1}...v_{im}: accept
# never halts if no solution
```

### 3.2 결정 불가능(undecidable)
- **정리**: PCP는 결정 불가능. (심지어 \(|\Sigma|=2\)에서도)
- 표준 증법: **A_TM(튜링 수용성)** 또는 **정지 문제**에서 **MPCP**로, 다시 MPCP에서 PCP로 **many-one 감소**.

> 결론: PCP는 **RE-완전**(many-one 의미).  
> 보수 \(\overline{\text{PCP}}\)는 **RE가 아님**(RE=coRE가 아니라면).

---

## 4) MPCP와 PCP의 관계

- **MPCP ⇒ PCP**: “항상 1번으로 시작”을 강제하려면, **머리·꼬리 표식**(예: `#`, `$`) 과 특수 타일을 추가해  
  어떤 해라도 **1번을 먼저 쓰지 않으면 정렬이 불가능**하도록 만든다.  
  (교과서적 구성: 시작 타일 \(\dfrac{\#u_1}{\#v_1}\), 접두사·접미사 보정 타일들로 1번을 첫 칸에 고정)

---

## 5) 정지 문제에서의 **감소 증 스케치** (M ⊢ w를 PCP로)

목표: 주어진 TM \(M\)과 입력 \(w\)에 대해 **\(M\)이 \(w\)를 수용** ⇔ **구성한 MPCP 인스턴스가 해를 가짐**.

### 5.1 계산 테이블 인코딩
- \(M\)의 **구성(configuration)** 을 문자열로 표현:
  \[
  C = \cdots a\,q\,b\cdots
  \]
  (상태 \(q\)가 \(b\)를 읽는 위치에 삽입)
- **수용 계산**은
  \[
  C_0\ \#\ C_1\ \#\ \cdots\ \#\ C_t
  \]
  꼴의 연쇄로 나타낼 수 있다(\(\#\): 구분자).

### 5.2 타일(도미노) 설계 원리
1) **시작 강제**: 첫 타일이 \(\dfrac{\#}{\#C_0\#}\) (또는 \(\dfrac{\#C_0\#}{\#}\)) 꼴이 되게 하여  
   위·아래 중 한 줄에 **초기 구성**이 먼저 오게 만든다.

2) **문자 일치 타일**: \(\dfrac{a}{a}\) 타일을 충분히 제공해 동일 문자들은 자유롭게 복사.

3) **전이(로컬 규칙) 타일**:  
   각 TM 전이 \((q,b)\mapsto(q',c,D)\)에 대해, 인접한 두 구성 \(C_i\)와 \(C_{i+1}\)의 **국소 패턴**이 합법적으로 이어지도록  
   아래와 같은 **동기화 타일**을 추가한다. (예: 오른쪽 이동 \(D=R\))
   ```text
   ... a q b ...   ⇒   ... a c q' ...
   ```
   이때 위·아래 줄에 각각 \(C_i\)와 \(C_{i+1}\)의 조각이 놓이게 하여, **전이 틀린 곳**이 있으면  
   두 줄의 접합이 어긋나 일치가 불가능하도록 설계한다.

4) **구분자 동기화**: \(\#\) 의 정렬을 보장하는 타일(예: \(\dfrac{\#}{\#}\), \(\dfrac{x\#}{\#x}\) 류)로 **행 단위 맞춤**을 강제.

5) **수용 멈춤**: 수용 상태에 도달하면 특별 마커(예: `$` 또는 `⊣`)로 닫아 최종 일치가 완성되게 한다.

### 5.3 올바름의 직관
- **만약** \(M\)이 \(w\)를 수용하면: 실제 수용 계산 \(C_0\Rightarrow C_1\Rightarrow\cdots\Rightarrow C_t\) 를 따라  
  위·아래를 차곡차곡 이어 붙이면 정확히 맞아떨어지는 지수열이 생긴다.
- **반대로** 해가 있다면: \(\#\)-분할과 전이 타일의 제약상, 얻어지는 문자열은 **정확한 계산 테이블**을 이루게 되고,  
  마지막 상태는 수용이어야 한다.

> 이로써 **A_TM ≤m MPCP**. 이어 **MPCP ≤m PCP** 이므로 PCP는 결정 불가능.

---

## 6) 변형·제한 버전의 판정 가능성

- **유계 PCP (k-bounded PCP)**: 해의 길이 \(m\le k\)가 **주어지면** (특히 \(k\)가 단항으로 주어질 때)  
  길이 \(k\) 이하의 모든 지수열을 시험하면 되므로 **결정 가능**.  
  (복잡도는 지수/NP-난해 등 변형에 따라 달라지지만, “결정 가능”임은 분명)
- **단일 알파벳 PCP**: 문자열은 길이만 의미 있으므로  
  “\(\sum |u_{i_j}| = \sum |v_{i_j}|\)” 을 만족하는 지수열이 있는지의 문제로 환원 ⇒ **결정 가능**  
  (모든 차이 \(d_i=|u_i|-|v_i|\) 의 부호를 보며, \(d_i=0\) 이 있거나 양·음이 섞이면 0 합 달성 가능성 판단).
- **이진 알파벳 PCP**: **여전히 결정 불가능**(알파벳 2개로도 감소가 구현됨).

---

## 7) PCP가 **힘을 발휘**하는 곳(감소의 원천)

PCP는 많은 형식언어·오토마타 문제의 **결정 불가능성**을 보이는 **출발점**이다.

- **CFG 모호성**: 주어진 문맥 자유 문법이 모호한가? — **결정 불가능**(PCP로 감소).  
- **CFG 보편성/동일성/포함성**: 여러 전역 성질이 PCP에서 온다(세부 변형/가젯 필요).  
- **타일링(도미노) 문제**: 평면 타일링의 결정 불가능성으로도 연결(문자열→격자 인코딩).

---

## 8) 실전 연습: 작은 인스턴스 탐색 팁

1) **공통 접두사/접미사**를 찾아라:  
   \(\dfrac{xa}{x}\), \(\dfrac{y}{ya}\) 같은 타일은 “밀고 당기기”로 길이를 맞추는 재료다.
2) **루프 패턴** 찾기:  
   특정 지수열을 반복하면 위·아래 차이가 한 글자씩 줄어드는 **수축 루프**를 만들 수 있다.
3) **가지치기**:  
   열거 중 현재까지의 위·아래가 서로 접두사 관계가 아니면 **더 이어도 일치 불가**이므로 가지치기 가능.

---

## 9) 한 페이지 요약

- **정의**: 문자열 쌍 목록 \(\{(u_i,v_i)\}\) 로부터 어떤 지수열의 접합이 위=아래가 되게 할 수 있는가?  
- **성질**: **RE(반결정) & 결정 불가능**, 심지어 **이진 알파벳**에서도. (**RE-완전**)  
- **증 스케치**: \(A_{TM}\to\) **MPCP**(계산 테이블 인코딩) \(\to\) PCP.  
- **결정 가능한 변형**: **유계 PCP**, **단일 알파벳 PCP**.  
- **응용**: CFG 모호성/보편성 등 다수의 결정 불가능성에 대한 표준 **감소 원천**.
