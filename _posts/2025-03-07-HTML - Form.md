---
layout: post
title: HTML - Form
date: 2025-03-07 21:20:23 +0900
category: HTML
---
# HTML Form

## `<form>`의 기본 구조와 핵심 속성

```html
<form action="/submit" method="POST" enctype="application/x-www-form-urlencoded" autocomplete="on" novalidate>
  <label for="name">이름</label>
  <input id="name" name="name" type="text" required minlength="2" maxlength="40" autocomplete="name" />
  <button type="submit">제출</button>
</form>
```

| 속성 | 설명 | 비고 |
|---|---|---|
| `action` | 데이터를 보낼 URL | 버튼별 `formaction`로 개별 override 가능 |
| `method` | `GET`/`POST` | 버튼별 `formmethod` override 가능 |
| `enctype` | `application/x-www-form-urlencoded`(기본), `multipart/form-data`(파일), `text/plain`(특수) | 파일 업로드는 **반드시** `multipart/form-data` |
| `autocomplete` | `on`/`off` 또는 필드별 토큰 | 민감정보 일부만 세밀 제어 권장 |
| `novalidate` | 브라우저 기본 검증 비활성화 | JS 커스텀 검증 시 사용 |
| `target` | 응답 표시 대상 (`_self`, `_blank` 등) | 새 탭 제출 지원 |
| `name` | 폼 이름 | JS/서버 쪽 라우팅 보조 |

> **폼 영역 외 필드 연결**: 어떤 `<input>`이라도 `form="loginForm"`처럼 **폼 id를 참조**해 물리적 위치와 관계 없이 같은 폼으로 제출할 수 있습니다.

---

## 입력 요소 총정리(태그/타입/속성)

### 공통 태그와 그룹

- **`<label for="id">`**: 접근성·클릭 영역 확대의 핵심.
- **`<fieldset>` / `<legend>`**: **그룹화** 및 스크린리더 문맥 부여.
- **`<datalist>`**: 자유 입력 + 제안 목록.
- **`<meter>` / `<progress>`**: 값의 범위/진행도 시각화(읽기전용).
- **`<output>`**: 계산 결과 표시.

```html
<fieldset>
  <legend>연락처</legend>
  <label for="email">이메일</label>
  <input id="email" name="email" type="email" autocomplete="email" required />
  <label for="tel">전화</label>
  <input id="tel" name="tel" type="tel" inputmode="tel" placeholder="010-1234-5678" />
</fieldset>
```

### `<input>` 타입별 요약

| 타입 | 주요 속성/힌트 | 메모 |
|---|---|---|
| `text` | `minlength`/`maxlength`/`pattern`/`placeholder` | 일반 텍스트 |
| `password` | `minlength`/`autocomplete="new-password"` | 복잡도는 JS로 보완 |
| `email` | 형식검사 내장, `multiple` | 쉼표 구분 다중 허용 |
| `number` | `min`/`max`/`step` | 지역화 소수점 유의 |
| `tel` | `inputmode="tel"` | 형식 검사는 직접 |
| `url` | 형식검사 | 프로토콜 포함 권장 |
| `search` | `enterkeyhint="search"` | 모바일 UI 힌트 |
| `date`/`time`/`datetime-local`/`month`/`week` | `min`/`max`/`step` | 브라우저별 UI 상이 |
| `checkbox` | `checked`/동명이 다중 전송 | 다중 선택 |
| `radio` | 같은 `name` 중 1개 | 단일 선택 |
| `file` | `accept`/`multiple`/`capture` | 업로드 시 **multipart** |
| `range` | 슬라이더, `min`/`max`/`step` | 즉시 피드백 |
| `color` | 색상 피커 | HEX 반환 |
| `hidden` | 화면 표시 없이 전송 | 신뢰 X(변조 가능) |
| `submit`/`reset`/`button` | `form*` 파생 속성 지원 | 제출/초기화/클릭 |

```html
<!-- datalist 제안 -->
<label for="tech">기술</label>
<input id="tech" name="tech" list="techlist" />
<datalist id="techlist">
  <option value="HTML"></option>
  <option value="CSS"></option>
  <option value="JavaScript"></option>
</datalist>
```

### `<select>`/`<textarea>`/`<button>`

```html
<label for="city">도시</label>
<select id="city" name="city" required>
  <option value="">선택하세요</option>
  <optgroup label="수도권">
    <option value="seoul">서울</option>
    <option value="incheon">인천</option>
  </optgroup>
  <optgroup label="영남">
    <option value="busan">부산</option>
  </optgroup>
</select>

<label for="intro">자기소개</label>
<textarea id="intro" name="intro" rows="4" maxlength="500" placeholder="자유롭게 작성"></textarea>

<button type="submit">저장</button>
<button type="reset">초기화</button>
<button type="button" onclick="preview()">미리보기</button>
```

---

## 전송 방식 — GET vs POST와 `enctype`

| 항목 | GET | POST |
|---|---|---|
| 위치 | URL 쿼리 | HTTP Body |
| 보안 | 파라미터 노출 | 상대적 안전(그래도 HTTPS 필수) |
| 캐싱/북마크 | 용이 | 보통 비권장 |
| 용도 | 검색/필터/공유 | 인증/생성/업로드 |
| 길이 제한 | 브라우저·서버 의존 | 상대적으로 큼 |

**인코딩(`enctype`)**
- `application/x-www-form-urlencoded`: 기본. 키=값 URL 인코딩.
- `multipart/form-data`: **파일 업로드** 필수.
- `text/plain`: 디버깅용 수준, 실전 비권장.

```html
<form action="/upload" method="POST" enctype="multipart/form-data">
  <label for="avatar">프로필 이미지</label>
  <input id="avatar" name="avatar" type="file" accept="image/*" />
  <button type="submit">업로드</button>
</form>
```

---

## HTML5 Constraint Validation — 속성·CSS·JS API

### 속성 기반 검증

```html
<input type="email" required />
<input type="text" pattern="^[가-힣a-zA-Z\s]{2,40}$" title="한글/영문 2~40자" />
<input type="password" minlength="8" required />
<input type="number" min="1" max="10" step="1" required />
```

### 상태 선택자와 사용자 피드백

```html
<style>
  input:required:invalid { border: 2px solid #ef4444; }
  input:required:valid   { border: 2px solid #10b981; }
  .error { color: #b91c1c; font-size: .9rem; }
</style>

<label for="email2">이메일</label>
<input id="email2" name="email2" type="email" required aria-describedby="e2err" />
<small id="e2err" class="error" role="alert" aria-live="polite"></small>
```

### JS 검사 제어

```html
<form id="signup" novalidate>
  <input id="pw1" name="pw1" type="password" required minlength="8" />
  <input id="pw2" name="pw2" type="password" required minlength="8" />
  <button>가입</button>
</form>
<script>
const f = document.getElementById('signup');
f.addEventListener('submit', (e) => {
  // 1) 브라우저 기본 검사
  if (!f.checkValidity()) { e.preventDefault(); f.reportValidity(); return; }
  // 2) 교차 필드 검사(예: 비밀번호 일치)
  const pw1 = f.pw1.value, pw2 = f.pw2.value;
  if (pw1 !== pw2) {
    e.preventDefault();
    f.pw2.setCustomValidity('비밀번호가 일치하지 않습니다.');
    f.pw2.reportValidity();
    f.pw2.addEventListener('input', () => f.pw2.setCustomValidity(''), { once:true });
  }
});
</script>
```

> 키 포인트: `checkValidity()`/`reportValidity()`/`setCustomValidity()`/`validity` 상태(tooShort, patternMismatch 등).

### FormData API와 `formdata` 이벤트

```html
<form id="profile">
  <input name="name" value="홍길동" />
  <input name="age" type="number" value="29" />
  <button>저장</button>
</form>
<script>
const form = document.getElementById('profile');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const fd = new FormData(form);
  // 디버깅
  for (const [k,v] of fd.entries()) console.log(k, v);

  // fetch 전송(JSON으로 변환 예시)
  const data = Object.fromEntries(fd.entries());
  await fetch('/api/profile', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
});
</script>
```

---

## 파일 업로드 — UX와 보안

```html
<form id="u" action="/upload" method="POST" enctype="multipart/form-data">
  <input type="file" name="docs" accept=".pdf,.doc,.docx" multiple />
  <button type="submit">업로드</button>
</form>
```

**클라이언트 UX**
- `accept="image/*"` / 확장자 목록.
- `multiple`로 다중 선택.
- 모바일 카메라 우선: `capture="environment"`(브라우저 의존).

**서버 보안 체크리스트**
- [ ] 파일 **MIME/매직넘버** 이중 확인(확장자 신뢰 X).
- [ ] 업로드 경로는 **웹 루트 밖** + 임의 파일명.
- [ ] 업로드 후 **바이러스 스캔**/사이즈 제한/타임아웃.
- [ ] 이미지 처리 시 **EXIF 제거**, 리사이즈/재인코딩.
- [ ] 다운로드 시 적절한 **Content-Type/Disposition** 설정.

---

## 보안 — XSS/CSRF/HTTPS/중복 제출

### XSS

- 출력 시 **이스케이프**(`& < > " ' /`)와 템플릿 엔진 안전 API 사용.
- **HTML 엔티티**/서버 측 sanitize 라이브러리 병행.

### CSRF

- 폼에 **CSRF 토큰** 포함, 서버에서 검증.
- SameSite 쿠키(`Lax`/`Strict`), Referer/Origin 검증 보조.

```html
<form action="/transfer" method="POST">
  <input type="hidden" name="csrf_token" value="{{token}}">
  ...
</form>
```

### HTTPS

- **반드시 TLS**. HSTS 설정 권장.

### 중복 제출 방지

- 제출 시 버튼 **비활성화** 또는 **일회성 토큰**.

```html
<form id="once">
  <button id="saveBtn" type="submit">저장</button>
</form>
<script>
document.getElementById('once').addEventListener('submit', (e) => {
  e.target.querySelector('#saveBtn').disabled = true;
});
</script>
```

---

## — 라벨링·오류 연결·포커스

### 라벨링과 설명 연결

```html
<label for="username">아이디</label>
<input id="username" name="username" autocomplete="username" aria-describedby="uid-help" required />
<small id="uid-help">영문/숫자 4~16자</small>
```

### 오류 상태와 화면낭독기 알림

```html
<input id="em" type="email" aria-invalid="true" aria-describedby="em-err" />
<div id="em-err" role="alert">이메일 형식이 아닙니다.</div>
```

### 키보드 순서/포커스 링 유지

- **`tabindex`** 남용 금지, 문서 흐름에 맞는 순서.
- 포커스 스타일 제거 금지(접근성 저하).

---

## 모바일/국제화 UX — inputmode·enterkeyhint·자동완성 토큰

```html
<input type="text" inputmode="numeric" placeholder="주민번호 뒷자리 7" />
<input type="text" enterkeyhint="done" />
<input type="text" autocomplete="given-name" />
<input type="text" autocomplete="family-name" />
<input type="email" autocomplete="email" />
<input type="tel" autocomplete="tel" />
<input type="street-address" />
```

- **`inputmode`**: 실제 타입은 text지만 모바일 키패드 힌트를 변경.
- **`enterkeyhint`**: 가상 키보드의 엔터 라벨(검색/다음/완료).
- **자동완성 토큰**: 실제 필드 의미를 브라우저에 알려 자동완성 정확도 향상.

---

## 폼 — `fieldset`/`progress`/포커스 관리

```html
<form id="wizard">
  <progress id="pg" max="3" value="1">1/3</progress>

  <fieldset data-step="1">
    <legend>계정 정보</legend>
    <label>이메일 <input name="email" type="email" required /></label>
    <button type="button" data-next>다음</button>
  </fieldset>

  <fieldset data-step="2" hidden>
    <legend>프로필</legend>
    <label>이름 <input name="name" required /></label>
    <button type="button" data-prev>이전</button>
    <button type="button" data-next>다음</button>
  </fieldset>

  <fieldset data-step="3" hidden>
    <legend>확인</legend>
    <output name="summary"></output>
    <button type="button" data-prev>이전</button>
    <button type="submit">제출</button>
  </fieldset>
</form>

<script>
const form = document.getElementById('wizard');
const steps = Array.from(form.querySelectorAll('fieldset'));
const pg = document.getElementById('pg');
let idx = 0;

function show(i){
  steps[idx].hidden = true;
  idx = i;
  steps[idx].hidden = false;
  pg.value = idx+1;
  steps[idx].querySelector('input,button,select,textarea')?.focus();
}
form.addEventListener('click', e=>{
  if (e.target.matches('[data-next]')) {
    if (!steps[idx].checkValidity()) { steps[idx].reportValidity(); return; }
    show(Math.min(idx+1, steps.length-1));
  }
  if (e.target.matches('[data-prev]')) show(Math.max(idx-1, 0));
});
form.addEventListener('submit', e=>{
  e.preventDefault();
  const data = Object.fromEntries(new FormData(form).entries());
  form.querySelector('output[name="summary"]').value = JSON.stringify(data, null, 2);
  alert('제출 전 미리보기: 콘솔 확인');
  console.log('submit payload', data);
});
</script>
```

---

## 버튼별 다른 전송 — `formaction/formmethod/formenctype/formnovalidate`

```html
<form id="postForm" action="/posts" method="POST">
  <input name="title" required />
  <button type="submit">저장</button>
  <button type="submit" formaction="/posts/preview" formmethod="POST" formnovalidate>미리보기</button>
  <button type="submit" formaction="/posts.csv" formmethod="GET">CSV로 보기</button>
</form>
```

---

## 검색/로그인/회원가입 — 실전 스니펫

### 검색 폼(GET, 북마크 가능)

```html
<form action="/search" method="GET" role="search">
  <label for="q">검색어</label>
  <input id="q" name="q" type="search" required enterkeyhint="search" />
  <button type="submit">검색</button>
</form>
```

### 로그인(POST, 자동완성 토큰)

```html
<form action="/login" method="POST" autocomplete="on">
  <label for="lemail">이메일</label>
  <input id="lemail" name="email" type="email" autocomplete="username" required />

  <label for="lpw">비밀번호</label>
  <input id="lpw" name="password" type="password" autocomplete="current-password" required minlength="8" />

  <button type="submit">로그인</button>
</form>
```

### 회원가입(이중 입력/정규식/커스텀 오류)

```html
<form id="reg" action="/register" method="POST" novalidate>
  <label>이메일 <input name="email" type="email" required /></label>
  <label>비밀번호 <input id="p1" name="password" type="password" required minlength="8" /></label>
  <label>비밀번호 확인 <input id="p2" type="password" required minlength="8" /></label>
  <button>가입</button>
</form>
<script>
const formR = document.getElementById('reg');
formR.addEventListener('submit', (e)=>{
  if (!formR.checkValidity()) { e.preventDefault(); formR.reportValidity(); return; }
  if (p1.value !== p2.value) { e.preventDefault(); p2.setCustomValidity('비밀번호가 일치하지 않습니다.'); p2.reportValidity(); p2.addEventListener('input', ()=>p2.setCustomValidity(''), {once:true}); }
});
</script>
```

---

## 스타일/테마/인쇄 — 시각적 품질과 실무 팁

```css
/* 폼 레이아웃 */
.form-grid {
  display: grid;
  grid-template-columns: 12ch 1fr;
  gap: .75rem 1rem;
  align-items: center;
  max-width: 640px;
}
.form-grid > label { justify-self: end; }
.form-grid input, .form-grid select, .form-grid textarea {
  border: 1px solid #d1d5db; border-radius: .5rem; padding: .5rem .75rem; width: 100%;
}

/* 포커스 접근성 */
:focus-visible { outline: 3px solid #2563eb; outline-offset: 2px; }

/* 다크모드 */
@media (prefers-color-scheme: dark) {
  .form-grid input, .form-grid select, .form-grid textarea { background:#0b1220; color:#e5e7eb; border-color:#334155; }
}

/* 인쇄 */
@media print {
  button { display: none; }
  .form-grid { grid-template-columns: 1fr 2fr; }
}
```

---

## 서버와의 프로토콜 한눈에

### `application/x-www-form-urlencoded` 예

```
POST /submit HTTP/1.1
Content-Type: application/x-www-form-urlencoded

name=%ED%99%8D%EA%B8%B8%EB%8F%99&email=test%40ex.com
```

### `multipart/form-data` 경계 기반 예(개념)

```
Content-Type: multipart/form-data; boundary=----ABC
------ABC
Content-Disposition: form-data; name="name"

홍길동
------ABC
Content-Disposition: form-data; name="avatar"; filename="a.png"
Content-Type: image/png

...바이너리...
------ABC--
```

### fetch로 JSON 전송(PE: Progressive Enhancement)

```js
const fd = new FormData(form);
const body = JSON.stringify(Object.fromEntries(fd));
fetch('/api', { method:'POST', headers:{'Content-Type':'application/json'}, body });
```

---

## 흔한 문제와 해결

| 문제 | 원인 | 해결 |
|---|---|---|
| 파일 업로드 실패 | `enctype` 미설정 | `multipart/form-data` 지정 |
| 숫자 필드 소수점 입력 안 됨 | 지역화/`step` 제한 | `step="any"` 또는 적절한 `step` |
| 모바일 키패드 부정확 | 타입/`inputmode` 미지정 | `type="tel"`/`inputmode` 지정 |
| 자동완성 오동작 | 잘못된 토큰 | 표준 토큰(`username`, `email`, `given-name` 등) |
| 브라우저 오류 메시지 언어 | UA 로캘 | 커스텀 메시지(`setCustomValidity`)로 보완 |
| 이중 제출 | 빠른 더블클릭 | 제출 시 버튼 disable/일회성 토큰 |
| CSRF | 토큰 누락 | 폼마다 CSRF 토큰 포함·검증 |

---

## 종합 예제 — 회원정보 수정(파일·유효성·접근성·PE)

```html
<!doctype html>
<meta charset="utf-8">
<title>회원정보 수정</title>
<style>
  body { font: 14px/1.6 system-ui, sans-serif; margin: 2rem; }
  .form-grid { display:grid; grid-template-columns: 12ch 1fr; gap:.75rem 1rem; max-width:720px; }
  .form-grid > label { justify-self:end; margin-top:.3rem; }
  input, select, textarea { border:1px solid #d1d5db; border-radius:.5rem; padding:.5rem .75rem; width:100%; }
  .error { color:#b91c1c; font-size:.9rem; }
  :focus-visible { outline: 3px solid #2563eb; outline-offset: 2px; }
</style>

<h1>회원정보 수정</h1>

<form id="profileForm" action="/me" method="POST" enctype="multipart/form-data" autocomplete="on" novalidate aria-describedby="form-help">
  <p id="form-help">별표(*)는 필수 입력입니다.</p>

  <div class="form-grid">
    <label for="name">이름 *</label>
    <input id="name" name="name" type="text" required minlength="2" maxlength="40" autocomplete="name" />

    <label for="email">이메일 *</label>
    <input id="email" name="email" type="email" required autocomplete="email" />

    <label for="tel">전화</label>
    <input id="tel" name="tel" type="tel" inputmode="tel" placeholder="010-1234-5678" autocomplete="tel" />

    <label for="birth">생년월일</label>
    <input id="birth" name="birth" type="date" min="1900-01-01" max="2100-12-31" />

    <label for="city">도시</label>
    <select id="city" name="city">
      <option value="">선택</option>
      <option value="seoul">서울</option>
      <option value="busan">부산</option>
      <option value="daegu">대구</option>
    </select>

    <label for="avatar">프로필</label>
    <input id="avatar" name="avatar" type="file" accept="image/*" />

    <label for="intro">소개</label>
    <textarea id="intro" name="intro" rows="4" maxlength="300" placeholder="간단한 자기소개(최대 300자)"></textarea>
  </div>

  <div style="margin-top:1rem;">
    <button type="submit" id="saveBtn">저장</button>
    <button type="reset">초기화</button>
  </div>

  <div id="errBox" class="error" role="alert" aria-live="polite" style="margin-top:.5rem;"></div>
</form>

<script>
const form = document.getElementById('profileForm');
const errBox = document.getElementById('errBox');
const saveBtn = document.getElementById('saveBtn');

form.addEventListener('submit', async (e) => {
  errBox.textContent = '';
  // 1) 기본 검증
  if (!form.checkValidity()) {
    e.preventDefault();
    form.reportValidity();
    return;
  }
  // 2) 이중 제출 방지
  saveBtn.disabled = true;

  // 3) Progressive Enhancement: fetch 사용 가능 시 Ajax 전송
  e.preventDefault();
  try {
    const fd = new FormData(form);
    const res = await fetch(form.action, { method: 'POST', body: fd, credentials: 'include' });
    if (!res.ok) throw new Error('저장 실패');
    alert('저장되었습니다.');
  } catch (err) {
    errBox.textContent = '저장 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.';
    saveBtn.disabled = false;
  }
});
</script>
```

---

## 핵심 요약

- **시맨틱 구조**: `label/fieldset/legend`로 문맥을 제공하고, 자동완성 토큰과 `inputmode`/`enterkeyhint`로 **모바일 UX**를 개선합니다.
- **전송·인코딩**: GET/POST의 용도 구분, 파일 업로드는 `multipart/form-data`.
- **검증**: HTML5 속성 + CSS 상태 선택자 + JS API(`checkValidity`, `setCustomValidity`)의 **3단 콤보**.
- **보안**: HTTPS, XSS 이스케이프, **CSRF 토큰**, 업로드 보안, **중복 제출 방지**.
- **접근성**: 올바른 라벨·오류 연결(`aria-describedby/invalid`, `role="alert"`), 포커스 링 유지.
- **실무 팁**: 버튼별 `form*` 파생 속성, FormData fetch, 다단계 폼, 인쇄/다크모드 대응.
