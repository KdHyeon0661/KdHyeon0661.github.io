---
layout: post
title: 파이썬 - 문자열 자료형
date: 2024-07-29 19:20:23 +0900
category: Python
---
# 문자열 자료형

## 문자열의 정의와 불변성

파이썬에서 문자열은 작은따옴표(`'`)나 큰따옴표(`"`)로 감싸 표현하며, 삼중 따옴표를 사용하면 여러 줄 문자열을 편리하게 작성할 수 있습니다. 문자열 자료형의 가장 중요한 특징은 **불변성(Immutable)**입니다. 한 번 생성된 문자열의 내용은 변경할 수 없으며, 값을 수정하는 것처럼 보이는 모든 연산은 실제로는 새로운 문자열 객체를 생성합니다.

```python
# 문자열 정의
greeting = "안녕하세요"
multiline = """여러 줄의
문자열을
작성합니다."""

# 불변성 확인
text = "Hello"
print(id(text))           # 기존 객체의 ID
text = text + " World"    # 새 문자열 생성
print(id(text))           # 다른 ID (새로운 객체)
```

불변성으로 인해 문자열은 딕셔너리의 키나 집합의 요소로 사용하기 안정적이며, 스레드 안전성을 보장합니다. 그러나 반복적인 연결 연산에는 비효율적일 수 있으므로 `join()` 메서드를 활용하는 것이 좋습니다.

## 문자열의 기본 연산

문자열은 연결(`+`), 반복(`*`), 멤버십 테스트(`in`, `not in`) 연산을 지원하며, 비교 연산자(`<`, `>`, `==` 등)를 사용한 사전식 순서 비교도 가능합니다.

```python
# 기본 연산 예시
s1 = "Hello"
s2 = "World"
print(s1 + " " + s2)      # 연결: "Hello World"
print("Hi" * 3)           # 반복: "HiHiHi"
print("ell" in s1)        # 멤버십: True
print("apple" < "banana") # 비교: True (사전식 순서)
```

## 문자열 인덱싱과 슬라이싱

문자열은 시퀀스 자료형으로, 인덱스를 통해 개별 문자에 접근할 수 있습니다. 음수 인덱스는 문자열 끝에서부터 역방향으로 위치를 지정합니다. 슬라이싱은 `[시작:끝:간격]` 형식으로 부분 문자열을 추출하며, 시작 인덱스는 포함되지만 끝 인덱스는 포함되지 않습니다.

```python
text = "Python Programming"
print(text[0])       # 'P' (첫 번째 문자)
print(text[-1])      # 'g' (마지막 문자)
print(text[7:18])    # 'Programming' (부분 문자열)
print(text[::2])     # 'Pto rgamn' (간격 2)
print(text[::-1])    # 'gnimmargorP nohtyP' (역순)
```

슬라이싱은 항상 새로운 문자열을 반환하며, 원본 문자열을 변경하지 않습니다. 이는 문자열이 불변 객체이기 때문에 당연한 결과입니다.

## 주요 문자열 메서드 활용

문자열 객체는 텍스트 처리를 위한 다양한 메서드를 제공합니다. 여기서는 몇 가지 핵심 메서드를 살펴보겠습니다.

```python
# 대소문자 변환 및 검사
text = "python Programming"
print(text.upper())        # 'PYTHON PROGRAMMING'
print(text.lower())        # 'python programming'
print(text.title())        # 'Python Programming'
print("PYTHON".isupper())  # True

# 공백 제거 및 정렬
data = "   중앙 정렬   "
print(data.strip())                # '중앙 정렬'
print(data.center(20, '-'))        # '---   중앙 정렬   ----'

# 검색과 분할
sentence = "파이썬은 쉽고 강력한 언어입니다"
print(sentence.find("강력한"))     # 8 (위치 반환)
print(sentence.split())            # ['파이썬은', '쉽고', '강력한', '언어입니다']
print(",".join(["사과", "바나나", "오렌지"]))  # '사과,바나나,오렌지'

# 치환과 확인
code = "print('Hello World')"
print(code.replace("'", '"'))      # 'print("Hello World")'
print("12345".isdigit())           # True
print("abc123".isalnum())          # True
```

`casefold()` 메서드는 특히 국제화된 애플리케이션에서 유용하며, `lower()`보다 더 공격적으로 소문자 변환을 수행하여 다양한 언어의 문자를 비교할 때 사용됩니다.

## 문자열 포매팅 기법

파이썬은 문자열 내에 변수 값을 삽입하는 여러 방법을 제공합니다. 최신 방식인 f-string이 가독성과 성능 면에서 가장 우수합니다.

```python
# f-string (Python 3.6+)
name = "김철수"
age = 30
height = 175.5
print(f"이름: {name}, 나이: {age}, 키: {height:.1f}cm")

# 포맷 명세 활용
number = 1234567.8912
print(f"{number:,}")           # 1,234,567.8912 (천단위 구분)
print(f"{number:.2f}")         # 1234567.89 (소수점 둘째자리)
print(f"{255:#06x}")           # 0x00ff (16진수 표현)

# str.format() 메서드
print("{0}의 점수는 {1}점입니다".format(name, 95))
print("{item}의 가격은 ${price:.2f}".format(item="커피", price=3.5))

# % 포매팅 (레거시)
print("환율: %.2f원" % 1325.567)  # '환율: 1325.57원'
```

f-string의 포맷 명세를 잘 활용하면 숫자, 날짜, 통화 등 다양한 형식의 데이터를 일관된 방식으로 표현할 수 있습니다.

## 문자열과 인코딩 이해

파이썬 3에서는 문자열이 기본적으로 유니코드(UTF-8)로 처리됩니다. 파일 입출력이나 네트워크 통신 시에는 적절한 인코딩 변환이 필요합니다.

```python
# 문자열 인코딩과 디코딩
text = "안녕하세요"
encoded = text.encode('utf-8')      # 바이트열로 변환
print(encoded)                       # b'\xec\x95\x88...'

decoded = encoded.decode('utf-8')    # 문자열로 복원
print(decoded)                       # '안녕하세요'

# 다른 인코딩 방식
print(text.encode('cp949'))          # Windows 한글 인코딩
print(text.encode('euc-kr'))         # 예전 한글 인코딩

# 에러 처리 방식
sample = " café résumé "
try:
    result = sample.encode('ascii')
except UnicodeEncodeError as e:
    print(f"인코딩 오류: {e}")
    
# 무시 또는 대체 방식
print(sample.encode('ascii', errors='ignore'))   # 문제 문자 무시
print(sample.encode('ascii', errors='replace'))  # '?'로 대체
```

## 실제 활용 예시와 고급 기법

### 텍스트 데이터 처리

```python
# 로그 파일 파싱
log_line = "2024-07-29 14:30:22 [INFO] User login: user_id=12345"
parts = log_line.split()
date_time = " ".join(parts[0:2])
log_level = parts[2].strip("[]")
message = " ".join(parts[3:])
print(f"시간: {date_time}, 레벨: {log_level}, 내용: {message}")

# CSV 형식 데이터 생성
headers = ["이름", "나이", "직업"]
data = [["홍길동", "30", "개발자"], ["김영희", "25", "디자이너"]]

csv_lines = [",".join(headers)]
csv_lines.extend([",".join(row) for row in data])
csv_content = "\n".join(csv_lines)
print(csv_content)
```

### 성능 최적화 팁

```python
# 비효율적인 문자열 연결
result = ""
for i in range(10000):
    result += str(i)  # 매번 새로운 문자열 생성

# 효율적인 문자열 연결
parts = []
for i in range(10000):
    parts.append(str(i))
result = "".join(parts)  # 한 번의 연결 작업

# StringIO 활용 (매우 큰 텍스트 데이터 처리)
from io import StringIO
output = StringIO()
for i in range(10000):
    output.write(str(i))
result = output.getvalue()
```

### 정규표현식과의 연계

```python
import re

# 이메일 주소 추출
text = "문의는 admin@example.com 또는 support@company.co.kr로 해주세요."
emails = re.findall(r'[\w\.-]+@[\w\.-]+\.\w+', text)
print(emails)  # ['admin@example.com', 'support@company.co.kr']

# 텍스트 정규화
def normalize_text(text):
    # 여러 공백을 하나로, 앞뒤 공백 제거
    text = re.sub(r'\s+', ' ', text).strip()
    # 특수문자 정리
    text = re.sub(r'[^\w\s가-힣.,!?]', '', text)
    return text

sample = "  Hello!!!   세계...   "
print(normalize_text(sample))  # 'Hello!!! 세계...'
```

## 결론

파이썬의 문자열 처리는 풍부한 내장 기능과 직관적인 문법을 통해 강력한 텍스트 조작 능력을 제공합니다. 문자열의 불변성 특성을 이해하면 메모리 사용과 성능 측면에서 더 효율적인 코드를 작성할 수 있습니다. 실무에서는 f-string을 활용한 현대적인 포매팅, `join()`을 이용한 효율적인 문자열 결합, 적절한 인코딩 처리 등이 중요합니다. 복잡한 패턴 매칭이 필요할 때는 정규표현식을 활용하고, 대용량 텍스트 처리 시에는 `StringIO`나 제너레이터를 고려하는 것이 좋습니다.

문자열 처리는 거의 모든 프로그래밍 작업에서 필수적인 요소이므로, 이러한 기본기와 고급 기법을 숙지하면 데이터 처리, 로그 분석, 보고서 생성 등 다양한 업무에 효과적으로 대응할 수 있을 것입니다.