---
layout: post
title: 형식언어와 오토마타 - 비결정적 튜링 기계
date: 2025-07-30 22:20:23 +0900
category: 형식언어와 오토마타
---
# 비결정적 튜링 기계(Nondeterministic Turing Machine, **NTM**)

이 글은 **비결정적 튜링 기계(NTM)** 를 표준 형식으로 정의하고,  
(1) **언어 승인기/결정기**로서의 의미, (2) **결정적 TM(DTM)** 과의 **계산 가능성 동치성**,  
(3) **시간/공간 복잡도**에서의 차이(=복잡도 부류 NP, NL, NPSPACE 등), (4) 설계 패턴과 예제를 정리한다.

---

## 1) 형식적 **정의**와 계산 나무

표준 단일테이프 NTM은 다음 7-튜플로 정의한다.

\[
M=(Q,\Sigma,\Gamma,\delta,q_0,q_{\mathrm{acc}},q_{\mathrm{rej}})
\]

- \(Q\): 유한한 상태 집합  
- \(\Sigma\): 입력 알파벳 (\(\sqcup\notin\Sigma\))  
- \(\Gamma\): 테이프 알파벳 (\(\Sigma\subseteq\Gamma,\ \sqcup\in\Gamma\))  
- \(\delta: (Q\setminus\{q_{\mathrm{acc}},q_{\mathrm{rej}}\}) \times \Gamma \to \mathcal{P}(Q\times \Gamma \times \{L,R,S\})\)  
  — 읽은 기호에 대해 가능한 **여러** 전이들의 **유한 집합**을 반환  
- \(q_0\): 시작 상태  
- \(q_{\mathrm{acc}}, q_{\mathrm{rej}}\): 수용/거절 정지 상태

현재 구성(configuration)에서 \(\delta\)가 **여러 후보 전이**를 내놓으면,  
NTM은 그 중 **임의 하나를 “선택”**하여 다음 단계로 진행할 수 있다.  
이 선택의 연쇄를 펼치면 **계산 나무(computation tree)** 가 생긴다.

### 존재적(∃) **수용 의미**
입력 \(w\)에서
- **어떤 한 경로**라도 \(q_{\mathrm{acc}}\)로 정지하면 **수용(accept)**,  
- 반대로 **모든 경로**가 \(q_{\mathrm{acc}}\)에 도달하지 못하면 **거절(reject)** 로 본다.  
  (일부 경로가 무한 루프여도, 한 경로라도 수용하면 전체는 수용이다.)

> 이 “존재적 수용”은 **확률적 TM**(다수결/확률 경계)과 다르다. 비결정성은 **쪼개진 가지 중 옳은 가지를 “운 좋게” 고른다**는 이상화된 개념이다 — **난수**가 아니다.

---

## 2) **승인기(recognizer)** vs **결정기(decider)**

- **NTM-인식**(RE):  
  \[
  L(M)=\{\,w\mid \text{어떤 경로가 } q_{\mathrm{acc}} \text{로 정지}\,\}.
  \]
  \(w\notin L(M)\)일 때는 모든 경로가 거절로 끝나거나/무한 루프일 수 있음(정지 보장 X).  
  ⇒ 이런 언어는 **재귀적 열거 가능(RE)**.

- **NTM-결정**: 모든 입력에서 **모든 경로가 유한 시간에 정지**하고,  
  \(\exists\) 경로가 수용이면 수용, 그렇지 않으면 거절.  
  ⇒ 이런 언어는 **재귀적(Recursive, 결정 가능)**.

요점: “인식”은 **수용 쪽만 정지 보장**, “결정”은 **양쪽 모두 정지 보장**이다.

---

## 3) **DTM과의 계산 가능성 동치성**(=튜링 명제 수준)

**정리(고전)**: NTM이 인식(혹은 결정)할 수 있는 언어의 **범위**는 DTM과 **동일**하다.  
즉, **계산 가능성(what can be computed)** 관점에서는 **ND = D**.

### 3.1 NTM → DTM 모사(도베일링, BFS)
DTM이 NTM의 계산 나무를 **레벨 순회(BFS)** 로 모사하면 된다.  
DFS는 한 무한 가지에 갇힐 수 있으므로 **BFS/도베일링**이 안전하다.

```text
simulate_NTM(M, w):
  Q0 := { start configuration on w }   # 레벨 0
  for t = 0,1,2,...:
    if any conf in Qt is accepting: return ACCEPT
    Qt+1 := all one-step successors of every conf in Qt
    # (동일 구성은 해시로 중복 제거 가능)
```

- 수용 경로가 길이 \(t\)에 존재한다면, \(t\)번째 레벨에서 발견되어 **유한 시간에 ACCEPT**.  
- 없으면 끝없이 진행(“RE” 의미와 부합).

### 3.2 결정기 모사
NTM이 **모든 경로에서 정지**한다면, 위 BFS는 어떤 입력에서도  
유한 단계 내에 “수용 발견” 또는 “모든 구성 소진(거절)”을 결정한다.  
⇒ **DTM도 결정기**를 가짐. (동일한 **REC** 범위)

> 결론: **가능/불가능** 경계(=RE/REC)는 ND와 D가 같다.  
> 차이는 **효율성(시간/공간)** 에서 나타난다.

---

## 4) **시간·공간 복잡도** 관점

### 4.1 시간: NTIME와 NP
- \( \mathrm{NTIME}(t(n))\): 길이 \(n\) 입력을 **최대 \(t(n)\)** 단계 안에서 **어떤 경로**가 수용하면 수용.  
- 대표 부류 **NP**: \( \mathrm{NTIME}(\mathrm{poly}(n))\).

**NTM 관점의 NP** ↔ **검증기 관점의 NP**(동치):

\[
L \in \mathrm{NP}
\iff
\exists\ \text{다항시간 DTM } V \text{ 와 다항크기 증명 } y \text{ s.t. }
x\in L \Leftrightarrow \exists y:\ |y|\le \mathrm{poly}(|x|),\ V(x,y)=1.
\]

- **NTM 해석**: “증명 \(y\)”를 **가지 하나**에서 **‘추측(guess)’**하고, DTM 검증기를 실행.  
- **DTM 모사 비용**: \(t(n)\) 시간 NTM은 DTM으로 보통 \(k^{t(n)}\) (즉 **지수 시간**)에 모사.  
  ⇒ **P ⊆ NP ⊆ EXPTIME**.

### 4.2 공간: NSPACE와 Savitch
- \( \mathrm{NSPACE}(s(n))\): 어떤 경로가 **최대 \(s(n)\)** 공간으로 수용.  
- **Savitch 정리**:  
  \[
  \mathrm{NSPACE}(s(n)) \subseteq \mathrm{DSPACE}(s(n)^2)\quad (s(n)\ge \log n).
  \]
  ⇒ **NPSPACE = PSPACE** (비결정/결정 공간은 다항 제곱 이내로 동치).  
- **Immerman–Szelepcsényi**: \(s(n)\ge\log n\)이면 \(\mathrm{NSPACE}(s) = \mathrm{coNSPACE}(s)\).  
  특히 **NL = coNL**.

> 시간에서는 ND가 **강해 보이지만**(NP vs P 미해결),  
> **공간**에서는 ND와 D가 **동일 계층**(제곱 이내)임이 알려져 있다.

---

## 5) 설계 패턴과 직관

### 5.1 Guess-and-Check(추측-검증)
- **SAT**: “변수 배정”을 추측 → CNF 만족 여부를 **결정적**으로 검사(다항).  
- **해밀토니안 경로**: “정점 순열”을 추측 → 간선 존재를 검사.

### 5.2 비결정적 경로 추적(그래프)
- **s→t 경로 존재 문제(REACHABILITY)**: 로그 공간 **NTM**은  
  현재 정점에서 **다음 이웃을 ‘추측’**하며 길 찾기 가능 ⇒ **NL**의 전형 예.

### 5.3 백트래킹과의 관계
현실에서 **백트래킹 탐색기**는 여러 분기를 **순차로** 시도한다(결정적).  
NTM은 개념적으로 “**옳은 분기를 즉시 선택**”하는 모델이라,  
동일 알고리즘이라도 **NTM 시간**은 “분기 깊이”에 해당하고,  
**DTM 시간**은 “분기 수의 합(대개 지수)”이 된다.

---

## 6) 예시: NTM 의사코드

### 6.1 SAT(클릭 형태) NTM
```
# 입력: CNF F with variables x1..xn
state q0:
  # 비결정적으로 길이 n의 비트열 y를 '추측' (과정은 분기 나무로 표현)
  guess y ∈ {0,1}^n
  if evaluate(F, y) == True:
     accept
  else:
     reject
```
- “guess y”는 실제 기계에서 여러 분기로 퍼지는 비결정적 선택.

### 6.2 그래프 경로(NL) NTM
```
# 입력: 그래프 G, 정점 s,t
use O(log n) space to store current vertex v
v := s
repeat at most n times:
  if v == t: accept
  nondeterministically choose a neighbor u of v
  v := u
reject
```
- 길이 ≤ n의 단순 경로가 있으면 어떤 가지는 t에 도달한다.

---

## 7) 닫힘성과 기타 성질(간단 요약)

- **NTIME(poly)**(=NP)는 **합집합·연접** 등에 닫혀 있으나, **여집합(보수)** 에 닫혀 있는지는 **미해결**(즉, **NP=coNP?** 미정).  
- **NSPACE(s)**(≥log n)는 **보수에 닫힘**(Immerman–Szelepcsényi).  
- **계산 가능성** 차원(=RE/REC)에서는 DTM과 동일(§3).

---

## 8) 비결정성과 **확률성**의 구분

- **비결정성**: “가능한 여러 동작 중 **하나를 고른다**”는 **논리적(존재적)** 장치.  
- **확률성**(확률적 TM, BPP 등): 난수를 던져 **확률 분포**에 따라 선택, **오판 확률**을 제한.  
- 둘은 완전히 다른 개념이며, **NTM = ‘운 좋은 무한 병렬성’** 같은 이상화로 이해하면 직관적이다.

---

## 9) 요약

- **정의**: NTM은 한 상태/기호에서 **여러 전이**가 허용되고, **존재적 수용** 의미를 갖는다.  
- **계산 가능성**: DTM과 **동일**(RE/REC 경계 불변). DTM은 **BFS/도베일링**으로 NTM을 모사 가능.  
- **복잡도**: 시간은 ND가 잠재적으로 강함(예: **NP**), 공간은 **Savitch**로 동등(제곱).  
- **설계 패턴**: **추측-검증**(증명/증인), **비결정적 경로 추적**이 핵심.  
- **오해 금지**: 비결정성은 **난수**가 아니며, 물리적 병렬과도 다르다(개념적 모델).
