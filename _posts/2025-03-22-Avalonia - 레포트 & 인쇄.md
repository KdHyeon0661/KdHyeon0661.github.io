---
layout: post
title: Avalonia - ë ˆí¬íŠ¸ & ì¸ì‡„
date: 2025-03-22 21:20:23 +0900
category: Avalonia
---
# ğŸ–¨ï¸ Avaloniaì—ì„œ ë ˆí¬íŠ¸ & ì¸ì‡„ ê¸°ëŠ¥ êµ¬í˜„

---

## ğŸ¯ ëª©í‘œ

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ğŸ“„ ë³´ê³ ì„œ(Report) ì‹œê°í™” | ë°ì´í„° â†’ í‘œ í˜•íƒœë¡œ ì¶œë ¥ |
| ğŸ–¨ï¸ ì¸ì‡„(Print) ê¸°ëŠ¥ | PDF ì €ì¥ or í”„ë¦°í„°ë¡œ ì¶œë ¥ |
| ğŸ§© í”Œë«í¼ë³„ ì—°ë™ | Windows, macOS, Linux ëŒ€ì‘ |
| ğŸ§¾ ì„œì‹ ì§€ì› | í˜ì´ì§€ ì—¬ë°±, ì •ë ¬, í°íŠ¸ ë“± ì¡°ì • ê°€ëŠ¥

---

## 1ï¸âƒ£ ì „ëµ ê°œìš”

### Avaloniaì—ì„œ ì§ì ‘ ì¸ì‡„ ì§€ì›ì€ **ì œí•œì **  
ğŸ‘‰ ë”°ë¼ì„œ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ìš°íšŒí•©ë‹ˆë‹¤:

| ë°©ë²• | ì„¤ëª… | ì‚¬ìš© ì¶”ì²œ |
|------|------|-------------|
| âœ… HTML â†’ PDF ë³€í™˜ | WebView ì‚¬ìš© or Headless PDF ë Œë”ë§ | ğŸ’¯ |
| âœ… XAML â†’ ì´ë¯¸ì§€ ë Œë”ë§ í›„ ì¶œë ¥ | Visual ì¶œë ¥ í›„ ì €ì¥ | ë³´ì¡° ë°©ì‹ |
| âŒ OS API ì§ì ‘ í˜¸ì¶œ | í”Œë«í¼ë³„ ì°¨ì´ í¼ | ë³µì¡í•¨

---

## 2ï¸âƒ£ ë³´ê³ ì„œ ë Œë”ë§ (HTML ê¸°ë°˜ ì¶”ì²œ)

### ğŸ“ WebView2 or WebView ê¸°ë°˜ìœ¼ë¡œ HTML ë³´ê³ ì„œ ìƒì„±

#### ì˜ˆ: ë³´ê³ ì„œ í…œí”Œë¦¿ HTML

```html
<!DOCTYPE html>
<html>
<head>
  <style>
    body { font-family: Arial; margin: 2cm; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <h1>ì‚¬ìš©ì í™œë™ ë¦¬í¬íŠ¸</h1>
  <table>
    <tr><th>ì´ë¦„</th><th>ë¡œê·¸ì¸ ì‹œê°„</th><th>í™œë™</th></tr>
    {{ROWS}}
  </table>
</body>
</html>
```

#### C#ì—ì„œ ë°”ì¸ë”© ì²˜ë¦¬

```csharp
string template = File.ReadAllText("Templates/Report.html");

string rows = string.Join("\n", users.Select(u =>
  $"<tr><td>{u.Name}</td><td>{u.LoginTime}</td><td>{u.Action}</td></tr>"));

string html = template.Replace("{{ROWS}}", rows);
```

---

## 3ï¸âƒ£ PDF ì¶œë ¥ ë°©ë²•

### 1. HtmlRenderer + PdfSharp (Windows/Linux ì§€ì›)

```bash
dotnet add package HtmlRenderer.PdfSharp
```

```csharp
var document = PdfGenerator.GeneratePdf(html, PageSize.A4);
document.Save("report.pdf");
```

- ë‚´ë¶€ì ìœ¼ë¡œ HTMLì„ PDFë¡œ ë³€í™˜
- `PdfSharp`ëŠ” Avaloniaì™€ëŠ” ì§ì ‘ ì—°ê²°ë˜ì§„ ì•Šì§€ë§Œ ì„œë²„/ë„ìš°ë¯¸ì—ì„œ ìƒì„± ê°€ëŠ¥

---

### 2. PlaywrightSharp ë˜ëŠ” PuppeteerSharp (Headless Chrome)

```bash
dotnet add package PuppeteerSharp
```

```csharp
await new BrowserFetcher().DownloadAsync(BrowserFetcher.DefaultChromiumRevision);

using var browser = await Puppeteer.LaunchAsync(new LaunchOptions { Headless = true });
using var page = await browser.NewPageAsync();
await page.SetContentAsync(html);
await page.PdfAsync("report.pdf");
```

âœ… HTML ê¸°ë°˜ ë³´ê³ ì„œë¥¼ ê°€ì¥ ì •ë°€í•˜ê²Œ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ë°©ë²•

---

## 4ï¸âƒ£ ì¸ì‡„ ëª…ë ¹ ì‹¤í–‰ (OSë³„)

```csharp
public void PrintPdf(string filePath)
{
#if OS_WINDOWS
    Process.Start(new ProcessStartInfo
    {
        FileName = filePath,
        Verb = "print",
        UseShellExecute = true
    });
#elif OS_LINUX
    Process.Start("lp", filePath);
#elif OS_OSX
    Process.Start("lpr", filePath);
#endif
}
```

---

## 5ï¸âƒ£ XAML â†’ ì´ë¯¸ì§€ or PDF (ë³´ì¡°)

Avalonia UIë¥¼ ì‹œê°ì ìœ¼ë¡œ ë Œë”ë§ í›„ ì´ë¯¸ì§€/ë¹„íŠ¸ë§µìœ¼ë¡œ ì €ì¥ ê°€ëŠ¥:

```csharp
var bitmap = await control.RenderToBitmapAsync(new PixelSize(800, 600));
using var stream = File.OpenWrite("report.png");
bitmap.Save(stream);
```

â†’ ì´ë¯¸ì§€ â†’ PDFë¡œ ì „í™˜í•˜ê±°ë‚˜ ì¶œë ¥

---

## 6ï¸âƒ£ í”„ë¦°í„° ì„ íƒ ê¸°ëŠ¥ UI (ì„ íƒì  êµ¬í˜„)

- Avaloniaì—ëŠ” ì•„ì§ `PrintDialog` ê°™ì€ ë‚´ì¥ ë‹¤ì´ì–¼ë¡œê·¸ ì—†ìŒ
- OSë³„ ì‹¤í–‰ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥:
  - Windows: `print /d:"PrinterName" file.pdf`
  - macOS/Linux: `lp -d printer file.pdf`

---

## 7ï¸âƒ£ ì¸ì‡„ ë¯¸ë¦¬ë³´ê¸°

- WebViewë¡œ HTMLì„ ë Œë”ë§ í›„ ë³´ê¸°
- ë˜ëŠ” PDF ë·°ì–´ íŒ¨ë„ì„ ë§Œë“¤ì–´ "report.pdf"ë¥¼ ë¯¸ë¦¬ í‘œì‹œ

---

## âœ… ì •ë¦¬

| í•­ëª© | ë°©ë²• | ë„êµ¬ |
|------|------|------|
| ë³´ê³ ì„œ ì‹œê°í™” | HTML í…œí”Œë¦¿ | Razor/ë¬¸ìì—´ ì¡°í•© |
| PDF ì¶œë ¥ | HtmlRenderer, PuppeteerSharp | PDFSharp |
| ì¸ì‡„ | OSë³„ Shell ì‹¤í–‰ | `lp`, `print`, `lpr` |
| ë¯¸ë¦¬ë³´ê¸° | WebView2 or HTML Preview | Avalonia.WebView (Experimental) |

---

## ğŸ§  í™•ì¥ íŒ

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| ğŸ“Š ì°¨íŠ¸ í¬í•¨ | LiveCharts2, Chart.js ë“± SVG â†’ HTML í¬í•¨ |
| ğŸ§¾ ë¨¸ë¦¬ê¸€/ê¼¬ë¦¬ë§ | í˜ì´ì§€ ë²ˆí˜¸, ë¡œê³  ì¶”ê°€ |
| ğŸ” ì¶œë ¥ ê¶Œí•œ | ê´€ë¦¬ìë§Œ ì¸ì‡„ ê°€ëŠ¥í•˜ê²Œ ì œí•œ |
| ğŸ•“ ì˜ˆì•½ ì¸ì‡„ | ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìœ¼ë¡œ PDF ìƒì„± í›„ ì¶œë ¥

---

## ğŸ“š ê´€ë ¨ íŒ¨í‚¤ì§€

| íŒ¨í‚¤ì§€ | ì„¤ëª… |
|--------|------|
| `HtmlRenderer.PdfSharp` | ë¹ ë¥´ê³  ê°„ë‹¨í•œ PDF ìƒì„± |
| `PuppeteerSharp` | í¬ë¡¬ ê¸°ë°˜ HTML â†’ PDF |
| `PdfSharpCore` | .NET Coreìš© PDF ìƒì„±ê¸° |
| `Avalonia.WebView` | HTML ë Œë”ë§ (ì‹¤í—˜ì ) |

---

## âœï¸ ê²°ë¡ 

AvaloniaëŠ” WPF ìˆ˜ì¤€ì˜ ì¸ì‡„ APIëŠ” ì—†ì§€ë§Œ,  
ë‹¤ìŒê³¼ ê°™ì€ ì ‘ê·¼ìœ¼ë¡œ ê°•ë ¥í•œ ì¸ì‡„ ê¸°ëŠ¥ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **HTML ê¸°ë°˜ ë³´ê³ ì„œ í…œí”Œë¦¿ ìƒì„±**
- **PDF ì¶œë ¥ í›„ í”„ë¦°í„° ì—°ë™**
- **ì´ë¯¸ì§€ ë Œë”ë§ ë³´ì¡° í™œìš©**
- **ë©€í‹° í”Œë«í¼ ëŒ€ì‘ì„ ìœ„í•œ OS ëª…ë ¹ ì—°ë™**

â†’ ì‹¤ë¬´ì—ì„œë„ ì¶©ë¶„íˆ ì‘ìš© ê°€ëŠ¥í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.