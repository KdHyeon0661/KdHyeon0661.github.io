---
layout: post
title: 이산수학 - 집합
date: 2025-05-15 21:20:23 +0900
category: 이산수학
---
# 집합(Set)이란? — 이산수학 기초 정리(확장판)

## 학습 목표

- 집합의 의미, 표기, 연산(합·교·차·여·대칭차)과 성질을 정확히 설명한다.
- 드모르간, 분배, 흡수 등 **집합 대수 법칙**을 원소-기반 증명으로 스스로 보인다.
- 멱집합, 데카르트 곱, 지시함수, 이미지/원상(역상) 등 고급 주제를 활용한다.
- 유한/가산/비가산 **카디널리티**와 칸토어 정리를 이해한다.
- 파이썬 `set`/`frozenset` 사용법과 성능/주의점을 파악한다.

---

## 집합이란?

**정의**: 집합은 특정 조건을 만족하는 객체(원소)들의 모임이다.
핵심 특성:
- 순서 없음
- 중복 없음

예시:
```text
A = {1, 2, 3}
B = {a, e, i, o, u}
```

수학적 기호는 LaTeX로 적는다:
- 소속: $$a \in A$$
- 비소속: $$a \notin A$$
- 부분집합: $$A \subseteq B$$
- 진부분집합: $$A \subset B$$
- 동일: $$A = B$$

---

## 표기법

### 원소 나열법

```text
E = {2, 4, 6, 8}
V = {"red", "green", "blue"}
```

### 조건 제시법

```text
A = { x | x는 자연수이고 x < 5 } = {1, 2, 3, 4}
```
수식 표기:
$$
A = \{\, x \in \mathbb{N} \mid x < 5 \,\}.
$$

### 공집합과 전체집합

- 공집합: $$\varnothing = \{\}$$
- 전체집합: 문맥에서 고려하는 모든 원소의 집합 $$U$$

> 주의: 전체집합 $$U$$ 를 명시하지 않으면 여집합 등의 의미가 모호해진다.

---

## 기본 연산

도메인(전체집합) $$U$$ 가 고정되어 있다고 하자.

- 합집합: $$A \cup B = \{ x \mid x \in A \ \text{또는}\ x \in B \}$$
- 교집합: $$A \cap B = \{ x \mid x \in A \ \text{그리고}\ x \in B \}$$
- 차집합(상대 여집합): $$A \setminus B = \{ x \mid x \in A \ \text{그리고}\ x \notin B \}$$
- 여집합: $$A^{c} = U \setminus A$$
- 대칭차: $$A \triangle B = (A \setminus B) \cup (B \setminus A)$$

예:
```text
{1,2} ∪ {2,3} = {1,2,3}
{1,2} ∩ {2,3} = {2}
{1,2} \ {2,3} = {1}
```

---

## 포함관계와 상등

- 부분집합: $$A \subseteq B \iff (\forall x)(x \in A \Rightarrow x \in B)$$
- 진부분집합: $$A \subset B \iff (A \subseteq B \ \land\ A \ne B)$$
- 동일: $$A = B \iff (A \subseteq B \ \land\ B \subseteq A)$$
- 공집합은 모든 집합의 부분집합: $$\varnothing \subseteq A$$

---

## 멱집합과 카디널리티

- 멱집합: $$\mathcal{P}(A) = \{\, X \mid X \subseteq A \,\}$$
- 크기: 유한 집합에서 $$|A| = n \Rightarrow |\mathcal{P}(A)| = 2^{n}$$

예:
```text
A = {1, 2}
P(A) = { ∅, {1}, {2}, {1,2} }  (4개)
```

---

## 집합 대수 법칙(요약표)

모든 집합 $$A,B,C$$ 에 대해:

- 교환: $$A \cup B = B \cup A,\quad A \cap B = B \cap A$$
- 결합: $$(A \cup B) \cup C = A \cup (B \cup C),\quad (A \cap B) \cap C = A \cap (B \cap C)$$
- 분배:
$$
A \cap (B \cup C) = (A \cap B) \cup (A \cap C),\quad
A \cup (B \cap C) = (A \cup B) \cap (A \cup C)
$$
- 항등: $$A \cup \varnothing = A,\quad A \cap U = A$$
- 지배: $$A \cup U = U,\quad A \cap \varnothing = \varnothing$$
- 멱등: $$A \cup A = A,\quad A \cap A = A$$
- 보수: $$A \cup A^{c} = U,\quad A \cap A^{c} = \varnothing$$
- 흡수: $$A \cup (A \cap B) = A,\quad A \cap (A \cup B) = A$$
- 드모르간:
$$
(A \cup B)^{c} = A^{c} \cap B^{c},\quad
(A \cap B)^{c} = A^{c} \cup B^{c}
$$
- 대칭차 성질:
$$
A \triangle B = (A \cup B) \setminus (A \cap B),\quad
A \triangle B = B \triangle A,\quad
(A \triangle B) \triangle C = A \triangle (B \triangle C)
$$

---

## 원소-기반 증명 예시

### 드모르간(합집합)

보일 것: $$(A \cup B)^{c} = A^{c} \cap B^{c}.$$

증명(양 포함):
- 임의의 $$x$$ 가 $$(A \cup B)^{c}$$ 에 있다면 $$x \notin A \cup B$$, 즉 $$x \notin A$$ 그리고 $$x \notin B$$. 따라서 $$x \in A^{c} \cap B^{c}$$.
- 반대로 $$x \in A^{c} \cap B^{c}$$ 이면 $$x \notin A,\ x \notin B$$ 이므로 $$x \notin A \cup B$$. 따라서 $$x \in (A \cup B)^{c}$$.

양방향 포함으로 등호 성립.

### 흡수법칙(합)

보일 것: $$A \cup (A \cap B) = A.$$

- 좌→우: $$x \in A \cup (A \cap B) \Rightarrow x \in A$$ 또는 $$x \in A \cap B$$. 후자는 곧 $$x \in A$$. 따라서 항상 $$x \in A$$.
- 우→좌: $$x \in A \Rightarrow x \in A \cup (A \cap B)$$.

---

## 데카르트 곱과 관계·함수

- 순서쌍 정의(쿠라토프스키): $$(a,b) = \{\{a\}, \{a,b\}\}$$
- 데카르트 곱: $$A \times B = \{\, (a,b) \mid a \in A,\ b \in B \,\}$$
- 관계: $$R \subseteq A \times B$$
- 함수: $$f \subseteq A \times B$$ 가 각 $$a \in A$$ 에 대해 정확히 하나의 $$b \in B$$ 를 대응시키면 함수.

### 이미지와 원상(역상)

- 이미지: $$f[S] = \{ f(x) \mid x \in S \}$$
- 원상: $$f^{-1}[T] = \{ x \in A \mid f(x) \in T \}$$

성질(항상 성립):
$$
f^{-1}[T_1 \cup T_2] = f^{-1}[T_1] \cup f^{-1}[T_2],\quad
f^{-1}[T_1 \cap T_2] = f^{-1}[T_1] \cap f^{-1}[T_2],\quad
f^{-1}[T^{c}] = \big(f^{-1}[T]\big)^{c}.
$$
이미지는 교집합을 일반에 보존하지 않는다: $$f[S_1 \cap S_2] \subseteq f[S_1] \cap f[S_2]$$ (보통 엄격 포함).

---

## 지시함수(특성함수)와 집합 대수

집합 $$A \subseteq U$$ 의 **지시함수** $$\mathbf{1}_A : U \to \{0,1\}$$ 를
$$
\mathbf{1}_A(x) =
\begin{cases}
1 & x \in A\\
0 & x \notin A
\end{cases}
$$
로 두면 다음이 성립:
$$
\mathbf{1}_{A \cup B} = \max(\mathbf{1}_A,\mathbf{1}_B),\quad
\mathbf{1}_{A \cap B} = \min(\mathbf{1}_A,\mathbf{1}_B),\quad
\mathbf{1}_{A^{c}} = 1 - \mathbf{1}_A.
$$
이 관점은 확률·측도이론에서 사건 집합을 다룰 때 유용하다.

---

## 확장: 색인된 집합족의 합·교

색인집합 $$I$$ 와 집합족 $$\{A_i\}_{i \in I}$$ 에 대해:
$$
\bigcup_{i \in I} A_i = \{ x \mid \exists i \in I,\ x \in A_i \},\quad
\bigcap_{i \in I} A_i = \{ x \mid \forall i \in I,\ x \in A_i \}.
$$
유한·무한 합·교를 하나의 기호로 통합 표현할 수 있다(분해·교환 규칙 유의).

---

## 카디널리티: 가산과 비가산

- 가산무한: $$|\mathbb{N}| = |\mathbb{Z}| = |\mathbb{Q}|$$
  - $$\mathbb{Q}$$ 가 가산임은 격자 나열로 보일 수 있다.
- 비가산: $$|\mathbb{R}| > |\mathbb{N}|$$ (칸토어 대각선 논법)

**칸토어 정리**: 임의의 집합 $$A$$ 에 대해 $$|A| < |\mathcal{P}(A)|$$.
즉, 멱집합은 항상 더 크다. 특히 유한 $$n$$ 에 대해 $$2^n$$, 무한에서도 진부분 크기 증가.

---

## 나이브 집합론의 함정(러셀의 역설)

$$
R = \{\, X \mid X \notin X \,\}
$$
을 허용하면 $$R \in R \iff R \notin R$$ 의 모순.
현대 수학은 공리적 체계(ZF, ZFC 등)의 **분리 공리** 등으로 이를 피한다.
학습 포인트: 조건 제시법은 **주어진 우주**에서의 부분집합을 만들 때만 안전하다.

---

## 실전 파이썬: Set, Frozenset, 성능, 주의점

### 기본 연산

```python
A = {1, 2, 3}
B = {2, 3, 4}

print(A | B)      # 합집합
print(A & B)      # 교집합
print(A - B)      # 차집합
print(A ^ B)      # 대칭차
print(A <= B)     # 부분집합
print(A.issubset(B))
print(A.issuperset({1,2}))
```

### 불변 집합: frozenset (해시 가능, dict 키로 사용 가능)

```python
A = frozenset({1,2})
B = frozenset({2,3})
S = {A, B}        # OK: frozenset은 해시 가능
```
주의: `set` 은 가변이므로 다른 집합의 원소나 dict 키로 쓸 수 없다.

### 멱집합(유틸)

```python
from itertools import chain, combinations

def power_set(iterable):
    s = list(iterable)
    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))

A = {1,2,3}
P = [set(sub) for sub in power_set(A)]
print(len(P))  # 8
```

### 중복 제거와 집합 내포

```python
data = [1,2,2,3,3,3]
dedup = set(data)                 # {1,2,3}
even  = {x for x in dedup if x%2==0}
```

### 성능 감각(평균):

- 원소 테스트 `x in S`: 평균 O(1) 해시탐색
- 합·교·차: O(len(A)+len(B)) 정도(구현에 따라 상수항 다름)

### 자주 겪는 오류

- 리스트는 해시 불가 → 집합의 원소로 쓰려면 튜플로 변환:
```python
S = { (1,2), (2,3) }   # OK
# S = { [1,2] }        # TypeError

```
- 제거 API 차이: `remove` 는 없으면 KeyError, `discard` 는 조용히 무시.

---

## 논리와 집합의 대응

명제 논리와 집합 연산은 다음과 같이 対응한다(우주 $$U$$ 에서 부분집합을 사건으로 간주):

- 논리합 OR ↔ 합집합 $$\cup$$
- 논리곱 AND ↔ 교집합 $$\cap$$
- 부정 NOT ↔ 여집합 $${}^{c}$$
- 함의 $$P \Rightarrow Q \iff P^{c} \cup Q = U$$

이 対응은 확률(사건의 대수), 정보검색(조건 조합) 등에서 직관을 준다.

---

## 실전 시나리오

### 데이터 정제: 중복 제거 및 교집합 필터

```python
emails_a = {"u1@x.com","u2@x.com","u3@x.com"}
emails_b = {"u2@x.com","u4@x.com"}

active_in_both = emails_a & emails_b    # 교집합
all_targets     = emails_a | emails_b    # 합집합
only_a          = emails_a - emails_b    # 차집합
```

### 태그 검색(조건 결합)

- "Python AND Data": 게시물 집합 $$P$$ 와 $$D$$ 의 교집합 $$P \cap D$$
- "Python OR Data": $$P \cup D$$
- "Python AND NOT Data": $$P \setminus D$$

### SQL 대응(개념)

- `IN` 조건과 서브쿼리는 부분집합/원소 테스트로 이해 가능.
- 다만 SQL은 `NULL` 로 3값 논리를 가지므로 집합 대수 동치가 항상 보존되는 것은 아니다.

---

## 자주 하는 실수와 대비책

- 원소 vs 부분집합 혼동:
  - $$2 \in \{1,2,3\}$$ 는 참이지만, $$\{2\} \subseteq \{1,2,3\}$$ 의 형태로 써야 부분집합.
  - $$\{2\} \in \mathcal{P}(\{1,2,3\})$$ 는 참(원소가 집합).
- 여집합 대상 미명시: $$A^{c}$$ 는 반드시 어떤 $$U$$ 에 대한 것인지 정한다.
- 다중집합(bag)과 집합 혼동: 집합은 중복을 제거, bag은 중복을 보존한다.
- 순서쌍/데카르트 곱에서 순서 무시: $$(a,b)\ne(b,a)$$ (일반적으로)

---

## 연습문제(풀이 또는 힌트)

1) 다음 등식을 원소-기반으로 증명하라.
   a) $$A \setminus (B \cup C) = (A \setminus B) \cap (A \setminus C)$$
   b) $$A \triangle B = (A \cup B) \setminus (A \cap B)$$

2) 다음이 항상 성립함을 보이거나 반례를 들어라.
   a) $$f[A \cap B] = f[A] \cap f[B]$$ (일반적으로 등호 성립 X, 포함만 성립)
   b) $$f^{-1}[C \cap D] = f^{-1}[C] \cap f^{-1}[D]$$ (항상 성립)

3) 카디널리티:
   a) $$|A|=n$$ 이면 $$|\mathcal{P}(A)|=2^{n}$$ 을 귀납으로 보이기.
   b) $$|\mathbb{Q}| = |\mathbb{N}|$$ 의 이유 개략 설명하기.

4) 색인집합:
   $$\bigcap_{n=1}^{\infty} (-\tfrac{1}{n}, \tfrac{1}{n}) = \{0\}$$ 을 보이라.

5) 파이썬:
```python
# 임의의 유니버스 U에서 임의의 집합 A,B,C에 대해
# 드모르간과 분배 법칙을 무작위로 검증하는 퍼저를 작성하라.

```
힌트: U에서 무작위 부분집합을 여러 번 생성해 동일성 비교.

---

## 파이썬 퍼저 예제(무작위 동치 점검)

```python
import random

def rand_subset(U, p=0.5):
    return {x for x in U if random.random() < p}

U = list(range(20))

def de_morgan_holds(U, trials=500):
    for _ in range(trials):
        A, B = rand_subset(U), rand_subset(U)
        left  = set(U) - (A | B)
        right = (set(U)-A) & (set(U)-B)
        if left != right:
            return False
    return True

def distrib_holds(U, trials=500):
    for _ in range(trials):
        A, B, C = rand_subset(U), rand_subset(U), rand_subset(U)
        left  = A & (B | C)
        right = (A & B) | (A & C)
        if left != right:
            return False
    return True

print("De Morgan:", de_morgan_holds(U))
print("Distributive:", distrib_holds(U))
```
주의: 유한 샘플 검사는 **직관 보조**일 뿐, 증명이 아니다.

---

## 마무리

- 집합은 이산수학의 공용어다. 합·교·차·여·대칭차 및 법칙들을 **원소-기반**으로 자유롭게 증명할 수 있어야 한다.
- 멱집합과 데카르트 곱은 함수·관계·그래프, 더 나아가 논리·확률·DB 이론의 토대를 이룬다.
- 파이썬 `set/frozenset` 은 이 이론을 실무 데이터 문제에 즉시 적용할 수 있는 강력한 도구다.
- 무한 크기의 비교(가산/비가산)와 칸토어 정리는 집합의 세계가 **질적으로** 계층적임을 보여 준다.
