---
layout: post
title: Spring - 실무 빌드 & 설정 전략
date: 2025-10-16 18:25:23 +0900
category: Spring
---
# 11) 실무 빌드 & 설정 전략 — 멀티모듈·버전 정렬·다중 환경·시크릿·외부 설정

> 목표: **Gradle 멀티모듈**과 **버전 정렬(BOM/Version Catalog)**로 일관된 의존성 관리를 하고, **dev/stage/prod** 다중 환경 구성과 **Secret 관리**, **Config Server/Vault** 등 **설정 외부화** 패턴을 실전 예제로 정리한다.  
> 전제: Spring Boot 3.3+, Java 21, Gradle 8.8+, (선택) K8s/Docker.

---

## A. Gradle 멀티모듈 — 구조/의존성 방향/공통 빌드 로직

### A-1. 표준 구조(예시)
```
project-root
├─ settings.gradle.kts
├─ build.gradle.kts              # 루트(최소화)
├─ gradle/libs.versions.toml     # Version Catalog (권장)
├─ build-logic/                  # 사내 컨벤션 플러그인(추천)
│  ├─ settings.gradle.kts
│  ├─ build.gradle.kts
│  └─ src/main/kotlin/
│     ├─ com.example.java-conventions.gradle.kts
│     ├─ com.example.spring-boot-app.gradle.kts
│     └─ com.example.spring-boot-lib.gradle.kts
├─ platform/                     # 내부 BOM(java-platform)
│  ├─ build.gradle.kts
│  └─ src/main/java/module-info.java (optional)
├─ modules/
│  ├─ core/                      # 순수 비즈니스 로직(도메인)
│  ├─ persistence/               # Data access
│  ├─ api/                       # Web/API(Spring MVC)
│  ├─ batch/                     # 배치(Spring Batch)
│  └─ support/                   # 공통 유틸/에러/로깅
└─ apps/
   ├─ app-admin/                 # 관리자 콘솔(Web MVC)
   └─ app-gateway/               # API Gateway(Spring Cloud Gateway 등)
```

**의존성 방향(권장)**  
- `api` → `core`, `persistence`, `support`  
- `batch` → `core`, `persistence`, `support`  
- 순환 금지. `core`는 프레임워크 의존 최소화(POJO/유스케이스/도메인).

---

### A-2. settings.gradle.kts
```kotlin
rootProject.name = "acme"

pluginManagement {
  repositories {
    gradlePluginPortal()
    mavenCentral()
  }
}

dependencyResolutionManagement {
  repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
  repositories {
    mavenCentral()
  }
  versionCatalogs {
    create("libs") {
      from(files("gradle/libs.versions.toml"))
    }
  }
}

include(":platform")
include(":modules:core", ":modules:persistence", ":modules:api", ":modules:support", ":modules:batch")
include(":apps:app-admin", ":apps:app-gateway")
```

---

### A-3. Version Catalog (gradle/libs.versions.toml)
```toml
[versions]
java = "21"
spring-boot = "3.3.3"
spring-dep-mgmt = "1.1.6"
spring-cloud = "2024.0.3"
mapstruct = "1.5.5.Final"
jjwt = "0.12.5"
logstash = "7.4"
testcontainers = "1.20.2"
lombok = "1.18.34"
querydsl = "5.1.0"

[libraries]
spring-boot-starter-web = { module = "org.springframework.boot:spring-boot-starter-web" }
spring-boot-starter-validation = { module = "org.springframework.boot:spring-boot-starter-validation" }
spring-boot-starter-data-jpa = { module = "org.springframework.boot:spring-boot-starter-data-jpa" }
spring-boot-starter-actuator = { module = "org.springframework.boot:spring-boot-starter-actuator" }
spring-boot-starter-security = { module = "org.springframework.boot:spring-boot-starter-security" }
logstash-encoder = { module = "net.logstash.logback:logstash-logback-encoder", version.ref = "logstash" }
mapstruct = { module = "org.mapstruct:mapstruct", version.ref = "mapstruct" }
mapstruct-processor = { module = "org.mapstruct:mapstruct-processor", version.ref = "mapstruct" }
jjwt-api = { module = "io.jsonwebtoken:jjwt-api", version.ref = "jjwt" }
jjwt-impl = { module = "io.jsonwebtoken:jjwt-impl", version.ref = "jjwt" }
jjwt-jackson = { module = "io.jsonwebtoken:jjwt-jackson", version.ref = "jjwt" }
testcontainers-bom = { module = "org.testcontainers:testcontainers-bom", version.ref = "testcontainers" }
lombok = { module = "org.projectlombok:lombok", version.ref = "lombok" }

[plugins]
spring-boot = { id = "org.springframework.boot", version.ref = "spring-boot" }
dep-mgmt = { id = "io.spring.dependency-management", version.ref = "spring-dep-mgmt" }
java = { id = "java" }
java-library = { id = "java-library" }
```

> **팁**: Spring Boot BOM을 쓰면 대부분의 Spring/3rd 버전 정렬이 자동화된다. 추가 사내 라이브·외부 스택은 **내부 platform(BOM)**로 묶으면 팀 간 일관성↑.

---

### A-4. 내부 BOM(java-platform) — `platform/build.gradle.kts`
```kotlin
plugins { `java-platform` }

group = "com.acme"
version = "1.0.0"

javaPlatform { allowDependencies() }

dependencies {
  // 외부 BOM 가져오기
  api(platform("org.springframework.boot:spring-boot-dependencies:${libs.versions.spring-boot.get()}"))
  api(platform("org.testcontainers:testcontainers-bom:${libs.versions.testcontainers.get()}"))
  // 사내 공통 정렬(예: mapstruct/jjwt 등)
  constraints {
    api("org.mapstruct:mapstruct:${libs.versions.mapstruct.get()}")
    api("org.mapstruct:mapstruct-processor:${libs.versions.mapstruct.get()}")
    api("io.jsonwebtoken:jjwt-api:${libs.versions.jjwt.get()}")
    api("io.jsonwebtoken:jjwt-impl:${libs.versions.jjwt.get()}")
    api("io.jsonwebtoken:jjwt-jackson:${libs.versions.jjwt.get()}")
  }
}
```

루트에서 BOM 적용:
```kotlin
// root build.gradle.kts
subprojects {
  apply(plugin = "java")
  group = "com.acme"
  version = "1.0.0"

  repositories { mavenCentral() }

  dependencies {
    "implementation"(platform(project(":platform")))
  }

  tasks.withType<JavaCompile> {
    sourceCompatibility = JavaVersion.VERSION_21.toString()
    targetCompatibility = JavaVersion.VERSION_21.toString()
    options.encoding = "UTF-8"
  }

  tasks.withType<Test> {
    useJUnitPlatform()
  }
}
```

---

### A-5. 사내 컨벤션 플러그인(강력 추천)
`build-logic/src/main/kotlin/com.example.spring-boot-app.gradle.kts`
```kotlin
plugins {
  alias(libs.plugins.spring.boot)
  alias(libs.plugins.dep.mgmt)
  java
}

java {
  toolchain { languageVersion.set(JavaLanguageVersion.of(libs.versions.java.get())) }
}

dependencies {
  "implementation"(platform(project(":platform")))
  "annotationProcessor"(libs.lombok)
  "compileOnly"(libs.lombok)
  "testAnnotationProcessor"(libs.lombok)
  "testCompileOnly"(libs.lombok)
}

tasks.withType<Test> { useJUnitPlatform() }
```

모듈에서 간단히 사용:
```kotlin
// modules/api/build.gradle.kts
plugins { id("com.example.spring-boot-app") }

dependencies {
  implementation(libs.spring.boot.starter.web)
  implementation(libs.spring.boot.starter.validation)
  implementation(libs.spring.boot.starter.actuator)
  implementation(project(":modules:core"))
  implementation(project(":modules:persistence"))
  testImplementation("org.springframework.boot:spring-boot-starter-test")
}
```

> **효과**: 모듈마다 반복되는 설정을 제거. 팀 표준(자바 버전, 테스트 엔진, lint, 애너테이션 프로세서)을 중앙에서 통제.

---

### A-6. 빌드 캐시/병렬/잠금
```properties
# gradle.properties
org.gradle.parallel=true
org.gradle.caching=true
org.gradle.configuration-cache=true
org.gradle.jvmargs=-Xmx2g -Dfile.encoding=UTF-8
```
- **Dependency Locking**: 재현성 ↑
```bash
./gradlew dependencies --write-locks
# 버전 갱신 시 변경점 PR로 검토 (Renovate/Bot)
```

---

## B. 다중 환경(dev/stage/prod) — 프로파일/우선순위/구성 전략

### B-1. Spring 설정 우선순위(요약)
1. **Command-line args** (`--server.port=8081`)  
2. **OS env** (`SPRING_DATASOURCE_URL`)  
3. `application-{profile}.yml`  
4. `application.yml`  
5. Jar 내부 defaults

> **원칙**: **코드/이미지에 비밀 포함 금지**. 민감 값은 **env/secret**로. 환경에 따라 바뀌는 값은 **프로파일 파일**로.

---

### B-2. 프로파일 파일 예시
`src/main/resources/application.yml`
```yaml
spring:
  application:
    name: acme-api
  profiles:
    group:
      local: [dev]
      docker: [dev]
      stage: [stage]
      prod:  [prod]

server:
  tomcat:
    threads:
      max: 200
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,env,loggers
```

`application-dev.yml`
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/acme_dev
    username: dev
    password: dev # 로컬만 허용. 실제 운영은 env 관리.
  jpa:
    hibernate:
      ddl-auto: update
  jackson:
    deserialization:
      fail-on-unknown-properties: true

logging:
  level:
    root: INFO
    org.hibernate.SQL: DEBUG
```

`application-stage.yml`
```yaml
spring:
  datasource:
    url: jdbc:postgresql://stage-db:5432/acme
    username: acme
    password: ${DB_PASSWORD} # ENV 주입
  jpa:
    hibernate:
      ddl-auto: validate
  flyway:
    enabled: true
    locations: classpath:db/migration

logging:
  level:
    root: INFO
```

`application-prod.yml`
```yaml
spring:
  datasource:
    url: jdbc:postgresql://${DB_HOST:prod-db}:${DB_PORT:5432}/acme
    username: ${DB_USER}
    password: ${DB_PASSWORD}
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: validate
  sql.init.mode: never

server:
  compression:
    enabled: true
    mime-types: application/json,text/plain
  forward-headers-strategy: native

logging:
  level:
    root: INFO
  logback:
    rollingpolicy:
      max-history: 30
```

실행:
```bash
# 로컬
./gradlew :modules:api:bootRun --args='--spring.profiles.active=dev'

# Docker/K8s
JAVA_TOOL_OPTIONS="-Dspring.profiles.active=prod" java -jar app.jar
```

---

### B-3. 환경 변수 매핑(대문자 규칙)
- `spring.datasource.url` → `SPRING_DATASOURCE_URL`  
- `my.service.base-url` → `MY_SERVICE_BASE_URL`  
- 하이픈/점 → **언더스코어**. 대소문자 무시.

---

### B-4. Flyway/Liquibase로 마이그레이션 관리
`build.gradle.kts`
```kotlin
dependencies { implementation("org.flywaydb:flyway-core") }
```
`application-*.yml`에 `flyway.enabled=true`/`locations` 설정.  
> **원칙**: dev도 **DDL 자동 생성 금지**(validate만)로 환경 차이 리스크를 줄인다. 로컬에만 `update` 허용.

---

### B-5. 로그/모니터링 별도 설정
- dev: SQL 디버그, actuator 더 많이 expose  
- prod: JSON 로그 + `AsyncAppender`, PII 마스킹, 보안 헤더/CORS 엄격화

---

## C. Secret 관리 — 파일 금지, 안전한 주입과 회전

### C-1. 금지 사항
- Git에 비밀번호/키/토큰 **절대 커밋 금지**  
- `application-*.yml`에 시크릿 하드코딩 금지

### C-2. 로컬 개발
- `.env` + `direnv` (IDE 실행 구성에 주입)  
- `SPRING_DATASOURCE_PASSWORD=...` 같이 **환경변수**로만

### C-3. 서버/컨테이너
- **Kubernetes Secret**: Pod에 **env**/파일로 마운트  
- **Docker Swarm/Compose secrets**: `/run/secrets/*`로 파일 마운트 후 Spring `spring.config.import=optional:file:/run/secrets/db.password`

예:
```yaml
# docker-compose.yml
services:
  api:
    image: acme-api:1.0.0
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - SPRING_DATASOURCE_USERNAME=acme
      - SPRING_DATASOURCE_PASSWORD_FILE=/run/secrets/db_password
    secrets:
      - db_password

secrets:
  db_password:
    file: ./secrets/db_password.txt
```

Spring에서 파일 참조:
```yaml
spring:
  datasource:
    password: ${SPRING_DATASOURCE_PASSWORD_FILE:}
```
> 파일 내용을 직접 읽어 `@Bean`에서 주입하거나, 런타임 스크립트로 env 세팅.

### C-4. 키 회전 & 접근 최소화
- DB/외부 API 키 **주기적 회전**(분기/반기)  
- 애플리케이션 **read-only 권한** 분리  
- 감사 로그(누가 언제 읽었는지)

---

## D. 설정 외부화 — Spring Cloud Config & Vault 개요

### D-1. Spring Cloud Config(Server/Client)

**Config Server**(Git 백엔드):
```kotlin
// config-server/build.gradle.kts
plugins { alias(libs.plugins.spring.boot); alias(libs.plugins.dep.mgmt); java }
dependencies { implementation("org.springframework.cloud:spring-cloud-config-server") }
```
`application.yml`:
```yaml
server.port: 8888
spring.cloud.config.server.git:
  uri: https://github.com/acme/config-repo
  search-paths: '{application}'
```
Config Server 메인:
```java
@EnableConfigServer
@SpringBootApplication
public class ConfigServerApp { public static void main(String[] args){ SpringApplication.run(ConfigServerApp.class, args); } }
```

**구성 저장소 구조**
```
config-repo
├─ acme-api/
│  ├─ application.yml
│  ├─ application-dev.yml
│  ├─ application-stage.yml
│  └─ application-prod.yml
└─ shared/
   └─ messages_ko.properties
```

**클라이언트(App)**: Spring Boot 3에서는 `bootstrap` 대신 **Config Import** 사용.
`application.yml`
```yaml
spring:
  application.name: acme-api
  config:
    import: "optional:configserver:http://config-server:8888"
```
- **우선순위**: Config Server 값이 **로컬 application.yml**보다 우선.  
- **/actuator/refresh** + `spring-cloud-starter-bus-amqp`/Kafka로 **핫 리프레시** 가능(민감 값 제외 권장).

> **장점**: 한 저장소에서 **여러 서비스/환경의 구성**을 버전 관리.  
> **주의**: 시크릿은 Vault/Secret Manager로, Config Server에는 **평문 비밀 금지**(SOPS 이용 가능).

---

### D-2. Vault(또는 AWS Secrets Manager/GCP Secret Manager)

**Spring Cloud Vault**:
```kotlin
dependencies {
  implementation("org.springframework.cloud:spring-cloud-starter-vault-config")
}
```
`application.yml`
```yaml
spring:
  cloud:
    vault:
      uri: https://vault.acme.com
      authentication: approle
      app-role:
        role-id: ${VAULT_ROLE_ID}
        secret-id: ${VAULT_SECRET_ID}
      kv:
        enabled: true
        backend: secret
        profile-separator: '/'
```

**Vault 경로 설계**
```
secret/acme-api/dev/application     # 공통 시크릿
secret/acme-api/dev/db             # DB 자격증명
secret/acme-api/prod/application
```

**키-값 예**
```
secret/acme-api/prod/db
  username = acme
  password = ********
```

**Spring 매핑**
```yaml
spring:
  datasource:
    username: ${username}     # Vault에서 주입
    password: ${password}
```

> **운영 팁**  
> - **AppRole** or **K8s Auth**(Pod ServiceAccount)로 토큰 자동 교환  
> - **Dynamic Secrets**(DB 갱신/자동 만료) 사용 시 애플리케이션 커넥션 풀 갱신 전략 준비  
> - **Lease Renewal**/Rotation 모니터링

---

### D-3. Config Server + Vault 조합
- **비민감**: Config Server(Git)  
- **민감**: Vault  
- Spring은 다중 `PropertySource`를 합쳐 우선순위에 따라 fetch → 하나의 `Environment`로 제공.

---

## E. 메시지/설정 외부화 — i18n·Feature Flag·환경별 배너

### E-1. 메시지 번들 외부화
Config Server 저장소에 `messages*.properties`를 두고 import:
```yaml
spring:
  messages:
    basename: classpath:messages,config:shared/messages  # config: 접두로 외부 위치
    fallback-to-system-locale: false
```
> 팀에서 번역만 갱신하여 Config Server에 커밋 → 버스 이벤트로 런타임 반영 가능(리로드 전략 검토).

### E-2. Feature Flag (Togglz/Unleash)
```kotlin
dependencies { implementation("org.togglz:togglz-spring-boot-starter:3.4.0") }
```
`application.yml`:
```yaml
togglz:
  features-file: classpath:/features.properties
  console:
    enabled: true
```
`features.properties`:
```
CheckoutV2.enabled=true
```
코드:
```java
@FeatureEnum
public enum FeatureFlags { CheckoutV2 }

@ConditionalOnProperty(name="togglz.enabled", havingValue="true", matchIfMissing=true)
@Service
public class CheckoutService {
  public Receipt checkout(...) {
    if (FeatureContext.getFeature(FeatureFlags.CheckoutV2).isActive()) {
      return checkoutV2(...);
    }
    return checkoutV1(...);
  }
}
```

### E-3. 배너/배포 정보
`src/main/resources/banner.txt`에 `${spring.profiles.active}`/Git SHA 표시 → 환경 가시성↑.  
`info.build`/`info.git` Actuator 노출:
```yaml
management.info.git.mode=full
```

---

## F. Docker/K8s와 Spring 설정의 만남

### F-1. Docker 이미지 최소화
`Dockerfile`(distroless 예)
```dockerfile
FROM eclipse-temurin:21-jre-jammy as builder
WORKDIR /app
COPY build/libs/app.jar app.jar
RUN java -Djarmode=layertools -jar app.jar extract

FROM gcr.io/distroless/java21-debian12
WORKDIR /app
COPY --from=builder /app/dependencies/ ./
COPY --from=builder /app/spring-boot-loader/ ./
COPY --from=builder /app/snapshot-dependencies/ ./
COPY --from=builder /app/application/ ./
ENV JAVA_TOOL_OPTIONS="-Dspring.profiles.active=prod"
ENTRYPOINT ["java","org.springframework.boot.loader.launch.JarLauncher"]
```

### F-2. K8s Deployment (요약)
```yaml
apiVersion: apps/v1
kind: Deployment
metadata: { name: acme-api }
spec:
  replicas: 3
  template:
    spec:
      containers:
      - name: app
        image: registry/acme-api:1.0.0
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "prod"
        - name: SPRING_CONFIG_IMPORT
          value: "configserver:http://config-server:8888"
        - name: JAVA_TOOL_OPTIONS
          value: "-Dmanagement.endpoints.web.exposure.include=health,info,metrics,prometheus"
        envFrom:
        - secretRef: { name: acme-api-secrets }   # DB_PASSWORD 등
        resources: { requests: { cpu: "200m", memory: "512Mi" }, limits: { cpu: "1", memory: "1Gi" } }
        readinessProbe:
          httpGet: { path: /actuator/health/readiness, port: 8080 }
        livenessProbe:
          httpGet: { path: /actuator/health/liveness, port: 8080 }
```

---

## G. CI/CD — 재현 가능한 빌드와 안전 배포

### G-1. GitHub Actions 예
`.github/workflows/build.yml`
```yaml
name: build
on:
  push: { branches: [ main ] }
  pull_request:

jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v4
        with: { fetch-depth: 0 }
      - uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: '21'
          cache: 'gradle'
      - name: Validate Wrapper
        run: gradle wrapper --gradle-version 8.8
      - name: Build
        run: ./gradlew clean build -x test
      - name: Test
        run: ./gradlew test
      - name: Build Docker
        run: docker build -t registry/acme-api:${{ github.sha }} apps/app-admin
      - name: Push
        run: docker push registry/acme-api:${{ github.sha }}
```

### G-2. Quality Gates
- **Dependency Check/OWASP**  
- **Lint(Spotless/Checkstyle)**, **License Audit**  
- **SLSA/Attestations**(공급망 보안), SBOM(사이클론DX)

---

## H. 실전 패턴 모음(선정 기준/의사결정 체크)

1) **버전 정렬**: **Boot BOM + 내부 platform(java-platform) + Version Catalog**  
2) **공통 설정**: **컨벤션 플러그인(build-logic)**로 중복 제거  
3) **환경 구분**: `application-*.yml` + env 변수. **비밀은 env/Secrets/Vault**  
4) **외부 구성**: Config Server(비민감), Vault(민감)/Secrets Manager  
5) **DB 마이그**: dev도 `validate`, 변경은 **DDL 스크립트 관리**  
6) **실행 전략**: 로컬(dev)·도커(dev)·스테이지·프로드 프로파일 세트  
7) **관측성**: actuator 범위/로그 레벨 환경별 분리, traceId  
8) **키 회전**: DB/API 키 주기 회전, 배포 파이프라인에 포함  
9) **CI/CD**: Wrapper 고정, 캐시, 잠금/갱신 정책, SBOM  
10) **런타임 안전**: open-in-view=false, 엄격한 JSON 바인딩, CORS/보안 헤더

---

## I. 끝에서 끝까지 예제 — “acme-api” 한 번에 보기

### I-1. 모듈 선언 (api)
```kotlin
plugins { id("com.example.spring-boot-app") }

dependencies {
  implementation(project(":modules:core"))
  implementation(project(":modules:persistence"))
  implementation(libs.spring.boot.starter.web)
  implementation(libs.spring.boot.starter.validation)
  implementation(libs.spring.boot.starter.actuator)
  runtimeOnly("org.postgresql:postgresql")
  testImplementation("org.springframework.boot:spring-boot-starter-test")
}
```

### I-2. 환경별 속성(발췌)
`application.yml`
```yaml
spring:
  application.name: acme-api
  config.import: "optional:configserver:"
```
`application-prod.yml`
```yaml
spring:
  datasource:
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/acme
    username: ${DB_USER}
    password: ${DB_PASSWORD}
  cloud:
    vault:
      uri: ${VAULT_URI}
      authentication: approle
      app-role:
        role-id: ${VAULT_ROLE_ID}
        secret-id: ${VAULT_SECRET_ID}
      kv:
        enabled: true
        backend: secret
```

### I-3. 배포(도커)
```bash
./gradlew :apps:app-admin:bootJar
docker build -t registry/acme-api:1.0.0 apps/app-admin
docker push registry/acme-api:1.0.0
```

---

## J. 자주 겪는 문제 & 트러블슈팅

- **모듈 간 버전 충돌** → 내부 `platform`으로 고정, `./gradlew dependencyInsight --dependency xxx`로 추적  
- **Config Import 순서 이슈** → `spring.config.import`가 가장 먼저 로드되게 `application.yml` 상단에 배치  
- **Vault 연결 실패** → 클럭/SSL/방화벽 확인, AppRole 권한 스코프 경로 점검  
- **프로파일 미적용** → `SPRING_PROFILES_ACTIVE` 정확히 설정, 다중 체인(API/Web)일 땐 체인별 적용 확인  
- **시크릿 노출 위험** → 로깅/Actuator `/env` 필터링, 샘플 마스킹, 권한 보호  
- **Docker 환경변수 안 먹힘** → 런타임 `JAVA_TOOL_OPTIONS`/`SPRING_CONFIG_IMPORT` 인용부호/공백 확인  
- **Gradle 캐시 충돌** → `./gradlew --stop && ./gradlew clean build`, CI 캐시 키에 gradle.properties/versions.toml 포함

---

## K. 한 페이지 요약

- **멀티모듈**: 도메인/레이어 분리 + **컨벤션 플러그인**으로 공통화.  
- **버전 관리**: **Boot BOM + 내부 java-platform + Version Catalog**로 **일관된 의존성**.  
- **환경 구성**: 프로파일 파일 + 환경변수, **비밀은 외부 관리**(Vault/Secrets).  
- **설정 외부화**: Config Server(Git)로 비민감 설정 중앙화, Vault/Secret Manager로 민감 값 주입.  
- **운영**: 로그/모니터링/보안 헤더/DB 마이그/키 회전까지 **환경별 차등 정책**을 코드화·자동화.
