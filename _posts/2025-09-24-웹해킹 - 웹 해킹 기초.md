---
layout: post
title: 웹해킹 - 웹 해킹 기초
date: 2025-09-24 14:25:23 +0900
category: 웹해킹
---
# 🌐 웹 해킹 기초 — 개념/역사/동향 · 해커 분류와 윤리 · OWASP Top 10(2021, 2025 트렌드) · 기본 용어(세션/쿠키/인증/인가/암호화)

> ⚠️ **합법·윤리 고지**
> 아래 내용은 **자기 소유의 환경**(로컬 랩, 허가된 모의침투 범위 내)에서 **방어 목적**으로만 사용하세요. 타인의 시스템·데이터를 무단으로 테스트하면 형사/민사상 책임을 집니다. 합법·윤리 원칙, 사전 동의, 로그 보존, 신속한 취약점 신고(Responsible Disclosure/Bug Bounty) 준수는 웹 보안 학습의 출발점입니다. (윤리 해킹의 정의와 목적 참고. )

---

## 1. 웹 해킹이란? — **개념, 짧은 역사**, 그리고 **2025 최신 동향**

### 1.1 개념
- **웹 해킹**은 웹 애플리케이션·API·인프라의 설계를 악용해 **권한상승, 정보탈취, 위변조** 등을 노리는 공격 전반을 뜻합니다. 전통적 네트워크 취약점과 달리 **애플리케이션 계층(HTTP/브라우저/서버 프레임워크/DB)**의 복잡성이 핵심 표면입니다.
- 공격자는 **입력 검증 부재**, **세션/쿠키 설정 미흡**, **권한검사 누락**, **잘못된 암호화/비밀키 관리**, **클라우드/CI 파이프라인 구성오류** 등을 결합해 실해킹을 만듭니다. 이러한 위험을 체계화한 대표 목록이 **OWASP Top 10**입니다. (2021 공식 페이지 참고. )

### 1.2 역사·분기점(발췌)
- **1996**: `cgi-bin/phf` 취약 CGI로 **명령 실행** 가능 — 초창기 웹 서버 측 취약점의 상징.
- **2000**: CERT **CA-2000-02** — “**Cross-Site Scripting(XSS)**”라는 용어가 널리 공표.
- **2005**: MySpace **Samy XSS 웜** — 수십 시간 내 백만 사용자 감염, XSS의 파급력 입증.

### 1.3 2025 동향(핵심만 압축)
- **자격 증명 남용** 중심의 웹 앱 침해: Verizon **DBIR 2025**에서 ‘기본 웹 앱 공격(BWAA)’ 유형 다수에서 **도난 인증정보**가 핵심이라는 분석.
- **API 공격**의 주력화: **OWASP API Top 10 2023**에서 `BOLA(객체 수준 인가)`가 1위. 프런트/모바일/파트너 통합으로 **ID 기반 권한검사**가 생명선.
- **봇/크롤러·AI 에이전트 트래픽 급증**: ’24→’25 **크롤러 18% 증가**, GPTBot 305% 증가(Cloudflare 관측). AI 스크레이핑 통제·차단 이슈가 WAF·봇관리의 주제가 됨.
  최근엔 **AI 크롤러 차단 기본값**과 **Pay-Per-Crawl** 논의, 그리고 “스텔스 크롤링” 공방도 화두.
- **소프트웨어 공급망**: 악성 패키지·의존성 오염이 급증(예: Sonatype 2024 보고서, 156% 증가), 2025 Q1에도 악성 패키지 대량 관측. CI·패키지 레지스트리 보안이 필수.

---

## 2. 해커의 분류(White/Gray/Black)와 **윤리적 해킹**의 필요성

- **화이트햇(White Hat)**: **허가**를 받고 보안 개선을 위해 침투 테스트/리뷰를 수행. 결과는 조직에 보고하고 수정 지원.
- **블랙햇(Black Hat)**: 무단 침입·금전적 이득·파괴를 목적으로 하는 공격자. 범죄.
- **그레이햇(Gray Hat)**: 무허가 탐색 후 제보·보상 요구 등 **법·윤리 경계**에 있는 활동. 커뮤니티에서 논쟁적.

> **왜 윤리 해킹이 필요한가?**
> (1) 공격자와 **동일한 관점**으로 약점을 선제 파악, (2) **규제·계약 요구**(예: 정기 취약점 점검) 대응, (3) 보안 투자 우선순위·ROI를 **데이터**로 제시. (정의/범위 참고. )

---

## 3. **OWASP Top 10: 2021** 개요 + 2025 트렌드 연결

> 2025년 10월 현재 **공식 최신 본판은 2021**입니다. **2025 개정판은 2025년 11월 초 발표 예정(OWASP Global AppSec DC)**으로 공지되었습니다. 아래는 2021 항목 요약과 실무 포인트이며, 2025판 공개 전까지는 **API Top 10 2023**·공급망·봇/크롤러·자격증명 남용 통계를 함께 보는 것이 유효합니다.

### A01: **Broken Access Control** (BAC)
- **증상**: URL/파라미터만 바꿔 타인 리소스 접근(수평), 관리자 기능 호출(수직) 등.
- **2025 연결**: API에선 특히 **BOLA**가 자주 재현됨(객체 ID 단위 검증 필수).
- **대응**: **서버 측 인가 검사**를 **모든 요청·객체 단위**로 시행, 정책을 **코드와 분리**(PDP), 테스트에 **수평/수직/대량 접근 시나리오** 포함. (BAC 개념. )

### A02: **Cryptographic Failures**
- **증상**: 평문 통신, 취약 알고리즘/모드, 키 관리 부실.
- **대응**: **TLS 1.3** 강제, 최신 스위트·HSTS, 키 순환·KMS, 민감정보 저장 시 강력한 암호화. (TLS1.3 표준. )

### A03: **Injection**(SQLi 등)
- **증상**: 쿼리/명령에 사용자 입력이 **직접 삽입**.
- **대응**: **준비된 문장(파라미터 바인딩)**, ORM 안전 API, 입력 검증/인코딩, 최소권한. (정의·예시. )

### A04: **Insecure Design**
- **증상**: 설계 자체에 신뢰경계 오류·부재(“나중에 막자” 패턴).
- **대응**: 위협모델(TMF), 오용사례·보안요구를 **설계 단계**에 포함. (2021 개요. )

### A05: **Security Misconfiguration**
- **증상**: 기본 비번, 디버그 모드 노출, CORS 과오, S3 공개, WAF 룰 부재.
- **대응**: **보안 기준선**·IaC로 **드리프트 감시**, 자동화된 점검.

### A06: **Vulnerable and Outdated Components**
- **증상**: 취약 OSS·프레임워크 사용/방치.
- **2025 연결**: **악성 패키지**까지 증가 → SCA·서명·SBOM 필수.

### A07: **Identification and Authentication Failures**
- **증상**: 약한 비밀번호 정책, 2FA 부재, 세션 고정.
- **2025 연결**: **도난 자격증명**이 웹침해 주력. 비밀번호만으론 부족 — **MFA/패스키** 전환.

### A08: **Software and Data Integrity Failures**
- **증상**: 업데이트/빌드 무결성 부재, 서명 미검증(공급망).
- **대응**: 서명·재현가능 빌드·의존성 고정·정책 게이트.

### A09: **Security Logging and Monitoring Failures**
- **증상**: 실패 기록·경보 누락·보존기간 부족.
- **대응**: 구조화 로깅·이상탐지·취약점 대응 플레이북.

### A10: **Server-Side Request Forgery (SSRF)**
- **증상**: 서버가 외부 URL을 **대신 요청** — 내부 메타데이터/서비스 접근.
- **대응**: 아웃바운드 **허용목록**, DNS 리졸브·리다이렉트 검증, IMDSv2.

---

## 4. **예제로 배우는** 핵심 취약점 & 방어

> 아래 코드는 **취약 예시 → 안전 예시** 순입니다. 실제 배포 코드는 **반드시 안전 예시**를 참고하세요.

### 4.1 SQL Injection — Node/Express
```javascript
// ❌ 취약: 문자열 연결로 쿼리 구성
app.get("/user", async (req, res) => {
  const name = req.query.name; // ?name=admin' OR '1'='1
  const rows = await db.query(`SELECT * FROM users WHERE name='${name}'`);
  res.json(rows);
});

// ✅ 안전: 파라미터 바인딩(준비된 문장)
app.get("/user-safe", async (req, res) => {
  const name = req.query.name;
  const rows = await db.query("SELECT * FROM users WHERE name = ?", [name]);
  res.json(rows);
});
```
- 원리·대응 개념: **사용자 입력이 쿼리 구조로 해석**되지 않도록 바인딩/ORM API 사용. 테스트는 샌드박스에서만. (정의·튜토리얼. )

### 4.2 Reflected XSS — Flask(Jinja2)
{% raw %}
```python
# ❌ 취약: 신뢰 안 되는 값을 그대로 HTML에 삽입
@app.route("/search")
def search():
    q = request.args.get("q", "")
    return f"<p>You searched: {q}</p>"  # <script>alert(1)</script>

# ✅ 안전: 템플릿 자동 이스케이프 + 컨텍스트별 인코딩
@app.route("/search-safe")
def search_safe():
    q = request.args.get("q", "")
    return render_template("search.html", q=q)  # {{ q }}는 자동 이스케이프
```
{% endraw %}
- XSS의 동작/유형(반사형/저장형/DOM 기반)과 영향. (개요·사전지식. )

### 4.3 CSRF 기본 패턴 — 서버 렌더링 폼
{% raw %}
```html
<!-- ✅ CSRF 토큰 포함 예시 -->
<form method="POST" action="/transfer">
  <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
  <input name="to" placeholder="recipient">
  <input name="amount" type="number">
  <button>Send</button>
</form>
```
{% endraw %}
- 보완: **SameSite=Lax/Strict** 쿠키, **Origin/Referer 검증**, **서버 검증 토큰** 병행. (쿠키 SameSite 가이드. )

### 4.4 Broken Access Control → **BOLA(API)**
```javascript
// ❌ 취약: /api/orders/:id 에 인증만 확인, 인가 누락
app.get("/api/orders/:id", requireAuth, async (req, res) => {
  const order = await Orders.findById(req.params.id);
  res.json(order); // 누구의 주문인지 검사 안 함
});

// ✅ 안전: 객체 소유 검증(테넌트/조직 경계 포함)
app.get("/api/orders/:id", requireAuth, async (req, res) => {
  const order = await Orders.findById(req.params.id);
  if (order.userId !== req.user.id) return res.sendStatus(403);
  res.json(order);
});
```
- API 2023 Top 10에서 **API1: BOLA** 1위 유지. ID 기반 **객체 단위 인가**는 모든 엔드포인트의 기본.

---

## 5. **웹 보안 기본 용어 정리** — 세션, 쿠키, 인증/인가, 암호화

### 5.1 세션(Session)
- **정의**: 서버가 클라이언트의 상태를 기억하는 메커니즘(세션 ID ↔ 서버 상태). **절대/비활성 시간 초과**를 함께 적용.

### 5.2 쿠키(Cookie)
- **정의/표준**: HTTP의 상태관리 수단 — `Set-Cookie`/`Cookie` 헤더. 2024년 초안은 **RFC 6265bis가 6265를 폐기**한다고 명시(최신 동향).
- **속성**: `Secure`(HTTPS 전용), `HttpOnly`(JS 접근 차단), `SameSite`(교차-사이트 전송 통제: Lax/Strict/None). (MDN 최신 문서).
- **안전설정 예시(Express)**:
```javascript
res.cookie("sid", sessionId, {
  httpOnly: true,
  secure: true,        // HTTPS
  sameSite: "Lax",     // 가능하면 Strict, 크로스 필요 시 None+Secure
  path: "/",
  maxAge: 15 * 60 * 1000
});
```

### 5.3 인증(Authentication, **AuthN**) vs 인가(Authorization, **AuthZ**)
- **AuthN**: “**너는 누구인가**”를 입증(패스워드, MFA/패스키, 토큰 등). (정의. )
- **AuthZ**: “**무엇을 할 수 있나**”를 결정(객체·행위 단위 접근제어, **매 요청 검사** 권장). (체크포인트. )

### 5.4 암호화(Encryption)
- **전송 계층**: **TLS 1.3** 권장(최신 프로토콜, 핸드셰이크 간소화·보안 강화).
- **저장 데이터**: 민감정보는 **강한 알고리즘/키관리(KMS)**로 암호화, 키는 별도 보호.

> 📐 **비밀번호 엔트로피**(단순 근사):
> 문자공간 크기를 \(N\), 길이를 \(L\)이라 할 때,
> $$ H \approx L \cdot \log_2 N $$
> 예: 대소문자+숫자(62종)를 길이 12로 쓰면 약 \( H \approx 12\cdot\log_2 62 \approx 71.5 \) 비트.

---

## 6. **2025을 대비한 실무 체크리스트(요약)**

1. **인증 방어선 강화**: 패스키/MFA, 비정상 로그인(ASN/지리/디바이스) 리스크 기반 대응. **도난 자격증명**이 가장 흔한 실전 원인.
2. **인가를 객체·액션 단위로**: BAC/BOLA 방지 — 모든 요청에 **서버 측 권한 검사**.
3. **쿠키·세션 경계 단단히**: `Secure`/`HttpOnly`/`SameSite`·절대/슬라이딩 타임아웃.
4. **주입 방지**: 파라미터 바인딩, 컨텍스트 인코딩, 템플릿 자동 이스케이프.
5. **공급망 보안**: SCA·서명·SBOM·의존성 고정, 레지스트리·CI 보안 강화.
6. **봇/크롤러 통제**: 합법 봇 화이트리스트·AI 스크레이퍼 차단·레이트리밋/챌린지. (최근 동향 참고).

---

## 7. **학습용 랩** 제안(합법/안전)
- 로컬 도커에 **OWASP Juice Shop**, **WebGoat**, **DVWA** 등 *의도적 취약 앱*을 올려 **자체 환경**에서만 실습하세요. (OWASP 자료·치트시트는 실무 가이드로 훌륭합니다. )

---

## 부록 A — **보안 설정 스니펫 모음**

### A.1 Express: **보안 헤더 + 쿠키 정책**
```javascript
import helmet from "helmet";
app.use(helmet({
  contentSecurityPolicy: {
    useDefaults: true,
    directives: { "script-src": ["'self'"] } // 필요에 맞게 nonce/sha256 사용
  }
}));
app.use((req, res, next) => {
  res.cookie("sid", req.sessionID, {
    httpOnly: true, secure: true, sameSite: "Lax", path: "/",
    maxAge: 15 * 60 * 1000
  });
  next();
});
```

### A.2 Flask: **CSRF + 세션 보호**
```python
from flask_wtf import CSRFProtect
csrf = CSRFProtect(app)

app.config.update(
    SESSION_COOKIE_SECURE=True,
    SESSION_COOKIE_HTTPONLY=True,
    SESSION_COOKIE_SAMESITE="Lax",
    PERMANENT_SESSION_LIFETIME=900,  # 15m
)
```

### A.3 SQLAlchemy: **준비된 문장 기본**
```python
# ORM 필드에만 값 할당; 원시 SQL 필요시 bindparams 사용
db.session.execute(
    text("UPDATE users SET email=:email WHERE id=:id"),
    {"email": new_email, "id": uid}
)
```

---

## 자주 묻는 Q

- **Q. 2025판 OWASP Top 10은 어딨나요?**
  A. OWASP 공지 기준, **2025년 11월 초** 공식 발표 예정입니다. 발표 전까지는 2021판을 기준으로 보고 API Top 10 2023·DBIR 2025·공급망 리포트를 병행 참조하세요.

- **Q. SameSite=Strict만 쓰면 CSRF가 완전히 해결되나요?**
  A. 강력하지만 **완전 대체는 아님**. 폼 토큰/Origin 검사 등 **다층 방어**가 필요합니다. (SameSite 가이드).

---

### 참고/근거(핵심만)
- **OWASP Top 10 2021** 공식: 항목·방법론.
- **OWASP Top 10 2025 상태**(2025-09 업데이트): 11월 초 공개 예정.
- **DBIR 2025**: 웹 앱 공격에서 **도난 자격증명** 비중.
- **Cloudflare 트래픽/봇·AI 크롤링** 동향.
- **OWASP API Security Top 10 (2023)**: BOLA 등 API 중심 위험.
- **쿠키/세션**: Set-Cookie 레퍼런스, SameSite·Secure/HttpOnly, 6265bis.
- **TLS 1.3** 표준.
- **XSS/SQLi** 정의·예시.
- **공급망 보안**(Sonatype 2024, Q1 2025 악성 패키지).

---

### 마무리
- **방어의 기본**은 변하지 않습니다: **안전한 기본값, 최소 권한, 철저한 인가, 입력 처리의 맥락화**, 그리고 **관측**(로그/경보).
- **새로운 현실**은 바뀌었습니다: **API 우선**, **자격증명 남용**, **공급망·봇/AI 트래픽**. 이 네 축을 우선순위에 올리면 2025 보안 리스크의 **80/20**를 다룹니다.
