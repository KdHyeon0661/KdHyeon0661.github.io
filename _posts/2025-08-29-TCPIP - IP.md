---
layout: post
title: TCPIP - IP
date: 2025-08-29 20:25:23 +0900
category: TCPIP
---
# TCP/IP 인터넷 계층 프로토콜 및 IP 주소 체계

## 인터넷 계층 개요

인터넷 계층은 TCP/IP 모델의 핵심으로, OSI 모델의 네트워크 계층에 해당합니다. 이 계층은 **패킷을 출발지에서 목적지까지 전달하는 책임**을 지며, 논리적 주소 지정과 라우팅 기능을 제공합니다.

## 인터넷 프로토콜 (IP) 개요

### IP의 핵심 개념과 특징

인터넷 프로토콜(IP)은 **비연결형(connectionless)**, **최선형(best-effort)** 패킷 전달 서비스를 제공하는 네트워크 계층 프로토콜입니다.

**주요 운영 특징**:
1. **비연결형**: 사전 연결 설정 없이 패킷을 독립적으로 전송
2. **최선형 전달**: 패킷 전달을 보장하지 않으며, 신뢰성은 상위 계층(주로 TCP)에서 처리
3. **데이터그램 기반**: 각 패킷은 독립적으로 라우팅됨
4. **주소 지정**: 논리적 IP 주소를 사용하여 네트워크상의 호스트 식별

### IP의 주요 기능

IP는 다음과 같은 핵심 기능을 수행합니다:

- **주소 지정(Addressing)**: 각 네트워크 인터페이스에 고유한 논리적 주소 할당
- **패킷 분할(Fragmentation)**: 큰 패킷을 작은 조각으로 분할하여 다양한 네트워크 매체 통과 가능하게 함
  ```
  원본 패킷 → [MTU 초과] → 조각 1 | 조각 2 | 조각 3 → 목적지에서 재조립
  ```
- **라우팅(Routing)**: 패킷이 출발지에서 목적지까지 이동할 최적의 경로 결정
- **프로토콜 식별**: 상위 계층 프로토콜(TCP, UDP 등) 식별

### IP 역사와 표준

IP의 발전은 인터넷 역사와 밀접하게 연결되어 있습니다:

- **1974년**: 빈트 서프와 밥 칸이 TCP/IP 초기 개념 제안
- **1981년**: RFC 791로 IPv4 공식 표준화
- **1990년대**: 인터넷 폭발적 성장으로 IPv4 주소 고갈 문제 대두
- **1998년**: IPv6 표준화 (RFC 2460)
- **현재**: IPv4와 IPv6의 이중 스택(Dual-Stack) 운영이 일반적

### IP 관련 프로토콜

- **IP NAT (Network Address Translation)**: 사설 IP 주소와 공인 IP 주소 간 변환
- **IPSec (IP Security)**: IP 계층에서의 종단 간 암호화 및 인증
- **Mobile IP**: 이동 중인 장치의 IP 주소 유지 기능

## IP "클래스풀" (전통적) 주소 체계

### IP 클래스풀 주소 체계 개요와 주소 클래스

초기 인터넷 시대에 개발된 IP 주소 체계는 "클래스풀" 시스템으로, 주소 공간을 고정된 크기의 클래스로 나누어 할당하는 방식을 채택했습니다. 이 시스템은 1981년 RFC 791에 정의되었으며, 1990년대 중반까지 인터넷 주소 할당의 표준이었습니다.

클래스풀 주소 체계의 핵심 아이디어는 IP 주소의 첫 번째 옥텟(첫 8비트)을 분석하여 네트워크 부분과 호스트 부분의 경계를 결정하는 것입니다. 이는 마치 우편번호 체계에서 지역별로 고정된 자릿수를 할당하는 방식과 유사합니다.

```
클래스풀 주소 체계의 기본 개념
+-----------------------------------------+
| 네트워크 ID | 호스트 ID                |
+-----------------------------------------+
(경계 위치가 클래스에 따라 고정됨)
```

### IP 클래스풀 주소 체계의 네트워크/호스트 식별 및 주소 범위

클래스풀 시스템에서는 5개의 주소 클래스(A, B, C, D, E)가 정의되었으며, 각 클래스는 특정한 용도와 크기를 가지고 있습니다:

#### 클래스 A (대규모 네트워크)
- **범위**: 1.0.0.0 ~ 126.255.255.255
- **첫 옥텟 패턴**: 0xxxxxxx (첫 비트가 0)
- **네트워크/호스트 구분**: 첫 옥텟 = 네트워크, 나머지 3옥텟 = 호스트
- **네트워크 수**: 126개 (0.0.0.0과 127.0.0.0은 예약)
- **호스트 수**: 네트워크당 16,777,214개 (2²⁴ - 2)

```
클래스 A 주소 구조
+---------------------+-----------------------------------+
| 네트워크 (8비트)    | 호스트 (24비트)                   |
+---------------------+-----------------------------------+
예: 10.xxx.xxx.xxx (사설 주소 범위)
```

#### 클래스 B (중규모 네트워크)
- **범위**: 128.0.0.0 ~ 191.255.255.255
- **첫 옥텟 패턴**: 10xxxxxx (첫 두 비트가 10)
- **네트워크/호스트 구분**: 첫 2옥텟 = 네트워크, 나머지 2옥텟 = 호스트
- **네트워크 수**: 16,384개
- **호스트 수**: 네트워크당 65,534개 (2¹⁶ - 2)

#### 클래스 C (소규모 네트워크)
- **범위**: 192.0.0.0 ~ 223.255.255.255
- **첫 옥텟 패턴**: 110xxxxx (첫 세 비트가 110)
- **네트워크/호스트 구분**: 첫 3옥텟 = 네트워크, 마지막 옥텟 = 호스트
- **네트워크 수**: 2,097,152개
- **호스트 수**: 네트워크당 254개 (2⁸ - 2)

#### 클래스 D (멀티캐스트)
- **범위**: 224.0.0.0 ~ 239.255.255.255
- **첫 옥텟 패턴**: 1110xxxx
- **용도**: 멀티캐스트 그룹 주소 (일대다 통신)

#### 클래스 E (실험용)
- **범위**: 240.0.0.0 ~ 255.255.255.255
- **첫 옥텟 패턴**: 1111xxxx
- **용도**: 연구 및 실험 목적으로 예약

## 인터넷 프로토콜 버전 4 (IPv4)

### IP 주소 지정 개요

IPv4 주소는 **32비트** 길이의 이진수로, 일반적으로 점으로 구분된 십진수 형식으로 표현됩니다.

**주소 표현 방식**:
```
이진수: 11000000 10101000 00000001 00000001
점십진수: 192.168.1.1
```

### IP 주소 공간과 표기법

- **총 주소 수**: 2^32 = 약 43억 개
- **표기법**: 0~255 범위의 4개의 십진수로 표현
  ```
  유효 범위: 0.0.0.0 ~ 255.255.255.255
  ```
- **특수 주소**:
  - 127.0.0.1: 루프백 주소 (자기 자신)
  - 192.168.0.0/16: 사설 네트워크 주소
  - 255.255.255.255: 브로드캐스트 주소

### IP 기본 주소 구조: 네트워크 ID와 호스트 ID

IPv4 주소는 계층적 구조로 구성됩니다:

```
IP 주소: [네트워크 부분] + [호스트 부분]
           네트워크 식별        장치 식별
```

예시 (클래스 C 네트워크):
```
주소: 192.168.1.100
네트워크 ID: 192.168.1.0
호스트 ID: 100
브로드캐스트: 192.168.1.255
```

## IP 주소 클래스 A, B, C의 네트워크 및 호스트 용량

클래스별 용량 차이는 초기 인터넷의 예상된 수요를 반영한 설계 선택이었습니다:

```
클래스별 용량 비교 테이블
+----------+---------------+---------------+-----------------+-------------------+
| 클래스   | 네트워크 범위 | 네트워크 수   | 호스트 수/네트워크| 총 호스트 용량    |
+----------+---------------+---------------+-----------------+-------------------+
| A        | 1.x.x.x ~     | 126           | 16,777,214      | 약 21억           |
|          | 126.x.x.x     |               |                 |                   |
+----------+---------------+---------------+-----------------+-------------------+
| B        | 128.0.x.x ~   | 16,384        | 65,534          | 약 10억           |
|          | 191.255.x.x   |               |                 |                   |
+----------+---------------+---------------+-----------------+-------------------+
| C        | 192.0.0.x ~   | 2,097,152     | 254             | 약 5억            |
|          | 223.255.255.x |               |                 |                   |
+----------+---------------+---------------+-----------------+-------------------+
```

이 설계에는 심각한 비효율성이 내재되어 있었습니다:
- **클래스 A**: 대학이나 대기업에 할당되었지만 대부분의 조직은 1600만 개의 주소를 절대 다 사용하지 못함
- **클래스 B**: 중간 규모 조직에 적합했지만, 수요보다 공급이 훨씬 적어 "클래스 B 기근" 발생
- **클래스 C**: 너무 작아 대부분의 조직에 부적합

## 특수한 의미를 가진 IP 주소

### 네트워크 주소와 브로드캐스트 주소

각 서브넷에서 두 개의 주소는 특별한 용도로 사용됩니다:
- **네트워크 주소**: 호스트 부분이 모두 0인 주소 (예: 192.168.1.0)
- **브로드캐스트 주소**: 호스트 부분이 모두 1인 주소 (예: 192.168.1.255)

### 루프백 주소

- **범위**: 127.0.0.0 ~ 127.255.255.255 (일반적으로 127.0.0.1 사용)
- **용도**: 자신의 시스템과 통신 테스트
- **특징**: 패킷이 네트워크 카드를 떠나지 않고 내부에서 처리됨

```
루프백 주소의 동작
+---------------------+
| 응용 프로그램      |
|       ↓             |
| TCP/IP 스택        |
|       ↓             |
| 루프백 인터페이스  | ←→ 네트워크로 나가지 않음!
+---------------------+
```

## 예약된, 루프백 및 사설 IP 주소

### 사설 IP 주소 범위

인터넷에 직접 연결되지 않는 내부 네트워크를 위한 주소 범위:
- **클래스 A 사설 범위**: 10.0.0.0 ~ 10.255.255.255 (1개 네트워크, 1600만 호스트)
- **클래스 B 사설 범위**: 172.16.0.0 ~ 172.31.255.255 (16개 네트워크, 각 6만5천 호스트)
- **클래스 C 사설 범위**: 192.168.0.0 ~ 192.168.255.255 (256개 네트워크, 각 254호스트)

### 특수 용도 주소들

- **0.0.0.0**: 기본 경로 또는 "모든 주소"를 의미
- **255.255.255.255**: 제한된 브로드캐스트 (로컬 네트워크 전체)
- **169.254.0.0/16**: APIPA (자동 사설 IP 주소) - DHCP 실패 시 자동 할당

## IP 주소 지정 범주

### 1. 클래스풀 주소 지정 (Classful Addressing)

초기 IPv4 설계 방식으로 주소를 고정된 크기의 클래스로 구분:

```
클래스 A: 0.0.0.0 ~ 127.255.255.255
  형식: 0nnnnnnn.hhhhhhhh.hhhhhhhh.hhhhhhhh
  네트워크/호스트: 8비트/24비트
  예: 10.0.0.0 ~ 10.255.255.255 (사설)

클래스 B: 128.0.0.0 ~ 191.255.255.255
  형식: 10nnnnnn.nnnnnnnn.hhhhhhhh.hhhhhhhh
  네트워크/호스트: 16비트/16비트
  예: 172.16.0.0 ~ 172.31.255.255 (사설)

클래스 C: 192.0.0.0 ~ 223.255.255.255
  형식: 110nnnnn.nnnnnnnn.nnnnnnnn.hhhhhhhh
  네트워크/호스트: 24비트/8비트
  예: 192.168.0.0 ~ 192.168.255.255 (사설)

클래스 D: 224.0.0.0 ~ 239.255.255.255 (멀티캐스트)
클래스 E: 240.0.0.0 ~ 255.255.255.255 (실험용)
```

### 2. 서브네팅 (Subnetting)

클래스풀 주소의 낭비를 줄이기 위한 기술:
- 네트워크를 더 작은 서브넷으로 분할
- 서브넷 마스크 사용:
  ```
  IP 주소: 192.168.1.100
  기본 마스크: 255.255.255.0
  서브넷 마스크: 255.255.255.224 (/27)
  네트워크 주소: 192.168.1.96
  사용 가능 호스트: 192.168.1.97 ~ 192.168.1.126
  브로드캐스트: 192.168.1.127
  ```

### 3. 클래스리스 주소 지정 (CIDR)

- **CIDR (Classless Inter-Domain Routing)**: 클래스 개념을 완전히 폐지
- **표기법**: IP 주소 뒤에 슬래시와 프리픽스 길이 표시
  ```
  192.168.1.0/24: 256개 주소
  192.168.1.0/25: 128개 주소
  192.168.1.0/26: 64개 주소
  ```
- **주요 부속 정보**:
  - **서브넷 마스크**: 네트워크와 호스트 부분 구분
  - **기본 게이트웨이**: 로컬 네트워크를 벗어나는 트래픽의 출구

## IP 멀티캐스트 주소 체계

### IP 멀티캐스트 주소 체계

클래스 D는 멀티캐스트 통신을 위해 설계되었습니다:

- **범위**: 224.0.0.0 ~ 239.255.255.255
- **주요 멀티캐스트 그룹**:
  - 224.0.0.1: 모든 호스트 (서브넷 내)
  - 224.0.0.2: 모든 라우터
  - 224.0.0.5: OSPF 라우터
  - 224.0.0.9: RIPv2 라우터
  - 239.0.0.0 ~ 239.255.255.255: 관리 범위 멀티캐스트

```
멀티캐스트 통신 구조
       [송신자]
          |
          v
+------------------------+
| 멀티캐스트 그룹 주소   | (예: 224.1.1.1)
+------------------------+
          |
          v
+-----------------------+
| 그룹에 가입한         |
| 모든 수신자들에게     | (유니캐스트: 일대일)
| 동시 전송             | (브로드캐스트: 전체)
+-----------------------+ (멀티캐스트: 선택적 그룹)
```

## IP 주소 수와 멀티호밍

- **단일 호밍**: 하나의 네트워크 인터페이스에 하나의 IP 주소
- **멀티호밍**: 하나의 장치에 여러 IP 주소 할당
  - 용도: 서버 가상 호스팅, 장애 조치, 로드 밸런싱
- **IP 주소 할당 방법**:
  1. **수동 할당**: 관리자가 직접 설정
  2. **동적 할당**: DHCP 프로토콜을 통한 자동 할당
  3. **APIPA**: 169.254.0.0/16 대역의 자동 구성 주소

## IP 주소 관리와 할당 기관

IP 주소 관리는 계층적 구조로 이루어집니다:

```
IANA/ICANN (최상위)
       ↓
RIR (지역 인터넷 등록기관) - APNIC, ARIN, RIPE NCC 등
       ↓
LIR/NIR (로컬/국가 인터넷 등록기관)
       ↓
ISP (인터넷 서비스 제공자)
       ↓
최종 사용자 (기업, 개인)
```

## 클래스풀 IP 주소 체계의 문제점

클래스풀 주소 체계는 초기 인터넷의 단순성을 위해 설계되었지만, 빠른 인터넷 성장으로 인해 심각한 문제점들이 드러났습니다:

### 1. 주소 공간의 비효율적 활용

가장 심각한 문제는 **주소 낭비**였습니다:
- **클래스 A 할당 문제**: IBM, MIT, HP 등에 전체 클래스 A가 할당되어 각 조직이 수천만 개의 주소를 보유했지만 실제 사용은 극히 일부
- **클래스 B 기근**: 중형 조직에 적합한 크기였으나, 1990년대 초반에 이미 소진 위기
- **클래스 C의 부적합성**: 254개 호스트로는 대부분의 조직에 부족

### 2. 라우팅 테이블 폭발

- 각 클래스 C 네트워크(200만 개 이상)가 인터넷 백본 라우터의 라우팅 테이블에 개별 항목으로 추가됨
- 1990년대 중반 라우팅 테이블 크기가 기하급수적으로 증가하여 라우터 성능 저하

### 3. 유연성 부족

- 고정된 클래스 경계로 인해 다양한 크기의 네트워크 요구사항에 대응 불가
- 조직의 성장이나 축소에 유연하게 대응할 수 없는 경직된 구조

### 4. 서브넷팅의 제한

- 클래스풀 시스템에서는 서브넷팅이 표준화되지 않아 벤더별 구현 차이 발생
- 서로 다른 클래스 간의 일관된 서브넷팅 관리 어려움

### 5. 주소 할당의 불평등

- 역사적, 지리적 요인으로 인해 북미에 주소가 과도하게 집중
- 신흥 인터넷 시장(아시아, 아프리카)으로의 주소 배분 어려움

```
클래스풀 시스템의 비효율성 예시
조직 A: 300개 호스트 필요 → 클래스 C(254개)로는 부족 → 클래스 B(65,534개) 할당
→ 결과: 65,234개 주소 낭비 (99.5% 낭비율)

조직 B: 500개 호스트 필요 → 클래스 B 할당
→ 결과: 64,034개 주소 낭비 (99.2% 낭비율)
```

## 결론

IPv4는 인터넷의 기반을 구축한 혁신적인 프로토콜로서, 그 단순함과 유연성이 전 세계적 확장의 열쇠가 되었습니다. 32비트 주소 공간이라는 한계에도 불구하고, 서브네팅, CIDR, NAT와 같은 기술적 진화를 통해 지속적으로 생명력을 유지해 왔습니다.

클래스풀 IP 주소 체계는 인터넷의 초기 성장기를 지탱한 중요한 기술적 기반이었지만, 그 단순함이 오히려 제한이 되어 1990년대에 심각한 확장성 문제를 야기했습니다. 이 시스템의 근본적인 결함—고정된 크기의 주소 블록과 비효율적인 주소 활용—은 인터넷의 급격한 성장을 지속하기에는 적합하지 않았습니다.

클래스풀에서 클래스리스로의 전환은 인터넷 성장에 따른 주소 고갈 문제에 대한 창의적인 대응이었으며, 이는 기술 표준이 실제 요구사항에 어떻게 적응하는지 보여주는 모범 사례입니다. 이러한 문제점들을 해결하기 위해 1993년에 **CIDR(Classless Inter-Domain Routing)** 이 도입되었고, 이는 인터넷의 생존과 지속적 성장을 가능하게 한 결정적 전환점이었습니다.

IPv4의 설계 철학 - 특히 최선형 전달과 엔드투엔드 원칙 - 은 현대 네트워킹의 근간이 되었습니다. 이러한 설계는 네트워크 코어를 단순하게 유지하면서 혁신을 네트워크 가장자리로 이동시켜, 인터넷의 급속한 발전을 가능하게 했습니다. 오늘날 IPv4는 점차 IPv6로 대체되고 있지만, 그 운영 원리와 주소 지정 개념들은 새로운 프로토콜에서도 계속해서 영향력을 미치고 있으며, 수십 년간 축적된 운영 경험은 여전히 가치 있는 교훈을 제공하고 있습니다.

클래스풀 시스템의 실패는 네트워크 공학에 중요한 교훈을 남겼습니다: 기술적 솔루션은 현재의 요구사항뿐만 아니라 미래의 성장과 변화까지 예상해야 하며, 과도하게 단순화된 설계는 장기적으로 더 큰 복잡성을 초래할 수 있다는 점입니다.