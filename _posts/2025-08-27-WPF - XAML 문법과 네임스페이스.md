---
layout: post
title: WPF - XAML 문법과 네임스페이스
date: 2025-08-27 21:25:23 +0900
category: WPF
---
# XAML 문법과 네임스페이스 완전 가이드

이 글은 **WPF의 XAML 문법**과 **네임스페이스 체계(xmlns/x:)**를 깊이 있게 정리합니다.  
핵심 개념 → 구문 → 고급 토픽 순으로 진행하며, **실전 예제**를 풍부하게 포함했습니다.

---

## 1) XAML이란?

**XAML(eXtensible Application Markup Language)**은 **.NET 객체 트리**를 **XML 문법**으로 선언하는 언어입니다.  
각 **XML 요소(Element)**는 **.NET 타입**과 1:1 매핑되고, **속성(Attribute)**은 .NET 속성에 매핑됩니다.

```xml
<Grid>
  <Button Content="확인" Width="120" />
</Grid>
```

- `<Grid>` → `System.Windows.Controls.Grid` 인스턴스
- `<Button .../>` → `System.Windows.Controls.Button` 인스턴스
- `Content="확인"` → `Button.Content` 속성에 문자열 할당

---

## 2) XAML 기본 문법

### 2.1 요소(Element) & 속성(Attribute)
- **요소 이름 = .NET 타입명** (네임스페이스 접두사와 함께)
- **속성 = .NET 공개 속성**(DependencyProperty 포함)

```xml
<Button Content="저장" HorizontalAlignment="Right" />
```

### 2.2 속성 요소(Property Element) 구문
복잡한 값(중첩 객체/컬렉션)이 필요하면 **속성 요소**를 사용:

```xml
<Button>
  <Button.Content>
    <StackPanel Orientation="Horizontal" >
      <Image Source="/Resources/save.png" Width="16"/>
      <TextBlock Text="저장" Margin="6,0,0,0"/>
    </StackPanel>
  </Button.Content>
</Button>
```

- `Type.Property` 형식의 **하위 요소**를 열어 **객체 그래프**로 값을 설정합니다.

### 2.3 컬렉션 초기화
컬렉션 속성은 **암묵적 컬렉션 구문**으로 자식 요소를 그대로 나열합니다.

```xml
<StackPanel>
  <Button Content="A"/>
  <Button Content="B"/>
</StackPanel>
```

### 2.4 첨부(Attached) 속성
**부모 레이아웃 컨테이너**가 자식에게 부여하는 속성. `OwnerType.PropertyName` 형식:

```xml
<Grid>
  <TextBlock Grid.Row="0" Grid.Column="1" Text="이름"/>
</Grid>
```

> 내부적으로는 `GetRow/SetRow` 정적 메서드가 존재합니다.

### 2.5 마크업 확장(Markup Extension)
중괄호 `{...}` 구문으로 **특수 구문**을 사용합니다.

- `{Binding Path=Name}`: 데이터 바인딩
- `{StaticResource Key}` / `{DynamicResource Key}`: 리소스 참조
- `{x:Static Namespace.Type.Member}`: 정적 멤버 참조
- `{x:Null}`: null 값
- `{x:Type}`: `System.Type` 인스턴스
- 사용자 정의 확장도 가능(타입명 `...Extension` → XAML에서는 `...`로 사용)

```xml
<TextBlock Text="{Binding Name, StringFormat='이름: {0}'}"/>
<Button Content="{x:Static p:Strings.SaveLabel}"/>
```

---

## 3) 리소스(Resource) & 키

### 3.1 리소스 사전(ResourceDictionary)
**XAML 객체**(브러시, 스타일, 템플릿 등)를 **키-값**으로 저장 후 재사용합니다.

```xml
<Window.Resources>
  <SolidColorBrush x:Key="PrimaryBrush" Color="#4F46E5"/>
  <Style TargetType="Button" x:Key="PrimaryButton">
    <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
    <Setter Property="Foreground" Value="White"/>
  </Style>
</Window.Resources>

<Button Style="{StaticResource PrimaryButton}" Content="확인"/>
```

- **암시적 스타일(Implicit Style)**: `x:Key`를 생략하고 `TargetType`만 지정하면 **해당 타입에 자동 적용**.

```xml
<Window.Resources>
  <Style TargetType="TextBlock">
    <Setter Property="Margin" Value="4"/>
  </Style>
</Window.Resources>
```

### 3.2 StaticResource vs DynamicResource
- **StaticResource**: 로드 시점 해석(빠름, **변경 반영 X**)
- **DynamicResource**: 런타임 해석(**리소스 변경 반영 O**, 성능 비용)

---

## 4) 네임스페이스(xmlns) 체계

XAML 파일 상단에는 보통 다음과 같은 선언이 있습니다:

```xml
<Window
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="clr-namespace:MyApp"
  xmlns:controls="clr-namespace:MyApp.Controls"
  xmlns:ext="clr-namespace:MyLib.Extensions;assembly=MyLib"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d">
  ...
</Window>
```

### 4.1 각 xmlns의 의미
- `xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"`
  - **WPF 표준 컨트롤/기본 타입**(Button, Grid, StackPanel 등)의 **기본 네임스페이스**  
  - **접두사 없음**(default namespace)
- `xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"`
  - **XAML 언어 키워드** 제공(`x:Key`, `x:Name`, `x:Type`, `x:Static`, `x:Null`, `x:Reference`, `x:Uid` 등)
- `xmlns:local="clr-namespace:MyApp"`
  - **현재 어셈블리의 C# 네임스페이스** `MyApp`을 XAML에 매핑
- `xmlns:controls="clr-namespace:MyApp.Controls"`
  - 현재 어셈블리 `MyApp.Controls` 네임스페이스의 타입을 `controls:` 접두사로 사용
- `xmlns:ext="clr-namespace:MyLib.Extensions;assembly=MyLib"`
  - **다른 어셈블리**(`MyLib`)의 C# 네임스페이스 `MyLib.Extensions` 매핑
- `xmlns:d="http://schemas.microsoft.com/expression/blend/2008"`
  - **디자인 타임** 전용 네임스페이스. **런타임에 무시**됨
- `xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"`
  - **호환성/무시 규칙**. `mc:Ignorable="d"`로 `d:` 접두사를 **런타임 무시** 선언

> **요점**:  
> - **WPF 기본 요소**는 **기본 xmlns**(접두사 없음)에 존재  
> - **XAML 키워드**는 **항상 `x:` 접두사**  
> - **내 타입/커스텀 컨트롤**은 `clr-namespace` 구문으로 **접두사 매핑**

### 4.2 `clr-namespace`와 `assembly` 매핑 예
```xml
xmlns:local="clr-namespace:MyApp"
xmlns:widgets="clr-namespace:Widgets;assembly=WidgetsLibrary"
```

사용:
```xml
<local:MyView />
<widgets:FancyControl />
```

---

## 5) XAML 언어 키워드(`x:` 접두사)

자주 쓰는 것만 정리:

| 키워드 | 용도 | 예 |
|---|---|---|
| `x:Class` | XAML과 코드비하인드를 잇는 **부분 클래스** | `<Window x:Class="MyApp.MainWindow">` |
| `x:Name` | 객체에 **이름(필드 생성)** 부여 | `<Button x:Name="OkButton"/>` |
| `x:Key` | 리소스 딕셔너리 **키** | `<Style x:Key="PrimaryButton" .../>` |
| `x:Type` | `System.Type` 표현 | `{x:Type Button}` |
| `x:Static` | **정적 멤버/상수** 참조 | `{x:Static sys:DateTime.Now}` |
| `x:Null` | `null` 값 | `Tag="{x:Null}"` |
| `x:Array` | 배열 생성 | `<x:Array Type="{x:Type sys:String}"> ... </x:Array>` |
| `x:Reference` | **다른 객체 참조** | `{x:Reference OkButton}` |
| `x:Uid` | 지역화(LocBAML/리소스) 식별자 | `<TextBlock x:Uid="Header.Title" .../>` |

> `x:Name` vs `Name`:  
> 대부분의 컨트롤은 `Name`을 의존 속성으로 노출하므로 `Name=`만 써도 됩니다.  
> 하지만 **모든 타입에 보편 적용**되는 것은 `x:Name`입니다.

---

## 6) 디자인 타임 네임스페이스(`d:`)와 미리보기

**디자인 전용 속성/데이터**를 지정할 때 사용합니다.

```xml
<Window
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d">

  <!-- 런타임 DataContext -->
  <Window.DataContext>
    <vm:MainViewModel/>
  </Window.DataContext>

  <!-- 디자인 타임 DataContext(런타임 무시) -->
  <d:Window.DataContext>
    <vm:Design.DesignMainViewModel/>
  </d:Window.DataContext>

  <TextBlock d:Text="디자인 전용 텍스트" Text="{Binding Title}"/>
</Window>
```

- `d:` 속성은 **빌드/런타임에 전혀 영향 없음**(무시됨).
- 복잡한 바인딩 환경에서도 **미리보기 품질**을 높이는 데 유용.

---

## 7) 바인딩(간단 요약)

가장 자주 쓰는 마크업 확장:

```xml
<TextBox Text="{Binding UserName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
<TextBlock Text="{Binding CurrentTime, StringFormat='{}{0:HH:mm:ss}'}" />
```

- `Mode`: `OneWay | TwoWay | OneTime | OneWayToSource`
- `UpdateSourceTrigger`: `PropertyChanged | LostFocus | Explicit`
- `ElementName`, `RelativeSource`, `x:Reference`로 **대상 탐색** 확장

---

## 8) 공용 타입 네임스페이스 활용

XAML에서 **기본 자료형/컬렉션**을 쓰려면 `clr-namespace:System` 매핑을 종종 씁니다.

```xml
<Window
  xmlns:sys="clr-namespace:System;assembly=mscorlib">
  <Window.Resources>
    <sys:String x:Key="AppTitle">데스크톱 관리자</sys:String>
  </Window.Resources>
</Window>
```

.NET 5+에서는 `mscorlib` 대신 `System.Private.CoreLib`이지만,  
대체로 다음처럼 쓰는 것이 더 안전합니다(프레임워크별 차이 흡수):

```xml
xmlns:sys="clr-namespace:System;assembly=System.Runtime"
```

---

## 9) 네임스페이스 & 타입 충돌 처리 팁

- **동일한 타입명**이 서로 다른 네임스페이스/어셈블리에 있을 경우 **접두사로 구분**:
  ```xml
  <controls:Button />   <!-- MyApp.Controls.Button -->
  <Button />            <!-- WPF의 System.Windows.Controls.Button -->
  ```
- **기본 네임스페이스**에는 WPF 프레임워크만 두고, **사용자 타입은 항상 접두사**를 부여하는 것이 가독성↑

---

## 10) 고급: 타입 변환(TypeConverter) & 컬처

XAML은 문자열을 .NET 타입으로 변환할 때 **TypeConverter**를 사용합니다.  
예: `Thickness="8,4,8,4"`, `Brush="#FF334455"`

- 사용자 정의 타입에 `TypeConverter`를 지정하면 **문자열 한 줄**로 초기화 가능
- 문화권(컬처)에 따라 **소수점/구분자** 해석 차이가 생길 수 있으므로 국제화 환경에 유의

```csharp
[TypeConverter(typeof(MySizeConverter))]
public struct MySize { ... }
```

---

## 11) 흔한 오류 & 디버깅

- **네임스페이스 오타/틀린 어셈블리명** → *type not found*  
- `StaticResource`로 **아직 로드되지 않은 키** 참조 → *resource not found*  
  - 순서가 중요합니다(상위 → 하위, 병합 딕셔너리 로드 순서).  
- 바인딩 오류 → **출력 창** 또는 **Live Visual Tree**로 **바인딩 트레이스** 확인:
  ```xml
  <TextBlock Text="{Binding Title, PresentationTraceSources.TraceLevel=High}"/>
  ```

---

## 12) 모범 사례(요약)

- **기본 xmlns**에는 WPF만, **사용자 타입은 접두사**로 분리
- 리소스는 **App(전역)** vs **View/Window(국지)**로 **계층적으로 관리**
- **StaticResource**(성능) 기본, **DynamicResource**(테마 전환 등) 필요 시 사용
- **d:/mc:**를 활용해 **디자인 경험** 개선
- 커스텀 컨트롤/라이브러리는 **`clr-namespace` + `assembly`** 정확히 매핑

---

## 13) 종합 예제

```xml
<Window x:Class="MyApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:MyApp.ViewModels"
        xmlns:local="clr-namespace:MyApp"
        xmlns:ext="clr-namespace:MyLib.Controls;assembly=MyLib"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="{DynamicResource AppTitle}"
        Height="600" Width="900">

  <Window.Resources>
    <!-- 리소스 -->
    <sys:String x:Key="AppTitle">인벤토리 관리자</sys:String>
    <SolidColorBrush x:Key="Primary" Color="#4F46E5"/>

    <!-- 암시적 스타일: 모든 TextBlock에 적용 -->
    <Style TargetType="TextBlock">
      <Setter Property="Margin" Value="4"/>
    </Style>

    <!-- 명시적 스타일 -->
    <Style TargetType="Button" x:Key="PrimaryButton">
      <Setter Property="Background" Value="{StaticResource Primary}"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="Padding" Value="10,6"/>
    </Style>

    <!-- DataTemplate: 뷰모델→뷰 매핑 -->
    <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
      <local:DashboardView/>
    </DataTemplate>
  </Window.Resources>

  <!-- 런타임/디자인 데이터컨텍스트 -->
  <Window.DataContext>
    <vm:MainViewModel/>
  </Window.DataContext>
  <d:Window.DataContext>
    <vm:Design.DesignMainViewModel/>
  </d:Window.DataContext>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition/>
    </Grid.RowDefinitions>

    <StackPanel Orientation="Horizontal">
      <Button Style="{StaticResource PrimaryButton}" Content="새로고침"
              Command="{Binding RefreshCommand}"/>
      <ext:SearchBox Width="240" Margin="8,0,0,0"
                     PlaceholderText="제품 검색..." 
                     Text="{Binding Query, UpdateSourceTrigger=PropertyChanged}"/>
    </StackPanel>

    <ContentControl Grid.Row="1" Content="{Binding CurrentView}"/>
  </Grid>
</Window>
```

---

## 결론

- **XAML 문법**은 **객체 트리**를 **선언적으로 구성**하기 위한 규약입니다.  
- **네임스페이스(xmlns)**는 **어떤 타입을 어떤 접두사로 사용할지**를 결정하며,  
  `x:`는 **XAML 언어 키워드**, `clr-namespace`는 **사용자/외부 라이브러리 타입 매핑**의 핵심입니다.  
- **리소스/바인딩/마크업 확장**을 조합하면 **표현(뷰)**와 **로직(뷰모델)**을 **느슨하게 결합**하면서도  
  **강력하고 재사용 가능한 UI**를 구축할 수 있습니다.

필요하시면 **네임스페이스 설계 기준표**(내/외부 라이브러리 접두사 컨벤션)와  
**프로젝트 초기 XAML 템플릿**(DataTemplates/리소스 병합 포함)도 만들어 드릴게요.