---
layout: post
title: Java - JDBC 드라이버
date: 2025-08-13 23:20:23 +0900
category: Java
---
# JDBC 드라이버 개요 및 DB 연결/쿼리 실행/결과 처리

Java에서 데이터베이스와 통신하기 위해 사용되는 표준 API가 **JDBC (Java Database Connectivity)**입니다.  
JDBC를 이용하면 특정 DBMS(MySQL, PostgreSQL, Oracle 등)에 관계없이 통일된 방식으로 데이터베이스 작업을 수행할 수 있습니다.

---

## 1. JDBC 드라이버 개요

### 1.1 JDBC란?
- **Java에서 데이터베이스에 연결하고, SQL 문을 실행하며, 결과를 처리할 수 있는 표준 인터페이스**
- `java.sql` 패키지에 포함
- DBMS별로 제공되는 **JDBC 드라이버**를 로드하여 사용

### 1.2 JDBC 드라이버 종류
1. **Type 1: JDBC-ODBC Bridge Driver**
   - JDBC → ODBC → DB
   - 현재는 거의 사용하지 않음 (Java 8에서 제거됨)
2. **Type 2: Native API Driver**
   - JDBC → 네이티브 DB API 호출
   - 각 OS/DBMS에 종속적
3. **Type 3: Network Protocol Driver**
   - JDBC → 미들웨어 서버 → DB
   - 미들웨어를 통한 간접 연결
4. **Type 4: Thin Driver (Pure Java Driver)**
   - **가장 많이 사용**
   - 순수 Java로 구현, 직접 DB와 통신
   - 예: `mysql-connector-j`, `postgresql-42.x.x.jar`

---

## 2. DB 연결

### 2.1 필수 단계
1. **JDBC 드라이버 로드**
2. **Connection 객체 생성**
3. **SQL 실행**
4. **결과 처리**
5. **자원 해제**

### 2.2 예제 (MySQL)
```java
import java.sql.*;

public class JdbcExample {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/testdb";
        String user = "root";
        String password = "1234";

        try {
            // 1. 드라이버 로드
            Class.forName("com.mysql.cj.jdbc.Driver");

            // 2. 연결 생성
            Connection conn = DriverManager.getConnection(url, user, password);

            // 3. SQL 실행
            String sql = "SELECT id, name FROM users";
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(sql);

            // 4. 결과 처리
            while (rs.next()) {
                int id = rs.getInt("id");
                String name = rs.getString("name");
                System.out.println(id + " - " + name);
            }

            // 5. 자원 해제
            rs.close();
            stmt.close();
            conn.close();

        } catch (ClassNotFoundException e) {
            System.out.println("드라이버 로드 실패: " + e.getMessage());
        } catch (SQLException e) {
            System.out.println("SQL 오류: " + e.getMessage());
        }
    }
}
```

---

## 3. 쿼리 실행 방법

| 메서드 | 용도 | 반환 |
|--------|------|------|
| `executeQuery()` | **SELECT** 실행 | `ResultSet` |
| `executeUpdate()` | **INSERT, UPDATE, DELETE, DDL** 실행 | 영향받은 행 수(int) |
| `execute()` | 모든 SQL 실행 가능 | boolean (`ResultSet` 여부) |

---

## 4. 결과 처리 (ResultSet)
- **`rs.next()`** : 다음 행으로 이동 (없으면 false)
- **데이터 타입별 Getter**
  - `getInt("컬럼명")`, `getString(인덱스)`, `getDate()`, `getDouble()` 등
- 컬럼 접근 시 **컬럼명** 또는 **컬럼 인덱스(1부터)** 사용 가능

---

## 5. 자원 해제
- 반드시 **`close()`** 호출
- `try-with-resources` 사용 권장 → 자동으로 close
```java
try (Connection conn = DriverManager.getConnection(url, user, password);
     Statement stmt = conn.createStatement();
     ResultSet rs = stmt.executeQuery("SELECT * FROM users")) {

    while (rs.next()) {
        System.out.println(rs.getString("name"));
    }
} catch (SQLException e) {
    e.printStackTrace();
}
```

---

## 6. 정리
- JDBC는 Java의 표준 DB 연결 API
- 드라이버 로드 → 연결 생성 → SQL 실행 → 결과 처리 → 자원 해제 순서
- Type 4 드라이버(Thin Driver)가 가장 많이 사용
- **PreparedStatement**를 활용하면 SQL 인젝션 방지 및 성능 개선 가능