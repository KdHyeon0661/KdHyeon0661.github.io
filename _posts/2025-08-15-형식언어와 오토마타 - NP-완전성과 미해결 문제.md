---
layout: post
title: 형식언어와 오토마타 - NP-완전성과 미해결 문제
date: 2025-08-15 15:20:23 +0900
category: 형식언어와 오토마타
---
# NP-완전성과 미해결 문제 — 정의, 증명 틀, 근사·가정, 장벽, 그리고 앞으로의 질문들

이 글은 **NP-완전성**의 개념을 단단히 정리하고, 그에 얽힌 **핵심 미해결 문제**들을 체계적으로 소개합니다.  

---

## 1) 기본 정의: NP, NP-어려움, NP-완전

- **NP**: “예(Yes)인 경우, 길이 다항의 **증명서**가 있어 **다항시간**에 검증 가능”한 결정 문제들의 집합.
- **NP-어려움(NP-hard)**: NP의 **모든** 문제에서 다항시간 **감소(reduction)** 될 수 있는 문제.
- **NP-완전(NP-complete)**: (i) **NP에 속**하고, (ii) **NP-어려움**인 문제.

### 1.1 다항식 시간 many-one 감소(카프 변형)
언어 \(A,B\subseteq\Sigma^*\)에 대해
\[
A \le_m^p B \iff \exists f\in \mathbf{FP}\ \text{s.t.}\ \forall x:\ x\in A \Leftrightarrow f(x)\in B.
\]
성질: 전이성·반사성. \(A\le_m^p B\)이고 \(B\in\mathbf{P}\)면 \(A\in\mathbf{P}\).

---

## 2) Cook–Levin 정리와 “출발점”들

- **Cook–Levin 정리**: \(\textbf{SAT}\)는 **NP-완전**.  
  (임의의 NP 계산을 **부울 공식의 만족성**으로 부호화)
- **3-SAT** 역시 NP-완전(각 절을 3-리터럴로 제한해도 본질이 보존됨).
- 이후 카프(Karp)의 21문제 등 **표준 NP-완전 문제군**으로 확산:
  - **그래프**: CLIQUE, INDEPENDENT SET, VERTEX COVER, HAMILTONIAN CYCLE, 3-COLORING
  - **수치·조합**: SUBSET-SUM, PARTITION, 0/1-KNAPSACK(결정판)
  - **라우팅/일정**: TSP(결정판), JOB-SHOP SCHEDULING 등

---

## 3) NP-완전성 **증명 템플릿**

1) **NP 포함**: 증명서로 적절한 구조(대입, 부분집합, 경로)를 제시하면 다항시간에 검증 가능함을 보일 것.  
2) **감소**: 이미 NP-완전인 \(A\)에서 목표 문제 \(B\)로 \(A\le_m^p B\)를 구성.  
   - **가젯(gadget)** 설계: 변수·절·모순 금지 등의 지역 제약을 그래프/인스턴스의 구조로 바꿈.
   - **양방향 정확성**: \(x\in A \Rightarrow f(x)\in B\), 그리고 \(f(x)\in B \Rightarrow x\in A\).

### 3.1 미니 예: 3-SAT → CLIQUE (스케치)
```text
입력: 3-CNF ϕ = ∧_{j=1..m} (ℓ_{j1} ∨ ℓ_{j2} ∨ ℓ_{j3})
그래프 G 구성:
  - 각 절의 리터럴을 정점으로 (총 3m)
  - 같은 절의 정점들끼리는 간선 없음
  - 모순 쌍( x vs ¬x )에도 간선 없음
  - 그 외 모든 쌍에는 간선
목표 k := m
정확성: ϕ가 만족 ⇔ G에 크기 m의 clique 존재
```

---

## 4) 결정↔탐색↔최적화: 본질은 같다(자기감소)

- **결정판**을 풀 수 있으면 **탐색(해 구하기)** 도 다항번의 결정 질의로 가능(자기감소 self-reduction).
- **최적화판**(예: 최대 clique 크기)은 보통 결정판 오라클로 **이분 탐색/증분**해 값을 복원.

```text
# SAT: 결정 → 탐색 (자기감소)
for 변수 x_i:
  if SAT(φ with x_i := 0) then x_i=0 else x_i=1
return assignment
```

---

## 5) 근사와 PCP: “얼마나 가깝게라도”가 어려운가?

- **PCP 정리**(핵심 표어):  
  \[
  \mathbf{NP} = \mathbf{PCP}(\log n, O(1))
  \]
  즉, NP 증명은 **로그 길이 무작위**·**상수 개수 쿼리**로 **확률적 검증** 가능.
- 귀결: 다수의 NP-완전 최적화 문제는 **근사조차** 어렵다(정확한 상수/지표는 문제별로 상이).
  - **SET-COVER**: \((1-\varepsilon)\ln n\) 이내 근사 **불가**(표준 가정하), Greedy가 \((1+\ln n)\)-근사.
  - **MAX-CLIQUE/CHROMATIC**: 매우 강한 **근사 불가능성**.  
  - **METRIC-TSP**: 1.5-근사(Christofides); **1.5보다 좋은 일반 상수**는 **미해결**.
- **Unique Games Conjecture(UGC)**: 다수 문제의 **근사 임계값**을 설명하는 강력한 가정(개방).

---

## 6) NP-완전성과 **열린 문제들**

### 6.1 **P ?= NP**
- **의미**: 증명서 검증이 빠른 모든 문제가 **정답 자체도** 빠른가?  
- **파급**: \( \mathbf{P}=\mathbf{NP} \)면 NP-완전 문제가 다항시간에 풀림 → **암호학**·**조합 최적화** 전반 지각변동.  
- **현재**: 알려진 장벽(§7 참조) 때문에 증명이 어려움.

### 6.2 **NP vs coNP**
- **coNP**: 보수가 NP에 속하는 언어 집합.  
- 대표 문제 **TAUT**(항진식)는 coNP의 자연예.  
- **NP =? coNP** 는 미해결(보통 \( \mathbf{P}\ne \mathbf{NP} \)이면 **NP≠coNP**일 것이라 믿음).

### 6.3 **NP-중간 문제(Ladner 정리)**
- \( \mathbf{P}\ne\mathbf{NP} \)라면, NP 안에 **P도 아니고 NP-완전도 아닌** 문제가 존재.  
- 전통적 후보: **Graph Isomorphism**, **정수 인수분해**(NP∩coNP에 있음).  
  (GI는 **준다항시간** 알고리즘이 알려졌으나 **P 여부**는 미결.)

### 6.4 **근사 임계값** 관련
- **Vertex Cover / Max-Cut / Coloring / Dense-Clique** 등:  
  최선 알고리즘 상수와 **NP-기반 하한** 사이의 **격차**가 남아 있으며, UGC나 강화 PCP 없이 **정확 임계**가 불명.

### 6.5 **평균-사례 vs 최악-사례**
- NP-완전 문제의 “**평균-사례 난이도**” 정형화는 난제.  
  암호와 연결된 **일방향 함수 존재** 여부, 랜덤 3-SAT 임계 근방의 구조 등도 큰 열린 주제.

### 6.6 **미세 복잡도(Fine-grained)**와 시간 하한
- **ETH/SETH**(3-SAT/ k-SAT의 지수시간 가설) 하에서  
  많은 P-시간 문제들의 **정확한 지수(차수)** 개선 불가능성이 귀결.  
  그러나 이 가설들 자체는 **미해결**(증명도 반례도 없음).

---

## 7) 왜 이렇게 어려운가 — **증명 장벽들**

- **Relativization(상대화)**: 오라클을 붙여도 성질이 유지되는 논법으로는 \( \mathbf{P}\stackrel{?}{=}\mathbf{NP} \)를 가릴 수 없음(양쪽 예가 존재).
- **Natural Proofs**(Razborov–Rudich): “자연스러운” 회로 하한 증명은 **의사난수**의 존재와 충돌 → 강한 하한을 막는 장벽.
- **Algebrization**: 상대화 장벽을 뚫은 기법도 **대수화**까지 고려하면 여전히 막힘.

> 결론: 완전 새로운 발상의 전환이 필요하다는 컨센서스.

---

## 8) 실무적 관점 — NP-완전을 만났을 때의 로드맵

1) **구조 제약**: 평면/유한 트리폭/이분/가중치 제한 등으로 P-시간 알고리즘을 노리기.  
2) **근사**: 보장 비율이 있는 알고리즘(예: Vertex-Cover 2-근사, Metric-TSP 1.5).  
3) **파라미터화(FPT)**: 해 크기 \(k\), 트리폭 등 작을 때 \(f(k)\cdot n^{O(1)}\).  
4) **무작위화**: 해싱/로컬서치/샘플링.  
5) **감소 활용**: SAT/ILP/SMT로 변환해 **성숙한 솔버** 사용(자기감소로 해 복원).

---

## 9) 미니 표 — 대표 NP-완전 문제 요약

| 군 | 문제 | 한줄 요약 |
|---|---|---|
| 논리 | SAT/3-SAT | 쿠크–레빈 정리의 출발점 |
| 그래프 | CLIQUE / IND.SET / VERTEX-COVER | 3-SAT에서 가젯 감소의 정석 |
| 경로/순회 | HAMILTONIAN / TSP(dec) | 순회/경로 존재성의 전형 |
| 색칠 | 3-COLORING | 색 수 최소화는 더 어렵다 |
| 수치 | SUBSET-SUM / 0/1-KNAPSACK(dec) | 의사다항식 DP, 근사·FPT 풍부 |
| 스케줄 | JOB-SHOP / PARTITIONING | 제약 충돌을 가젯으로 모델링 |

---

## 10) 한 페이지 정리

- **NP-완전** = “검증은 빠른데, **모든 NP 문제**가 이 문제로 줄어든다.”  
- **증명법**은 “NP 포함 + 다항식 감소(가젯)”의 두 축.  
- **PCP**는 근사 난이도의 “하늘선”을 제공, **UGC**는 다수 문제의 임계값을 가설로 묶는다.  
- **P ?= NP**, **NP ?= coNP**, **중간 문제의 지위**, **근사 임계**, **평균-사례 난이도**, **SETH/ETH**는 여전히 **미해결**.  
- 실무에선 **구조 활용·근사·FPT·무작위화·솔버 감수**로 길을 찾는다.