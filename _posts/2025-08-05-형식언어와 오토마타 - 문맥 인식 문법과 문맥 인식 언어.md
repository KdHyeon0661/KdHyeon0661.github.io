---
layout: post
title: 형식언어와 오토마타 - 문맥 인식 문법과 문맥 인식 언어
date: 2025-08-05 18:20:23 +0900
category: 형식언어와 오토마타
---
# 문맥 인식 문법(Context–Sensitive Grammar, **CSG**)과 문맥 인식 언어(Context–Sensitive Language, **CSL**) — 정의·정규형·LBA와의 동치·폐포·결정 성질

문맥 인식 언어(CSL)는 **문맥 인식 문법(CSG)** 으로 생성되거나, **선형 한정 오토마타(LBA)** 로 인식되는 언어류다.  
정규·문맥자유보다 강하고(진포함), 튜링 기계 전체(무제한 공간)보다는 약하다.  
아래에서는 **형식적 정의**, **Kuroda 정규형**, **LBA와의 동치**, **폐포 성질**, **결정 가능/불가능 성질**, **전형적 예시와 설계 직관**을 정리한다. 수식은 MathJax를 사용한다.

---

## 1) 문맥 인식 문법(CSG)의 정의

### 1.1 기본 정의(문맥 사용 규칙)
문맥 인식 문법 \(G=(V,\Sigma,R,S)\)는 아래 형태의 생성규칙(리라이트)을 가진다.
\[
\alpha A \beta \;\Rightarrow\; \alpha\,\gamma\,\beta
\]
여기서 \(A\in V\) (비단말), \(\alpha,\beta\in (V\cup\Sigma)^*\) (좌/우 **문맥**), \(\gamma\in (V\cup\Sigma)^+\) (비어있지 않음).  
즉, **주변 문맥 \(\alpha,\beta\)** 가 있을 때에만 \(A\)를 \(\gamma\)로 치환 가능하다.

이를 **길이 비축약(noncontracting)** 형태로 요약하면:
\[
\alpha \Rightarrow \beta \quad\text{에서 항상}\quad |\alpha| \le |\beta|
\]
(단, \(\varepsilon\)을 허용하려면 관례적으로 **예외적**으로 \(S\to \varepsilon\)만 허용하고, \(S\)가 어떤 규칙의 우변에도 나타나지 않도록 한다.)

> 직관: 유도 과정에서 문자열의 길이가 **줄어들지 않으므로**, 파스 문자열의 길이는 입력 길이를 **넘지 않는다**. 이 성질이 **선형 공간** 인식(§3)과 맞물린다.

### 1.2 Kuroda 정규형(Kuroda Normal Form)
모든 CSG는 아래 네 형태의 규칙만 갖는 동치 문법으로 변환 가능하다.
\[
AB \to CD,\qquad A \to BC,\qquad A \to B,\qquad A \to a
\]
(\(A,B,C,D\in V,\ a\in\Sigma\)).  
이 정규형은 **로컬 패턴**만 보면 되어 LBA 시뮬레이션이 용이하다.

---

## 2) 문맥 인식 언어(CSL)와 포함 관계

\[
\boxed{ \text{REG} \subsetneq \text{CFL} \subsetneq \text{CSL} \subsetneq \text{RE} }
\]

- **정규(REG)**, **문맥자유(CFL)** 는 모두 CSL의 부분집합.
- CSL은 **재귀적 열거 가능(RE)** 의 진부분집합(무제한 공간 TM보다 약함).
- **결정적** 문맥자유(DCFL)나 결정적 LBA(DLBA)는 각각 상응 모델이 있으나,  
  **DLBA와 NLBA의 표현력 동일성**(= LBA 문제)은 현재 **미해결**이다.

---

## 3) CSG ↔ LBA(선형 한정 오토마타) — **표현력 동치**

\[
\boxed{ \textbf{CSL} \;=\; \textbf{NLBA 인식 언어} \;=\; \mathrm{NSPACE}(O(n)) }
\]

- **(CSG ⇒ LBA)**: 유도 과정이 **비축약**이므로, 모든 중간 문장형의 길이가 입력 길이의 **선형 범위**에 묶인다.  
  LBA는 현재 문장형을 테이프에 두고 **지역 규칙 매칭**으로 한 단계씩 유도(또는 역유도)를 모사할 수 있다.
- **(LBA ⇒ CSG)**: LBA의 **구성(configuration)** 를 비단말로 부호화하고,  
  “합법적 한 걸음”을 **문맥 인식 규칙**으로 기술하면, 시작 구성 \(\Rightarrow^*\) 수용 구성 유도 ↔ 입력 생성.

> 요지: **문맥(주변)** 을 보는 문법적 힘 ↔ **선형 공간**의 자동화 힘이 정확히 일치한다.

---

## 4) 폐포(닫힘) 성질

CSL은 다음 연산에 **닫혀** 있다.

- **합집합** \(\cup\), **교집합** \(\cap\), **연접** \( \cdot \), **Kleene★**, **역순** \(L^R\)
- **보수(Complement)** — (Immerman–Szelepcsényi 정리: \( \mathrm{NSPACE}(s)\!=\!\mathrm{coNSPACE}(s) \) for \(s\!\ge\!\log n\))
- **역호모모르피즘** \(h^{-1}(L)\)
- **비소거(λ-자유) 호모모르피즘** \(h(L)\)  
  (임의 소거를 허용하는 호모모르피즘에는 일반적으로 닫혀 있지 않다.)
- **λ-자유 치환(Substitution)**

> 정규/문맥자유보다 강력한 폐포를 갖는다. 특히 **보수 닫힘**은 CFL에선 거짓이나 CSL에선 참.

---

## 5) 결정 성질(알고리즘/난이도) 개관

- **멤버십(소속성)**:  
  - **LBA(기계 주어짐)** 의 멤버십: \( \mathbf{NSPACE(n)}\)-**완전** (구성 그래프 탐색).  
  - **CSG(문법 주어짐)** 의 멤버십: **PSPACE-완전** (고전적 결과).  
    (Savitch \( \mathrm{NSPACE}(n)\subseteq \mathrm{DSPACE}(n^2)\subseteq \mathrm{PSPACE} \) 상한과 대응.)
- **공백성/보편성/포함성/동치성**: 일반적으로 **결정 불가능**.  
  (PCP/정지 문제로 표준 감소가 존재한다.)
- **보수 멤버십**: 보수 닫힘 덕분에 동일 난이도 범주에서 처리 가능.

---

## 6) 전형적 **CSL 예시** (CFL을 넘는 언어)

1. \[
   L_1=\{\,a^n b^n c^n \mid n\ge 0\,\}
   \]
   — 세 구간의 **동일 카운팅**이 필요(스택 1개로는 불가). LBA는 **마킹/스윕**으로 짝맞춤 가능.
2. \[
   L_2=\{\,w w \mid w\in\{0,1\}^*\,\}
   \]
   — **복제(reduplication)**. 입력 절반을 마킹하며 **동일성 검사**로 인식 가능.
3. \[
   L_3=\{\, w\in\{a,b,c\}^* \mid \#a(w)=\#b(w)=\#c(w)\,\}
   \]
   — 세 문자 출현수의 **동시 동등성**.

> 설계 직관(예: \(a^n b^n c^n\))  
> - 좌→우로 남은 미사용 \(a\) 하나를 **표시**(Ā)하고, 그 뒤에서 가장 왼쪽 미사용 \(b,c\)를 **대응 표시**(\(\overline{b},\overline{c}\)).  
> - 우→좌로 되돌아가 다음 \(a\)를 찾는 **교대 스윕** 반복.  
> - 표시가 완벽히 1:1로 끝나면 수용, 남거나 모자라면 거절. (전체 테이프는 입력 길이의 선형 범위)

---

## 7) CSG 규칙의 “문맥” 활용 예시(미니 패턴)

아래처럼 **좌/우 문맥** 을 이용해 “주변이 맞을 때만” 치환하게 만들 수 있다.

```text
# 예: 좌문맥 a, 우문맥 c 가 있을 때만 B를 b로 굳히기
a B c  ⇒  a b c

# 예: 중앙 비단말의 '전파'를 오른쪽으로 진행
X A  ⇒  A X
X a  ⇒  a X
X #  ⇒  #    (표식 X를 경계 '#'까지 이동)
```

이런 로컬 규칙들을 조합해 **짝맞춤·이동·검증** 을 구현하고, 유도 길이가 줄지 않게(비축약) 설계한다.

---

## 8) 문맥 인식 vs 기타 계층 요약

| 계층 | 모델/정규형 | 대표 닫힘 | 멤버십 난이도(대략) |
|---|---|---|---|
| REG | DFA/NFA/정규식 | 보수 포함 대부분 | \(O(n)\) |
| CFL | PDA/CFG(CNF) | 정규와의 교집합, 역순, 스타 등 (보수는 No) | \(O(n^3)\) (CYK) |
| **CSL** | **LBA / CSG(Kuroda)** | 합·교·연접·스타·역순·**보수**·역호모 | **LBA:** NSPACE(n)-완, **CSG:** PSPACE-완 |
| RE | TM(무제한 공간) | — | (멤버십 자체가 결정 불가능할 수 있음) |

---

## 9) 자주 하는 질문(FAQ)

- **Q. 왜 CSL은 보수에 닫히나요?**  
  A. **Immerman–Szelepcsényi**(1987): \(s(n)\ge \log n\)이면 \(\mathrm{NSPACE}(s)=\mathrm{coNSPACE}(s)\).  
     CSL = \(\mathrm{NSPACE}(n)\)이므로 보수 닫힘.

- **Q. CSG로 \(\varepsilon\)을 생성할 수 있나요?**  
  A. 비축약성 때문에 일반 규칙으로는 불가. 필요하면 관례적으로 **\(S\to\varepsilon\)** 하나만 허용하고 \(S\)를 우변에 금지한다.

- **Q. DLBA와 NLBA는 같은가요?**  
  A. 미해결(= **LBA 문제**). 단, Savitch로 \(\mathrm{NSPACE}(n)\subseteq \mathrm{DSPACE}(n^2)\) 는 알려짐.

- **Q. CSL은 문맥자유보다 얼마나 강한가요?**  
  A. \(a^n b^n c^n\), \(ww\), \(\#a=\#b=\#c\) 같은 **다중 동기화/복제** 패턴을 포함한다—모두 비CFL.

---

## 10) 한 페이지 요약

- **CSG**: 길이 **비축약**(또는 문맥 규칙)으로 유도하는 문법, **Kuroda 정규형**으로 정리 가능.  
- **CSL**: CSG가 생성하는 언어 = **LBA(선형 공간) 인식 언어**.  
- **폐포**: 합·교·연접·스타·역순·역호모·λ-자유 호모·**보수**에 닫힘.  
- **결정 성질**: 멤버십은 LBA 기준 **NSPACE(n)-완**, CSG 기준 **PSPACE-완**; 공백성·보편성·포함·동치는 대부분 **Undecidable**.  
- **예시**: \(a^n b^n c^n\), \(ww\), \(\#a=\#b=\#c\) 등 — **장거리 동기화/복제**가 필요한 구조.
