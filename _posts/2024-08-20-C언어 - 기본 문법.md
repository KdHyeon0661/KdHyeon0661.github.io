---
layout: post
title: C - 기본 문법
date: 2024-08-20 19:20:23 +0900
category: C
---
# 기본 문법: 변수, 자료형, 연산자

C 언어의 기본이 되는 **변수 선언**, **자료형**, 그리고 **연산자**에 대해 다룹니다.

---

## 1. 변수와 자료형

변수는 데이터를 저장하는 공간이며, 선언 시 자료형을 지정해야 합니다.

```c
int age = 25;
float pi = 3.14f;
char grade = 'A';
```

### 자료형

| 자료형 | 크기 (byte) | 범위 | 설명 |
|--------|-------------|------|------|
| `char` | 1 | -128 ~ 127 | 문자 하나 (ASCII 코드) |
| `unsigned char` | 1 | 0 ~ 255 | 부호 없는 문자 |
| `short` | 2 | -32,768 ~ 32,767 | 짧은 정수 |
| `unsigned short` | 2 | 0 ~ 65,535 | 부호 없는 짧은 정수 |
| `int` | 4 | 약 ±21억 | 일반 정수 |
| `unsigned int` | 4 | 0 ~ 약 42억 | 부호 없는 정수 |
| `long` | 4~8 | 플랫폼 의존 | 긴 정수 |
| `unsigned long` | 4~8 | 양의 긴 정수 |
| `long long` | 8 | -2⁶³ ~ 2⁶³-1 | 매우 긴 정수 |
| `float` | 4 | 약 6자리 정밀도 | 단정도 실수 |
| `double` | 8 | 약 15자리 정밀도 | 배정도 실수 |
| `long double` | 8~16 | 플랫폼 의존 | 고정밀 실수 |

> `sizeof()` 연산자로 크기 확인 가능

```c
printf("%lu", sizeof(int));  // 예: 4
```

---
## 2. 상수와 매크로

C 언어에서 **변경되지 않는 값을 표현**할 때는 `const` 키워드나 `#define` 전처리 지시자를 사용합니다. 각각의 차이점과 용도를 알아보겠습니다.

---

### (1) `const` 키워드 (상수 변수)

`const`는 **변하지 않는 변수**를 선언할 때 사용합니다. 변수처럼 자료형을 지정하지만, 값은 변경할 수 없습니다.

```c
const int MAX_USERS = 100;
// MAX_USERS = 200;  ❌ 오류 발생
```

- 컴파일러 수준에서 값 변경을 막음
- 타입이 명확하고 디버깅 및 타입 검사에 유리
- 포인터와 함께 사용 시 주의 필요 (예: `const int*` vs `int* const`)

#### `const int*`

- 가리키는 값이 상수로 포인터가 가리키는 대상의 값을 변경할 수 없으나 포인터 자체는 다른 주소를 가리킬 수 있음.

```c
int a = 10, b = 20;
const int* p = &a;
*p = 30;   // 오류! (가리키는 값 변경 불가)
p = &b;    // 가능! (가리키는 주소 변경 가능)
```

---

#### `int* const`

- 포인터 자체가 상수이며 포인터가 가리키는 주소를 변경할 수 없으나 가리키는 대상의 값은 변경 가능.

```c
int a = 10, b = 20;
const int* p = &a;
*p = 30;   // 오류! (가리키는 값 변경 불가)
p = &b;    // 가능! (가리키는 주소 변경 가능)
```

---

### (2) `#define` (전처리기 매크로)

`#define`은 **전처리기 지시자**로, 컴파일 이전에 **단순한 텍스트 치환**을 수행합니다.

```c
#define PI 3.1415
#define MAX(a, b) ((a) > (b) ? (a) : (b))

float area = PI * r * r;
```

- 자료형이 없으며, 디버깅 시 추적 어려움
- 상수 외에도 간단한 매크로 함수로도 사용 가능
- 중괄호 및 괄호 생략 시 의도치 않은 부작용 발생 가능

---

### 주의 사항

| 항목 | `const` | `#define` |
|------|---------|-----------|
| 타입 존재 | ✅ 있음 | ❌ 없음 |
| 디버깅 추적 | ✅ 쉬움 | ❌ 어려움 |
| 컴파일 에러 | ✅ 가능 | ❌ 컴파일러 관여 전 단계 |
| 메모리 사용 | ✅ 상수로 관리 | ❌ 문자열 치환 (RAM에 없음) |
| 함수 매크로 사용 | ❌ 불가 | ✅ 가능 |

---

### 예시 비교

```c
// const
const int WIDTH = 800;
const float PI = 3.1415f;

// define
#define HEIGHT 600
#define AREA(w, h) ((w) * (h))
```

---

### 정리

| 목적 | 추천 방식 |
|------|-----------|
| 타입이 필요한 상수 | `const` |
| 단순한 치환 | `#define` |
| 코드 추적, 유지보수 고려 | `const` 선호 |
| 매크로 함수 정의 | `#define` 사용 가능하나 주의 |

> 타입 안정성과 디버깅 용이성 때문에 `const` 사용이 권장됩니다.

---

## static
- static은 *정적 저장 기간(static storage duration)*을 가지는 변수를 선언할 때 사용합니다. 즉, 프로그램이 시작할 때 메모리에 할당되어 종료될 때까지 유지되는 변수입니다.
- 함수 내부에서 선언된 static 변수는 지역 변수처럼 함수 내부에서만 접근 가능하지만, 함수가 종료되어도 값이 유지됩니다.
- 전역 영역에서 선언된 static 변수는 해당 소스 파일 내에서만 접근 가능하며, 다른 파일에서는 보이지 않습니다(정보 은닉).
- 초기화를 하지 않아도 자동으로 0으로 초기화됩니다.
- 메모리의 데이터 영역에 저장됩니다

```c
void func() {
    static int count = 0;
    count++;
    printf("%d\n", count);
}

int main() {
    func(); // 출력: 1
    func(); // 출력: 2
    func(); // 출력: 3
    return 0;
}
```

## 기본 연산자

| 종류 | 연산자 | 설명 |
|------|--------|------|
| 산술 | `+ - * / %` | 더하기, 빼기, 곱하기, 나누기, 나머지 |
| 대입 | `= += -= *= /=` | 변수에 값 할당 |
| 비교 | `== != > < >= <=` | 참/거짓 판별 |
| 논리 | `&& || !` | AND, OR, NOT |
| 증감 | `++ --` | 1씩 증가, 감소 |
| 비트 | `& | ^ ~ << >>` | 비트 단위 연산 |

```c
int a = 5;
int b = 2;
printf("%d", a / b);  // 결과: 2
```

---

## 형 변환 (Type Casting)

C 언어에서 형 변환은 **하나의 자료형을 다른 자료형으로 바꾸는 작업**입니다. 형 변환은 **묵시적(implicit)** 또는 **명시적(explicit)** 으로 나뉩니다.

---

### 묵시적 형 변환 (자동 형 변환)

컴파일러가 자동으로 자료형을 변환하는 방식입니다. 보통 **정수 → 실수**, **더 작은 타입 → 더 큰 타입**으로 자동 변환됩니다.

```c
int a = 5;
float b = a;    // int → float로 자동 형 변환
```

연산에서 서로 다른 자료형이 사용되면 더 "큰" 자료형으로 자동 승격됩니다.

```c
int a = 3;
float b = 2.5;
float result = a + b;  // a가 float으로 변환된 뒤 연산
```

---

### 명시적 형 변환 (강제 형 변환)

프로그래머가 형을 직접 지정하여 변환하는 방식입니다. **(type)** 형식으로 작성합니다.

```c
int a = 7;
int b = 2;
float result = (float)a / b;  // 7.0 / 2 → 3.5
```

> 명시적 형 변환은 **정밀도 손실**, **의도치 않은 결과**를 초래할 수 있으므로 주의해서 사용해야 합니다.

### 예시: 데이터 손실

```c
int x = 300;
char y = (char)x;
printf("%d\n", y);  // 결과는 -56 등, 시스템에 따라 다름
```

---

### 정리 비교

| 구분 | 예시 | 설명 |
|------|------|------|
| 묵시적 | `float f = 10;` | int → float로 자동 변환 |
| 명시적 | `int i = (int)3.14;` | 3.14가 3으로 강제 변환 |

---

> 형 변환은 컴파일 에러를 줄이거나 연산 정확도를 위해 필수적입니다. 특히 **정수 나눗셈**에서 실수 결과가 필요한 경우 **명시적 형 변환**을 반드시 사용해야 합니다.

---

## 문자형과 아스키 코드

```c
char ch = 'A';
printf("%c\n", ch);   // 출력: A
printf("%d\n", ch);   // 출력: 65 (ASCII 코드)
```

> 문자형은 사실 정수형(char 타입), ASCII 값으로 처리됨.

---

## 주석

사람만 알아볼 수 있도록 작성하는 부분을 주석(comment)라고 합니다. 즉, 주석은 컴파일러가 처리하지 않으므로 프로그램의 실행에는 영향을 주지 않습니다.

### 한 줄 주석

```c
// 실행되지 않습니다.
```

### 여러 줄 주석

```c
/*
여러 줄 주석
실행되지 않습니다.
*/
```


## 정리

- 변수 선언 시 반드시 자료형을 명시해야 함
- 산술/비교/논리 연산자는 C 프로그래밍의 핵심
- 정수/실수/문자형을 구분하여 사용하고, 필요 시 형 변환