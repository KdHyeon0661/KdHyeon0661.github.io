---
layout: post
title: TCPIP - PPP 기능 프로토콜과 프레임 형식
date: 2025-08-29 18:25:23 +0900
category: TCPIP
---
# PPP 기능 프로토콜과 프레임 형식

PPP(Point-to-Point Protocol)는 단순한 데이터 링크 프로토콜을 넘어 다양한 네트워크 요구사항을 충족시키기 위한 **확장 기능 프로토콜들**을 포함하고 있습니다. 이러한 프로토콜들은 PPP의 기본 연결 위에서 추가적인 서비스와 기능을 제공합니다.

## PPP 기능 프로토콜 개요

PPP는 모듈식 구조를 채택하여, 기본적인 링크 설정과 데이터 전송 기능에 더해 필요에 따라 다양한 기능을 추가할 수 있습니다. 각 기능은 별도의 **제어 프로토콜(Control Protocol)** 을 통해 관리됩니다.

### PPP 링크 품질 모니터링/리포팅 (LQM/LQR)
- **목적**: PPP 링크의 품질을 지속적으로 모니터링하고 성능 저하 시 알림
- **동작 방식**: 정기적으로 링크 품질 리포트를 교환하며, 사전 설정된 임계값을 초과하는 패킷 손실 발생 시 링크 품질이 저하되었다고 판단
- **적용**: 불안정한 회선(예: 오래된 모뎀 연결)에서 유용하게 사용

### PPP 압축 제어 프로토콜 (CCP) 및 압축 알고리즘
- **목적**: 전송 효율성을 높이기 위해 데이터 압축 수행
- **주요 압축 알고리즘**:
  - **Predictor**: 데이터 패턴 예측을 통한 압축
  - **Stacker (LZS)**: Lempel-Ziv 스태커 알고리즘
  - **MPPC**: 마이크로소프트 점대점 압축 프로토콜
- **특징**: 양측 장치가 동일한 압축 알고리즘을 지원해야 하며, CCP 협상을 통해 사용할 알고리즘 결정

### PPP 암호화 제어 프로토콜 (ECP) 및 암호화 알고리즘
- **목적**: 전송 중인 데이터의 기밀성 보장
- **역사적 알고리즘**:
  - **DESE**: DES 암호화 (56비트 키)
  - **3DESE**: 삼중 DES 암호화 (168비트 키)
- **현대적 중요성**: 현재는 보안상 취약점으로 인해 사용되지 않으며, 대신 IPsec이나 TLS와 같은 상위 계층 암호화 기술로 대체됨
- **의의**: PPP 수준에서의 암호화에 대한 초기 시도로서 역사적 의미가 있음

### PPP 멀티링크 프로토콜 (MP/MLP/MLPPP)
- **목적**: 여러 개의 물리적 링크를 논리적으로 결합하여 대역폭 증가 및 부하 분산 구현
- **작동 방식**:
  ```
  송신 측: 단일 데이터 스트림 → 패킷 분할 → 여러 링크로 분산 전송
  수신 측: 여러 링크의 패킷 수신 → 재조립 → 원본 데이터 스트림 복원
  ```
- **장점**:
  - 대역폭 집계를 통한 성능 향상
  - 링크 장애 시 다른 링크로의 트래픽 재라우팅 (부분적 장애 허용)
- **적용**: 두 지점 간에 여러 회선(예: 두 개의 T1/E1 회선)이 있을 때 유용

### PPP 대역폭 할당 프로토콜 (BAP) 및 대역폭 할당 제어 프로토콜 (BACP)
- **목적**: 멀티링크 환경에서 대역폭 수요에 따라 링크를 **동적으로 추가 또는 제거**
- **BACP의 역할**: 대역폭 할당 요청을 관리하기 위한 제어 채널 제공
- **BAP의 역할**: 실제 대역폭 할당 규칙과 정책 정의
- **적용 예시**: 트래픽이 적을 때는 하나의 링크만 사용하다가 트래픽 증가 시 추가 링크를 자동으로 활성화

## PPP 프레임 형식

### PPP 일반 프레임 형식
PPP 프레임은 HDLC(High-Level Data Link Control) 프레임 구조를 기반으로 합니다:
```
┌─────────┬─────────┬─────────┬─────────┬─────────┬─────────┐
│ 플래그   │ 주소     │ 제어    │ 프로토콜 │ 정보     │ FCS     │
│ (1바이트)│ (1바이트)│ (1바이트)│ (2바이트)│ (가변)   │ (2/4바이트)│
└─────────┴─────────┴─────────┴─────────┴─────────┴─────────┘
```
- **플래그(Flag)**: 프레임 시작/종료 표시 (0x7E)
- **주소(Address)**: 브로드캐스트 주소 (0xFF) - PPP는 점대점 프로토콜이므로 일반적으로 고정됨
- **제어(Control)**: 비번호 프레임 표시 (0x03)
- **프로토콜(Protocol)**: 정보 필드에 포함된 프로토콜 종류 식별
  - 0x0021: IP 데이터그램
  - 0xC021: LCP 패킷
  - 0x8021: IPCP 패킷
  - 0xC023: PAP 패킷
- **정보(Information)**: 실제 전송 데이터 (가변 길이)
- **FCS(Frame Check Sequence)**: 오류 검출을 위한 체크섬

### PPP 일반 제어 프로토콜 프레임 형식 및 옵션 형식
모든 PPP 제어 프로토콜(LCP, IPCP, CCP 등)은 동일한 기본 프레임 구조를 공유합니다:
```
┌──────────────┬──────────────┬──────────────┐
│ 코드         │ 식별자       │ 길이         │
│ (1바이트)    │ (1바이트)    │ (2바이트)    │
├──────────────┴─────────────────────────────┤
│ 데이터 (옵션 포함)                         │
│ (가변 길이)                                │
└────────────────────────────────────────────┘
```
- **코드(Code)**: 패킷 유형 지정 (예: Configure-Request, Configure-Ack, Terminate-Request 등)
- **식별자(Identifier)**: 요청과 응답을 매칭하기 위한 일련번호
- **길이(Length)**: 코드, 식별자, 길이 필드와 데이터를 포함한 전체 패킷 길이

**옵션 형식**:
```
┌──────────────┬──────────────┐
│ 타입         │ 길이         │
│ (1바이트)    │ (1바이트)    │
├──────────────┴──────────────┤
│ 옵션 데이터                 │
│ (가변 길이)                 │
└─────────────────────────────┘
```
옵션은 협상 가능한 매개변수(예: 최대 수신 장치, 인증 프로토콜, 압축 알고리즘 등)을 나타냅니다.

### PPP 링크 제어 프로토콜 (LCP) 프레임 형식
LCP는 링크 설정, 유지, 종료를 담당하는 핵심 프로토콜입니다. 일반 제어 프로토콜 형식을 따르며, 주요 코드 값으로는 링크 설정(Configure), 링크 종료(Terminate), 링크 유지(Maintenance) 패킷 등이 있습니다.

### PPP 인증 프로토콜 (PAP, CHAP) 프레임 형식
**PAP(Password Authentication Protocol) 프레임**:
- **인증 요청**: 사용자 이름과 암호를 **일반 텍스트**로 전송
- **취약점**: 스니핑 공격에 취약
- **현재 상태**: 보안상 이유로 거의 사용되지 않음

**CHAP(Challenge-Handshake Authentication Protocol) 프레임**:
- **3-way 핸드셰이크** 과정:
  1. 서버 → 클라이언트: 챌린지(난수) 전송
  2. 클라이언트 → 서버: 해시(챌린지 + 비밀키) 응답
  3. 서버: 동일 계산 후 결과 비교
- **보안 강점**: 암호를 네트워크상에 전송하지 않음, 재생 공격 방지
- **지속적 보안**: 연결 중 주기적으로 재인증 수행 가능

### PPP 멀티링크 프로토콜 (MP) 프레임 형식
멀티링크 프로토콜은 추가 헤더를 사용하여 여러 링크에서 전송된 프래그먼트를 올바르게 재조립할 수 있도록 합니다:
```
┌──────────────────┬──────────────────┬──────────────────┐
│ MP 헤더          │ PPP 헤더         │ 패킷 데이터      │
│ (2-4바이트)      │ (프로토콜 필드 제외) │                 │
└──────────────────┴──────────────────┴──────────────────┘
```
MP 헤더에는 다음 정보가 포함됩니다:
- **시퀀스 번호**: 패킷 순서 유지를 위한 번호
- **프래그먼트 플래그**: 패킷 분할 정보 표시
- **링크 식별자**: 어느 물리적 링크에서 왔는지 식별

## 결론

PPP 기능 프로토콜들은 단순한 점대점 데이터 링크 프로토콜을 **엔터프라이즈급 통신 솔루션**으로 변모시킨 핵심 요소들입니다. LCP, IPCP와 같은 기본 제어 프로토콜에 더해, 압축(CCP), 암호화(ECP), 멀티링크(MP), 동적 대역폭 할당(BAP/BACP) 등의 확장 기능들은 다양한 네트워크 환경과 요구사항에 PPP를 적응시킬 수 있도록 해주었습니다.

특히 멀티링크 프로토콜(MLPPP)은 두 지점 간 대역폭을 증가시키는 실용적인 솔루션으로 오랜 기간 널리 사용되어 왔습니다. 반면 PAP/CHAP 인증 메커니즘은 네트워크 보안의 발전 과정에서 중요한 이정표를 세웠으며, CHAP의 도전-응답 방식은 이후 여러 인증 프로토콜에 영향을 미쳤습니다.

PPP의 모듈식 아키텍처와 잘 정의된 프레임 형식은 프로토콜 설계의 교과서적인 사례입니다. 각 기능이 독립적인 제어 프로토콜로 구현되어 시스템의 복잡성을 관리하면서도 확장성을 보장한 이 방식은 이후 개발된 많은 네트워크 프로토콜에 영감을 주었습니다. 오늘날 PPP는 직접적으로는 DSL 및 모뎀 연결에서 주로 사용되지만, 그 디자인 원리와 개념들은 현대 네트워킹의 여러 측면에서 여전히 유효하게 계승되고 있습니다.