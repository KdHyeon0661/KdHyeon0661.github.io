---
layout: post
title: 객체지향설계 - 코드 냄새
date: 2025-07-25 21:20:23 +0900
category: 객체지향설계
---
# 코드 냄새(Code Smell)란?

코드 냄새란 소프트웨어 코드에 내재한 **잠재적 문제점이나 유지보수, 확장성에 악영향을 주는 부정적 신호**를 의미합니다.  
즉, 당장 버그를 일으키지 않아도 “이 부분은 나중에 문제를 일으킬 가능성이 높다”는 경고 역할을 합니다.  
코드 냄새를 조기에 발견하고 개선하면 리팩토링의 방향을 잡고 품질을 높일 수 있습니다.

---

## 1. 코드 냄새의 특징

- **버그는 아닐 수 있으나** 코드의 품질과 설계가 좋지 않다는 신호  
- 유지보수, 확장, 이해를 어렵게 함  
- 흔히 반복적이고 부적절한 설계 패턴이나 구현 습관에서 발생  
- 자동화 도구(정적 분석기)가 일부 검출 가능하지만, 주로 경험과 리뷰로 발견

---

## 2. 대표적인 코드 냄새 유형

### 2.1 긴 메서드(Long Method)
- 너무 길고 복잡해 이해와 수정이 어려움  
- 원인: 한 메서드가 여러 책임을 가짐  
- 해결: **Extract Method** 등으로 분리

---

### 2.2 거대한 클래스(God Class)
- 너무 많은 필드와 메서드로 역할이 과도하게 집중  
- SRP(단일 책임 원칙) 위반  
- 해결: **Extract Class**로 책임 분리

---

### 2.3 중복 코드(Duplicate Code)
- 동일하거나 유사한 코드가 여러 곳에 존재  
- 유지보수 시 버그 유발 위험 상승  
- 해결: 공통 메서드나 상위 클래스로 통합

---

### 2.4 긴 매개변수 리스트(Long Parameter List)
- 메서드 인자가 너무 많아 호출과 이해가 어려움  
- 해결: **Parameter Object** 도입

---

### 2.5 과도한 조건문(Complex Conditional)
- if, switch 등이 중첩되거나 많아 코드 가독성 저하  
- 해결: **다형성(polymorphism)**, **전략 패턴** 등 활용

---

### 2.6 임시 필드(Temporary Field)
- 어떤 조건에서만 사용되는 필드가 존재  
- 객체가 일관성 없는 상태가 될 수 있음  
- 해결: 해당 책임을 별도 클래스로 분리

---

### 2.7 메시지 체인(Message Chain)
- 연속된 호출이 길어짐 (`a.getB().getC().getD()`)  
- 내부 구조 변화에 취약  
- 해결: **중개자(Mediator) 패턴**, 필요한 정보는 메서드로 직접 제공

---

### 2.8 반복된 조건문(Repeated Switches)
- 비슷한 switch문이 여러 곳에 중복  
- 해결: 다형성 적용

---

### 2.9 데이터 클래스(Data Class)
- 필드와 게터/세터만 존재, 행위가 없음  
- 데이터와 행위가 분리되어 객체지향 원칙 위배  
- 해결: 행위를 객체에 캡슐화

---

### 2.10 전역 상태(Global State)
- 전역 변수, 싱글톤 등 공유 상태 남발  
- 테스트 및 유지보수 어려움  
- 해결: 의존성 주입, 상태 최소화

---

### 2.11 주석 과다(Excessive Comments)
- 복잡한 코드 위에 주석이 많음 → 코드가 복잡하다는 신호  
- 해결: 코드를 명확하게 작성하고 주석은 최소화

---

### 2.12 불필요한 중간 클래스(Intermediate Class)
- 아무 역할 없이 단순히 다른 클래스를 감싸는 클래스  
- 해결: 중간 클래스를 제거하거나 역할 확대

---

### 2.13 기능 과잉(Feature Envy)
- 한 객체가 다른 객체의 데이터를 지나치게 탐색하며 조작  
- 해결: 책임 이전

---

## 3. 코드 냄새 진단 방법

- 코드 리뷰  
- 정적 분석 도구: SonarQube, PMD, FindBugs, ESLint 등  
- 복잡도 측정: 사이클로매틱 복잡도(Cyclomatic Complexity)  
- 중복 검사 도구(Duplication Detector)  
- 경험에 의한 패턴 인식

---

## 4. 코드 냄새와 리팩토링

코드 냄새는 **리팩토링의 출발점**입니다.  
냄새를 발견하면 적절한 리팩토링 기법을 적용해 개선할 수 있습니다.  

예:  
- 긴 메서드 → Extract Method  
- 중복 코드 → Extract Method/상속/템플릿 메서드  
- 과도한 조건문 → 다형성, 전략 패턴  
- 거대한 클래스 → Extract Class

---

## 5. 결론 및 실무 팁

- 코드 냄새는 **완벽한 코드가 없다는 자연스러운 신호**임을 인지하자.  
- 지나치게 코드 냄새에 집착하지 말고, 중요한 부분부터 점진적으로 개선하자.  
- 테스트와 CI 환경에서 코드 냄새 발견 → 빠른 리팩토링 루틴 구축.  
- 팀 내 코드 리뷰 기준에 코드 냄새 체크리스트 포함 권장.
