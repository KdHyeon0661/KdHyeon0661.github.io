---
layout: post
title: HTML - 오디오 파일 형식
date: 2025-03-30 20:20:23 +0900
category: HTML
---
# HTML 멀티미디어 포맷 완전 정리

## 1. 개요: 컨테이너와 코덱을 먼저 이해하기

- **컨테이너(Container)**: 파일 포맷 껍데기 (예: MP4, WebM, Ogg, WAV). 다중 트랙(오디오/비디오/자막/챕터)을 담는다.
- **코덱(Codec)**: 압축/복원 방식 (예: H.264, VP9, AV1, AAC, Opus, Vorbis, FLAC).
- **브라우저 재생 가능 여부**는 “컨테이너+코덱 조합”에 좌우된다.

간단한 규칙:
- **비디오**: MP4(H.264+AAC)는 사실상 필수, 보조로 WebM(VP9/Opus 또는 AV1/Opus) 제공 시 품질/용량 유리.
- **오디오**: MP3는 보편, Opus는 효율 우수(특히 저비트레이트), WAV/FLAC은 무손실.
- **이미지**: JPEG/PNG/GIF에 더해 **WebP/AVIF**로 용량 절감과 품질 향상.

---

## 2. 오디오 포맷

### 2.1 MP3 (.mp3)

- 손실 압축, **가장 널리 쓰임**. 거의 모든 브라우저/OS 호환.
- HTML5 `<audio>`에서 가장 안정적.

```html
<audio controls>
  <source src="audio.mp3" type="audio/mpeg">
  브라우저가 오디오를 지원하지 않습니다.
</audio>
```

| 속성 | 내용 |
|---|---|
| 압축 | 손실 |
| 브라우저 | 거의 전체 지원 |
| 장점 | 높은 호환성, 적절한 용량 |
| 단점 | 최신 코덱 대비 효율 낮음 |

---

### 2.2 Ogg Vorbis (.ogg)

- 오픈소스 손실 코덱. 특허 자유.
- 일부 환경(특히 옛 Safari) 호환 이슈가 있을 수 있어 **대체 소스 병행 권장**.

```html
<audio controls>
  <source src="audio.ogg" type="audio/ogg">
  <source src="audio.mp3" type="audio/mpeg"> <!-- 폴백 -->
</audio>
```

| 속성 | 내용 |
|---|---|
| 압축 | 손실 |
| 브라우저 | 크롬/파이어폭스/엣지 우수, 사파리는 버전에 따라 제한 |
| 장점 | 오픈, 저비트도 품질 괜찮음 |
| 단점 | 완벽 호환은 아님 |

---

### 2.3 WAV (.wav)

- 무압축(또는 무손실 PCM), 용량 큼. **효과음·편집용 소스**에 적합.
- 서비스 전송에는 비권장(대용량).

```html
<audio controls>
  <source src="sound.wav" type="audio/wav">
</audio>
```

| 속성 | 내용 |
|---|---|
| 압축 | 무손실/무압축 |
| 브라우저 | 전체적으로 양호 |
| 장점 | 원음에 가까움 |
| 단점 | 매우 큰 용량 |

---

### 2.4 Opus (.opus 또는 .webm 컨테이너)

- 최신 **고효율 손실 코덱**. 저비트에서도 음질 우수, 음성/음악 모두 강함.
- 보통 **WebM 컨테이너**로 제공(`type="audio/webm; codecs=opus"`). 사파리 구버전 이슈 있을 수 있어 폴백 필요.

```html
<audio controls>
  <source src="voice.webm" type='audio/webm; codecs="opus"'>
  <source src="voice.mp3" type="audio/mpeg">
</audio>
```

| 속성 | 내용 |
|---|---|
| 압축 | 손실(고효율) |
| 브라우저 | 최신 브라우저 대체로 우수, 옛 Safari 주의 |
| 장점 | 저비트·저지연에 매우 강함 |
| 단점 | MP3만큼의 범용성은 아님 |

---

### 2.5 FLAC (.flac)

- **무손실 압축**, 음질 보존. 일부 브라우저 네이티브 재생 가능, 아니면 다운로드/플레이어 앱으로 소비.
- 스트리밍보다는 다운로드/고급 오디오 서비스에 적합.

```html
<audio controls>
  <source src="track.flac" type="audio/flac">
  <source src="track.mp3"  type="audio/mpeg"> <!-- 폴백 -->
</audio>
```

| 속성 | 내용 |
|---|---|
| 압축 | 무손실 |
| 브라우저 | 최신 크롬/엣지 일부 지원, 전역적으론 폴백 필요 |
| 장점 | 무손실 음질 |
| 단점 | 큰 용량, 호환성 이슈 |

---

## 3. 비디오 포맷

### 3.1 MP4 (H.264/AVC + AAC, .mp4)

- **사실상 표준 조합**, 최고의 호환성. 필수 제공 권장.

```html
<video controls width="640" height="360" poster="thumb.jpg">
  <source src="movie.mp4" type="video/mp4">
  지원되지 않으면 <a href="movie.mp4">다운로드</a>하세요.
</video>
```

| 속성 | 내용 |
|---|---|
| 비디오 코덱 | H.264(AVC) |
| 오디오 코덱 | AAC |
| 브라우저 | 전반적으로 완벽에 가까움 |
| 장점 | 호환성·안정성 |
| 단점 | 특허·인코딩 라이선스 이슈(대부분 서비스엔 영향 미미) |

---

### 3.2 WebM (VP8/VP9/AV1 + Opus/Vorbis, .webm)

- **오픈** 미디어 포맷, 고효율. VP9·AV1은 MP4(H.264)보다 용량 이점.
- Safari/옛 iOS에서 제약이 있을 수 있어 **MP4 동시 제공** 권장.

```html
<video controls>
  <source src="movie.webm" type='video/webm; codecs="vp9, opus"'>
  <source src="movie.mp4"  type="video/mp4"> <!-- 폴백 -->
</video>
```

| 속성 | 내용 |
|---|---|
| 코덱 | VP8/VP9/AV1 + Opus/Vorbis |
| 브라우저 | 크롬/파폭/엣지 우수, Safari는 버전에 따라 제한 |
| 장점 | 높은 효율, 오픈 |
| 단점 | 전범위 호환은 MP4보다 불리 |

---

### 3.3 Ogg Theora (.ogv)

- 초기 HTML5 시대 포맷. 현재는 WebM/MP4가 대세.
- 학습/유산 호환 외 새 프로젝트에선 비권장.

```html
<video controls>
  <source src="legacy.ogv" type="video/ogg">
  <source src="legacy.mp4" type="video/mp4">
</video>
```

---

### 3.4 HEVC/H.265 (MP4 컨테이너)

- iOS/Safari 중심으로 재생되기도 함. 라이선스/브라우저 이슈로 범용성은 제한.
- 고해상도/HDR 컨텐츠에서 유용.

```html
<video controls>
  <source src="hdr_hevc.mp4" type='video/mp4; codecs="hvc1.1.6.L123.B0"'>
  <source src="hdr_av1.webm" type='video/webm; codecs="av1, opus"'>
  <source src="hdr_h264.mp4" type="video/mp4"> <!-- 최종 폴백 -->
</video>
```

---

### 3.5 AV1 (WebM/MP4)

- 차세대 오픈 코덱. **최고 수준의 압축 효율**.
- 인코딩 비용이 높고, 구형 브라우저 호환은 낮아 **보조 소스**로 제공 시 이점.

```html
<video controls>
  <source src="promo_av1.webm" type='video/webm; codecs="av1, opus"'>
  <source src="promo.mp4"      type="video/mp4">
</video>
```

---

## 4. 이미지 포맷

### 4.1 JPEG (.jpg/.jpeg)

- 사진에 적합한 **손실 압축**. 브라우저 전반 지원.

```html
<img src="photo.jpg" alt="산 풍경">
```

---

### 4.2 PNG (.png)

- **무손실** + 알파 투명. UI 아이콘/로고.

```html
<img src="logo.png" alt="서비스 로고">
```

---

### 4.3 GIF (.gif)

- 256색 + 간단한 애니메이션. 사진·고화질에는 부적합.

```html
<img src="sticker.gif" alt="움직이는 스티커">
```

---

### 4.4 WebP (.webp)

- 손실/무손실 + 알파 지원. JPEG/PNG 대비 **용량 절감** 우수.

```html
<picture>
  <source srcset="image.webp" type="image/webp">
  <img src="image.jpg" alt="제품 사진">
</picture>
```

---

### 4.5 AVIF (.avif)

- AV1 계열 이미지. **WebP보다도 더 높은 효율** 가능, HDR/광색역 지원.
- 구형 브라우저 폴백 필요.

```html
<picture>
  <source srcset="hero.avif" type="image/avif">
  <source srcset="hero.webp" type="image/webp">
  <img src="hero.jpg" alt="배너 이미지" width="1600" height="900">
</picture>
```

---

## 5. 브라우저 호환 요약(실무 감각)

| 형식 | 유형 | 호환성 감각 | 코멘트 |
|---|---|---|---|
| MP3 | 오디오 | 매우 높음 | 기본 음원 |
| Opus | 오디오 | 높음(옛 Safari 주의) | 저비트 음질 최고 |
| WAV/FLAC | 오디오 | 중 | 무손실·대용량 |
| MP4(H.264) | 비디오 | 매우 높음 | 필수 제공 |
| WebM(VP9/AV1) | 비디오 | 높음~중 | 효율 우수, MP4 폴백 필요 |
| HEVC | 비디오 | 중 | 애플 생태계 유리 |
| JPEG/PNG/GIF | 이미지 | 매우 높음 | 전통 포맷 |
| WebP | 이미지 | 높음 | 효율 좋음 |
| AVIF | 이미지 | 높음~중 | 최신/효율 최고, 폴백 필수 |

---

## 6. `<audio>`/`<video>` 실전 패턴

### 6.1 다중 소스 + 타입 명시

```html
<video controls preload="metadata" width="100%" poster="thumb.jpg">
  <source src="clip_av1.webm" type='video/webm; codecs="av1, opus"'>
  <source src="clip_vp9.webm" type='video/webm; codecs="vp9, opus"'>
  <source src="clip_h264.mp4" type="video/mp4">
  브라우저가 비디오를 지원하지 않습니다. <a href="clip_h264.mp4">다운로드</a>
</video>
```

### 6.2 모바일 자동재생(무음/인라인)

```html
<video autoplay muted loop playsinline preload="none" poster="hero.jpg">
  <source src="hero.mp4"  type="video/mp4">
  <source src="hero.webm" type='video/webm; codecs="vp9, opus"'>
</video>
```

### 6.3 오디오 폴백

```html
<audio controls preload="none">
  <source src="bgm.opus" type='audio/webm; codecs="opus"'>
  <source src="bgm.mp3"  type="audio/mpeg">
</audio>
```

---

## 7. MIME 타입과 서버 설정

정확한 `type` 지정은 브라우저 판단과 캐시/프리로드 최적화에 도움.

| 확장자 | 권장 MIME |
|---|---|
| .mp3 | audio/mpeg |
| .ogg(오디오) | audio/ogg |
| .wav | audio/wav |
| .mp4 | video/mp4 |
| .webm(비디오) | video/webm |
| .ogv | video/ogg |
| .webp | image/webp |
| .avif | image/avif |
| .jpg/.jpeg | image/jpeg |
| .png | image/png |
| .gif | image/gif |

Nginx 예시(발췌):

```nginx
types {
  audio/mpeg               mp3;
  audio/ogg                ogg;
  audio/wav                wav;
  video/mp4                mp4;
  video/webm               webm;
  video/ogg                ogv;
  image/webp               webp;
  image/avif               avif;
  image/jpeg               jpeg jpg;
  image/png                png;
  image/gif                gif;
}
```

---

## 8. 접근성과 국제화

- **대체 텍스트**: `<img alt="의미 설명">`는 필수.
- **자막/캡션**: `<video>`는 `<track kind="subtitles|captions">` 제공 권장.
- **텍스트 대본**: 중요 영상은 대본 페이지 링크 제공.
- **언어 속성**: `<html lang="ko">`처럼 명시.

자막 예시(WebVTT):

```html
<video controls>
  <source src="lecture.mp4" type="video/mp4">
  <track src="subs_ko.vtt" kind="subtitles" srclang="ko" label="Korean" default>
</video>
```

`subs_ko.vtt`:

```
WEBVTT

00:00:00.000 --> 00:00:04.000
시작합니다. 오늘은 이미지와 비디오 포맷을 살펴봅니다.
```

---

## 9. 성능 최적화와 반응형

### 9.1 이미지: `srcset`/`sizes`/`loading`/`decoding`

```html
<img
  src="photo-800.jpg"
  srcset="photo-480.jpg 480w, photo-800.jpg 800w, photo-1600.jpg 1600w"
  sizes="(max-width: 600px) 100vw, 600px"
  alt="카페 전경"
  width="800" height="533"
  loading="lazy"
  decoding="async">
```

- `width`/`height`를 명시해 **CLS 방지**.
- `loading="lazy"`로 지연 로딩(접근성 영향 고려하여 above-the-fold는 즉시 로딩).
- `decoding="async"`로 페인트 지연 완화.

### 9.2 비디오: `preload` 전략

- `preload="metadata"` 기본.
- 히어로/즉시재생이 아니면 **IntersectionObserver**로 지연 로딩.

```html
<video id="promo" controls preload="none" poster="promo.jpg"></video>
<script>
const v = document.getElementById('promo');
const io = new IntersectionObserver((es, o) => {
  es.forEach(e => {
    if (e.isIntersecting) {
      const s = document.createElement('source');
      s.src = 'promo.mp4';
      s.type = 'video/mp4';
      v.appendChild(s);
      v.load();
      o.disconnect();
    }
  });
}, { rootMargin: '200px' });
io.observe(v);
</script>
```

### 9.3 HTTP/서버

- **Range 요청**(부분 전송) 활성화.
- 캐시 헤더(`Cache-Control`, `ETag`)로 재다운로드 최소화.
- CDN에서 대용량 미디어를 엣지 캐시.

---

## 10. 스트리밍 개요(HLS/DASH)와 MSE

- 길거나 라이브 컨텐츠는 **어댑티브 스트리밍**: HLS(apple 계열), DASH(범용).
- Safari는 HLS 네이티브, 나머지는 **MSE(Media Source Extensions)** 플레이어(hls.js, dash.js 등) 사용.

hls.js 예시:

```html
<video id="live" controls playsinline></video>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const v = document.getElementById('live');
const src = 'https://example.com/stream.m3u8';
if (v.canPlayType('application/vnd.apple.mpegurl')) {
  v.src = src; // Safari
} else if (Hls.isSupported()) {
  const hls = new Hls();
  hls.loadSource(src);
  hls.attachMedia(v);
} else {
  v.outerHTML = '<p>브라우저가 HLS를 지원하지 않습니다.</p>';
}
</script>
```

---

## 11. 보안과 CORS

- 교차 출처 미디어/자막/포스터 로드 시:
  - 서버: `Access-Control-Allow-Origin` 헤더.
  - 클라이언트: `<video crossorigin="anonymous">` 또는 `use-credentials`.
- `<canvas>`로 프레임 드로잉 시 교차 출처면 **오염됨(tainted)**. 반드시 CORS 통과 필요.
- 다운로드 억제는 완벽 불가. `controlslist="nodownload"`는 UI 힌트일 뿐.

```html
<video controls crossorigin="anonymous" poster="https://cdn.example.com/p.jpg">
  <source src="https://cdn.example.com/m.mp4" type="video/mp4">
</video>
```

---

## 12. 고급 주제: HDR/색공간/색상 프로필

- HDR(High Dynamic Range) 컨텐츠는 HEVC/AV1 + 적절한 메타데이터 필요.
- 디스플레이/브라우저 지원에 좌우됨. SDR 폴백 제공 권장.
- 이미지의 ICC 프로필, 비디오의 색공간(BT.709/BT.2020) 일관성 유지.

---

## 13. 실전 선택 가이드

- **오디오**: 범용 MP3 + 효율 Opus(폴백 MP3).
- **비디오**: MP4(H.264) 필수 + WebM(VP9/AV1) 보조. 라이브/장편은 **HLS/DASH**.
- **이미지**: 우선 **AVIF 또는 WebP**, 폴백 JPEG/PNG. `srcset/sizes` 사용.
- 접근성: 자막·대본·대체텍스트 제공.
- 성능: 지연 로딩, 캐시, CDN, 적절한 비트레이트/해상도/프리셋.

---

## 14. 종합 예제: 반응형 이미지 + 비디오 다중 포맷 + 접근성

```html
<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>멀티미디어 데모</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  .wrap { max-width: 960px; margin: 2rem auto; font-family: system-ui, sans-serif; }
  figure { margin: 0 0 2rem; }
  video { width: 100%; aspect-ratio: 16/9; background:#000; display:block; }
  img { width: 100%; height: auto; display: block; }
</style>
</head>
<body>
<main class="wrap">

  <h1>멀티미디어 최적화 예시</h1>

  <figure>
    <picture>
      <source srcset="hero.avif" type="image/avif">
      <source srcset="hero.webp" type="image/webp">
      <img
        src="hero.jpg" alt="아침 햇살이 비치는 호수"
        width="1600" height="900" loading="eager" decoding="async">
    </picture>
    <figcaption>차세대 포맷(AVIF/WebP) + JPEG 폴백</figcaption>
  </figure>

  <section>
    <h2>다중 코덱 비디오 + 자막</h2>
    <video controls preload="metadata" poster="thumb.jpg" playsinline crossorigin="anonymous">
      <source src="clip_av1.webm" type='video/webm; codecs="av1, opus"'>
      <source src="clip_vp9.webm" type='video/webm; codecs="vp9, opus"'>
      <source src="clip_h264.mp4" type="video/mp4">
      <track src="subs_ko.vtt" kind="subtitles" srclang="ko" label="Korean" default>
      <track src="subs_en.vtt" kind="subtitles" srclang="en" label="English">
      브라우저가 비디오를 지원하지 않습니다. <a href="clip_h264.mp4">다운로드</a>
    </video>
  </section>

  <section>
    <h2>오디오 포맷 폴백</h2>
    <audio controls preload="none">
      <source src="bgm.webm" type='audio/webm; codecs="opus"'>
      <source src="bgm.mp3"  type="audio/mpeg">
      브라우저가 오디오를 지원하지 않습니다.
    </audio>
  </section>

</main>
</body>
</html>
```

---

## 15. 체크리스트

- [ ] 비디오: **MP4(H.264)** 기본 + WebM(AV1/VP9) 보조
- [ ] 오디오: MP3 기본 + Opus 보조
- [ ] 이미지: AVIF/WebP 우선 + JPEG/PNG 폴백, `srcset/sizes`
- [ ] 접근성: `<img alt>`, `<track>` 자막/캡션, 텍스트 대본
- [ ] 성능: `preload="metadata"`, 지연 로딩, CDN/캐시, Range 요청
- [ ] 보안/CORS: 외부 리소스는 CORS 설정 + `crossorigin`
- [ ] 모바일 자동재생: `autoplay muted playsinline`
- [ ] 레이아웃 안정성: `width/height` 혹은 `aspect-ratio`

---

## 16. 결론

HTML5의 `<audio>`, `<video>`, `<img>`는 포맷 선택과 제공 전략에 따라 **품질·용량·호환성**의 균형을 크게 좌우한다.
실무에서는 “**보편 포맷 + 차세대 포맷 보조 + 적절한 폴백**”과 “**접근성/성능/보안**”을 한 번에 고려해야 한다.
위의 가이드와 예제를 그대로 적용하면, 대부분의 사용자 환경에서 **빠르고 선명하며 접근 가능한** 멀티미디어 경험을 안정적으로 제공할 수 있다.
