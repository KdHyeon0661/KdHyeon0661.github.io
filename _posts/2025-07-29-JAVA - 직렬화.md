---
layout: post
title: Java - 직렬화
date: 2025-07-29 18:20:23 +0900
category: Java
---
# 직렬화 (Serializable)

## 1. 개념
**직렬화(Serialization)**는 객체의 상태를 **바이트 스트림**으로 변환하여 파일에 저장하거나 네트워크를 통해 전송할 수 있게 만드는 과정입니다.  
반대로, 바이트 스트림을 다시 객체로 복원하는 과정을 **역직렬화(Deserialization)**라고 합니다.

Java에서는 직렬화를 지원하기 위해 `java.io.Serializable` 인터페이스를 제공합니다.  
이 인터페이스는 **마커 인터페이스(Marker Interface)**로, 구현해야 할 메서드가 없습니다.  
즉, 클래스에 `implements Serializable`만 붙이면 JVM이 직렬화 가능 대상으로 인식합니다.

---

## 2. 직렬화의 필요성
- **데이터 저장**: 객체 상태를 파일로 저장 후, 나중에 그대로 복원 가능
- **네트워크 전송**: 클라이언트 ↔ 서버 간 객체 전달
- **캐싱**: 직렬화된 데이터를 빠르게 저장·로드

---

## 3. 직렬화 사용 방법

### 3.1 직렬화 예제
```java
import java.io.*;

class Person implements Serializable {
    private static final long serialVersionUID = 1L; // 버전 관리용 ID
    String name;
    int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

public class SerializationExample {
    public static void main(String[] args) {
        Person p = new Person("홍길동", 30);

        // 직렬화: 객체를 파일로 저장
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("person.ser"))) {
            oos.writeObject(p);
            System.out.println("직렬화 완료");
        } catch (IOException e) {
            e.printStackTrace();
        }

        // 역직렬화: 파일에서 객체 읽기
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream("person.ser"))) {
            Person readPerson = (Person) ois.readObject();
            System.out.println("이름: " + readPerson.name);
            System.out.println("나이: " + readPerson.age);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```

---

## 4. serialVersionUID
- **serialVersionUID**는 직렬화 시 **클래스 버전**을 구분하는 ID입니다.
- 동일한 클래스라도 serialVersionUID가 다르면 역직렬화 시 `InvalidClassException` 발생
- 명시하지 않으면 JVM이 자동 생성하지만, **명시적으로 선언**하는 것이 좋음

```java
private static final long serialVersionUID = 1L;
```

---

## 5. transient 키워드
- `transient`로 선언된 필드는 직렬화 대상에서 **제외**됨
- 민감 정보(비밀번호, 카드번호 등)에 사용
```java
class User implements Serializable {
    String username;
    transient String password; // 직렬화 제외
}
```

---

## 6. 주의사항
1. 직렬화 대상 클래스의 모든 필드가 **직렬화 가능**해야 함  
   (예: 포함된 객체도 Serializable 구현 필요)
2. static 필드는 직렬화되지 않음 (클래스 레벨 데이터이므로)
3. serialVersionUID 불일치 시 역직렬화 불가
4. 보안: 직렬화된 데이터는 그대로 복원 가능하므로 암호화 필요

---

## 7. 활용 예시
- **세션 저장**: 웹 서버에서 세션 객체를 파일이나 DB에 저장
- **분산 시스템**: 객체를 네트워크로 전달
- **로컬 저장소 캐싱**: 프로그램 종료 후에도 객체 상태 유지

---

## 8. 결론
Java 직렬화는 **객체의 상태를 영구적으로 저장하거나 전송**할 때 매우 유용한 기능입니다.  
하지만 serialVersionUID 관리와 보안 이슈를 주의해야 하며, 성능이 중요한 경우  
Java 기본 직렬화 대신 **JSON, Protobuf** 같은 포맷을 고려할 수도 있습니다.