---
layout: post
title: DB - 개요
date: 2025-01-24 19:20:23 +0900
category: DB
---
# 🔑 식별자(Identifier, Key) – 엔터티의 유일성을 책임지는 핵심 개념

**식별자(또는 키, Key)**는 데이터베이스에서 **하나의 레코드(행)를 유일하게 구분**할 수 있도록 해주는 속성 또는 속성들의 집합입니다.  
정확한 식별자 정의는 **무결성과 효율적인 데이터 조회**, 그리고 **관계 설정**의 기초가 됩니다.

---

## ✅ 1. 식별자의 역할

- **레코드를 유일하게 식별**한다 (중복 없음)
- **NULL을 허용하지 않는다** (필수 입력)
- 테이블 간 **관계를 연결하는 기준**이 된다
- **무결성 제약 조건**의 핵심 기반이다

> 테이블의 모든 행(row)은 반드시 식별자(Primary Key)에 의해 고유하게 구분되어야 함

---

## 🧱 2. 식별자의 종류

### 📌 (1) 기본키 (Primary Key)
- 테이블의 **주요 식별자**
- **유일성 + NOT NULL** 조건 필수
- 한 테이블에 **하나만 설정 가능**
  
```sql
CREATE TABLE User (
  UserID INT PRIMARY KEY,
  Name VARCHAR(50)
);
```

---

### 📌 (2) 후보키 (Candidate Key)
- 테이블 내에서 **기본키가 될 수 있는 모든 키의 후보**
- 기본키는 후보키 중 **하나만 선택**한 것
- 유일성, 최소성을 갖춰야 함

> 예: 주민등록번호, 이메일, 사용자명 등은 모두 유일할 수 있으므로 후보키

---

### 📌 (3) 대체키 / 보조키 (Alternate Key)
- 후보키 중 **기본키로 선택되지 않은 나머지 키**
- 보조키(Alternate Key)로 따로 제약을 줄 수 있음

```sql
CREATE TABLE User (
  UserID INT PRIMARY KEY,
  Email VARCHAR(100) UNIQUE NOT NULL -- 대체키
);
```

---

### 📌 (4) 복합키 (Composite Key)
- **두 개 이상의 컬럼**을 조합해 만든 기본키
- 단일 컬럼으로는 유일성 확보가 안될 때 사용

```sql
CREATE TABLE OrderItem (
  OrderID INT,
  ProductID INT,
  Quantity INT,
  PRIMARY KEY (OrderID, ProductID) -- 복합키
);
```

---

### 📌 (5) 외래키 (Foreign Key)
- **다른 테이블의 기본키를 참조**하는 키
- 테이블 간 관계를 형성함 (1:N, N:1, 등)

```sql
CREATE TABLE Order (
  OrderID INT PRIMARY KEY,
  UserID INT,
  FOREIGN KEY (UserID) REFERENCES User(UserID)
);
```

---

## 🧭 3. 식별자의 특성 (4대 원칙)

| 특성 | 설명 | 예시 |
|------|------|------|
| **유일성** | 각 행을 반드시 유일하게 구분 | 같은 사번은 존재할 수 없음 |
| **최소성** | 식별자 구성은 필요한 최소한의 컬럼으로 구성 | 불필요한 속성 추가 금지 |
| **불변성** | 한번 정해지면 변경하지 않음 | 사번은 변경 불가 |
| **존재성** | 반드시 존재해야 하며 NULL 불가 | 값 누락이 허용되지 않음 |

---

## 📂 4. 키와 인덱스의 차이

| 항목 | 식별자(키) | 인덱스(Index) |
|------|------------|----------------|
| 목적 | 논리적 식별 및 무결성 보장 | 검색 성능 향상 |
| 유일성 | 보장함 (PK, UNIQUE) | 보장할 수도 있고 아닐 수도 있음 |
| NULL | 허용 불가 (PK 기준) | 허용 가능 (일반 인덱스) |
| 자동 생성 | PK 설정 시 자동 인덱스 생성됨 | 수동 생성 필요 |

---

## 🎯 5. 키와 무결성 제약

- **엔터티 무결성(Entity Integrity)**  
  → 기본키(PK)는 반드시 NULL이 아니고, 유일해야 함

- **참조 무결성(Referential Integrity)**  
  → 외래키(FK)는 참조하는 테이블의 PK와 정확히 일치하거나 NULL이어야 함

> 무결성은 데이터 품질을 보장하기 위한 핵심 요소이며, 키를 통해 이를 유지함

---

## 🧾 6. 실무에서의 식별자 설계 팁

| 원칙 | 설명 |
|------|------|
| 자연키 vs 인조키 | 주민번호, 이메일 등 실제 값을 키로 쓰면 자연키 / 시스템에서 생성한 키는 인조키 |
| 인조키 권장 사례 | 주민번호 변경 위험성, 이메일 중복 가능성 등으로 대부분 인조키 사용 권장 |
| 복합키 최소화 | 복잡도와 성능 이슈로, 복합키 사용은 최소화하되 의미 있는 조합일 경우는 예외 |
| 후보키 관리 | 보조키도 `UNIQUE` 제약 설정하여 데이터 유일성 보장 |
| 키 도메인 정의 | 각 키의 자료형, 길이, 포맷 등 일관성 있게 정의해야 함 |

---

## 📌 예제: 사용자와 주문 시스템

```sql
-- 사용자 테이블
CREATE TABLE User (
  UserID INT PRIMARY KEY,         -- 기본키
  Email VARCHAR(100) UNIQUE NOT NULL, -- 대체키 (후보키 중 하나)
  Name VARCHAR(50)
);

-- 주문 테이블
CREATE TABLE Order (
  OrderID INT PRIMARY KEY,
  UserID INT,
  OrderDate DATE,
  FOREIGN KEY (UserID) REFERENCES User(UserID) -- 외래키
);
```

---

## ✅ 정리

- 식별자(키)는 테이블의 **유일성 보장**, **무결성 유지**, **관계 설정**의 중심입니다.
- **기본키/후보키/보조키/복합키/외래키**의 차이와 역할을 정확히 구분해야 합니다.
- 실무에서는 보통 **인조키(PK) + 보조 Unique 제약 후보키**를 병행 사용합니다.
- 키의 개념은 추상 설계(논리 모델링)뿐 아니라, 실제 SQL 구현에서도 반드시 이해해야 할 부분입니다.

> 📌 키는 단순한 "값"이 아니라, **데이터베이스의 구조적 신뢰성**을 결정짓는 요소입니다.