---
layout: post
title: ì•Œê³ ë¦¬ì¦˜ - ë°±íŠ¸ë˜í‚¹ (1)
date: 2025-01-20 20:20:23 +0900
category: ì•Œê³ ë¦¬ì¦˜
---
# ğŸ§  ë°±íŠ¸ë˜í‚¹(Backtracking) ì™„ì „ ì •ë³µ

**ë°±íŠ¸ë˜í‚¹**ì€ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•˜ë©´ì„œ,  
ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ë” ì´ìƒ íƒìƒ‰í•  í•„ìš”ê°€ ì—†ëŠ” ê²½ìš°ë¥¼ **ë¹¨ë¦¬ í¬ê¸°(ê°€ì§€ì¹˜ê¸°, pruning)** í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤.

"ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ” ê²½ë¡œëŠ” ë” ì´ìƒ ê°€ì§€ ì•ŠëŠ”ë‹¤!"  
â†’ ë¸Œë£¨íŠ¸í¬ìŠ¤ë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì ì´ê³  ì‹¤ì „ ë¬¸ì œì—ì„œë„ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

---

## âœ… ë°±íŠ¸ë˜í‚¹ì´ë€?

### ğŸ“Œ ì •ì˜
- ê°€ëŠ¥í•œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•˜ì§€ë§Œ,  
  **ë¶ˆí•„ìš”í•œ ê²½ìš°ëŠ” íƒìƒ‰í•˜ì§€ ì•Šê³  ì¤‘ê°„ì— ëŒì•„ê°**
- **ì¬ê·€**ë¥¼ ì‚¬ìš©í•˜ë©°, íƒìƒ‰ ë„ì¤‘ ì¡°ê±´ì„ í™•ì¸í•´ **ë°±(Back)í•´ì„œ ë˜ëŒì•„ê°**

### ğŸ“Œ í•µì‹¬ ê°œë…
- **ì¡°ê±´ íŒë‹¨ + íƒìƒ‰ ì·¨ì†Œ**
- ì™„ì„±ë˜ì§€ ì•Šì€ í•´ê°€ ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ **ì´í›„ ê²½ë¡œë¥¼ íƒìƒ‰í•˜ì§€ ì•ŠìŒ**
- ë³´í†µ **DFS + ì¡°ê±´ë¬¸**ìœ¼ë¡œ êµ¬í˜„

---

## ğŸ” ë°±íŠ¸ë˜í‚¹ VS ë¸Œë£¨íŠ¸ í¬ìŠ¤

| êµ¬ë¶„ | ë¸Œë£¨íŠ¸ í¬ìŠ¤ | ë°±íŠ¸ë˜í‚¹ |
|------|-------------|-----------|
| ëª¨ë“  ê²½ìš° | ë‹¤ íƒìƒ‰ | ê°€ì§€ì¹˜ê¸° í•¨ |
| íƒìƒ‰ ë°©ì‹ | ë‹¨ìˆœ ë°˜ë³µ | ì¬ê·€ + ì¡°ê±´ ê²€ì‚¬ |
| ì‹œê°„ íš¨ìœ¨ | ëŠë¦¼ | ìƒëŒ€ì ìœ¼ë¡œ ë¹ ë¦„ |
| êµ¬í˜„ ë‚œì´ë„ | ì‰¬ì›€ | ì¤‘ê°„ |
| ì¡°ê±´ íŒë‹¨ | ì—†ìŒ | ì¤‘ê°„ì— íŒë‹¨í•¨ |

---

## ğŸ”§ ë°±íŠ¸ë˜í‚¹ ê¸°ë³¸ êµ¬ì¡° (ì¬ê·€)

```python
def backtrack(ìƒíƒœ):
    if ì¢…ë£Œì¡°ê±´:
        ì²˜ë¦¬()
        return
    
    for ì„ íƒ in ê°€ëŠ¥í•œ_ì„ íƒë“¤:
        if ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ continue
        ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸
        backtrack(ë‹¤ìŒ_ìƒíƒœ)
        ìƒíƒœë¥¼ ë³µì›  # ë°±íŠ¸ë˜í‚¹ í•µì‹¬
```

---

## ğŸ¯ ëŒ€í‘œ ë¬¸ì œ íŒ¨í„´

### 1. ìˆœì—´ ìƒì„± (ëª¨ë“  ìˆœì„œ ì¡°í•©)
```python
def permute(arr, visited, path):
    if len(path) == len(arr):
        print(path)
        return
    for i in range(len(arr)):
        if visited[i]:
            continue
        visited[i] = True
        permute(arr, visited, path + [arr[i]])
        visited[i] = False  # ë³µì›
```

---

### 2. ì¡°í•© ìƒì„± (ì˜¤ë¦„ì°¨ìˆœ ì„ íƒ)
```python
def combine(arr, start, path, r):
    if len(path) == r:
        print(path)
        return
    for i in range(start, len(arr)):
        combine(arr, i + 1, path + [arr[i]], r)
```

---

## ğŸ“˜ ë°±íŠ¸ë˜í‚¹ ì‹¤ì „ ì˜ˆì œ (ë°±ì¤€ ê¸°ì¤€)

---

### âœ… ì˜ˆì œ 1: [15649 - Nê³¼ M (1)](https://www.acmicpc.net/problem/15649)  
- **1ë¶€í„° Nê¹Œì§€ ì¤‘ë³µ ì—†ì´ Mê°œë¥¼ ìˆœì„œ ìˆê²Œ ë‚˜ì—´**

```python
n, m = map(int, input().split())
visited = [False] * (n + 1)

def backtrack(path):
    if len(path) == m:
        print(*path)
        return
    for i in range(1, n + 1):
        if visited[i]:
            continue
        visited[i] = True
        backtrack(path + [i])
        visited[i] = False

backtrack([])
```

---

### âœ… ì˜ˆì œ 2: [15650 - Nê³¼ M (2)](https://www.acmicpc.net/problem/15650)  
- **ì˜¤ë¦„ì°¨ìˆœ ì¡°í•©**

```python
n, m = map(int, input().split())

def backtrack(start, path):
    if len(path) == m:
        print(*path)
        return
    for i in range(start, n + 1):
        backtrack(i + 1, path + [i])

backtrack(1, [])
```

---

### âœ… ì˜ˆì œ 3: [14888 - ì—°ì‚°ì ë¼ì›Œë„£ê¸°](https://www.acmicpc.net/problem/14888)  
- **ìˆ«ì ì‚¬ì´ì— ì—°ì‚°ìë¥¼ ë„£ì–´ ìµœëŒ€/ìµœì†Œ êµ¬í•˜ê¸°**

```python
n = int(input())
nums = list(map(int, input().split()))
plus, minus, mul, div = map(int, input().split())
max_val, min_val = -1e9, 1e9

def backtrack(i, total, p, m, mu, d):
    global max_val, min_val
    if i == n:
        max_val = max(max_val, total)
        min_val = min(min_val, total)
        return
    if p: backtrack(i+1, total+nums[i], p-1, m, mu, d)
    if m: backtrack(i+1, total-nums[i], p, m-1, mu, d)
    if mu: backtrack(i+1, total*nums[i], p, m, mu-1, d)
    if d:
        if total < 0:
            backtrack(i+1, -(-total//nums[i]), p, m, mu, d-1)
        else:
            backtrack(i+1, total//nums[i], p, m, mu, d-1)

backtrack(1, nums[0], plus, minus, mul, div)
print(max_val)
print(min_val)
```

---

### âœ… ì˜ˆì œ 4: [9663 - N-Queen](https://www.acmicpc.net/problem/9663)  
- **í€¸ì´ ì„œë¡œ ê³µê²©í•˜ì§€ ì•Šë„ë¡ ë†“ëŠ” ê²½ìš°ì˜ ìˆ˜**

```python
n = int(input())
board = [0] * n
res = 0

def is_safe(row):
    for i in range(row):
        if board[i] == board[row] or abs(board[i] - board[row]) == abs(i - row):
            return False
    return True

def backtrack(row):
    global res
    if row == n:
        res += 1
        return
    for i in range(n):
        board[row] = i
        if is_safe(row):
            backtrack(row + 1)

backtrack(0)
print(res)
```

---

## ğŸ”¥ ê°€ì§€ì¹˜ê¸°(pruning) ì „ëµ

| ì „ëµ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| visited ë°°ì—´ | ì¤‘ë³µ ì œê±° | ìˆœì—´, Nê³¼ M |
| start ì¸ë±ìŠ¤ | ì˜¤ë¦„ì°¨ìˆœ ë³´ì¥ | ì¡°í•© |
| ì¡°ê±´ ë§Œì¡± ì—¬ë¶€ | ë§Œì¡± ëª»í•˜ë©´ return | N-Queen, ì—°ì‚°ì ë¼ì›Œë„£ê¸° |
| ê³„ì‚° ì¤‘ë‹¨ | í•©ì´ ì´ˆê³¼ë˜ë©´ ì¤‘ë‹¨ | ë¶€ë¶„í•© ì œí•œ ë¬¸ì œ |

---

## ğŸ§  ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ í’€ì´ íŒ

- í•­ìƒ **ê¸°ì € ì¡°ê±´(ì¢…ë£Œ ì¡°ê±´)**ë¶€í„° ëª…í™•íˆ ì„¤ì •
- ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•œ í›„ ë°˜ë“œì‹œ **ë³µì›**í•  ê²ƒ
- ê°€ëŠ¥í•œ ì„ íƒì§€ë¥¼ ë¨¼ì € ì •ë¦¬í•˜ê³ , ì¡°ê±´ ê²€ì‚¬ â†’ `continue` or `return`
- ì²˜ìŒì—” ë¸Œë£¨íŠ¸í¬ìŠ¤ë¡œ í’€ê³ , **ì¡°ê±´ì— ë”°ë¼ ë°±íŠ¸ë˜í‚¹ìœ¼ë¡œ ìµœì í™”**

---

## ğŸ§ª ë°±ì¤€ ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ ì¶”ì²œ

| ë²ˆí˜¸ | ë¬¸ì œ | ì„¤ëª… |
|------|------|------|
| 15649 | Nê³¼ M (1) | ìˆœì—´ ê¸°ë³¸ |
| 15650 | Nê³¼ M (2) | ì¡°í•© ê¸°ë³¸ |
| 14888 | ì—°ì‚°ì ë¼ì›Œë„£ê¸° | ì—°ì‚°ì ìˆœì—´ |
| 2580 | ìŠ¤ë„ì¿  | ì¡°ê±´ íƒìƒ‰ |
| 9663 | N-Queen | ëŒ€í‘œ ë°±íŠ¸ë˜í‚¹ ë¬¸ì œ |
| 1182 | ë¶€ë¶„ìˆ˜ì—´ì˜ í•© | ì¡°ê±´ ì¡°í•© |
| 1941 | ì†Œë¬¸ë‚œ ì¹ ê³µì£¼ | ì¡°í•© + BFS |

---

## âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª© | ìš”ì•½ |
|------|------|
| í•µì‹¬ | ëª¨ë“  ê²½ìš°ë¥¼ íƒìƒ‰í•˜ë˜, ì¡°ê±´ì„ ì´ìš©í•´ ê°€ì§€ì¹˜ê¸° |
| êµ¬í˜„ | ì¬ê·€ í•¨ìˆ˜ + ì¡°ê±´ë¬¸ + ë³µì› |
| ì£¼ì˜ | visited ê´€ë¦¬, ì¢…ë£Œ ì¡°ê±´ ì„¤ì •, ìƒíƒœ ë³µì› |
| í™œìš© | ìˆœì—´, ì¡°í•©, ìŠ¤ë„ì¿ , N-Queen, ì—°ì‚°ì ë°°ì¹˜ ë“± |
| ê°•ì  | ì •ë‹µì´ ìœ ì¼í•˜ì§€ ì•Šì„ ë•Œ, ëª¨ë“  ê²½ìš°ë¥¼ ë¹ ì§ì—†ì´ íƒìƒ‰ ê°€ëŠ¥ |

> "ë°±íŠ¸ë˜í‚¹ì€ ë¸Œë£¨íŠ¸ í¬ìŠ¤ë³´ë‹¤ ë˜‘ë˜‘í•œ íƒìƒ‰ì´ë‹¤."