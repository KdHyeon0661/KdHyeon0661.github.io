---
layout: post
title: 컴퓨터시스템 - 프로세스의 제어
date: 2025-08-16 16:20:23 +0900
category: 컴퓨터시스템
---
# 프로세스의 제어(Process Control)

## 1. 개요
프로세스의 제어는 **운영체제가 프로세스의 생성, 실행, 일시 중지, 재개, 종료** 등을 관리하는 기능을 의미합니다. 이는 **프로세스 간 협력(IPC)**, **자원 공유**, **동기화** 등의 기반이 되며, 시스템 호출(System Call)과 커널 기능을 통해 이루어집니다.

---

## 2. 프로세스 제어 작업의 주요 범위
운영체제가 수행하는 프로세스 제어 작업은 크게 다음과 같습니다.

1. **프로세스 생성(Create)**  
   - 새로운 프로세스를 메모리에 로드하고 실행 준비 상태로 만듭니다.
   - 예: `fork()`, `exec()`, `CreateProcess()` 등.

2. **프로세스 전환(Context Switching)**  
   - CPU를 점유하고 있던 프로세스의 상태를 저장하고, 다른 프로세스의 상태를 복원하여 실행을 전환합니다.
   - PCB(Process Control Block) 사용.

3. **프로세스 종료(Terminate)**  
   - 프로세스가 정상/비정상적으로 종료되면 자원을 반환하고 PCB를 제거합니다.
   - 예: `exit()`, `kill()`.

4. **프로세스 대기/재개(Wait/Resume)**  
   - I/O 작업이나 다른 이벤트를 기다리며 대기 상태로 전환하거나, 조건 충족 시 다시 실행 상태로 변경합니다.
   - 예: `waitpid()`, `sleep()`.

---

## 3. 프로세스 제어 블록(PCB)와 제어 흐름
프로세스 제어에서 핵심적인 자료구조는 **PCB**입니다. PCB에는 다음 정보가 포함됩니다.

- 프로세스 ID(PID)
- 현재 상태(Running, Ready, Waiting 등)
- 레지스터 값, 프로그램 카운터
- 메모리 관리 정보(페이지 테이블, 세그먼트 정보)
- 파일 디스크립터 테이블

**문맥 전환(Context Switch)** 과정에서 운영체제는 현재 실행 중인 프로세스의 PCB를 저장하고, 다음 실행할 프로세스의 PCB를 불러옵니다.

---

## 4. 프로세스 제어를 위한 주요 시스템 호출
### 4.1 프로세스 생성
```c
pid_t pid = fork();
if (pid == 0) {
    // 자식 프로세스 코드
} else {
    // 부모 프로세스 코드
}
```
- `fork()`는 현재 프로세스를 복제하여 자식 프로세스를 생성합니다.
- `exec()` 계열 함수는 새로운 프로그램을 현재 프로세스 메모리 공간에 로드합니다.

### 4.2 프로세스 대기
```c
int status;
pid_t child_pid = wait(&status);
```
- 부모 프로세스가 자식 프로세스의 종료를 기다립니다.

### 4.3 프로세스 종료
```c
exit(0); // 정상 종료
```
- 실행 중인 프로세스를 종료하고 자원을 운영체제에 반환합니다.

### 4.4 프로세스 강제 종료
```c
kill(pid, SIGKILL); // pid에 해당하는 프로세스 종료
```

---

## 5. 프로세스 제어 기법
### 5.1 부모-자식 관계
- 부모가 자식을 생성하면, 부모-자식 관계 트리가 형성됩니다.
- UNIX에서는 부모 프로세스가 종료되면 자식은 `init` 프로세스가 입양합니다.

### 5.2 동기화
- 여러 프로세스가 자원을 공유할 때, **세마포어(Semaphore)**나 **뮤텍스(Mutex)** 등을 사용하여 동기화합니다.

### 5.3 IPC(프로세스 간 통신)
- 파이프, 메시지 큐, 공유 메모리, 소켓 등을 이용해 프로세스 간 데이터 교환을 수행합니다.

---

## 6. 예시: 부모가 자식을 생성하고 제어하기
```c
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>

int main() {
    pid_t pid = fork();
    if (pid == 0) {
        printf("자식 프로세스 실행 (PID=%d)\n", getpid());
        sleep(2);
        printf("자식 종료\n");
    } else {
        printf("부모 프로세스 대기 중...\n");
        wait(NULL);
        printf("부모: 자식 종료 확인\n");
    }
    return 0;
}
```
- 부모가 `fork()`로 자식을 생성하고, `wait()`로 자식 종료를 기다린 후 마무리합니다.

---

## 7. 결론
프로세스 제어는 운영체제가 제공하는 시스템 호출과 PCB 관리 메커니즘을 바탕으로 이루어집니다.  
이를 이해하면 **멀티태스킹, IPC, 동기화, 스케줄링** 등 고급 OS 기능을 더 깊이 다룰 수 있으며, CS:APP의 이후 장(시그널, 스레드, 동기화) 학습에도 기반이 됩니다.