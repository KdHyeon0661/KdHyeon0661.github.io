---
layout: post
title: TCPIP - CIDR과 슈퍼네팅
date: 2025-08-29 22:25:23 +0900
category: TCPIP
---
# IP 클래스리스 주소 체계: CIDR과 슈퍼네팅

## IP 클래스리스 주소 체계와 슈퍼네팅 개요, 동기, 장단점

1990년대 초반, 인터넷의 폭발적 성장은 클래스풀 주소 체계의 근본적 한계를 드러냈습니다. 주소 고갈과 라우팅 테이블 폭발 문제가 임계점에 도달하면서, 새로운 패러다임이 절실히 필요했습니다. 이에 대한 해답으로 등장한 것이 **CIDR(Classless Inter-Domain Routing)** 으로, 기존의 경직된 클래스 경계를 해체하고 더욱 유연하고 효율적인 주소 할당 체계를 도입했습니다.

**슈퍼네팅**은 CIDR의 핵심 개념 중 하나로, 여러 개의 연속된 네트워크를 하나의 더 큰 블록으로 통합하는 기술입니다. 이는 작은 네트워크들을 묶어 마치 하나의 큰 네트워크처럼 관리할 수 있게 함으로써 라우팅 효율성을 극대화합니다.

### CIDR 도입의 주요 동기
1. **주소 공간 고갈 문제**: 클래스 B 주소가 급격히 소진되는 위기
2. **라우팅 테이블 폭발**: 1990년대 중반 인터넷 백본 라우터의 테이블 크기가 기하급수적으로 증가
3. **주소 낭비 해소**: 클래스풀 시스템의 비효율적 주소 할당 문제 개선
4. **유연한 할당 체계 필요**: 다양한 크기의 조직에 맞춤형 주소 블록 제공

### CIDR의 핵심 장점
- **주소 효율성 극대화**: 조직의 실제 필요에 맞는 정확한 크기의 주소 블록 할당
- **라우팅 효율성 향상**: 슈퍼네팅을 통한 라우팅 테이블 항목 감소
- **유연한 계층 구조**: ISP가 고객에게 유연하게 주소를 재할당 가능
- **하향식 할당**: IANA → RIR → ISP → 고객의 효율적 주소 분배 체계

### CIDR의 도전 과제
- **레거시 시스템 호환성**: 기존 클래스풀 장치와의 호환성 문제
- **복잡성 증가**: 서브넷 마스크 계산의 복잡성
- **교육 필요**: 새로운 개념에 대한 광범위한 교육과 이해 필요
- **전환 비용**: 기존 네트워크 인프라 업데이트 비용

## IP 슈퍼네팅: CIDR 계층적 주소 체계와 표기법

CIDR의 가장 혁신적인 변화는 **가변 길이 서브넷 마스크(VLSM)** 와 새로운 표기법의 도입이었습니다. 기존의 클래스풀 시스템이 고정된 네트워크/호스트 경계를 사용했다면, CIDR은 이 경계를 임의의 비트 위치로 이동시킬 수 있게 했습니다.

### CIDR 표기법
CIDR 표기법은 IP 주소 뒤에 슬래시(/)와 네트워크 접두사 길이를 붙여 표현합니다:
- `192.168.1.0/24`: 24비트 네트워크 접두사 (기존 클래스 C와 동일)
- `172.16.0.0/20`: 20비트 네트워크 접두사 (16개의 연속된 클래스 C 네트워크)
- `10.0.0.0/8`: 8비트 네트워크 접두사 (클래스 A와 동일)

```
CIDR 표기법의 이해
IP 주소: 192.168.1.0
서브넷 마스크: 255.255.255.0 (이진수로 11111111.11111111.11111111.00000000)

네트워크 접두사 길이: 24비트 (연속된 1의 개수)
CIDR 표기: 192.168.1.0/24
```

### 계층적 주소 할당 구조
CIDR은 인터넷 주소 공간을 효율적으로 관리하기 위해 계층적 구조를 도입했습니다:

```
CIDR 계층적 주소 할당 구조
IANA (Internet Assigned Numbers Authority)
    ↓
RIR (Regional Internet Registry) - APNIC, ARIN, RIPE 등
    ↓
LIR/ISP (Local Internet Registry / Internet Service Provider)
    ↓
고객 (기업, 조직, 개인)
    ↓
서브넷 (내부 네트워크 분할)
```

이 구조에서 각 ISP는 큰 주소 블록을 할당받아 고객들에게 필요한 크기로 세분화하여 배분합니다. 이때 슈퍼네팅을 통해 여러 고객의 네트워크를 하나의 라우팅 항목으로 통합할 수 있습니다.

## IP 클래스리스 주소 블록 크기와 클래스풀 네트워크 등가물

CIDR은 클래스풀 시스템을 완전히 대체한 것이 아니라, 그 위에 더 유연한 계층을 추가한 것입니다. 각 CIDR 블록은 특정 클래스풀 네트워크와 대응될 수 있습니다:

### 주요 CIDR 블록 크기와 클래스풀 등가물
```
+------------+----------------+----------------+----------------------+-------------------+
| CIDR 표기  | 서브넷 마스크   | 사용 가능      | 클래스풀             | 호스트 수         |
|            |                | 호스트 수      | 등가물              | (네트워크/브로드캐스트 제외) |
+------------+----------------+----------------+----------------------+-------------------+
| /8         | 255.0.0.0      | 16,777,214     | 클래스 A 1개        | 2²⁴ - 2          |
| /16        | 255.255.0.0    | 65,534         | 클래스 B 1개        | 2¹⁶ - 2          |
| /24        | 255.255.255.0  | 254            | 클래스 C 1개        | 2⁸ - 2           |
| /20        | 255.255.240.0  | 4,094          | 클래스 C 16개       | 2¹² - 2          |
| /23        | 255.255.254.0  | 510            | 클래스 C 2개        | 2⁹ - 2           |
| /28        | 255.255.255.240| 14             | 클래스 C 1/16       | 2⁴ - 2           |
| /30        | 255.255.255.252| 2              | 포인트투포인트      | 2² - 2           |
+------------+----------------+----------------+----------------------+-------------------+
```

### 슈퍼네팅 예시: 여러 클래스 C 네트워크 통합
기존에 16개의 연속된 클래스 C 네트워크를 개별적으로 라우팅 테이블에 등록해야 했다면, CIDR을 통해 하나의 /20 블록으로 통합할 수 있습니다:

```
슈퍼네팅 전 (16개의 개별 클래스 C 네트워크):
192.168.0.0/24
192.168.1.0/24
192.168.2.0/24
...
192.168.15.0/24
→ 라우팅 테이블 항목: 16개

슈퍼네팅 후 (하나의 CIDR 블록):
192.168.0.0/20
→ 라우팅 테이블 항목: 1개
```

## IP CIDR 주소 체계 예시

### 예시 1: 중소기업 네트워크 설계
500개의 호스트를 가진 기업에 적합한 주소 블록 할당:

**문제**: 클래스 C(/24)는 254개 호스트만 지원하므로 부족, 클래스 B(/16)는 65,534개로 과도함

**CIDR 솔루션**: `/23` 블록 할당 (510개 호스트 지원)
- 네트워크 주소: 203.0.113.0/23
- 주소 범위: 203.0.113.0 ~ 203.0.114.255
- 브로드캐스트 주소: 203.0.114.255
- 사용 가능 호스트: 510개

### 예시 2: ISP의 효율적 주소 관리
ISP가 203.0.113.0/24 블록을 보유하고 여러 고객에게 나눠주는 경우:

```
ISP 주소 블록: 203.0.113.0/24 (256개 주소)

고객 A (60개 호스트 필요): 203.0.113.0/26 (64개 주소) 할당
고객 B (30개 호스트 필요): 203.0.113.64/27 (32개 주소) 할당
고객 C (120개 호스트 필요): 203.0.113.96/25 (128개 주소) 할당
고객 D (20개 호스트 필요): 203.0.113.224/27 (32개 주소) 할당

남은 주소: 203.0.113.192/26 (64개 주소) - 미할당 상태로 유지
```

## IP 데이터그램 캡슐화와 형식

### IP 데이터그램 캡슐화
IP 데이터그램은 네트워크를 통해 전송되기 위해 하위 계층에서 캡슐화됩니다. 이 과정은 OSI 모델의 계층적 특성을 잘 보여줍니다:

```
IP 데이터그램 캡슐화 과정
+-------------------------------------------------------+
| 응용 계층 데이터 (예: HTTP 요청, 이메일 내용)        | ← 페이로드
+-------------------------------------------------------+
| [TCP/UDP 헤더] | 응용 계층 데이터                    | ← 세그먼트/데이터그램
+-------------------------------------------------------+
| [IP 헤더] | [TCP/UDP 헤더] | 응용 계층 데이터        | ← IP 데이터그램
+-------------------------------------------------------+
| [이더넷 헤더] | [IP 헤더] | ... | [이더넷 트레일러]   | ← 이더넷 프레임
+-------------------------------------------------------+
| 물리적 신호 (전기/광 펄스)                           | ← 비트 스트림
+-------------------------------------------------------+
```

### IP 데이터그램 일반 형식
IPv4 데이터그램은 고정 헤더와 가변 옵션, 그리고 데이터 페이로드로 구성됩니다:

```
IPv4 데이터그램 구조 (최소 20바이트 헤더 + 옵션 + 데이터)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| 버전(4) | IHL  | 서비스 유형 |          총 길이              | (0-15비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         식별자               |플래그|     단편 오프셋        | (16-31비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  TTL   |   프로토콜          |         헤더 체크섬           | (32-47비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       송신자 IP 주소                        | (48-63비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       수신자 IP 주소                        | (64-79비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      옵션 (가변 길이)                       | (80+비트)
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       데이터 (페이로드)                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

**주요 필드 설명:**
1. **버전 (4비트)**: IP 버전 (IPv4는 4)
2. **IHL (4비트)**: 인터넷 헤더 길이 (32비트 워드 단위)
3. **서비스 유형 (8비트)**: QoS(Quality of Service) 관련 설정
4. **총 길이 (16비트)**: 전체 데이터그램 길이 (헤더+데이터, 최대 65,535바이트)
5. **식별자 (16비트)**: 단편화 관련 패킷 식별
6. **플래그 (3비트)**: 단편화 제어 플래그
7. **단편 오프셋 (13비트)**: 단편화된 데이터 조각의 위치
8. **TTL (8비트)**: Time To Live - 라우터 홉 수 제한
9. **프로토콜 (8비트)**: 상위 계층 프로토콜 식별 (TCP=6, UDP=17)
10. **헤더 체크섬 (16비트)**: 헤더 무결성 검사
11. **송신자/수신자 IP 주소 (각 32비트)**: 출발지와 목적지 주소

### IP 데이터그램 옵션과 옵션 형식
IP 옵션은 특수한 제어 기능을 제공하는 선택적 필드입니다:

**옵션의 일반 형식:**
```
옵션 구조 (가변 길이)
+--------+--------+--------+--------+
| 타입   | 길이   | 데이터          |
+--------+--------+--------+--------+
(길이 필드는 옵션에 따라 있을 수도 있고 없을 수도 있음)
```

**주요 IP 옵션 종류:**
1. **엄격한 소스 라우팅**: 패킷이 반드시 통과해야 할 경로 지정
2. **느슨한 소스 라우팅**: 패킷이 통과해야 할 특정 라우터 목록
3. **레코드 라우트**: 패킷이 통과한 라우터들의 주소 기록
4. **타임스탬프**: 각 라우터의 처리 시간 기록
5. **보안 옵션** (구식): 군사용 보안 분류 정보

**옵션 사용의 제한사항:**
- 모든 라우터가 옵션을 지원하는 것은 아님
- 옵션 처리로 인한 성능 오버헤드
- 일부 옵션은 보안상의 이유로 차단됨
- 현대 네트워크에서는 대부분의 옵션이 사용되지 않음

```
옵션 처리가 라우터 성능에 미치는 영향
일반 패킷 처리 경로:    수신 → 목적지 검사 → 포워딩 테이블 조회 → 전송
옵션 포함 패킷 처리 경로: 수신 → 목적지 검사 → 옵션 처리 → 추가 검사 → 전송
                                         (성능 저하 발생)
```

## 결론

CIDR과 클래스리스 주소 체계는 인터넷 역사상 가장 중요한 기술적 진전 중 하나로 평가받습니다. 1990년대 중반 인터넷의 생존을 위협하던 주소 고갈과 라우팅 테이블 폭발 문제를 해결함으로써, IPv4의 수명을 수십 년 연장시키는 결정적 역할을 했습니다.

CIDR의 혁신성은 단순한 기술적 개선을 넘어 네트워크 자원 관리 철학의 변화를 의미했습니다. 고정된 크기의 "상자"에 조직을 맞추던 시대에서, 조직의 실제 필요에 맞춰 유연하게 자원을 할당하는 시대로의 전환이었습니다. 슈퍼네팅과 VLSM은 이 유연성을 실현하는 핵심 메커니즘으로 작동했습니다.

오늘날 CIDR은 인터넷 인프라의 기본이 되었으며, 모든 현대적인 IP 주소 할당과 라우팅이 이 체계 위에서 운영됩니다. 클래스풀 개념은 교육적 목적으로만 남아있을 뿐, 실제 운영 환경에서는 완전히 사라졌습니다.

그러나 CIDR도 완벽한 해결책은 아닙니다. IPv4 주소 공간의 근본적 한계는 여전히 존재하며, 이는 궁극적으로 IPv6로의 전환을 필요로 합니다. CIDR이 제공한 시간은 인터넷 커뮤니티가 IPv6를 준비할 수 있는 소중한 기간이었습니다.

네트워크 엔지니어와 관리자에게 CIDR의 이해는 필수적인 역량입니다. 효율적인 주소 할당, 라우팅 최적화, 네트워크 설계 모두 CIDR 원리 위에서 이루어지기 때문입니다. 클래스풀에서 클래스리스로의 이행은 기술 진화의 교과서적 사례로서, 유연성과 효율성이 어떻게 혁신을 주도하는지를 보여주는 살아있는 교훈입니다.