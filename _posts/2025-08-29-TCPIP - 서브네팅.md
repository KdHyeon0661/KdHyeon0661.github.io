---
layout: post
title: TCPIP - 서브네팅
date: 2025-08-29 21:25:23 +0900
category: TCPIP
---
# IP 서브네팅: 개념, 설계 및 실전 예제

## IP 서브네팅 개요, 필요성 및 장점

IP 서브네팅은 단일 네트워크를 논리적으로 분할하여 여러 개의 작은 네트워크(서브넷)로 만드는 기술입니다. 초기 클래스 기반 주소 체계의 비효율성을 해결하기 위해 도입되었으며, 현대 네트워크 설계의 핵심 요소입니다.

### 서브네팅의 필요성과 목적

서브네팅을 구현하는 주요 이유는 다음과 같습니다:

1. **주소 공간 효율성**: 하나의 큰 네트워크를 여러 작은 네트워크로 나누어 사용하지 않는 주소 낭비를 줄임
2. **브로드캐스트 도메인 제한**: 브로드캐스트 트래픽의 영향을 특정 서브넷 내로 제한
3. **보안 강화**: 서브넷 간 트래픽을 라우터나 방화벽에서 제어 가능
4. **관리 용이성**: 조직의 부서별, 지점별로 논리적 네트워크 그룹화
5. **지리적 분산**: 다른 물리적 위치에 있는 네트워크를 효율적으로 관리
6. **네트워크 성능 향상**: 브로드캐스트 트래픽을 제어하여 네트워크 성능 향상

## IP 서브네팅: "3계층" 계층적 주소 체계

서브네팅은 기본적인 2계층 구조(네트워크 + 호스트)를 3계층 구조로 변환합니다:

**전환 전 (클래스 C 예시):**
```
네트워크 부분 | 호스트 부분
192.168.1.   | 0~255
```

**전환 후 (서브넷 적용):**
```
네트워크 부분 | 서브넷 부분 | 호스트 부분
192.168.1.   | XXX        | XXX
```

예를 들어, 클래스 C 네트워크 192.168.1.0/24를 4개의 서브넷으로 나누면:
- 192.168.1.0/26 (호스트 62개)
- 192.168.1.64/26 (호스트 62개)
- 192.168.1.128/26 (호스트 62개)
- 192.168.1.192/26 (호스트 62개)

## IP 서브넷 마스크, 표기법 및 계산 방법

### 서브넷 마스크의 역할

서브넷 마스크는 IP 주소의 어느 부분이 네트워크/서브넷 주소이고, 어느 부분이 호스트 주소인지 정의하는 32비트 숫자입니다.

**표기법 비교:**
1. **점으로 구분된 십진법**: 255.255.255.0
2. **CIDR 표기법**: /24 (네트워크 비트 수 표시)
3. **이진법**: 11111111.11111111.11111111.00000000

### 서브넷 계산 핵심 개념

**중요 용어:**
- **네트워크 주소**: 서브넷의 첫 번째 주소 (호스트 부분이 모두 0)
- **브로드캐스트 주소**: 서브넷의 마지막 주소 (호스트 부분이 모두 1)
- **사용 가능 호스트 주소 범위**: 네트워크 주소와 브로드캐스트 주소 사이의 주소

**계산 공식:**
```
1. 서브넷 수 = 2^(서브넷 비트 수)
2. 각 서브넷의 호스트 수 = 2^(호스트 비트 수) - 2
   (네트워크 주소와 브로드캐스트 주소 제외)
3. 서브넷 블록 크기 = 256 - 서브넷 마스크의 해당 옥텟 값
```

**실전 계산 예시:**
```
네트워크: 192.168.1.0/24
서브넷 마스크: 255.255.255.192 (/26)
서브넷 비트: 2비트 (26-24=2)
호스트 비트: 6비트 (32-26=6)

서브넷 수: 2^2 = 4개
각 서브넷 호스트 수: 2^6 - 2 = 62개
서브넷 블록: 256 - 192 = 64

서브넷 목록:
1. 192.168.1.0/26   (호스트: .1-.62)
2. 192.168.1.64/26  (호스트: .65-.126)
3. 192.168.1.128/26 (호스트: .129-.190)
4. 192.168.1.192/26 (호스트: .193-.254)
```

## 클래스 A, B, C에 대한 기본 서브넷 마스크

클래스 기반 주소 체계에서의 기본 서브넷 마스크:

```
클래스 A: 255.0.0.0    (/8)  → 네트워크.호스트.호스트.호스트
클래스 B: 255.255.0.0  (/16) → 네트워크.네트워크.호스트.호스트
클래스 C: 255.255.255.0 (/24) → 네트워크.네트워크.네트워크.호스트
```

**이진 표현:**
```
클래스 A: 11111111.00000000.00000000.00000000
클래스 B: 11111111.11111111.00000000.00000000
클래스 C: 11111111.11111111.11111111.00000000
```

## 사용자 정의 서브넷 마스크

기본 서브넷 마스크를 확장하여 네트워크를 더 작은 서브넷으로 분할합니다. 호스트 부분의 비트를 서브넷 부분으로 빌려옵니다.

**클래스 C 네트워크 서브네팅 예시 (192.168.1.0):**

| 서브넷 비트 수 | 서브넷 마스크 | CIDR | 서브넷 수 | 호스트/서브넷 | 블록 크기 |
|----------------|---------------|------|-----------|---------------|-----------|
| 1비트          | 255.255.255.128 | /25 | 2         | 126           | 128       |
| 2비트          | 255.255.255.192 | /26 | 4         | 62            | 64        |
| 3비트          | 255.255.255.224 | /27 | 8         | 30            | 32        |
| 4비트          | 255.255.255.240 | /28 | 16        | 14            | 16        |
| 5비트          | 255.255.255.248 | /29 | 32        | 6             | 8         |
| 6비트          | 255.255.255.252 | /30 | 64        | 2             | 4         |

## 단계별 서브네팅 설계 프로세스

### 1단계: 요구사항 분석

서브네팅 설계의 첫 단계는 네트워크 요구사항을 명확히 이해하는 것입니다. 다음과 같은 정보를 수집해야 합니다:

**수집해야 할 정보:**
- **할당된 네트워크 주소**: 예: 192.168.1.0/24
- **필요한 서브넷 수**: 조직 내 필요한 논리적 네트워크 단위 수
- **각 서브넷의 호스트 수**: 각 부서나 위치에 필요한 최대 장치 수
- **향후 성장 계획**: 미래 확장을 위한 여유분 고려

**예제 시나리오:**
```
회사에 192.168.1.0/24 주소 블록이 할당됨
필요한 서브넷: 5개 (영업부, 개발부, 관리부, 서버, 게스트)
각 서브넷 최대 호스트 수: 영업부(50), 개발부(30), 관리부(10), 서버(20), 게스트(10)
성장 여유: 약 20% 추가 확장 가능성
```

### 2단계: 핵심 설계 절충 - 네트워크 주소 호스트 비트 분할

이 단계에서는 **서브넷 수**와 **호스트 수** 사이의 균형을 찾아야 합니다. 각 서브넷은 네트워크 주소, 브로드캐스트 주소, 사용 가능한 호스트 주소로 구성됩니다:

```
서브넷당 사용 가능한 호스트 수 = 2^n - 2
(n = 호스트 비트 수)
```

**비트 할당 계산 프로세스:**

1. **필요한 서브넷 수에 따른 서브넷 비트 계산**:
   ```
   필요한 서브넷 수 ≤ 2^s
   (s = 서브넷 비트 수)
   ```

2. **호스트 비트와 서브넷 비트의 관계**:
   ```
   총 호스트 비트 = 원본 네트워크의 호스트 비트
   서브넷 비트 + 남은 호스트 비트 = 총 호스트 비트
   ```

**예제 계산:**
```
기본 네트워크: 192.168.1.0/24 (호스트 비트 8개)
필요한 서브넷: 5개

2^s ≥ 5 → s = 3 (2^3 = 8개 서브넷 가능)
남은 호스트 비트: 8 - 3 = 5비트
각 서브넷 최대 호스트: 2^5 - 2 = 30개
```

**문제점 발견:** 위 계산에서 최대 30개의 호스트만 가능하지만, 영업부는 50개 호스트가 필요합니다. 따라서 재설계가 필요합니다.

### 3단계: 커스텀 서브넷 마스크 결정 및 VLSM 적용

서브넷 마스크는 네트워크 부분과 호스트 부분을 구분하는 핵심 요소입니다. CIDR 표기법과 점으로 구분된 십진수 형식으로 표현됩니다.

**가변 길이 서브넷 마스킹(VLSM):**
VLSM은 같은 네트워크 내에서 다른 서브넷 마스크를 사용하는 기술로, 주소 공간을 더 효율적으로 활용할 수 있습니다. 서브넷마다 필요한 호스트 수가 다른 경우에 특히 유용합니다.

**VLSM의 필요성:**
- 서브넷마다 필요한 호스트 수가 다른 경우
- 점대점 WAN 링크에는 2개의 호스트만 필요
- 데이터센터에는 수백 개의 호스트 필요

**VLSM 적용 단계:**
1. 가장 큰 서브넷부터 할당
2. 순차적으로 다음 서브넷을 다음 사용 가능 주소에 할당
3. CIDR 블록이 겹치지 않도록 주의
4. 향후 확장을 위한 공간 확보

**VLSM 설계 예시 (새로운 접근법):**
요구사항이 다른 여러 서브넷을 효율적으로 할당하기 위해 VLSM을 사용합니다.

**단계적 할당:**

1. **가장 큰 서브넷부터 할당** (영업부: 50호스트):
   ```
   필요한 호스트 비트: 2^h - 2 ≥ 50 → h = 6 (62개 호스트 가능)
   서브넷 마스크: /26 (255.255.255.192)
   할당: 192.168.1.0/26
   범위: 192.168.1.1 - 192.168.1.62
   ```

2. **다음 서브넷** (개발부: 30호스트):
   ```
   필요한 호스트 비트: 2^h - 2 ≥ 30 → h = 5 (30개 호스트 가능)
   서브넷 마스크: /27 (255.255.255.224)
   할당: 192.168.1.64/27
   범위: 192.168.1.65 - 192.168.1.94
   ```

3. **나머지 서브넷**도 동일한 방식으로 계속 할당

**서브넷 마스크 변환 표:**
```
CIDR   서브넷 마스크        사용 가능 호스트
/24    255.255.255.0        254
/25    255.255.255.128      126
/26    255.255.255.192      62
/27    255.255.255.224      30
/28    255.255.255.240      14
/29    255.255.255.248      6
/30    255.255.255.252      2
/31    255.255.255.254      2 (특수 용도)
/32    255.255.255.255      1 (호스트 경로)
```

### 4단계: 서브넷 식별자와 서브넷 주소 결정

서브넷 식별자는 각 서브넷의 네트워크 주소를 나타냅니다. 서브넷 주소는 호스트 부분의 모든 비트가 0인 주소입니다.

**서브넷 주소 계산 방법:**
1. **서브넷 마스크에서 네트워크 비트 식별**
2. **서브넷 비트 부분을 변화시키며 주소 블록 생성**
3. **각 블록의 첫 주소가 서브넷 주소**

**예제: 192.168.1.0/26 서브네팅 시**
```
서브넷 마스크: 255.255.255.192 (11111111.11111111.11111111.11000000)
서브넷 비트: 2비트 (가능한 서브넷: 4개)

서브넷 0: 192.168.1.0/26   (00)
서브넷 1: 192.168.1.64/26  (01)
서브넷 2: 192.168.1.128/26 (10)
서브넷 3: 192.168.1.192/26 (11)
```

**IP 서브넷 식별자, 서브넷 주소 및 호스트 주소**

**서브넷 192.168.1.64/26의 구조 분석:**
```
IP 주소:    192   .   168   .   1     .   10000000
이진:       11000000.10101000.00000001.01 000000
            [네트워크 부분]  [서브넷][호스트]
서브넷 마스크: 255  .   255   .   255   .   11000000
```

**주소 구분:**
- **네트워크 주소**: 192.168.1.64 (호스트 부분이 모두 0)
- **첫 번째 호스트**: 192.168.1.65
- **마지막 호스트**: 192.168.1.126
- **브로드캐스트 주소**: 192.168.1.127 (호스트 부분이 모두 1)

**VLSM 적용 시 실제 할당 결과:**
```
1. 영업부:       192.168.1.0/26     (호스트: .1-.62)
2. 개발부:       192.168.1.64/27    (호스트: .65-.94)
3. 서버:         192.168.1.96/27    (호스트: .97-.126)
4. 관리부:       192.168.1.128/28   (호스트: .129-.142)
5. 게스트:       192.168.1.144/28   (호스트: .145-.158)
6. 미래용:       192.168.1.160/27   (호스트: .161-.190)
7. 추가 여유:    192.168.1.192/26   (호스트: .193-.254)
```

### 5단계: 각 서브넷의 호스트 주소 결정

각 서브넷에서 사용 가능한 호스트 주소 범위를 결정합니다. 모든 서브넷은 다음 구조를 가집니다:

```
[서브넷 주소] - [사용 가능 호스트 범위] - [브로드캐스트 주소]
```

**각 서브넷의 주소 구성:**
- **서브넷 주소**: 호스트 부분이 모두 0 (첫 주소)
- **사용 가능 호스트 주소**: 서브넷 주소 + 1부터 브로드캐스트 주소 - 1까지
- **브로드캐스트 주소**: 호스트 부분이 모두 1 (마지막 주소)

**상세 예제: 192.168.1.64/27 서브넷 분석**
```
이진수 분석:
네트워크 주소:  11000000.10101000.00000001.01000000 (192.168.1.64)
서브넷 마스크: 11111111.11111111.11111111.11100000 (255.255.255.224)

주소 범위:
서브넷 주소:     192.168.1.64   (호스트 비트: 00000)
첫 번째 호스트:  192.168.1.65   (호스트 비트: 00001)
...
마지막 호스트:   192.168.1.94   (호스트 비트: 11110)
브로드캐스트:    192.168.1.95   (호스트 비트: 11111)
```

**최종 할당표:**
```
서브넷          네트워크 주소    사용 가능 호스트 범위      브로드캐스트    호스트 수
영업부          192.168.1.0     192.168.1.1-62          192.168.1.63    62
개발부          192.168.1.64    192.168.1.65-94         192.168.1.95    30
서버            192.168.1.96    192.168.1.97-126        192.168.1.127   30
관리부          192.168.1.128   192.168.1.129-142       192.168.1.143   14
게스트          192.168.1.144   192.168.1.145-158       192.168.1.159   14
미래용          192.168.1.160   192.168.1.161-190       192.168.1.191   30
여유            192.168.1.192   192.168.1.193-254       192.168.1.255   62
```

## 클래스 A, B, C 네트워크 서브네팅 요약표

### 클래스 C 네트워크 서브네팅
```
서브넷 마스크    CIDR   서브넷 수  호스트/서브넷  주소 범위 예시
255.255.255.128  /25    2          126         0-127, 128-255
255.255.255.192  /26    4          62          0-63, 64-127, 128-191, 192-255
255.255.255.224  /27    8          30          0-31, 32-63, ... , 224-255
255.255.255.240  /28    16         14          0-15, 16-31, ... , 240-255
255.255.255.248  /29    32         6           0-7, 8-15, ... , 248-255
255.255.255.252  /30    64         2           0-3, 4-7, ... , 252-255
```

### 클래스 B 네트워크 서브네팅
```
서브넷 비트  서브넷 마스크      CIDR  서브넷 수  호스트/서브넷
2비트       255.255.192.0      /18   4          16382
4비트       255.255.240.0      /20   16         4094
8비트       255.255.255.0      /24   256        254
12비트      255.255.255.240    /28   4096       14
```

### 클래스 A 네트워크 서브네팅
```
서브넷 비트  서브넷 마스크      CIDR  서브넷 수  호스트/서브넷
8비트       255.255.0.0        /16   256        65534
12비트      255.255.240.0      /20   4096       4094
16비트      255.255.255.0      /24   65536      254
```

## 결론

IP 서브네팅은 단순한 기술적 절차를 넘어 **네트워크 아키텍처 설계의 핵심**입니다. 체계적인 5단계 접근법(요구사항 분석 → 비트 분할 설계 → 서브넷 마스크 결정 → 서브넷 주소 계산 → 호스트 주소 할당)을 통해 복잡한 네트워크 요구사항을 효율적으로 해결할 수 있습니다.

서브네팅의 진정한 가치는 **VLSM(가변 길이 서브넷 마스크)** 의 도입으로 더욱 빛을 발합니다. VLSM은 고정된 크기의 서브넷 할당에서 벗어나, 각 서브넷의 실제 필요에 맞춰 주소 공간을 유연하게 배분할 수 있게 함으로써 IPv4 주소의 소중한 자원을 최대한 활용할 수 있게 해줍니다. 이는 특히 제한된 공인 IP 주소를 가진 조직에서 절감 효과가 큽니다.

IP 서브네팅은 네트워크 엔지니어에게 필수적인 핵심 기술로, 제한된 IPv4 주소 공간을 최대한 효율적으로 활용하는 방법을 제공합니다. 단순한 주소 할당 기술을 넘어, 네트워크 성능 최적화, 보안 강화, 관리 효율성 향상을 가능하게 하는 종합적 설계 도구입니다.

성공적인 서브네팅 설계의 핵심은 현재의 요구사항과 미래의 성장 가능성 사이에서 최적의 균형을 찾는 것입니다. 너무 좁은 서브넷은 재설계를 유발하고, 너무 넓은 서브넷은 주소 낭비를 초래합니다. 또한, 서브네팅은 라우팅 테이블 최적화, 보안 정책 적용, 트래픽 관리 등 네트워크 운영의 여러 측면에 영향을 미치므로, 기술적 계산뿐만 아니라 조직의 비즈니스 요구사항과도 조화를 이루어야 합니다.

서브네팅을 효과적으로 활용하기 위해서는 이진법과 십진법 간의 변환에 능숙해야 하며, 네트워크 요구사항을 정확히 분석하여 적절한 서브넷 크기를 결정할 수 있어야 합니다. 특히 VLSM의 도입은 네트워크 설계의 유연성을 극대화하며, 실제 환경에서의 다양한 요구사항에 맞춤형 솔루션을 제공합니다.

오늘날 IPv6의 보급이 진행되고 있지만, 여전히 대부분의 네트워크는 IPv4 기반으로 운영되고 있으며, 서브네팅 기술은 네트워크 엔지니어에게 필수적인 역량으로 남아있습니다. 서브네팅 마스터리는 라우팅 테이블 최적화, 접근 제어 목록 설계, 네트워크 문제 해결 등 다양한 고급 네트워킹 기술의 기반이 됩니다. 따라서 이 분야에 대한 깊은 이해는 어떤 수준의 네트워크 엔지니어에게도 가장 가치 있는 투자 중 하나입니다.