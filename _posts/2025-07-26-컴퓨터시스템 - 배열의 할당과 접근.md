---
layout: post
title: μ»΄ν“¨ν„°μ‹μ¤ν… - λ°°μ—΄μ ν• λ‹Ήκ³Ό μ ‘κ·Ό
date: 2025-07-26 15:20:23 +0900
category: μ»΄ν“¨ν„°μ‹μ¤ν…
---
# π§  λ°°μ—΄μ ν• λ‹Ήκ³Ό μ ‘κ·Ό (Array Allocation and Access)

λ°°μ—΄(array)μ€ λ©”λ¨λ¦¬μ—μ„ μ—°μ†λ κ³µκ°„μ— λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ” λ€ν‘μ μΈ μλ£κµ¬μ΅°μ΄λ‹¤. μ»΄ν“¨ν„° μ‹μ¤ν…μ€ λ°°μ—΄μ„ λ§¤μ° λ‹¨μν•κ² μ·¨κΈ‰ν•μ§€λ§, κ³ κΈ‰ μ–Έμ–΄μ—μ„ μ¶”μƒν™”λ λ°°μ—΄ μ ‘κ·Όμ€ μ»΄νμΌλ¬μ— μν•΄ κΈ°κ³„ μμ¤€μ—μ„ νΉμ • μ£Όμ†λ΅ λ³€ν™λμ–΄ λ™μ‘ν•λ‹¤.

λ³Έ λ¬Έμ„μ—μ„λ” C μ–Έμ–΄ κΈ°μ¤€μΌλ΅ λ°°μ—΄μ μ„ μ–Έ, λ©”λ¨λ¦¬ ν• λ‹Ή, μ ‘κ·Ό, ν¬μΈν„° μ—°μ‚°, λ‹¤μ°¨μ› λ°°μ—΄ λ“±μ— λ€ν•΄ CS:APP κ΄€μ μ—μ„ λ§¤μ° μμ„Έν λ‹¤λ£¬λ‹¤.

---

## 1. λ°°μ—΄μ κΈ°λ³Έ κ°λ…

λ°°μ—΄μ€ λ™μΌν• νƒ€μ…μ λ°μ΄ν„°λ¥Ό μΌμ •ν• μμ„λ΅ μ €μ¥ν•κΈ° μ„ν• **μ—°μ†μ μΈ λ©”λ¨λ¦¬ κ³µκ°„**μ΄λ‹¤.

### π“ Cμ—μ„μ λ°°μ—΄ μ„ μ–Έ

```c
int a[5]; // μ •μν• λ°°μ—΄ 5κ° μ”μ†
```

ν•΄λ‹Ή μ„ μ–Έμ€ `int` νƒ€μ…μ λ©”λ¨λ¦¬ κ³µκ°„ 4λ°”μ΄νΈ Γ— 5 = 20λ°”μ΄νΈλ¥Ό μ—°μ†μ μΌλ΅ ν• λ‹Ήν•λ‹¤.

---

## 2. λ°°μ—΄κ³Ό λ©”λ¨λ¦¬ μ£Όμ†

### π“ μ£Όμ† κ³„μ‚° λ°©μ‹

μ»΄νμΌλ¬λ” λ°°μ—΄ μ ‘κ·Ό μ‹ μ•„λμ κ³„μ‚°μ„ μν–‰ν•μ—¬ μ‹¤μ  λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό κ³„μ‚°ν•λ‹¤.

```text
a[i] = *(a + i)
```

λ°°μ—΄ μ΄λ¦„ `a`λ” λ°°μ—΄μ μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¨λ‹¤. `a[i]`λ” `*(a + i)`λ΅ ν•΄μ„λλ©°, `i`λ” **νƒ€μ… ν¬κΈ°λ¥Ό κ³ λ ¤ν• μ¤ν”„μ…‹**μ΄λ‹¤.

### π“ μμ 

```c
int a[5];
a[2] = 10;
```

- λ°°μ—΄ `a`μ μ‹μ‘ μ£Όμ†κ°€ `0x1000`μ΄λΌλ©΄:
- `a[2]`λ” `0x1000 + (2 * 4) = 0x1008` μ„μΉλ¥Ό μλ―Έν•¨.

---

## 3. λ°°μ—΄κ³Ό ν¬μΈν„°

### π“ λ°°μ—΄ μ΄λ¦„μ€ ν¬μΈν„°μ²λΌ μ‚¬μ©λλ‹¤

λ°°μ—΄ μ΄λ¦„ `a`λ” μ‚¬μ‹¤μƒ `int*` νƒ€μ…μΌλ΅ ν•΄μ„λ  μ μμΌλ©°, μ»΄νμΌλ¬λ” μ΄λ¥Ό λ°°μ—΄ μ²« μ”μ†μ μ£Όμ†λ΅ κ°„μ£Όν•λ‹¤.

```c
int a[3] = {1, 2, 3};
printf("%d\n", *(a + 1)); // 2 μ¶λ ¥
```

### π“ μ°¨μ΄μ : λ°°μ—΄ vs ν¬μΈν„°

```c
int a[3];
int *p = a;

sizeof(a);  // 12 (λ°°μ—΄ μ „μ²΄ ν¬κΈ°)
sizeof(p);  // 8  (ν¬μΈν„° ν¬κΈ°, 64λΉ„νΈ κΈ°μ¤€)
```

λ°°μ—΄μ€ λ©”λ¨λ¦¬ κ³µκ°„μ„ ν¬ν•¨ν•μ§€λ§, ν¬μΈν„°λ” ν•΄λ‹Ή κ³µκ°„μ„ κ°€λ¦¬ν‚¬ λΏμ΄λ‹¤.

---

## 4. λ‹¤μ°¨μ› λ°°μ—΄

### π“ μ„ μ–Έ

```c
int matrix[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};
```

μ΄ λ°°μ—΄μ€ μ΄ 2 Γ— 3 = 6κ°μ `int` κ°’(24λ°”μ΄νΈ)μ„ μ—°μ†μ μΌλ΅ μ €μ¥ν•λ‹¤.

### π“ λ©”λ¨λ¦¬ κµ¬μ΅°

```
row-major λ°©μ‹:
[1][2][3][4][5][6]
```

μ¦‰, `matrix[1][2]`λ” λ©”λ¨λ¦¬ μƒμ—μ„ 5λ²μ§Έ μ”μ†μ΄λ‹¤.

### π“ μ£Όμ† κ³„μ‚°

```
matrix[i][j] = *(matrix[0] + i * 3 + j)
```

νΉμ€ 2μ°¨ ν¬μΈν„° `*(*(matrix + i) + j)` ν•νƒλ΅ μ ‘κ·Όν•  μλ„ μλ‹¤.

---

## 5. ν•¨μ μΈμμ™€ λ°°μ—΄

### π“ λ°°μ—΄μ„ ν•¨μ μΈμλ΅ λ„κΈ°κΈ°

```c
void print_arr(int arr[], int n) {
    for (int i = 0; i < n; ++i)
        printf("%d ", arr[i]);
}
```

- `int arr[]`λ” μ‚¬μ‹¤μƒ `int* arr`λ΅ μ „λ‹¬λ¨
- λ°°μ—΄ ν¬κΈ° μ •λ³΄λ” μ „λ‹¬λμ§€ μ•μ β†’ λ°λ“μ‹ ν¬κΈ°λ¥Ό λ”°λ΅ μ „λ‹¬ν•΄μ•Ό ν•¨

---

## 6. λ°°μ—΄κ³Ό μ¤νƒ / ν™

### π“ μ¤νƒμ— ν• λ‹Ήλ λ°°μ—΄

```c
void foo() {
    int a[100]; // μ¤νƒμ— 400λ°”μ΄νΈ ν• λ‹Ή
}
```

ν•¨μ νΈμ¶ μ‹ μ¤νƒ ν”„λ μ„μ— λ°°μ—΄μ΄ μƒμ„±λκ³ , ν•¨μ μΆ…λ£ μ‹ μ†λ©Έλλ‹¤.

### π“ ν™μ— ν• λ‹Ήλ λ°°μ—΄

```c
int* a = malloc(sizeof(int) * 100);
```

- λ°νƒ€μ„ μ‹ λ™μ μΌλ΅ 400λ°”μ΄νΈ ν• λ‹Ή
- `free(a);`λ¥Ό νΈμ¶ν•΄μ•Ό λ©”λ¨λ¦¬ λ„μ λ°©μ§€

---

## 7. λ°°μ—΄ μΈλ±μ‹±μ κΈ°κ³„μμ¤€ ν‘ν„

### π“ μ–΄μ…λΈ”λ¦¬ κ΄€μ μ λ°°μ—΄ μ ‘κ·Ό

```c
int a[5];
a[2] = 10;
```

- `a`μ μ£Όμ†λ¥Ό `rdi`μ— λ‹΄μ•λ‹¤κ³  κ°€μ •
- `a[2]` β†’ `movl $10, 8(%rdi)` (32λΉ„νΈ μ •μ, μ¤ν”„μ…‹ 8λ°”μ΄νΈ)

---

## 8. κ²½κ³„ κ²€μ‚¬ λ―Έμ§€μ›

Cμ—μ„λ” λ°°μ—΄ μ ‘κ·Ό μ‹ κ²½κ³„ κ²€μ‚¬λ¥Ό ν•μ§€ μ•λ”λ‹¤.

```c
int a[5];
a[10] = 100; // μ»΄νμΌ μ—λ¬ μ—†μ β†’ λ°νƒ€μ„ μ¤λ¥ λλ” undefined behavior
```

λ”°λΌμ„ `buffer overflow`μ™€ κ°™μ€ λ³΄μ• μ·¨μ•½μ μ΄ λ°μƒν•  μ μλ‹¤.

---

## 9. λ¬Έμμ—΄κ³Ό λ°°μ—΄

```c
char str[6] = "hello";
```

- λ¬Έμμ—΄μ€ `char` λ°°μ—΄λ΅ κµ¬ν„λ¨
- λ§μ§€λ§‰μ—λ” null λ¬Έμ `'\0'`μ΄ λ“¤μ–΄κ°€μ•Ό ν•¨ β†’ `6`λ°”μ΄νΈ ν•„μ”

### π“ λ¬Έμμ—΄μ€ ν¬μΈν„°λ΅λ„ ν‘ν„λ¨

```c
char *msg = "hello";
```

- `"hello"`λ” μ½κΈ° μ „μ© λ©”λ¨λ¦¬ μμ—­(ν…μ¤νΈ μ„Ήμ…)μ— μ €μ¥λ¨
- `msg`λ” ν•΄λ‹Ή μ„μΉλ¥Ό κ°€λ¦¬ν‚΄

---

## 10. λ°°μ—΄κ³Ό κµ¬μ΅°μ²΄μ μ°¨μ΄

### π“ λ°°μ—΄

- λ©”λ¨λ¦¬μƒμ— **λ™μΌν• νƒ€μ…**μ„ **μ—°μ†μ μΌλ΅** μ €μ¥
- μΈλ±μ¤λ΅ μ ‘κ·Ό

### π“ κµ¬μ΅°μ²΄

- **μ„λ΅ λ‹¤λ¥Έ νƒ€μ…**μ„ ν¬ν•¨ κ°€λ¥
- ν•„λ“ μ΄λ¦„μΌλ΅ μ ‘κ·Ό

```c
struct Point {
    int x;
    int y;
};

struct Point p;
p.x = 10;
```

---

## 11. λ‹¤μ°¨μ› λ°°μ—΄κ³Ό ν¬μΈν„° μ—°μ‚°

```c
int matrix[4][5];
matrix[2][3] = 7;
```

- μ£Όμ† κ³„μ‚°: `matrix + 2` β†’ μ„Έ λ²μ§Έ ν–‰μ μ‹μ‘ μ£Όμ†
- `*(matrix + 2) + 3` β†’ μ„Έ λ²μ§Έ ν–‰μ λ„¤ λ²μ§Έ μ”μ†

---

## 12. λ°°μ—΄ νλΌλ―Έν„°μ™€ ν¬μΈν„° νλΌλ―Έν„°

```c
void print_matrix(int m[4][5]);     // OK
void print_matrix(int (*m)[5]);     // λ™μΌν• μλ―Έ
```

β†’ λ°°μ—΄ ν¬κΈ°λ” κ³ μ •μ΄μ–΄μ•Ό ν•λ©°, λ‹¤μ°¨μ› λ°°μ—΄μΌ κ²½μ° **λ‘ λ²μ§Έ ν¬κΈ°λ¶€ν„° λ…μ‹**ν•΄μ•Ό μ£Όμ† κ³„μ‚°μ΄ κ°€λ¥ν•¨.

---

## 13. λ‹¤μ°¨μ› λ°°μ—΄μ λ©”λ¨λ¦¬ λ μ΄μ•„μ›ƒ

```c
int a[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};
```

### π“ λ©”λ¨λ¦¬:

```
[1][2][3][4][5][6] (row-major order)
```

---

## 14. λ°°μ—΄κ³Ό ν•¨μ νΈμ¶ μ‹μ ν¬μΈν„° μ—°μ‚°

```c
void fill(int* a, int n) {
    for (int i = 0; i < n; i++)
        a[i] = i;
}
```

β†’ `a[i]`λ” `*(a + i)`λ΅ μ»΄νμΌλ¨.

---

## 15. λ°°μ—΄ μ΄κΈ°ν™”

```c
int a[5] = {1, 2}; // λ‚λ¨Έμ§€λ” 0μΌλ΅ μ΄κΈ°ν™”λ¨
```

- `{1, 2, 0, 0, 0}`

---

## 16. λ°°μ—΄κ³Ό μ •λ ¬, νƒμƒ‰ λ“± μ•κ³ λ¦¬μ¦

λ°°μ—΄μ€ λ‹¤μ–‘ν• μ•κ³ λ¦¬μ¦(μ •λ ¬, νƒμƒ‰, μ¬λΌμ΄λ”© μλ„μ° λ“±)μ—μ„ ν•µμ‹¬ μλ£κµ¬μ΅°λ΅ μ‚¬μ©λλ‹¤. λ°°μ—΄μ€ μΈλ±μ¤ κΈ°λ° μ ‘κ·Όμ΄ λΉ λ¥΄λ―€λ΅ CPU μΊμ‹μ™€ ν•¨κ» μ„±λ¥ μµμ ν™”μ— μ λ¦¬ν•λ‹¤.

---

## β… μ •λ¦¬

| ν•­λ© | μ„¤λ… |
|------|------|
| λ°°μ—΄ μ΄λ¦„ | μ‹μ‘ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„° |
| λ°°μ—΄ μ ‘κ·Ό | ν¬μΈν„° μ—°μ‚°κ³Ό λ™μΌ |
| λ‹¤μ°¨μ› λ°°μ—΄ | row-major λ°©μ‹ |
| ν•¨μ μ „λ‹¬ | ν¬μΈν„°λ΅ μ „λ‹¬λ¨ |
| μ£Όμ† κ³„μ‚° | `a + i * sizeof(type)` |
| μ¤νƒ/ν™ ν• λ‹Ή | μ§€μ—­/λ™μ  ν• λ‹Ή |
| κ²½κ³„ κ²€μ‚¬ | μ—†μ (μ£Όμ!) |

---

## π“ μ°Έκ³  μμ : ν¬μΈν„°λ΅ 2μ°¨μ› λ°°μ—΄ μ²λ¦¬

```c
#include <stdio.h>

void print_matrix(int (*a)[3], int rows) {
    for (int i = 0; i < rows; ++i)
        for (int j = 0; j < 3; ++j)
            printf("a[%d][%d] = %d\n", i, j, a[i][j]);
}

int main() {
    int mat[2][3] = { {1, 2, 3}, {4, 5, 6} };
    print_matrix(mat, 2);
    return 0;
}
```

---

## π“ κ²°λ΅ 

- λ°°μ—΄μ€ λ©”λ¨λ¦¬ μƒμ—μ„ **μ—°μ†μ μΈ κ³µκ°„**μ„ ν™μ©ν•λ―€λ΅, μ£Όμ† κ³„μ‚°μ΄ λ‹¨μν•κ³  λΉ λ¥΄λ‹¤.
- Cμ—μ„λ” λ°°μ—΄κ³Ό ν¬μΈν„°κ°€ λ°€μ ‘ν• κ΄€κ³„λ¥Ό κ°€μ§€λ©°, λ‹¤μ°¨μ› λ°°μ—΄μ€ μ‹¤μ§μ μΌλ΅ μΌμ°¨μ› λ°°μ—΄κ³Ό λ‹¤λ¥΄μ§€ μ•λ‹¤.
- κ²½κ³„ κ²€μ‚¬ λ―Έμ§€μ›μΌλ΅ μΈν• **λ³΄μ• μ·¨μ•½μ **μ΄ μ΅΄μ¬ν•λ©°, λ™μ  λ°°μ—΄ μ‚¬μ© μ‹ λ©”λ¨λ¦¬ ν•΄μ λ¥Ό μμ§€ μ•μ•„μ•Ό ν•λ‹¤.

μ»΄ν“¨ν„° μ‹μ¤ν…μ„ μ΄ν•΄ν•κΈ° μ„ν•΄ λ°°μ—΄μ λ©”λ¨λ¦¬ ν‘ν„μ„ λ…ν™•ν μ΄ν•΄ν•λ” κ²ƒμ€ ν•„μμ μ΄λ‹¤.