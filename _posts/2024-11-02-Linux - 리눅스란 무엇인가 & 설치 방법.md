---
layout: post
title: Linux - 리눅스란 무엇인가 & 설치 방법
date: 2024-11-02 19:20:23 +0900
category: Linux
---
# 리눅스란 무엇인가 & 설치 방법

## 리눅스란 무엇인가?
- **정의**: 리눅스는 **커널**을 핵심으로 하는 유닉스 계열 운영체제 생태계다.
- **역사**: 1991년 리누스 토르발스가 공개한 커널에서 시작, 전 세계 기여로 성장.
- **커널 vs 운영체제**: 커널(자원관리) + 유틸리티/패키지/설치기/서비스 관리 체계까지 포함한 묶음이 일반적으로 “배포판”.
- **오픈 소스/GPL**: 수정·복제·배포 자유(카피레프트), 생태계 공동 발전 기반.
- **주요 특징**: 안정성, 보안성, 이식성, 자동화 친화적 도구 체인.

## 유닉스와 리눅스의 관계
- 유닉스 철학(작은 프로그램, 조합, 텍스트 중심)을 계승.
- 유닉스는 상표·상업적 뿌리, 리눅스는 GPL 하에 자유로운 발전.

## 배포판(Distribution) 선택 가이드
- **배포판이란**: 커널 + 기본 유틸리티 + 패키지 관리자 + 설치기 + 문서/도구의 묶음.
- **추천 분류**
  - 입문/데스크톱/서버: Ubuntu LTS, Linux Mint, Fedora
  - 보수적 안정성/서버: Debian, AlmaLinux/Rocky
  - 최신/학습: Arch, openSUSE Tumbleweed
- **간단 비교**

| 배포판 | 기반 | 패키지 | 한 줄 특징 |
|---|---|---|---|
| Ubuntu LTS | Debian | apt | 입문·서버 균형, 자료 풍부 |
| Debian | - | apt | 최고 수준 안정성 |
| Fedora | RHEL | dnf | 최신 기술 반영, 워크스테이션 강력 |
| Alma/Rocky | RHEL | dnf | RHEL 호환, 기업 서버 대체 |
| Arch | 독립 | pacman | 롤링, 자기주도, ArchWiki |
| openSUSE TW | 독립 | zypper | 롤링+Btrfs 스냅샷 |

## 설치 방법 개요(상황별 선택)
- **WSL**: 윈도우 사용자의 가장 빠른 시작. 저수준 실습은 제한.
- **가상 머신**: 스냅샷/롤백으로 안전 실험. 성능은 네이티브 대비 낮음.
- **듀얼부트/베어메탈**: 네이티브 성능, 실제 드라이버·부트까지 학습.
- **클라우드**: 원격 서버 운영·배포 경험, 퍼블릭 네트워킹 포함.

## WSL 설치와 첫 세팅(Windows 10/11)
```powershell
# 관리자 PowerShell
wsl --install
wsl --list --online
wsl --install -d Debian
```
```bash
# 배포판 최초 실행 후
sudo apt update && sudo apt -y upgrade
```
- **파일시스템 팁**: 리눅스 홈 `\\wsl$\Ubuntu\home\<user>` / 윈도우 드라이브 `/mnt/c`.
- **네트워크**: WSL2는 가상 NIC. 기본적으로 `localhost` 포워딩 지원.

## 가상 머신(예: VirtualBox) 설치 절차
- **준비물**: 배포판 ISO(예: ubuntu-24.04 ISO), VT-x/AMD-V 활성화.
- **절차**: 새 VM → CPU/RAM/디스크 설정 → ISO 부팅 → 설치 마법사.
- **게스트 확장**: 해상도/클립보드/공유폴더 개선.
```bash
sudo mkdir -p /mnt/shared
sudo mount -t vboxsf SharedName /mnt/shared
```

## 듀얼부트/베어메탈 설치 핵심 포인트
- **파티션**: ESP(512MB~1GB, FAT32, `/boot/efi`), `/`(30~50GB+), `/home`(여유 대부분), `swap`(RAM 크기 고려).
- **파일시스템 선택**
  - LUKS: 디스크 암호화(노트북 권장)
  - LVM: 볼륨 확장·스냅샷
  - Btrfs: 서브볼륨·스냅샷(snapper), 롤백 편리
  - ZFS: 무결성·스냅샷·복제(라이선스 주의)
```bash
# Ubuntu NVIDIA 드라이버
ubuntu-drivers list
sudo ubuntu-drivers autoinstall
```

## 클라우드에서 리눅스 시작(EC2 예시)
```bash
# 로컬
chmod 600 my-key.pem
ssh -i my-key.pem ubuntu@203.0.113.10

# 원격
sudo apt update && sudo apt -y upgrade
sudo adduser dev && sudo usermod -aG sudo dev
sudo apt install -y nginx
sudo systemctl enable --now nginx
```
- **보안그룹**: 22/80/443 등 필요한 포트만 허용.

## 설치 직후 필수 초기 세팅(공통 아이디어)
```bash
# 업데이트/기본 도구
sudo apt update && sudo apt -y upgrade
sudo apt install -y build-essential curl wget git vim htop zip unzip

# 시간/로케일
sudo timedatectl set-timezone Asia/Seoul
sudo locale-gen ko_KR.UTF-8 en_US.UTF-8
sudo update-locale LANG=ko_KR.UTF-8

# 사용자/권한
sudo adduser dev
sudo usermod -aG sudo dev   # Debian/Ubuntu
```
```bash
# SSH 보안(서버)
ssh-keygen -t ed25519 -C "me@example.com"
ssh-copy-id dev@server
sudoedit /etc/ssh/sshd_config   # PasswordAuthentication no, 등
sudo systemctl restart ssh
```
```bash
# 방화벽(UFW)
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow OpenSSH
sudo ufw allow 80
sudo ufw enable
```

## 패키지 관리 핵심(apt/dnf/pacman/zypper)
| 동작 | Debian/Ubuntu | Fedora/RHEL | Arch | openSUSE |
|---|---|---|---|---|
| 업데이트 | `sudo apt update && sudo apt upgrade` | `sudo dnf upgrade` | `sudo pacman -Syu` | `sudo zypper dup` |
| 설치 | `sudo apt install` | `sudo dnf install` | `sudo pacman -S` | `sudo zypper install` |
| 제거 | `sudo apt remove` | `sudo dnf remove` | `sudo pacman -R` | `sudo zypper remove` |
| 검색 | `apt search` | `dnf search` | `pacman -Ss` | `zypper search` |

## 파일 시스템·권한·필수 셸 명령 30선
- **권한 8진수 수식**  
  $$
  \text{perm} = 4\cdot I(r) + 2\cdot I(w) + 1\cdot I(x)
  $$
```bash
# 예: 소유자=rwx, 그룹=rx, 기타=---
chmod 750 run.sh
chown dev:dev run.sh
```
```bash
# 30선(발췌)
pwd; ls -lah; cd /etc
cat /etc/os-release; less /var/log/syslog
head -n 20 file.log; tail -f /var/log/nginx/access.log
grep -R "Listen 80" /etc/apache2
find /var/www -type f -name "*.php" -mtime -7
cp app.conf{,.bak}; mv old.txt archive/old_$(date +%F).txt; rm -rf build/
ln -s /opt/tool/bin/tool /usr/local/bin/tool
du -sh /var/log; df -h
tar -czf logs.tgz /var/log/nginx; unzip data.zip -d /data
curl -I https://example.com; wget -O index.html https://example.com
sudo systemctl enable --now nginx; sudo journalctl -u nginx --since "1 hour ago"
ps aux | grep postgres; top; htop
sudo useradd -m -s /bin/bash app; sudo usermod -aG sudo app; sudo passwd app
ip a; ip r; ss -tulpn
sudo ufw status
sudo apt install -y build-essential
rsync -avz /var/www/ user@host:/backup/www/
scp -i key.pem file user@host:/tmp/
chmod 640 secret.txt; sudo chown root:root /etc/secure.conf
crontab -e
sed -n '1,100p' file.txt; awk -F, '{sum+=$3} END{print sum}' data.csv
export PATH="/usr/local/bin:$PATH"
which python3; whereis nginx
sudo mount /dev/sdb1 /mnt/data; sudo umount /mnt/data
lsblk -f; blkid
dmesg | tail
```

## 네트워킹 기초(설정·디버깅)
```bash
hostnamectl set-hostname mylab
cat /etc/hosts
```
```yaml
# Netplan 예시(Ubuntu Server) /etc/netplan/01-netcfg.yaml
network:
  version: 2
  ethernets:
    ens18:
      dhcp4: no
      addresses: [192.0.2.10/24]
      gateway4: 192.0.2.1
      nameservers:
        addresses: [1.1.1.1, 8.8.8.8]
```
```bash
sudo netplan apply
sudo ss -tulpn
sudo ufw allow 8080/tcp
```
```bash
# SSH 터널(로컬→원격)
ssh -L 127.0.0.1:8080:127.0.0.1:80 dev@server
```

## 실전 1: WSL(Ubuntu)로 Flask 서버
```bash
sudo apt update && sudo apt install -y python3-venv python3-pip
python3 -m venv .venv && source .venv/bin/activate
pip install flask
cat > app.py <<'PY'
from flask import Flask
app = Flask(__name__)
@app.get("/")
def hello():
    return "Hello, Linux on WSL!"
if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000)
PY
python app.py
```

## 실전 2: VM(Ubuntu)에서 NGINX + systemd 서비스
```bash
sudo apt update && sudo apt install -y nginx
sudo systemctl enable --now nginx
sudo tee /etc/systemd/system/hello.service >/dev/null <<'UNIT'
[Unit]
Description=Hello Service
After=network.target
[Service]
ExecStart=/usr/bin/socat - TCP-LISTEN=9000,fork,bind=0.0.0.0 SYSTEM:"echo HTTP/1.1 200 OK; echo; echo Hello-From-Systemd"
Restart=always
[Install]
WantedBy=multi-user.target
UNIT
sudo systemctl daemon-reload
sudo systemctl enable --now hello.service
curl http://127.0.0.1:9000
```

## 실전 3: 듀얼부트 머신에서 Docker 체험
```bash
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER
newgrp docker
docker run --rm hello-world
docker run -d --name web -p 8080:80 nginx
curl http://127.0.0.1:8080
```

## 실전 4: EC2로 정적 사이트 호스팅
```bash
sudo apt update && sudo apt install -y nginx
echo "Hello Cloud" | sudo tee /var/www/html/index.html
sudo systemctl enable --now nginx
sudo ufw allow OpenSSH
sudo ufw allow 80
sudo ufw --force enable
```

## 트러블슈팅 모음
- **GRUB/부팅 실패**: UEFI/Legacy 모드 혼용 금지. 라이브 ISO → chroot → GRUB 재설치.
```bash
sudo mount /dev/nvme0n1p3 /mnt
sudo mount /dev/nvme0n1p1 /mnt/boot/efi
for i in /dev /proc /sys /run; do sudo mount --bind $i /mnt$i; done
sudo chroot /mnt
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ubuntu
update-grub
exit
sudo reboot
```
- **네트워크 문제**: `ip a`, `dmesg | grep -i firmware`, VM 어댑터 모드(NAT/Bridge) 점검.
- **그래픽/해상도**: VM 게스트 추가, 실기기 드라이버 변경.
- **SELinux 이슈(RHEL계열)**: `/var/log/audit/audit.log` 분석, 필요 시 정책 조정.

## 확장 주제: 암호화·스냅샷·백업·컨테이너
```bash
# LUKS 예시
sudo cryptsetup luksFormat /dev/sdb
sudo cryptsetup open /dev/sdb securedata
sudo mkfs.ext4 /dev/mapper/securedata
sudo mount /dev/mapper/securedata /mnt/secure
```
```bash
# Btrfs/ZFS 스냅샷
sudo snapper create --description "pre-upgrade"
sudo zfs snapshot pool/dataset@pre-upgrade
```
```bash
# rsync/restic 백업
rsync -a --delete /home/dev/ /mnt/backup/home/
restic -r /mnt/backup/restic init
restic -r /mnt/backup/restic backup /home/dev
```
```bash
# 컨테이너(Podman)
podman run -it --rm alpine sh
```

## FAQ
- **WSL vs VM vs 듀얼부트?** 시작/개발은 WSL, 안전한 실험은 VM, 성능·저수준 학습은 듀얼부트.
- **LTS가 좋은가 최신이 좋은가?** 서버·업무는 LTS, 최신 스택 학습은 Fedora/롤링.
- **Stable에서 패키지가 오래된 느낌?** 백포트·Flatpak·Container 활용.

## 체크리스트(빠른 길)
- **지금 체험**: `wsl --install` → `sudo apt update && sudo apt -y upgrade`
- **안전 연습**: VirtualBox + 스냅샷 → `nginx`·`systemctl`·`journalctl`
- **실기기**: 데이터 백업 → 파티션 설계 → 드라이버·방화벽·업데이트
- **서버 입문**: EC2/GCE → SSH 키 접속 → UFW/HTTPS 설정

## 부록 A: 설치 전 권장 점검
- UEFI/Legacy 일관성, Secure Boot 필요 시 해제/서명, NVMe/RAID 모드 확인, 전체 백업.

## 부록 B: 설치 자동화 스니펫(cloud-init)
```bash
#cloud-config
users:
  - name: dev
    groups: sudo
    shell: /bin/bash
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    ssh_authorized_keys:
      - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI...

packages: [git, htop, nginx]
runcmd:
  - systemctl enable --now nginx
  - ufw allow OpenSSH
  - ufw allow 80
  - ufw --force enable
```

## 결론
- 리눅스는 커널이자 생태계로서 현대 인프라의 기반이다.
- 시작 경로는 목적에 맞춰 WSL→VM→듀얼부트/클라우드로 선택하자.
- 본 글은 설치·초기세팅·명령·네트워크·배포 실습까지 **빠짐없이** 재정리했다. 다음 편에서는 프로세스/스토리지/보안/자동화를 더 깊이 다룬다.