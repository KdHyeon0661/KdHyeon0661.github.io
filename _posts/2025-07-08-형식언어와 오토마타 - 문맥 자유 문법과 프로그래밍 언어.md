---
layout: post
title: 형식언어와 오토마타 - 문맥 자유 문법과 프로그래밍 언어
date: 2025-07-08 23:20:23 +0900
category: 형식언어와 오토마타
---
# 문맥 자유 문법과 프로그래밍 언어

---

## ✅ 1. 문맥 자유 문법이란?

**문맥 자유 문법(Context-Free Grammar, CFG)**은 형식 언어 이론에서  
문자열(언어)을 생성하는 규칙들의 집합으로, 다음과 같은 형식의 규칙을 사용한다:

> \\( A \to \alpha \\)

- \\( A \\): 단 하나의 **비터미널 기호**
- \\( \alpha \\): 터미널/비터미널 기호들의 문자열

이 문법은 **재귀적 구조**, **중첩 구조**, **우선순위**, **결합법칙** 등을 표현하는 데 강력하며,  
특히 **프로그래밍 언어의 문법 정의**에 매우 적합하다.

---

## 📘 2. 프로그래밍 언어의 문법 정의

### 왜 문법이 필요한가?

프로그래밍 언어는 사람이 작성한 **문자열(코드)**을 컴퓨터가 **구조적으로 해석**할 수 있도록 명확히 정의해야 한다.

- 어떤 코드가 **문법적으로 올바른지 판단**해야 한다.
- 올바른 코드라면 **그 구조를 파악**해야 한다.
- 구조를 기반으로 **의미 해석(semantic analysis)**, **실행 코드 생성(code generation)** 등이 이루어진다.

이 모든 기초가 되는 것이 **문법**이며, 대부분의 프로그래밍 언어는 그 문법을 **CFG로 정의**한다.

---

## 🧩 3. CFG가 프로그래밍 언어에 적합한 이유

| 이유 | 설명 |
|------|------|
| **중첩 표현** | 중괄호 `{}`, 괄호 `()`, 조건문 중첩 등 구조적 표현 가능 |
| **재귀적 구조** | 함수 정의, 표현식에서 재귀적으로 호출되는 구조 처리 |
| **단순한 형식** | CFG는 간단한 규칙이지만 표현력은 강력 |
| **파싱 이론과 결합** | LL, LR 파싱으로 구현이 용이함 |

---

## 🔣 4. 프로그래밍 언어 문법의 CFG 예시

### (1) 수식(Expression)

문법:
```
E → E + T | T
T → T * F | F
F → (E) | id
```

이 문법은 `id + id * id` 같은 수식을 다음과 같이 해석한다:

- 연산자 `*`는 `+`보다 우선순위가 높다
- 괄호로 우선순위를 명시할 수 있다

### (2) 조건문

```
Stmt → if (Expr) Stmt else Stmt
     | while (Expr) Stmt
     | { StmtList }
     | id = Expr ;
```

프로그래밍 언어의 조건문, 반복문, 블록 구조 등을 CFG로 자연스럽게 정의할 수 있다.

---

## ⚠️ 5. 문법 정의 시 고려할 점

### (1) 모호성(Ambiguity)

- 하나의 코드가 **여러 개의 구문 트리(Parse Tree)**를 가질 수 있으면 **문법이 모호함**
- → **의미 해석이 불가능**하거나 **예측 불가능한 동작** 발생

### (2) 연산자 우선순위 / 결합법칙

- 수식 문법에서는 연산자들의 **우선순위와 결합 방향**을 정확히 반영해야 함
- 예: `a - b - c` → `(a - b) - c` ← 좌결합

### (3) LL(1) 또는 LR(1) 문법으로의 변환

- 실제 파서(컴파일러)는 CFG 전체가 아니라 **제한된 CFG(LL, LR)**만 처리 가능
- 따라서 **문법을 단순화**하거나 **좌측 공통 인자 제거**, **좌측 재귀 제거** 등을 수행해야 함

---

## 🧠 6. 실제 예시: JavaScript의 간단한 문법 (ECMAScript)

ECMAScript 사양 문서에서도 CFG 형태의 문법을 사용한다.

예:
```
AdditiveExpression → MultiplicativeExpression
                   | AdditiveExpression + MultiplicativeExpression
                   | AdditiveExpression - MultiplicativeExpression
```

이는 우리가 위에서 본 수식 문법과 같은 구조이며,  
실제로 브라우저 엔진(V8, SpiderMonkey 등)은 이를 기반으로 **파서를 자동 생성**한다.

---

## 🛠️ 7. 문법 기반 컴파일러 구조

CFG는 컴파일러의 다음 단계에 핵심적으로 작용한다:

| 단계 | 설명 |
|------|------|
| **Lexical Analysis** | 토큰 단위로 분할 (정규 언어 기반) |
| **Parsing (Syntax Analysis)** | CFG 기반 파싱, Parse Tree 생성 |
| **Semantic Analysis** | 의미 검사, 타입 체크 등 |
| **Intermediate Code Generation** | AST → IR로 변환 |
| **Optimization / Code Generation** | 효율적 기계어로 변환 |

---

## 🧾 8. 요약

| 항목 | 설명 |
|------|------|
| CFG란? | 단일 비터미널 → 기호열로의 생성 규칙 모음 |
| 프로그래밍 언어와의 관계 | 언어의 구조적 문법 정의에 적합 |
| 문법 정의 요소 | 재귀, 중첩, 연산 우선순위, 조건문, 반복문 등 |
| 주의사항 | 모호성 제거, 우선순위 표현, 파서 호환성 유지 |
| 실용 예시 | JavaScript, Python, C 등의 공식 문법 사양도 CFG 기반 |
| 응용 | 컴파일러, IDE 자동 완성, 정적 분석 도구 등에 활용 |