---
layout: post
title: 정보통신기사 - 교환기 · VoIP 단말 · 코덱
date: 2025-08-22 09:25:23 +0900
category: 정보통신기사
---
# 교환기 · VoIP 단말 · 코덱 총정리 (tx-switch-voip-codec)

> **목표**: 정보통신기사 필기 + 실무 감각으로 **교환기(스위치)**, **VoIP 단말/망요소**, **음성 코덱**을 한 번에 정리합니다.  
> (1) PSTN/사설교환(PBX)/소프트스위치/IMS 구조 →  
> (2) SIP/SDP/RTP 콜플로우/DTMF/팩스 →  
> (3) 코덱(PCM/ADPCM/ACELP/AMR/Opus) 성능/대역폭 계산 →  
> (4) 품질(QoS/MOS/E-model)/지터버퍼/패킷손실대응 →  
> (5) NAT/보안(SRTP/TLS/DTLS/ICE) →  
> (6) 트러블슈팅/연습문제까지 **생략 없이** 담았습니다. 수식은 **MathJax**로, 메시지/설정은 코드블록으로 제공합니다.

---

## 0) 큰 그림: 음성 서비스의 세 층

- **교환기(Switch)**: **호 제어/라우팅/자원 제어**.  
  - TDM 시대: **국가망 교환기(Class 4/5)**, 사내 **PBX**.  
  - IP 시대: **소프트스위치/IMS**(SIP 시그널링, MGW 제어, SBC 경계).
- **단말/게이트웨이(Endpoint/GW)**: **코덱 인코딩/디코딩 + RTP 송수신**, DTMF/에코캔슬/지터버퍼.  
  - IP Phone/ATA/소프트폰, **MGW**(TDM↔IP), **SBC**(NAT/보안/정책).
- **코덱/미디어**: **G.711/729/AMR/Opus** 등 → **지연/대역폭/품질**의 트레이드오프.

---

## 1) 교환기(Switch) 계열 — PSTN→IP로의 진화

### 1.1 PSTN 교환기 개념
- **Class 5(가입자)**: 가입자선로 종단, 다이얼톤/번호분석/로컬호.  
- **Class 4(중계/국간)**: 트렁크 집선/국간 라우팅.  
- **SS7**: MTP(전송), ISUP(호설정), SCCP/TCAP(IN 서비스).  
- **TDM 스위칭**: **TSI(Time Slot Interchange)**, **Space Switching**(크로스포인트).

### 1.2 사설교환(PBX)
- **디지털 PBX → IP-PBX**로 진화: 내부 **SIP 레지스트라/프록시** 보유, 회선은 **SIP Trunk/PRI**.  
- **기능**: 착신전환/그룹호/IVR/ACD/통화녹취/CTI/UC 연동.

### 1.3 소프트스위치/IMS
- **Softswitch**: SIP 서버(Proxy/Registrar/LB), **MGCF/MGW** 제어(**H.248/MGCP**), 라우팅 정책.  
- **IMS(VoLTE)**: P-CSCF/I-CSCF/S-CSCF + HSS, PCRF/PCF, **SBC 기능 통합**.  
- **SIP-T/SIP-I**: ISUP을 SIP 메세지에 캡슐화(망간/레거시 연동).

### 1.4 SBC(Session Border Controller)
- **보안/NAT/정책/CAC**: TLS/SRTP 종료, **미디어 릴레이**, 탑올로지 은닉, 레이트리밋, 헤더정규화, **SIP ALG 대체**.  
- **QoE 모니터링**: RTCP/RTCP-XR 분석, 통화중 코덱 재협상/리다이렉트.

---

## 2) VoIP 단말/망요소 — 구성과 동작

### 2.1 단말 유형
- **IP Phone(하드폰)**: PoE, 2×RJ-45 스위치 내장, **Opus/AMR-WB 지원** 모델 증가.  
- **ATA(Analog Telephone Adapter)**: FXS/FXO 포트로 아날로그 전화/회선 연동.  
- **소프트폰/모바일 클라이언트**: WebRTC/DTLS-SRTP 기반, 푸시 알림/백그라운드 유지.  
- **VoLTE/VoNR 단말**: IMS SIP UA 내장, EPS/5GC 베어러 품질보장(QCI/5QI).

### 2.2 단말 내부 블록
- **SIP UA**: 등록/인증/세션제어(REGISTER/INVITE/BYE/UPDATE/PRACK).  
- **SDP 협상**: 코덱/포맷/ptime/ICE 후보/보안 키.  
- **RTP/RTCP 스택**: 시퀀스/타임스탬프/재정렬, RTCP SR/RR/SDES/XR.  
- **지터 버퍼(JB)**: 고정/적응(팁: 버스트엔 **확장**, 안정시 **수축**).  
- **오디오**: AEC(에코캔슬), AGC, VAD/CNG, **PLC**(패킷손실은닉), 톤(DTMF/전화벨).  
- **DTMF 처리**: In-band, **RFC 2833/4733**(telephone-event), SIP INFO.

### 2.3 게이트웨이/미디어 서버
- **MGW**: TDM↔IP 트랜스코딩, 에코캔슬, 톤/DTMF 변환, **클럭 동기**(SSRC 주의).  
- **IVR/미디어서버**: 프롬프트 재생, 녹취, 믹싱(MCU), **RFC 4733** 수신/생성.

---

## 3) SIP/SDP/RTP — 핵심 콜 플로우 & 필드

### 3.1 기본 SIP 콜 플로우(단순)
```
UA-A                Proxy/SBC                 UA-B
 |---REGISTER------->|                          |
 |<--200 OK----------|                          |
 |---INVITE (SDP a offer)---------------------->|
 |<--100 Trying---------------------------------|
 |<--180 Ringing--------------------------------|
 |<--200 OK (SDP answer)------------------------|
 |---ACK--------------------------------------->|
 |========== RTP/RTCP (media, SRTP?) ==========>|
 |---BYE--------------------------------------->|
 |<--200 OK-------------------------------------|
```

### 3.2 SDP 예(오퍼/앤서)
```
v=0
o=alice 53655765 2353687637 IN IP4 10.0.0.10
s=-
c=IN IP4 198.51.100.20
t=0 0
m=audio 40002 RTP/AVP 111 0 8 101
a=rtpmap:111 opus/48000/2
a=fmtp:111 useinbandfec=1; maxplaybackrate=16000
a=rtpmap:0 PCMU/8000
a=rtpmap:8 PCMA/8000
a=rtpmap:101 telephone-event/8000
a=ptime:20
a=sendrecv
```
- **m=audio 포트/프로토콜/페이로드 타입**, **rtpmap/fmtp**, **ptime(패킷화 간격)**, **telephone-event** DTMF, **sendrecv**.  
- SRTP/DTLS-SRTP일 때는 `a=fingerprint`, `a=setup`, `a=crypto`(SDES) 등이 포함.

### 3.3 DTMF·팩스
- **DTMF**:  
  - **RFC 2833/4733**(권장): RTP payload type(이벤트) 전송.  
  - **In-band**: 오디오 톤 → **코덱 왜곡** 위험(특히 저비트레이트).  
  - **SIP INFO**: 신호 채널로 전달(미디어와 분리).  
- **Fax**: **T.38**(UDPTL/초기 200 OK/INVITE Re-INVITE), 또는 **G.711 패스스루**(품질 민감).

### 3.4 Early Media
- **183 Session Progress + SDP** → 착신측에서 벨/안내음 재생 (과금/정책 주의).

---

## 4) 코덱 총정리 — 특성·지연·대역폭

### 4.1 분류
- **파형부호(waveform)**: G.711(PCM), G.726(ADPCM). 지연 매우 작음, 대역폭 큼.  
- **분석합성(소스 기반)**: G.729(8 kb/s), AMR-NB/WB, EVS, **Opus**(하이브리드). 비트율↓, 지연/복잡↑.

### 4.2 대표 코덱 표
| 코덱 | 샘플레이트 | 프레임(기본) | 비트율(typ.) | 알고리즘 지연(대략) | 특징 |
|---|---:|---:|---:|---:|---|
| **G.711 μ/A-law** | 8 kHz | 0.125 ms(샘플) | 64 kb/s | ≈ 0.125 ms | 무손실 PCM, 품질 좋음, 대역폭 큼 |
| G.726 ADPCM | 8 kHz | 0.125 ms | 16/24/32/40 | <1 ms | 대역폭 절감, 품질 G.711↓ |
| **G.729 (CS-ACELP)** | 8 kHz | 10 ms | 8 kb/s | ~15 ms | 저비트, 특허 이슈(구형), PLC 존재 |
| **AMR-NB** | 8 kHz | 20 ms | 4.75~12.2 | 20+ ms | 무선 최적화, VAD/DTX/CNG |
| **AMR-WB(G.722.2)** | 16 kHz | 20 ms | 6.6~23.85 | 25+ ms | 광대역(50–7000 Hz) |
| **G.722** | 16 kHz | 10 ms | 64/56/48 | ~3 ms | 서브밴드 ADPCM, 광대역 |
| **Opus** | 8–48 kHz | 2.5–60 ms | 6–510 | 5–20+ ms | SILK/MDCT 하이브리드, **FEC/VBR** |

> **실무 포인트**: **Opus** = 화상회의/모바일 **1순위**(적응형/VBR/FEC). **G.711** = LAN/게이트웨이/PSTN 연동 표준.  
> 무선/IMS = **AMR-NB/WB**, 5G/VoNR = **EVS**(본 글 범위 밖, 용어만 기억).

### 4.3 패킷화 간격(ptime)과 **끝단 대역폭**
- 페이로드 = (비트율 × ptime). **헤더**: RTP(12) + UDP(8) + IP(20) + L2(Eth 14 + FCS 4 + IFG 12 + preamble 8 ≈ 38) + (VLAN/PPPoE 옵션).  
- **20 ms ptime**일 때 예시(1호 1방향, VLAN/PPPoE 없음, 이더넷 관점):
  - **G.711**: payload 160B(=64 kb/s×0.02), 헤더 12+8+20=40B → IP계층 200B/패킷 → 50 pkts/s → **10,000 B/s(=80 kb/s)**.  
    이더넷 오버헤드 포함(≈38B) → 238B×50 = 11,900 B/s ≈ **95.2 kb/s**. (VLAN 4B → 소폭↑)
  - **G.729**: payload 20B(=8 kb/s×0.02), IP계층 60B/패킷 → 50 pkts/s → 3,000 B/s(=24 kb/s).  
    L2 포함 98B×50 = 4,900 B/s ≈ **39.2 kb/s**.
  - **Opus 24 kb/s**: payload 60B → IP 100B → **~40 kb/s(L2 포함 ~47 kb/s)**.  
- **ptime 40 ms**로 키우면 헤더비율↓(대역폭 절감) vs **인터랙티브 지연↑/손실시 청감↓** 트레이드오프.

### 4.4 패킷 손실과 코덱 내성
- **PLC**: 인접 프레임 보간/스펙트럼 복원.  
- **FEC**:  
  - **Opus in-band FEC**: 낮은 지연에서 앞 프레임 정보를 다음 프레임에 중복(한쪽 손실 복원).  
  - **RFC 2198 Redundancy**: RTP 레벨 다중 페이로드(대역폭↑ ↔ 손실내성↑).

---

## 5) 품질(QoS)·지연·MOS — 실무 계산

### 5.1 지연 구성요소
- **코덱 알고리즘 + look-ahead**  
- **패킷화 지연** \(T_p=\) ptime  
- **큐/직렬화**(링크속도에 반비례)  
- **전송/전파**(거리)  
- **지터버퍼**: 변동 흡수(고정/적응)  
- **플레이아웃**: 초과 지연은 **말 끊김**/**로봇음**

> **권고**(체감 기준): 한쪽 지연 **≤ 150 ms**(G.114), 왕복 300 ms 넘어가면 대화 품질 급락. 25 ms↑ 에코가 체감되므로 **AEC** 필수.

### 5.2 E-model(ITU-T G.107) 개요
- 통화 품질 **R-factor**:
\[
R = R_0 - I_s - I_d - I_{e,\mathrm{eff}} + A
\]
- **대략적 매핑**:
  - \(R\ge 90 \Rightarrow \mathrm{MOS}\approx 4.3\!+\) (탁월)  
  - \(R\approx 80 \Rightarrow \mathrm{MOS}\approx 4.0\)  
  - \(R\approx 70 \Rightarrow \mathrm{MOS}\approx 3.6\)  
- **코덱 손상 \(I_e\)**: G.711≈0, G.729≈10, AMR-WB(12.65)≈5~6, Opus(24 kb/s)≈3~4 (참고값).  
- **패킷손실 반영**(간이):
\[
I_{e,\mathrm{eff}} \approx I_e + (95 - I_e)\cdot \frac{P_\mathrm{pl}}{P_\mathrm{pl}/B_\mathrm{pl}+B}
\]
  - \(P_\mathrm{pl}\): 손실율(%), \(B_\mathrm{pl}\): 코덱 내성(예: G.711 ≈ 25, G.729 ≈ 16), \(B\): 버스트 계수.

### 5.3 예제 — LAN 내 G.711/ptime 20 ms
- 왕복지연(RTT) 20 ms(한쪽 10), 지터버퍼 30 ms, 나머지 10 ms → **한쪽 ≈ 50 ms**, 손실 0.2%.  
- G.711 \(I_e≈0\), \(I_{e,\mathrm{eff}}\) 미미 → \(R\sim 85\!+\) → **MOS~4.2**(우수).

### 5.4 예제 — 광역망 G.729/ptime 20 ms
- 한쪽 지연 120 ms(위성/국제), 손실 1% → \(I_{e,\mathrm{eff}}\) ↑, \(I_d\) ↑ → \(R\sim 65\!-\) → **MOS~3.3**(경계).  
→ **Opus 24 kb/s + FEC**로 전환, ptime 40 ms(헤더 효율↑, FEC 효과↑), JB 최적화 권장.

---

## 6) 지터 버퍼(JB) — 동작·튜닝

- **고정 JB**: 예 30 ms 고정. 단순/안정, 지연 고정.  
- **적응 JB**: 패킷 도착 변동(전송간격, RTCP Jitter)에 따라 동작점 이동.  
  - **증가 트리거**: 연속 지연 증가/패킷 out-of-order → 버퍼 확장.  
  - **감소 트리거**: 안정 구간 지속 → 서서히 축소.  
  - **클록 드리프트 보정**: 패킷 삽입/삭제 또는 재샘플링.

**팁**: 손실이 낮고 지터가 큰망 → **ptime↑ / JB↑**. 손실이 큰망 → **FEC/PLC** 활용.

---

## 7) NAT/보안 — SRTP·TLS·ICE 정리

### 7.1 NAT traversal
- **STUN**: 공인 포트/주소 획득.  
- **TURN**: **릴레이**(대칭 NAT/방화벽 통과).  
- **ICE**: 후보(Host/Reflexive/Relay) 수집→검증→최적 경로 선택.  
- **문제**: SIP ALG 오동작(헤더/SDP 수정 실패) → **SBC/ICE** 권장.

### 7.2 미디어/시그널 보안
- **SIP over TLS(5061)**: 신원/무결성.  
- **SRTP**: RTP 페이로드 암호화/무결성. 키 교환:
  - **SDES**: SDP에 키(낮은 보안, 폐지 추세)  
  - **DTLS-SRTP**: WebRTC 방식(권장)  
  - **ZRTP**: 미디어 경로에서 키 합의(엔드엔드)
- **보안 팁**: 인증(서버/클라 인증서), 강암호군, 재전송/DoS 방지, **TOP/NAT PIN-hole 최소화**.

---

## 8) QoS/대역 제어 — DSCP·큐잉·CAC

- **DSCP EF(46)**: RTP 음성(고우선). **AF31/41**: 시그널링/SIP.  
- **큐잉**: LLQ(우선큐 + 보장), CBWFQ, WRED(드롭 정책).  
- **Shaping/Policing**: WAN 경계 속도 맞춤, **버퍼블로트 방지**.  
- **CAC(Call Admission Control)**: **동시통화수 제한**, 코덱/ptime/레이트 정책.  
- **헤더압축(cRTP/RoHC)**: 저속링크에서 IP/UDP/RTP 헤더 축소 → **지연/손실 감소**.

---

## 9) 에코/레벨/톤/번호계획

- **AEC(G.168)**: 하이브리드/스피커폰 에코 억제(>65 dB). **NLP**/더블토크 보호.  
- **레벨/게인**: 0 dBm0 기준, 디지털→아날로그 변환시 **패드**/라인 임피던스 일치.  
- **톤**: 다이얼톤/호출음/통화중음 국가별 주파수/패턴 상이(게이트웨이 톤발생기 설정).  
- **번호계획**: **E.164**, **다이얼플랜(내선/국제접두)**, **ENUM**(선택적).

---

## 10) 실전 콜 시나리오 (SBC 경계 + DTMF + SRTP)

1) IP Phone **REGISTER (TLS)** → SBC/Proxy(200 OK).  
2) A가 B에 **INVITE**(SDP: Opus, ptime 20, ICE 후보, DTLS fingerprint).  
3) SBC 정책: 양쪽 **미디어 릴레이**(NAT), **SRTP 필수**, **Opus 우선**.  
4) B가 **183 + SDP**(Early Media: 안내 멘트).  
5) **200 OK + SDP(answer)**(SRTP 파라미터 합의), A가 **ACK**.  
6) **RTP(SRTP)** 시작, RTCP 교환(지터/손실 리포트).  
7) A가 **DTMF 1**: RTP **telephone-event** 전송(SBC 통과).  
8) 품질열화 감지(RTCP-XR): SBC가 **re-INVITE**로 ptime 40 ms/Opus FEC 제안 → A/B 수락.  
9) 통화 종료 **BYE/200 OK**. CDR/RTCP 통계 저장.

---

## 11) 설정/메시지 예시

### 11.1 간단 Asterisk-류 샘플 (개념용)
```ini
; pjsip.conf (요약)
[transport-tls]
type=transport
protocol=tls
bind=0.0.0.0:5061
method=tlsv1_2
verify_client=no
verify_server=yes

[voip-phone] ; IP Phone 사내 단말
type=endpoint
transport=transport-tls
aors=voip-phone
context=internal
disallow=all
allow=opus,alaw,ulaw
media_encryption=dtls
dtls_auto_generate_cert=yes
rtp_symmetric=yes
force_rport=yes ; NAT 친화
ice_support=yes
t38_udptl=yes

[trunk-sbc] ; 사업자 SIP Trunk
type=endpoint
transport=transport-tls
aors=trunk-sbc
context=from-trunk
disallow=all
allow=alaw,ulaw,amr-wb
media_encryption=sdes
direct_media=no
```

### 11.2 SIP DTMF (RFC 4733) 페이로드 스니펫
```
RTP Payload: PT=101 (telephone-event), Mark=1
Event=1, E=0, Volume=10, Duration=160
```

---

## 12) 계산 예제 모음

### 12.1 **통화 100회 동시**에 필요한 대역폭(양방향, 헤더 포함, L2 관점)

| 코덱/ptime | 1호 1방향(L2) | 1호 양방향 | 100호 합계 |
|---|---:|---:|---:|
| G.711 / 20 ms | ~95.2 kb/s | ~190 kb/s | **~19 Mb/s** |
| G.729 / 20 ms | ~39.2 kb/s | ~78.4 kb/s | **~7.84 Mb/s** |
| Opus 24k / 20 ms | ~47 kb/s | ~94 kb/s | **~9.4 Mb/s** |

> **팁**: 여기에 **시그널링/RTCP(5% 내외)**, **헤더압축/재전송 없음** 가정. **CAC**에서 **10–20% 여유** 권장.

### 12.2 **E-model 감** — 손실/지연 변화
- 조건A: Opus 24k, 손실 0.5%, 한쪽 지연 60 ms → MOS ≈ 4.1  
- 조건B: 같은 코덱, 손실 2%, 지연 120 ms → MOS ≈ 3.5  
→ **대응**: **FEC on + ptime 40 ms + JB↑ + QoS(DSCP EF)**

### 12.3 **헤더압축 효과(저속링크)**
- 512 kb/s 위성 링크, G.729/ptime 20 ms, **cRTP**로 IP/UDP/RTP 40B→2~4B:  
  - 1호 1방향 L2 약 **39→28 kb/s**, **~28% 절감** → 큐잉/지연 개선.

---

## 13) 트러블슈팅 절차

1) **신호 확인**: REGISTER/INVITE/200/ACK 흐름 정상? (SIP 4xx/5xx 원인)  
2) **SDP/코덱**: 공통 코덱 불일치/ptime 불일치/DTMF 미지원.  
3) **NAT**: 오디오 단방향? → **ICE 미동작**/ALG → **SBC/미디어 릴레이** 강제.  
4) **품질**: RTCP 지터/손실 확인, **라우팅/큐 정책** 점검(DSCP 보호/LLQ).  
5) **지연**: JB 로깅, ptime 조정, WAN shaping/경로.  
6) **에코/레벨**: AEC 활성, 게인 튜닝, 아날로그 구간 임피던스/접지 점검.  
7) **팩스/DTMF**: 2833 설정/클럭, **T.38 재협상(Re-INVITE)** 경로 확인.

**Wireshark 필터**  
```
sip || rtp || rtcp
rtp && ip.addr==10.0.0.10
sip.Method==INVITE
rtcp.xr
```

---

## 14) 자주 틀리는 포인트(정오표)

1) **G.711 대역폭=64 kb/s**만 보면 안 됨 → **RTP/UDP/IP/L2 오버헤드**로 **약 95 kb/s/방향**.  
2) **DTMF**는 가급적 **RFC 4733**. In-band는 **G.729/Opus**에서 왜곡.  
3) **ptime↑**는 헤더 효율↑지만 **대화지연/손실체감↑**. 회의/상담은 20 ms 권장.  
4) **SRTP**만으로 NAT 해결 안 됨 → **ICE/TURN** 필요.  
5) **SIP over TCP** 쓰면 지터가 줄지 않는다(시그널링만 TCP, 미디어는 RTP/UDP).  
6) **AEC** 꺼두면 스피커폰 에코로 MOS 급락.  
7) **코덱 트랜스코딩**은 CPU↑/지연↑/품질↓. 가능하면 **엔드-투-엔드 동일 코덱**.

---

## 15) 연습문제(풀이 포함)

### Q1. G.729, ptime 20 ms, 1,000 동시호(양방향). L2 기준 총 대역폭을 대략 산출하라.  
**풀이**: 1호 양방향 ≈ 78.4 kb/s → 78.4×1000 ≈ **78.4 Mb/s** (+RTCP/시그널링 여유 10% ≈ 86 Mb/s).

### Q2. SIP DTMF 전달 방식 3가지를 쓰고, 권장 방식을 표시하라.  
**풀이**: In-band, **RFC 2833/4733(권장)**, SIP INFO.

### Q3. ptime=40 ms로 변경 시 장단점 2가지씩.  
**풀이**: **장점**: 헤더 효율↑, FEC/PLC 효율↑. **단점**: 인터랙티브 지연↑, 손실 시 음질악화 체감↑.

### Q4. 한쪽 지연 180 ms, 손실 1%에서 G.729 MOS가 낮다. 개선책 3가지 제시.  
**풀이**: (1) **Opus 24k + FEC**로 코덱 전환, (2) **JB/ptime 최적화(40 ms)**, (3) **QoS EF/LLQ 적용**, (4) 경로 단축/중계 제거.

### Q5. SIP/SDP에서 SRTP 키 교환 방식 2가지와 장단점.  
**풀이**: **SDES**(간단/구형 장비 호환, 보안 낮음), **DTLS-SRTP**(권장, 인증/보안 높음, 구현 복잡).

### Q6. SS7과 SIP-T의 관계를 설명.  
**풀이**: 망간/레거시 연동 시 **ISUP 메시지**를 **SIP 메시지**에 **캡슐화(SIP-T/SIP-I)** 하여 IP망에서 전달.

---

## 16) 체크리스트(설계/운영)

- [ ] **코덱 정책**: 우선순위(Opus/AMR-WB→G.711→G.729), 트랜스코딩 최소화  
- [ ] **ptime/JB**: 20 ms 기본, 고손실망 FEC/ptime 40 ms 검토  
- [ ] **보안**: TLS/SRTP 기본, DTLS-SRTP/ICE 활성, 인증서 배포  
- [ ] **QoS**: DSCP EF/AF, LLQ, WAN shaping, CAC 동시호 제한  
- [ ] **SBC**: NAT/정책/미디어릴레이, 헤더정규화, DOS 방어  
- [ ] **DTMF/Fax**: RFC 4733, T.38 설정/게이트웨이 경로  
- [ ] **모니터링**: RTCP/RTCP-XR, CDR, MOS 추정, 경보(지연/손실 임계)  
- [ ] **다이얼플랜**: E.164/Emergency, 라우팅/Failover, 번호표시/변환  
- [ ] **에코/레벨**: AEC on, 패드/임피던스, 라인테스트  
- [ ] **규모확장**: 레지스트라 분산, DNS-SRV/로드밸런싱, HA/지리이중화

---

## 17) 빠른 암기표(Cheat Sheet)

- **RTP 대역폭 ≈ (코덱비트율 + 헤더/ptime 환산)**, G.711/20 ms ≈ **95 kb/s/방향**  
- **MOS**: R≈90→4.3, 80→4.0, 70→3.6 (대략)  
- **권장**: **Opus 24k 20 ms**, **SRTP + TLS**, **ICE**  
- **DTMF**: **RFC 4733** 우선, 팩스는 **T.38**  
- **QoS**: DSCP **EF=46**(음성), **AF31/41**(시그널)  
- **지연 한계**: 한쪽 **≤150 ms**, ptime 20 ms 기본, JB 20–50 ms  
- **NAT**: STUN/TURN/ICE, SIP-ALG 비활성 + SBC 사용  
- **SBC**: 경계 보안/정책/릴레이/CAC, RTCP-XR QoE

---

## 18) 마무리 코멘트
- **교환기**는 이제 **소프트웨어(SIP/IMS)**가 지배합니다.  
- **VoIP 단말**의 체감 품질은 **코덱/ptime + JB + QoS + 보안/NAT**의 **균형 잡기**에 달려 있습니다.  
- **계산습관**(대역폭, 지연, MOS 추정)과 **패킷캡처 분석 능력**(SIP/SDP/RTP/RTCP)은 실무의 핵심 역량입니다.
