---
layout: post
title: JavaScript - TDD
date: 2025-05-27 21:20:23 +0900
category: JavaScript
---
# TDDë¡œ ê°„ë‹¨í•œ ê¸°ëŠ¥ ë§Œë“¤ê¸°

## 0. ì¤€ë¹„: TDD í•µì‹¬ ì‚¬ì´í´ ë³µìŠµ

- **Red**: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‘ì„±í•œë‹¤. (ìš”êµ¬ì‚¬í•­ì„ ì½”ë“œë¡œ ê³ ì •)
- **Green**: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” **ìµœì†Œ** êµ¬í˜„ì„ ë§Œë“ ë‹¤. (ì˜¤ì§ í†µê³¼ë§Œì„ ëª©í‘œ)
- **Refactor**: ë™ì‘ì„ ìœ ì§€í•˜ë©° ì„¤ê³„Â·ì„±ëŠ¥Â·ê°€ë…ì„±ì„ ê°œì„ í•œë‹¤. (í…ŒìŠ¤íŠ¸ê°€ ì•ˆì „ë§)

> í…ŒìŠ¤íŠ¸ëŠ” **ëª…ì„¸**ì´ì **íšŒê·€ ì•ˆì „ë§**ì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ê°€ ë¨¼ì € ìˆì–´ì•¼ â€œì–´ëŠ ì„ ì„ ë„˜ì§€ ë§ì•„ì•¼ í•˜ëŠ”ì§€â€ê°€ ëª…í™•í•´ì§‘ë‹ˆë‹¤.

---

## 1. í”„ë¡œì íŠ¸ ì´ˆê¸°í™”ì™€ Jest ì„¤ì •

```bash
mkdir tdd-prime && cd tdd-prime
npm init -y
npm install --save-dev jest
```

`package.json` ìµœì†Œ ìŠ¤í¬ë¦½íŠ¸:

```json
{
  "name": "tdd-prime",
  "version": "1.0.0",
  "type": "commonjs",
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage"
  },
  "devDependencies": {
    "jest": "^29.0.0"
  }
}
```

> Node ESMì„ ì“°ê³  ì‹¶ë‹¤ë©´ `"type": "module"`ì„ ì£¼ê³  `export`/`import` ë¬¸ë²•ì„ ì‚¬ìš©í•˜ê±°ë‚˜, Jestì— ESM ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤. ë³¸ë¬¸ì€ ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ CommonJS ì˜ˆì‹œë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

---

## 2. ìš”êµ¬ì‚¬í•­ ì •ì˜ â€” ì†Œìˆ˜ íŒë³„ isPrime(n)

**ê¸°ë³¸ ê¸°ëŠ¥ ìš”êµ¬**
- ìì—°ìˆ˜ `n`ì´ **ì†Œìˆ˜**ë©´ `true`, ì•„ë‹ˆë©´ `false`.

**ëª…í™•í™”(ê²½ê³„Â·ì˜ˆì™¸)**
- `n â‰¤ 1`ì€ ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤. (0, 1, ìŒìˆ˜)
- ìµœì†Œ ì†Œìˆ˜ëŠ” `2`.
- ì§ìˆ˜ëŠ” `2`ë¥¼ ì œì™¸í•˜ë©´ ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤.
- ë°˜ë³µ ê²€ì‚¬ëŠ” **\(\sqrt{n}\)**ê¹Œì§€ë§Œ ìˆ˜í–‰í•´ë„ ì¶©ë¶„í•˜ë‹¤.
  ì‹œê°„ë³µì¡ë„ëŠ” ëŒ€ëµ \(O(\sqrt{n})\).

---

## 3. Red ë‹¨ê³„ â€” ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¶€í„°

íŒŒì¼ êµ¬ì¡°:

```
ğŸ“¦ tdd-prime
 â”£ ğŸ“œ prime.js
 â”£ ğŸ“œ prime.test.js
 â”£ ğŸ“œ package.json
```

ì²˜ìŒë¶€í„° ëª¨ë“  ì¼€ì´ìŠ¤ë¥¼ ì“°ê¸°ë³´ë‹¤, **ê°€ì¥ í•µì‹¬ì´ë©´ì„œ ì‹¤íŒ¨ê°€ ëª…í™•í•œ ì¼€ì´ìŠ¤**ë¥¼ ì±„íƒí•©ë‹ˆë‹¤.

`prime.test.js`:

```js
const { isPrime } = require('./prime');

test('2ëŠ” ì†Œìˆ˜ì´ë‹¤', () => {
  expect(isPrime(2)).toBe(true);
});

test('4ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
  expect(isPrime(4)).toBe(false);
});
```

ì•„ì§ `prime.js`ê°€ ì—†ê±°ë‚˜, ë¹ˆ êµ¬í˜„ì´ë¯€ë¡œ **ì‹¤íŒ¨(Red)** í•©ë‹ˆë‹¤.

---

## 4. Green ë‹¨ê³„ â€” ìµœì†Œ êµ¬í˜„ìœ¼ë¡œ í†µê³¼

ê°€ì¥ ë‹¨ìˆœí•œ(ê·¸ë¦¬ê³  ëŒ€ê°œëŠ” ë¶€ì •í™•í•œ) êµ¬í˜„ìœ¼ë¡œ **ì¼ë‹¨ í†µê³¼**ë¥¼ ë…¸ë¦½ë‹ˆë‹¤.

`prime.js` (ì„ì‹œ):

```js
function isPrime(n) {
  return n === 2 ? true : false; // í…ŒìŠ¤íŠ¸ ë‘ ê°œë§Œ ê°„ì‹ íˆ ë§ì¶”ë ¤ëŠ” ì•…ì˜ì  ìµœì†Œ êµ¬í˜„
}

module.exports = { isPrime };
```

ì´ë ‡ê²Œê¹Œì§€ ì¶•ì†Œí•˜ëŠ” ì´ìœ ëŠ” **TDDì—ì„œ â€œí…ŒìŠ¤íŠ¸ê°€ êµ¬í˜„ì„ ì´ëˆë‹¤â€**ëŠ” ê°ê°ì„ ìµíˆê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì´ì œ í…ŒìŠ¤íŠ¸ë¥¼ ëŠ˜ë¦¬ë©° êµ¬í˜„ì„ ë°œì „ì‹œí‚µë‹ˆë‹¤.

---

## 5. í…ŒìŠ¤íŠ¸ í™•ì¥ â€” ê²½ê³„Â·ì¼ë°˜Â·ì˜ˆì™¸ ì¼€ì´ìŠ¤

`prime.test.js` ì—…ë°ì´íŠ¸:

```js
const { isPrime } = require('./prime');

describe('isPrime ê¸°ë³¸ ì¼€ì´ìŠ¤', () => {
  test('1ì€ ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(1)).toBe(false);
  });

  test('2ëŠ” ì†Œìˆ˜ì´ë‹¤', () => {
    expect(isPrime(2)).toBe(true);
  });

  test('3ì€ ì†Œìˆ˜ì´ë‹¤', () => {
    expect(isPrime(3)).toBe(true);
  });

  test('4ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(4)).toBe(false);
  });

  test('7ì€ ì†Œìˆ˜ì´ë‹¤', () => {
    expect(isPrime(7)).toBe(true);
  });

  test('9ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(9)).toBe(false);
  });
});

describe('isPrime ê²½ê³„Â·ì˜ˆì™¸ ì…ë ¥', () => {
  test('0ì€ ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(0)).toBe(false);
  });

  test('ìŒìˆ˜ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(-5)).toBe(false);
  });

  test('í° ì§ìˆ˜(2 ì œì™¸)ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(1000000)).toBe(false);
  });
});
```

ì´ì œ ì´ í…ŒìŠ¤íŠ¸ë“¤ì„ í†µê³¼í•˜ë„ë¡ **ì •ì§í•œ êµ¬í˜„**ìœ¼ë¡œ ë°”ê¿‰ë‹ˆë‹¤.

---

## 6. Green ë‹¨ê³„ â€” ì •ì§í•œ êµ¬í˜„ìœ¼ë¡œ ì „ì²´ í†µê³¼

`prime.js`:

```js
function isPrime(n) {
  if (n <= 1) return false;      // 0,1,ìŒìˆ˜
  if (n === 2) return true;      // ìµœì†Œ ì†Œìˆ˜
  if (n % 2 === 0) return false; // 2 ì œì™¸ ì§ìˆ˜

  const limit = Math.floor(Math.sqrt(n));
  for (let i = 3; i <= limit; i += 2) {
    if (n % i === 0) return false;
  }
  return true;
}

module.exports = { isPrime };
```

ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ **Green**ì´ ë©ë‹ˆë‹¤.

---

## 7. Refactor ë‹¨ê³„ â€” ê°€ë…ì„±Â·ì„±ëŠ¥Â·ëª…í™•ì„± ê°œì„ 

ìˆ˜í•™ì ìœ¼ë¡œ ì•Œë ¤ì§„ **6k Â± 1** ê²€ì‚¬ìš© ë£¨í”„(3, 5ë¡œ ê±¸ëŸ¬ì§„ ì´í›„ 6ì˜ ë°°ìˆ˜Â±1ë§Œ í™•ì¸)ë¡œ ì†Œí­ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```js
function isPrime(n) {
  if (n <= 1) return false;
  if (n <= 3) return true;            // 2,3
  if (n % 2 === 0 || n % 3 === 0) return false;

  const limit = Math.floor(Math.sqrt(n));
  for (let i = 5; i <= limit; i += 6) {
    if (n % i === 0 || n % (i + 2) === 0) return false; // 6k-1 ë˜ëŠ” 6k+1
  }
  return true;
}

module.exports = { isPrime };
```

> **ë³µì¡ë„**: ë°˜ë³µ ìƒìˆ˜ë¥¼ ì¤„ì˜€ì„ ë¿ **ì‹œê°„ë³µì¡ë„ëŠ” ì—¬ì „íˆ \(O(\sqrt{n})\)** ì…ë‹ˆë‹¤.
> í° ì…ë ¥ì—ì„  ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´(ë°°ì—´ ë©”ëª¨ë¦¬ í•„ìš”) ë“± ë‹¤ë¥¸ ì ‘ê·¼ì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.

---

## 8. íŒŒë¼ë¯¸í„°í™” í…ŒìŠ¤íŠ¸ â€” í‘œ ê¸°ë°˜(í…Œì´ë¸” ë“œë¦¬ë¸)ë¡œ ê°„ê²°í™”

ì¤‘ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì¤„ì—¬ ê°€ë…ì„±ì„ ë†’ì…ë‹ˆë‹¤.

```js
describe('í…Œì´ë¸” ê¸°ë°˜ ì†Œìˆ˜/í•©ì„±ìˆ˜ ì¼€ì´ìŠ¤', () => {
  test.each([
    [2, true],
    [3, true],
    [4, false],
    [5, true],
    [9, false],
    [97, true],
    [221, false] // 13 * 17
  ])('%i â†’ %s', (n, expected) => {
    expect(isPrime(n)).toBe(expected);
  });
});
```

---

## 9. ì†ì„± ê¸°ë°˜ í…ŒìŠ¤íŠ¸(ì„ íƒ) â€” fast-checkë¡œ ì¼ë°˜ ì„±ì§ˆ ê²€ì¦

ì…ë ¥ì´ ë„“ì€ ì •ìˆ˜ ë²”ìœ„ë¥¼ ì»¤ë²„í•˜ë„ë¡ **ì†ì„±(property)**ì„ ì •ì˜í•´ ë¬´ì‘ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```bash
npm install --save-dev fast-check
```

```js
const fc = require('fast-check');
const { isPrime } = require('./prime');

describe('ì†ì„± ê¸°ë°˜ í…ŒìŠ¤íŠ¸', () => {
  test('ì–´ë–¤ ì •ìˆ˜ nì— ëŒ€í•´, nì´ ì†Œìˆ˜ë©´ nì€ 1ê³¼ ìê¸° ìì‹ ìœ¼ë¡œë§Œ ë‚˜ëˆ„ì–´ì§„ë‹¤', () => {
    fc.assert(
      fc.property(fc.integer({ min: 0, max: 200000 }), (n) => {
        const prime = isPrime(n);
        if (!prime) return true;

        // ì†Œìˆ˜ë¼ë©´ 2..sqrt(n)ì— ì•½ìˆ˜ê°€ ì—†ì–´ì•¼ í•œë‹¤.
        const limit = Math.floor(Math.sqrt(n));
        for (let d = 2; d <= limit; d++) {
          if (n % d === 0) return false;
        }
        return true;
      }),
      { verbose: true }
    );
  });
});
```

> ì†ì„± ê¸°ë°˜ í…ŒìŠ¤íŠ¸ëŠ” **ì‚¬ì „ì— ìƒê° ëª» í•œ ì…ë ¥ ì¡°í•©ì„ ìë™ìœ¼ë¡œ íƒìƒ‰**í•˜ë¯€ë¡œ íšŒê·€ ê²°í•¨ì„ ì¡ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.

---

## 10. ì»¤ë²„ë¦¬ì§€ í™•ì¸ê³¼ ì„ê³„ê°’ ì„¤ì •

```bash
npm run test:cov
```

`package.json`ì—ì„œ ì„ê³„ê°’ì„ ê°•ì œí•˜ì—¬, í…ŒìŠ¤íŠ¸ì˜ **ìµœì†Œ í’ˆì§ˆì„ **ì„ ìœ ì§€í•©ë‹ˆë‹¤.

```json
"jest": {
  "coverageThreshold": {
    "global": {
      "branches": 95,
      "functions": 95,
      "lines": 95,
      "statements": 95
    }
  }
}
```

---

## 11. ì›Œì¹˜Â·í…ŒìŠ¤íŠ¸ ì¡°ì§í™” â€” ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„

- `npm run test:watch`ë¡œ íŒŒì¼ ë³€ê²½ ì‹œ ìë™ ì¬ì‹¤í–‰
- `describe` ë¸”ë¡ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê·¸ë£¹í™”
- `only`/`skip` (`test.only`, `test.skip`)ë¡œ íŠ¹ì • ì¼€ì´ìŠ¤ ì§‘ì¤‘

ì˜ˆì‹œ:

```js
describe('ê²½ê³„ ì¡°ê±´', () => {
  test('0, 1, ìŒìˆ˜ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(0)).toBe(false);
    expect(isPrime(1)).toBe(false);
    expect(isPrime(-7)).toBe(false);
  });
});

describe('ì„±ëŠ¥ ê´€ì ì˜ í° ìˆ˜ ë‹¨ì¼ ì¼€ì´ìŠ¤', () => {
  test('ëŒ€í˜• ì§ìˆ˜ëŠ” ë¹ ë¥´ê²Œ falseê°€ ë‚œë‹¤', () => {
    expect(isPrime(10_000_000)).toBe(false);
  });
});
```

---

## 12. ë¦¬íŒ©í† ë§ ì•„ì´ë””ì–´ â€” ì „ëµ íŒ¨í„´ìœ¼ë¡œ ëŒ€ì²´ ê°€ëŠ¥í•˜ê²Œ

í° ìˆ˜ê°€ ì¦ë‹¤ë©´, ì…ë ¥ ê·œëª¨ì— ë”°ë¼ ì „ëµì„ ì„ íƒí•˜ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. TDDë¡œ ê° ì „ëµì„ ë…ë¦½ ê²€ì¦í•œ ë’¤ ì¡°í•©í•©ë‹ˆë‹¤.

```js
// prime-strategy.js
function trialDivision(n) {
  if (n <= 1) return false;
  if (n <= 3) return true;
  if (n % 2 === 0 || n % 3 === 0) return false;
  const limit = Math.floor(Math.sqrt(n));
  for (let i = 5; i <= limit; i += 6) {
    if (n % i === 0 || n % (i + 2) === 0) return false;
  }
  return true;
}

// ì˜ˆ: ë²”ìœ„ ì¿¼ë¦¬ê°€ ë§ì€ ê²½ìš° sieveë¥¼ ë¯¸ë¦¬ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤.
function makeSieve(maxN) {
  const isPrime = Array(maxN + 1).fill(true);
  isPrime[0] = isPrime[1] = false;
  for (let p = 2; p * p <= maxN; p++) {
    if (isPrime[p]) for (let k = p * p; k <= maxN; k += p) isPrime[k] = false;
  }
  return (n) => (n >= 0 && n <= maxN ? isPrime[n] : trialDivision(n));
}

module.exports = { trialDivision, makeSieve };
```

í…ŒìŠ¤íŠ¸ëŠ” ì „ëµë³„ë¡œ ë¶„ë¦¬í•´ ì‹ ë¢°ë„ë¥¼ í™•ë³´í•©ë‹ˆë‹¤.

---

## 13. ìˆ˜í•™ì  ë°°ê²½(ê°„ë‹¨ ìš”ì•½)

- ì†Œìˆ˜ëŠ” 1ê³¼ ìê¸° ìì‹ ë§Œì„ ì•½ìˆ˜ë¡œ ê°–ëŠ” ìì—°ìˆ˜.
- í•©ì„±ìˆ˜ \(n\)ì´ ì¡´ì¬í•˜ë©´, ë°˜ë“œì‹œ \(2 \le d \le \sqrt{n}\)ì¸ ì•½ìˆ˜ \(d\)ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
  ë”°ë¼ì„œ ê²€ì‚¬ëŠ” \(\sqrt{n}\)ê¹Œì§€ë§Œ ìˆ˜í–‰í•´ë„ ì¶©ë¶„í•©ë‹ˆë‹¤.
- ë°˜ë³µ ê²€ì‚¬ë²•ì˜ ì‹œê°„ë³µì¡ë„ëŠ” \(O(\sqrt{n})\). ì²´ ì•Œê³ ë¦¬ì¦˜ì€ ì‚¬ì „ ë¹„ìš© \(O(N \log \log N)\), ì§ˆì˜ \(O(1)\), ë©”ëª¨ë¦¬ \(O(N)\).

---

## 14. í”í•œ ì‹¤ìˆ˜ì™€ ë°©ì–´ í…ŒìŠ¤íŠ¸

- **`n = 1`ì„ ì†Œìˆ˜ë¡œ ì˜¤íŒì •**: ê°€ì¥ í”í•œ ì‹¤ìˆ˜.
  â†’ `n <= 1`ì€ `false` í…ŒìŠ¤íŠ¸ í•„ìˆ˜.
- **ì§ìˆ˜ ìŠ¤í‚µ ëˆ„ë½**: í° ì§ìˆ˜ì—ì„œ ë¶ˆí•„ìš”í•œ ë£¨í”„.
  â†’ `n % 2 === 0 â†’ false`ë¥¼ ì´ˆê¸°ì— ê±¸ëŸ¬ ì‹œê°„ ë‹¨ì¶•.
- **ë¶€ë™ì†Œìˆ˜ì  ë£¨í”„ í•œê³„**: `Math.sqrt(n)` ê³„ì‚° í›„ `floor`ë¡œ ê²½ê³„ ì •í•©ì„± ìœ ì§€.
- **ì…ë ¥ íƒ€ì… ë¬¸ì œ**: ë¬¸ìì—´/ì‹¤ìˆ˜ ì…ë ¥ ì •ì±… ëª…í™•í™”(í•´ë‹¹ ê¸€ì€ â€œìì—°ìˆ˜â€ ì „ì œ).
  í•„ìš” ì‹œ `Number.isInteger(n)` ì²´í¬ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¶”ê°€.

```js
test('ì •ìˆ˜ê°€ ì•„ë‹Œ ì…ë ¥ì€ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤(ì •ì±…)', () => {
  expect(() => isPrime(3.14)).toThrow();
  expect(() => isPrime('7')).toThrow();
});
```

ì •ì±…ì„ ë°”ê¾¸ê³  ì‹¶ë‹¤ë©´ í—ˆìš© í›„ `Number(n)`ìœ¼ë¡œ ìºìŠ¤íŒ…í•´ ë³„ë„ ê²½ê³„ í…ŒìŠ¤íŠ¸ë¥¼ ë‘¡ë‹ˆë‹¤. (ì •ì±…ë„ í…ŒìŠ¤íŠ¸ë¡œ ê³ ì •)

---

## 15. CI ì—°ë™(ì˜ˆ: GitHub Actions)

`.github/workflows/test.yml`:

```yaml
name: test
on: [push, pull_request]
jobs:
  unit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - run: npm ci
      - run: npm run test:cov
```

> PRë§ˆë‹¤ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸Â·ì»¤ë²„ë¦¬ì§€ë¥¼ í™•ì¸í•˜ì—¬ íšŒê·€ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

---

## 16. í™•ì¥ ê³¼ì œ â€” BDD ìŠ¤íƒ€ì¼, ê²½ê³„ê°’ ë¶„ì„, í¼í¬ë¨¼ìŠ¤ ì¸¡ì •

- **BDD ìŠ¤íƒ€ì¼**: `describe/it` ë¬¸êµ¬ë¥¼ ìš”êµ¬ì‚¬í•­ ë¬¸ì¥ìœ¼ë¡œ í‘œí˜„í•´ ê°€ë…ì„± í–¥ìƒ.
- **ê²½ê³„ê°’ ë¶„ì„**: ì•„ì£¼ í° ì†Œìˆ˜ í›„ë³´(ì˜ˆ: 32ë¹„íŠ¸ ê²½ê³„)ì—ì„œ ë‹¨ì¼ ì¼€ì´ìŠ¤ ì„±ëŠ¥ ì²´í¬.
- **í¼í¬ë¨¼ìŠ¤**: `console.time`/`console.timeEnd` í˜¹ì€ ë³„ë„ ë²¤ì¹˜ ìŠ¤ìœ„íŠ¸(ì˜ˆ: `tinybench`)ë¥¼ ë„ì….

```js
test('ì„±ëŠ¥ ìƒ˜í”Œ(ë‹¨ì¼ ì¼€ì´ìŠ¤)', () => {
  console.time('check');
  expect(isPrime(999999937)).toBe(true); // ì˜ˆ: í° ì†Œìˆ˜
  console.timeEnd('check');
});
```

---

## 17. ìµœì¢… ì½”ë“œ ëª¨ìŒ

`prime.js`:

```js
function isPrime(n) {
  if (!Number.isInteger(n)) throw new TypeError('n must be an integer');
  if (n <= 1) return false;
  if (n <= 3) return true;
  if (n % 2 === 0 || n % 3 === 0) return false;

  const limit = Math.floor(Math.sqrt(n));
  for (let i = 5; i <= limit; i += 6) {
    if (n % i === 0 || n % (i + 2) === 0) return false;
  }
  return true;
}

module.exports = { isPrime };
```

`prime.test.js`:

```js
const { isPrime } = require('./prime');

describe('isPrime ê¸°ë³¸ ë™ì‘', () => {
  test.each([
    [1, false],
    [2, true],
    [3, true],
    [4, false],
    [5, true],
    [9, false],
    [97, true]
  ])('%i â†’ %s', (n, expected) => {
    expect(isPrime(n)).toBe(expected);
  });
});

describe('ê²½ê³„/ì˜ˆì™¸', () => {
  test('0, 1, ìŒìˆ˜ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(0)).toBe(false);
    expect(isPrime(1)).toBe(false);
    expect(isPrime(-7)).toBe(false);
  });

  test('ì •ìˆ˜ê°€ ì•„ë‹ˆë©´ ì˜ˆì™¸', () => {
    expect(() => isPrime(3.14)).toThrow();
    expect(() => isPrime('7')).toThrow();
    expect(() => isPrime(NaN)).toThrow();
  });

  test('í° ì§ìˆ˜ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë‹¤', () => {
    expect(isPrime(10_000_000)).toBe(false);
  });
});
```

`package.json` (ìš”ì§€):

```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:cov": "jest --coverage"
  },
  "jest": {
    "coverageThreshold": {
      "global": { "branches": 95, "functions": 95, "lines": 95, "statements": 95 }
    }
  }
}
```

---

## 18. ì •ë¦¬ â€” TDD ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **Red**: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸(ìš”êµ¬)ë¶€í„° ì‘ì„±í–ˆë‹¤.
- [ ] **Green**: ìµœì†Œ êµ¬í˜„ìœ¼ë¡œ í†µê³¼í–ˆë‹¤.
- [ ] **Refactor**: ë™ì‘ ìœ ì§€í•˜ë©° êµ¬ì¡°Â·ì„±ëŠ¥ ê°œì„ í–ˆë‹¤.
- [ ] **ê²½ê³„/ì˜ˆì™¸**: 0, 1, ìŒìˆ˜, ë¹„ì •ìˆ˜ ë“± ë°©ì–´ í…ŒìŠ¤íŠ¸ë¥¼ ê°–ì·„ë‹¤.
- [ ] **í‘œ ê¸°ë°˜ í…ŒìŠ¤íŠ¸**ë¡œ ì¤‘ë³µì„ ì¤„ì˜€ë‹¤.
- [ ] **ì†ì„± ê¸°ë°˜ í…ŒìŠ¤íŠ¸**ë¡œ ì¼ë°˜ ì„±ì§ˆì„ ê²€ì¦í–ˆë‹¤(ì„ íƒ).
- [ ] **ì»¤ë²„ë¦¬ì§€ ì„ê³„ê°’**ìœ¼ë¡œ ìµœì†Œ í’ˆì§ˆì„ ì„ ê±¸ì—ˆë‹¤.
- [ ] **CI**ë¡œ íšŒê·€ë¥¼ ìë™ ê°ì‹œí•œë‹¤.

---

## 19. ë¶€ë¡: TypeScript ë²„ì „(ì„ íƒ)

ì˜ì¡´ì„±:

```bash
npm i -D typescript ts-node @types/jest ts-jest
npx ts-jest config:init
```

`prime.ts`:

```ts
export function isPrime(n: number): boolean {
  if (!Number.isInteger(n)) throw new TypeError('n must be an integer');
  if (n <= 1) return false;
  if (n <= 3) return true;
  if (n % 2 === 0 || n % 3 === 0) return false;
  const limit = Math.floor(Math.sqrt(n));
  for (let i = 5; i <= limit; i += 6) {
    if (n % i === 0 || n % (i + 2) === 0) return false;
  }
  return true;
}
```

`prime.test.ts`:

```ts
import { isPrime } from './prime';

describe('TS isPrime', () => {
  it('2ëŠ” ì†Œìˆ˜', () => expect(isPrime(2)).toBe(true));
  it('4ëŠ” ì†Œìˆ˜ ì•„ë‹˜', () => expect(isPrime(4)).toBe(false));
});
```

---

## 20. ë§ˆë¬´ë¦¬

- **TDD**ëŠ” ìš”êµ¬ë¥¼ í…ŒìŠ¤íŠ¸ë¡œ ê³ ì •í•˜ê³ , êµ¬í˜„ì€ **ì˜¤ì§ í…ŒìŠ¤íŠ¸ í†µê³¼ë¥¼ ìœ„í•œ ìµœì†Œ ë³€ê²½**ìœ¼ë¡œ ì´ë•ë‹ˆë‹¤.
- `isPrime` ê°™ì€ ì‘ì€ ì˜ˆì œì—ì„œë„ **ê²½ê³„Â·ì˜ˆì™¸Â·ì„±ëŠ¥Â·ê°€ë…ì„±**ì„ ëª¨ë‘ í…ŒìŠ¤íŠ¸ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **í…ŒìŠ¤íŠ¸ê°€ ê³§ ëª…ì„¸**ì…ë‹ˆë‹¤. ë¦¬íŒ©í† ë§ì´ë‚˜ í™•ì¥(ì „ëµ ë„ì…, TypeScript ì „í™˜, CI ì ìš©)ì—ë„ í…ŒìŠ¤íŠ¸ê°€ ì•ˆì „ë§ì´ ë˜ì–´ì¤ë‹ˆë‹¤.
