---
layout: post
title: AWS - EC2
date: 2025-07-12 20:20:23 +0900
category: AWS
---
# 💻 EC2: AWS의 가상 서버 개념과 핵심 구성 요소

---

## 1️⃣ EC2란 무엇인가?

**EC2 (Elastic Compute Cloud)**는 AWS에서 제공하는 **클라우드 기반 가상 서버 서비스**입니다.  
개발자는 물리적인 서버를 직접 구입하거나 관리할 필요 없이, 클릭 몇 번으로 원하는 크기/성능/운영체제를 가진 서버를 즉시 생성하고 사용할 수 있습니다.

### 📦 EC2는 이런 용도에 사용됩니다:

- 웹 애플리케이션 배포 (예: Nginx, Apache)
- 백엔드 서버 운영 (Node.js, Django, Spring 등)
- 데이터 처리/분석 서버
- 게임 서버
- 개발 및 테스트 환경

---

## 2️⃣ EC2의 주요 구성 요소와 개념

---

### 🖥️ 2.1 인스턴스(Instance)란?

**EC2 인스턴스**는 **가상화된 컴퓨터**입니다.  
온프레미스 서버처럼, CPU, 메모리, 디스크, 네트워크를 갖춘 서버를 클라우드에서 **즉시 생성**할 수 있습니다.

#### 인스턴스의 주요 상태
| 상태 | 설명 |
|------|------|
| pending | 인스턴스가 생성 중 |
| running | 정상 작동 중 |
| stopped | 꺼진 상태 (과금은 EBS만 발생) |
| terminated | 삭제됨 (복구 불가) |

---

### ⚙️ 2.2 인스턴스 유형(Instance Type)

AWS EC2는 사용자의 목적에 따라 다양한 인스턴스 타입을 제공합니다.

| 패밀리 | 설명 | 예시 |
|--------|------|------|
| **t 시리즈** | 일반적인 범용 | `t2.micro`, `t3.small` |
| **m 시리즈** | 균형 잡힌 컴퓨팅 | `m5.large` |
| **c 시리즈** | 고성능 CPU 필요 | `c5.xlarge` |
| **r 시리즈** | 메모리 집약적 | `r5.large` |
| **g/h/p 시리즈** | GPU 포함 | `g4dn.xlarge` |
| **i 시리즈** | 고속 IOPS 저장 | `i3.large` |

#### 참고: Free Tier (무료 티어)에서는 `t2.micro` 또는 `t3.micro`를 사용할 수 있습니다.

---

### 📸 2.3 AMI (Amazon Machine Image)

**AMI**는 인스턴스를 생성할 때 사용하는 **운영체제 및 기본 소프트웨어의 템플릿**입니다.

#### AMI 구성 요소
- 운영체제 (Linux, Ubuntu, Windows 등)
- 사전 설치된 소프트웨어
- 설정 정보 (포트, 사용자 계정 등)

#### AMI 유형
| 종류 | 설명 |
|------|------|
| AWS 제공 AMI | Amazon Linux, Ubuntu, Windows 등 |
| 커뮤니티 AMI | 공개된 AMI (주의 요망) |
| 사용자 정의 AMI | 내가 만든 인스턴스에서 저장한 이미지 |

#### 예시
```bash
Amazon Linux 2 AMI (HVM), SSD Volume Type
ami-0c55b159cbfafe1f0 (서울 리전 기준)
```

---

### 🔑 2.4 키 페어(Key Pair)

EC2는 보안을 위해 **비밀번호가 아닌 공개키 기반 SSH 인증**을 사용합니다.

- 키 페어는 **개인키(.pem)** + **공개키**로 구성
- 인스턴스 생성 시, 공개키는 EC2 내부에 저장되고
- 사용자는 `.pem` 파일을 통해 SSH 접속

#### 키 페어 생성
```bash
# AWS 콘솔에서 생성하거나
aws ec2 create-key-pair --key-name MyKey --query 'KeyMaterial' --output text > MyKey.pem
chmod 400 MyKey.pem
```

🔒 `.pem` 파일은 유출 시 보안에 치명적이므로 절대 노출되지 않도록 합니다.

---

### 💽 2.5 EBS (Elastic Block Store)

- EC2의 하드디스크 역할
- 인스턴스를 꺼도 데이터는 유지됨
- 루트 볼륨 외에 추가 볼륨 연결 가능

#### EBS의 주요 속성
| 속성 | 설명 |
|------|------|
| 크기 | GB 단위 지정 |
| 타입 | gp2(general), io1(high IOPS), st1(throughput) |
| 스냅샷 | 백업 이미지 생성 가능 |
| 삭제 정책 | 인스턴스 종료 시 함께 삭제 여부 설정 가능 |

---

### 🛡️ 2.6 보안 그룹(Security Group)

보안 그룹은 **EC2에 대한 방화벽 역할**을 하는 논리적 설정입니다.

- 인바운드: 들어오는 트래픽 허용 규칙
- 아웃바운드: 나가는 트래픽 허용 규칙

#### 기본 설정 예시
```text
포트 22 (SSH) → 내 IP만 허용
포트 80 (HTTP) → 전체 허용
포트 443 (HTTPS) → 전체 허용
```

---

## 🧪 3️⃣ EC2 인스턴스 생성 실습

1. AWS 콘솔 → EC2 → 인스턴스 시작
2. AMI 선택: `Amazon Linux 2`
3. 인스턴스 유형: `t2.micro` (무료)
4. 키 페어 선택 또는 새로 생성
5. 보안 그룹 설정:
   - SSH(22): 내 IP
   - HTTP(80): 전체 허용
6. EBS 설정: 8GB 기본 설정 확인
7. 검토 후 시작

---

## 🔌 4️⃣ EC2 접속 실습 (SSH)

### 사전 준비
- `.pem` 파일 위치 확인
- 퍼블릭 IP 확인

### SSH 접속 명령 (Linux/Mac)
```bash
chmod 400 MyKey.pem
ssh -i MyKey.pem ec2-user@<퍼블릭IP>
```

### Windows에서는?
- `PuTTY` 또는 `Windows Terminal`에서 접속 가능
- `.pem`을 `.ppk`로 변환 필요 (`PuTTYgen` 사용)

---

## 💡 5️⃣ EC2 운영 팁

### ⏱️ 인스턴스 자동 정지 스케줄링
- AWS Lambda + EventBridge 조합으로 가능

### 🧾 과금 모델
| 항목 | 설명 |
|------|------|
| 온디맨드 | 시간 단위 과금, 유연 |
| 예약 인스턴스 | 1년 or 3년 약정, 최대 70% 할인 |
| 스팟 인스턴스 | 여유 자원 활용, 매우 저렴하나 중단 가능성 있음 |

### 📈 CloudWatch로 모니터링
- CPU, 네트워크, 디스크 I/O 등 실시간 확인 가능

---

## 🧹 6️⃣ EC2 종료 및 정리

### 인스턴스 종료
- 상태 → 인스턴스 종료 클릭

### EBS 자동 삭제 여부 확인
- 루트 볼륨이 삭제되지 않는 경우 비용 발생 가능

### 키 페어 정리
- IAM → 키 페어에서 삭제 가능

### AMI 정리
- 스냅샷과 AMI는 수동으로 삭제하지 않으면 과금

---

## ✅ 정리

| 구성 요소 | 요약 |
|-----------|------|
| 인스턴스 | 가상 서버, 실행 상태 관리 |
| 인스턴스 타입 | CPU/메모리 조합 |
| AMI | OS와 소프트웨어 패키지 |
| 키 페어 | 보안 인증용 |
| EBS | EC2의 디스크 |
| 보안 그룹 | 트래픽 제어 방화벽 |