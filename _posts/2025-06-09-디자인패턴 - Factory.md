---
layout: post
title: 디자인패턴 - Factory
date: 2025-06-09 23:20:23 +0900
category: 디자인패턴
---
# Factory Method (팩토리 메서드 패턴)

## ✅ 정의

**팩토리 메서드 패턴(Factory Method Pattern)**은 **객체 생성을 서브클래스에서 담당하도록 위임**하여, 클라이언트 코드가 **구체적인 클래스 이름에 의존하지 않도록** 만드는 **생성 패턴(Creational Pattern)**입니다.

즉, **객체를 생성하는 코드를 공통 인터페이스나 추상 클래스로 감추고**, 하위 클래스에서 객체 생성 방식을 정의합니다.

---

## 🎯 의도 (Intent)

- 객체 생성 로직을 캡슐화한다.
- 클라이언트는 생성되는 객체의 구체적인 클래스에 의존하지 않도록 한다.
- 새로운 객체 유형이 추가되더라도 기존 코드를 수정하지 않고 확장 가능하게 한다 (**OCP** 준수).

---

## 📦 구조 (Structure)

```
        ┌──────────────────────┐
        │   Creator (추상 클래스) │
        ├──────────────────────┤
        │ + factoryMethod()    │◄──────┐
        │ + operation()        │       │
        └──────────────────────┘       │
                ▲                      │
                │                      │
 ┌──────────────────────┐     ┌─────────────────────┐
 │ ConcreteCreatorA     │     │ ConcreteCreatorB     │
 ├──────────────────────┤     ├─────────────────────┤
 │ + factoryMethod()    │     │ + factoryMethod()   │
 └──────────────────────┘     └─────────────────────┘
                │                      │
                ▼                      ▼
      ┌──────────────────┐   ┌──────────────────┐
      │ ProductA          │   │ ProductB         │
      └──────────────────┘   └──────────────────┘
```

---

## 🧑‍💻 구현 예시 (Python)

```python
# 제품 인터페이스
class Button:
    def render(self):
        pass

# 구체 제품
class WindowsButton(Button):
    def render(self):
        print("윈도우 스타일 버튼 렌더링")

class MacButton(Button):
    def render(self):
        print("맥 스타일 버튼 렌더링")

# 추상 팩토리
class Dialog:
    def create_button(self) -> Button:
        raise NotImplementedError()

    def render_window(self):
        button = self.create_button()
        button.render()

# 구체 팩토리
class WindowsDialog(Dialog):
    def create_button(self) -> Button:
        return WindowsButton()

class MacDialog(Dialog):
    def create_button(self) -> Button:
        return MacButton()

# 사용
def client_code(dialog: Dialog):
    dialog.render_window()

client_code(WindowsDialog())  # 윈도우 스타일 버튼 렌더링
client_code(MacDialog())      # 맥 스타일 버튼 렌더링
```

---

## ✅ 장점

- **객체 생성 코드와 사용 코드를 분리**하여 결합도를 낮춤
- 새로운 제품 클래스를 추가하더라도 클라이언트 코드를 **수정하지 않고 확장 가능**
- **OCP(개방-폐쇄 원칙)** 충실히 따름
- 테스트 시 **Mock 객체 주입이 용이**

---

## ⚠️ 단점

- 클래스 수가 많아질 수 있음 (각 제품마다 별도의 서브클래스 필요)
- 단순한 경우에는 오히려 코드가 복잡해질 수 있음
- **추상화 수준이 높아져 처음에는 이해하기 어려울 수 있음**

---

## 📌 사용 사례

| 사례 | 설명 |
|------|------|
| GUI 프레임워크 | OS에 따라 다른 위젯 생성 (Mac vs Windows) |
| 데이터베이스 연결 | RDB vs NoSQL 클라이언트 생성 시 |
| 로깅 시스템 | 환경에 따라 다른 로깅 전략 적용 |
| 게임 엔진 | 캐릭터, 무기, 배경 객체 생성 시 팩토리 메서드 사용 |

---

## 🎓 팩토리 메서드 vs 추상 팩토리

| 항목 | 팩토리 메서드 | 추상 팩토리 |
|------|----------------|----------------|
| 생성 대상 | 하나의 제품 | 제품군 |
| 클래스 수 | 적음 | 많음 |
| 구조 | 단순 | 복잡 |
| 유연성 | 일반적 용도 | 제품군 통일성이 필요할 때 적합 |

---

## 🧠 마무리

팩토리 메서드 패턴은 객체 생성 책임을 서브클래스로 옮겨 **유연한 객체 생성 구조**를 제공합니다.  
특히, **라이브러리 설계**, **프레임워크 구성**, **플러그인 시스템** 등에서 강력한 도구가 됩니다.

하지만 단순한 애플리케이션에서는 오히려 오버엔지니어링이 될 수 있으니, **적절한 복잡도 이상의 경우에만 도입**하는 것이 좋습니다.
