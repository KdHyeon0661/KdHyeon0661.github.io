---
layout: post
title: 이산수학 - 집합의 크기
date: 2025-05-21 21:20:23 +0900
category: 이산수학
---
# 집합의 크기(Cardinality)

## 0. 개요

- **카디널리티(cardinality)**는 집합이 몇 개의 원소를 가지는지를 표현하는 개념이다. 기호는 $$|A|$$ 또는 $$\mathrm{card}(A)$$.
- 유한 집합은 단순히 원소를 세면 되지만, **무한 집합**은 **일대일대응(전단사)** 개념으로 비교한다.
- 본 문서는 유한/무한 집합의 크기, 곱집합/멱집합/함수 공간의 크기, 카디널 산술과 대표적 정리(칸토어, 슈뢰더–베른스타인)를 정리하고, 파이썬으로 유한 경우를 검증·계산한다.

---

## 1. 유한 집합의 크기

정의: 유한 집합 $$A$$ 에 대해 $$|A|=n$$ 이면, $$A$$ 와 $$\{1,2,\dots,n\}$$ 사이에 **전단사**가 존재한다.

예시:
```text
A = {1, 2, 3, 4}  -> |A| = 4
B = {a, e, i, o, u} -> |B| = 5
```
공집합: $$|\varnothing|=0$$.

### 1.1 멱집합의 크기
원소가 $$n$$ 개인 집합 $$A$$ 의 멱집합(부분집합들의 집합) 크기:
$$
|\mathcal{P}(A)|=2^n.
$$
증명 스케치: 각 원소를 “포함/미포함” 두 가지 선택으로 독립 결정하므로 경우의 수가 $$2\times 2\times\cdots\times 2=2^n$$.

### 1.2 곱집합(데카르트 곱)
유한 집합 $$A,B$$ 에 대해
$$
|A\times B|=|A|\cdot|B|.
$$
예시:
```text
A = {1, 2},  B = {x, y, z}
A×B = {(1,x), (1,y), (1,z), (2,x), (2,y), (2,z)}  -> 크기 6
```

### 1.3 함수의 개수
유한 $$A,B$$ 에 대해 **모든 함수** $$f:A\to B$$ 의 개수:
$$
|B|^{|A|}.
$$
이유: 정의역의 각 원소마다 공역의 원소 선택.

#### 파생: 전사·단사·전단사 개수
- **단사(injection)**: $$|A|=m, |B|=n, m\le n$$ 이면
  $$
  \text{단사 개수} = {}_nP_m = \frac{n!}{(n-m)!}.
  $$
- **전단사(전사+단사)**(즉, **전단사=서로 다른 크기의 유한 집합에는 없음**; $$m=n$$ 일 때 **전단사=순열**):
  $$
  \text{전단사 개수} = n!.
  $$
- **전사(surjection)**: $$|A|=n, |B|=k\le n$$ 이면
  $$
  \text{전사 개수} = k!\, S(n,k),
  $$
  여기서 $$S(n,k)$$ 는 **둘째종 스털링 수**(정의역을 $$k$$개의 비어있지 않은 블록으로 분할).  
  유도: 전사는 섬유가 비어서 안 되므로, 먼저 분할(블록 개수 $$S(n,k)$$), 그 뒤 블록에 라벨(공역 원소들) 붙이기 $$k!$$.

### 1.4 관계의 개수
집합 $$A$$ 위의 **이항 관계**는 $$A\times A$$ 의 부분집합이므로
$$
\text{이항 관계 개수} = 2^{|A|^2}.
$$
더 일반적으로, $$A\times B$$ 의 부분집합(이항 관계)의 개수는 $$2^{|A|\cdot|B|}$$.

---

## 2. 무한 집합의 크기: 셈 가능성과 일대일대응

핵심 관점: **두 집합 사이에 전단사가 있으면 크기가 같다**.

표기 규칙:
- **자연수 집합 크기**: $$\aleph_0$$ (알레프-영, 셈 가능한 무한).
- **연속체 크기**(실수의 크기): $$\mathfrak{c}$$(continuum). 고전적으로 $$\mathfrak{c}=2^{\aleph_0}$$.

### 2.1 셈 가능한 무한 집합
다음 집합들은 **셈 가능**(자연수와 일대일대응):
- $$\mathbb{N}=\{1,2,3,\dots\}$$
- $$\mathbb{Z}$$: 예, $$0,1,-1,2,-2,3,-3,\dots$$ 처럼 지그재그 열거 가능.
- $$\mathbb{Q}$$: 분수들을 기약분수로 정리하고 분자/분모의 합이 같은 대각선 순서로 열거하면 중복 제외 후 열거 가능.

#### 증명 스케치: $$\mathbb{N}\times\mathbb{N}$$ 과 $$\mathbb{N}$$ 의 전단사
**칸토어 페어링 함수**:
$$
\pi(a,b)=\frac{(a+b)(a+b+1)}{2}+b.
$$
이는 $$\mathbb{N}^2\to\mathbb{N}$$ 전단사임이 알려져 있다. 따라서 유한 카테고리 합·곱을 통해 다양한 셈 가능 집합이 얻어진다.

### 2.2 셈 불가능한 집합
- 실수 집합 $$\mathbb{R}$$, 구간 $$(0,1)$$, 멱집합 $$\mathcal{P}(\mathbb{N})$$ 는 **셈 불가능**.

#### 칸토어의 대각선 논법(실수의 비가산성)
$$
(0,1)$$ 의 실수를 10진 전개로 $$x_1,x_2,\dots$$ 나열했다고 가정. 각 $$x_i$$ 의 $$i$$번째 자릿수를 보고 다른 숫자로 바꿔 새로운 수를 만든다. 새 수는 모든 $$x_i$$ 와 $$i$$번째 자리에서 다르므로 열거에 없는 수다. 모순.  
따라서 $$(0,1)$$ 은 셈 불가능. $$\Rightarrow \mathbb{R}$$ 도 셈 불가능.

#### 칸토어 정리(멱집합의 엄밀한 더 큼)
임의의 집합 $$A$$ 에 대해 $$|A| < |\mathcal{P}(A)|$$.  
증명 스케치: 임의의 함수 $$f:A\to \mathcal{P}(A)$$ 에 대해 대각 집합 $$D=\{a\in A\mid a\notin f(a)\}$$ 를 고려하면, $$D=f(a_0)$$ 인 $$a_0$$ 가 존재할 수 없다(“스스로 포함 여부” 역설 구조). 따라서 전사 없음.

#### $$\mathbb{R} \sim \mathcal{P}(\mathbb{N})$$
이진 전개(실수의 2진수 표현)와 부분집합(무한 비트열)의 자연스러운 일대일대응으로 $$\mathfrak{c}=2^{\aleph_0}$$. (끝이 전부 1인 표현과의 중복은 한쪽으로만 채택하는 관례로 해결.)

### 2.3 구간과 실수 전체의 크기
$$(0,1) \sim \mathbb{R}$$. 예를 들어
$$
f(x)=\tan\left(\pi\left(x-\frac{1}{2}\right)\right)
$$
는 $$(0,1)\to\mathbb{R}$$ 의 전단사(정확히는 연속 전단사)이다. 역함수는
$$
f^{-1}(y)=\frac{1}{\pi}\arctan(y)+\frac{1}{2}.
$$
따라서 모든 비공집합 구간들은 서로 동수(cardinal equal)이다:
$$
(0,1)\sim(0,1]\sim[0,1]\sim(a,b)\sim\mathbb{R}.
$$

### 2.4 슈뢰더–베른스타인 정리
집합 $$A,B$$ 에 대해 $$A\preceq B$$ (단사 $$A\to B$$ 존재), $$B\preceq A$$ 가 둘 다 성립하면, **전단사** $$A\leftrightarrow B$$ 가 존재한다.  
이로써 “서로에게 단사가 있으면 크기가 같다”가 보장된다.

---

## 3. 카디널 산술(기본 성질)

카디널(기수) $$\kappa,\lambda$$ 에 대해:
- 합: $$\kappa+\lambda=|\text{서로소 합집합}|$$
- 곱: $$\kappa\cdot\lambda=|\text{곱집합}|$$
- 지수: $$\lambda^\kappa=|\text{함수 집합 } A\to B|$$, $$|A|=\kappa, |B|=\lambda$$

### 3.1 유한 카디널
평소의 정수 산술과 동일.

### 3.2 무한 카디널(대표: $$\aleph_0, \mathfrak{c}$$)
- $$\aleph_0+\aleph_0=\aleph_0,\quad \aleph_0\cdot\aleph_0=\aleph_0.$$
  스케치: $$\mathbb{N}\cup\mathbb{N}\sim\mathbb{N}$$, $$\mathbb{N}\times\mathbb{N}\sim\mathbb{N}$$.
- 유한 $$n\ge 1$$ 에 대해 $$\aleph_0\cdot n=\aleph_0,\ \ \aleph_0^n=\aleph_0$$.
- $$2^{\aleph_0}=\mathfrak{c} > \aleph_0.$$
- 일반적으로 $$\kappa\ge\aleph_0$$ 이면 $$\kappa + \kappa = \kappa,\ \ \kappa \cdot \kappa = \kappa.$$

### 3.3 가산 합·곱의 가산성
- 가산 개의 가산 집합의 **합집합**은 가산:
  $$
  \bigcup_{n\in\mathbb{N}} A_n \ \text{이 각 }A_n\text{ 가산이면 가산.}
  $$
  스케치: $$\mathbb{N}\times\mathbb{N}$$ 에서 대각선 순회로 열거.
- 카르테시안 곱이 **유한 차원**이면 여전히 가산:
  $$
  \mathbb{N}^k \sim \mathbb{N} \quad (k\in\mathbb{N}).
  $$

---

## 4. 구성적 열거와 전단사의 예

### 4.1 $$\mathbb{Z}\sim\mathbb{N}$$
$$
e:\mathbb{Z}\to\mathbb{N},\quad
e(0)=0,\ e(n>0)=2n-1,\ e(-n)=2n.
$$
이는 전단사.

### 4.2 $$\mathbb{N}\times\mathbb{N}\sim\mathbb{N}$$
칸토어 페어링:
$$
\pi(a,b)=\frac{(a+b)(a+b+1)}{2}+b.
$$
역함수도 닫힌형으로 주어짐(대각선의 합 $$a+b$$ 를 복구).

### 4.3 $$\mathbb{Q}$$ 의 가산성
양의 기약분수만 먼저 정렬: 분자+분모가 같은 대각선에서 좌→우로, 중복(기약 아님) 제거. 음수와 0 을 섞어 지그재그.

### 4.4 $$(0,1)\sim\mathbb{R}$$
앞의 탄젠트 전단사 사용:
$$
f(x)=\tan\left(\pi\left(x-\frac{1}{2}\right)\right),\quad
f^{-1}(y)=\frac{1}{\pi}\arctan(y)+\frac{1}{2}.
$$

---

## 5. 파이썬으로 계산/검증(유한·구성적 사례)

주의: 무한 집합의 “크기”를 머신이 직접 계산할 수는 없다. 다만 **열거 규칙**과 **유한 검증**으로 직관을 점검한다.

### 5.1 기본 카디널 계산(유한)
```python
from math import factorial
from functools import lru_cache

def power_set_size(n):
    return 2**n

def cartesian_size(m, n):
    return m * n

def function_count(size_A, size_B):
    return size_B ** size_A

def injections_count(m, n):
    # |A|=m, |B|=n, m <= n
    res = 1
    for i in range(n, n-m, -1):
        res *= i
    return res

def bijections_count(n):
    return factorial(n)

@lru_cache(None)
def stirling2(n, k):
    if n == k == 0:
        return 1
    if n == 0 or k == 0:
        return 0
    # S(n,k) = k*S(n-1,k) + S(n-1,k-1)
    return k * stirling2(n-1, k) + stirling2(n-1, k-1)

def surjections_count(n, k):
    # number of onto maps A->[k], |A|=n
    return factorial(k) * stirling2(n, k)

print(power_set_size(3))         # 8
print(cartesian_size(2, 3))      # 6
print(function_count(2, 3))      # 9
print(injections_count(3, 5))    # 60
print(bijections_count(4))       # 24
print(stirling2(5, 2))           # 15
print(surjections_count(5, 2))   # 30
```

### 5.2 칸토어 페어링과 역함수(구성적 전단사)
```python
import math

def cantor_pair(a, b):
    s = a + b
    return (s * (s + 1)) // 2 + b

def cantor_unpair(z):
    w = math.floor((math.sqrt(8*z + 1) - 1) / 2)
    t = (w * (w + 1)) // 2
    b = z - t
    a = w - b
    return a, b

# 간단 검증
for a in range(5):
    for b in range(5):
        z = cantor_pair(a, b)
        aa, bb = cantor_unpair(z)
        assert (a, b) == (aa, bb)
```

### 5.3 가산 집합의 지그재그 열거(직관 시뮬레이션)
```python
def enumerate_Z(limit):
    # 0, 1, -1, 2, -2, ...
    yield 0
    k = 1
    while k <= limit:
        yield k
        yield -k
        k += 1

def enumerate_Q(limit):
    # 매우 간략한 데모: 분자/분모 합이 limit 이하, 기약만
    from math import gcd
    yielded = set()
    yield 0
    for s in range(2, 2*limit+1):  # 분자+분모
        for p in range(1, s):
            q = s - p
            if q == 0:
                continue
            if gcd(p, q) == 1:
                for num in (p, -p):
                    frac = (num, q)
                    if frac not in yielded:
                        yielded.add(frac)
                        yield num / q

# 샘플 출력
print(list(enumerate_Z(5)))
samples = []
for x in enumerate_Q(10):
    samples.append(x)
    if len(samples) >= 12:
        break
print(samples)
```

---

## 6. 연습문제와 해설 스케치

1) $$|A|=n$$ 이면 $$|\mathcal{P}(A)|=2^n$$ 을 **두 가지** 방식으로 증명하라.  
   스케치: (i) 포함/미포함 인코딩, (ii) 바이너리 벡터와의 전단사.

2) $$|A|=m, |B|=n$$ 일 때 함수의 개수가 $$n^m$$ 임을 증명하라.  
   스케치: 정의역의 각 원소별 선택 독립.

3) $$\mathbb{N}\times\mathbb{N}$$ 이 가산임을 보이는 **다른** 전단사를 구성하라(대각선 나선 열거).  
   스케치: $$a+b=c$$ 인 선을 $$c=0,1,2,\dots$$ 순으로 따라가며 열거.

4) $$\mathbb{Q}$$ 의 가산성: 기약분수만 남기고 중복을 제거하는 규칙을 명시하고 열거 알고리즘을 준다.  
   스케치: 분모·분자의 최대공약수로 필터.

5) 칸토어의 대각선 논법을 2진 전개로 재작성하고, $$0.0111\cdots = 0.1000\cdots$$ 류의 모호성 처리를 기술하라.  
   스케치: “무한히 1로 끝나는 전개”를 배제하는 표준화 채택.

6) $$\left(\bigcup_{n\in\mathbb{N}} A_n\right)$$ 이 가산임을 보이라(각 $$A_n$$ 가 가산).  
   스케치: $$\mathbb{N}\times\mathbb{N}$$ 에서 대각선 열거 후 사상.

7) $$|\mathbb{R}|=|\mathcal{P}(\mathbb{N})|$$ 을 개요 수준으로 설명하라.  
   스케치: 비트열과 이진 소수 전개의 전단사(중복 처리 포함).

8) $$|A|=n, |B|=k\le n$$ 에 대해 전사 개수 $$k!\,S(n,k)$$ 를 조합적으로 유도하라.  
   스케치: 블록 분할 후 라벨 붙이기.

---

## 7. 자주 하는 실수와 점검 리스트

- 여집합은 **우주 집합 고정**이 전제되어야 한다. 우주가 바뀌면 $$A^c$$ 가 달라진다.
- $$\mathbb{Q}$$ 를 “연속적”으로 오해하는 경우가 있으나, 크기는 $$\aleph_0$$(가산).
- $$(0,1)$$ 과 $$\mathbb{R}$$ 의 크기는 같다. 길이·측도 개념과 **카디널리티**는 다른 개념이다.
- 무한 카디널 산술에서 $$\kappa+\kappa=\kappa$$, $$\kappa\cdot\kappa=\kappa$$ 같은 성질은 유한 직관과 다르지만 전단사 구성으로 타당하다.
- “부분집합의 크기는 항상 작다”는 **유한 집합에서는** 맞지만, 무한 집합은 $$\mathbb{N}\sim 2\mathbb{N}$$ 처럼 부분집합과 크기가 같을 수 있다.

---

## 8. 요약

- 유한 집합: $$|\mathcal{P}(A)|=2^{|A|},\ |A\times B|=|A||B|,\ |B|^{|A|}=\text{함수 개수}$$ 등 **직관적 산술**.
- 무한 집합: 크기 비교는 **전단사**로 결정. $$\aleph_0 < \mathfrak{c}=2^{\aleph_0}$$.
- 대표적 결과: 칸토어 대각선 논법, 칸토어 정리, 슈뢰더–베른스타인.
- 실무 응용: 상태 공간 크기(멱집합), 관계·함수 개수, 전사/단사 개수(스털링 수, 순열/배열), 데이터 모델에서의 경우의 수 산정.

이상의 틀을 익히면, 알고리즘 상태 수 계산, 보안 키 공간 크기, 데이터 조합 수 평가, 관계·함수 설계의 경우의 수 계산을 체계적으로 수행할 수 있다.