---
layout: post
title: TCPIP - 무선·모바일·가정·기업 네트워크 특징
date: 2025-09-04 18:25:23 +0900
category: TCPIP
---
# 14. 무선/모바일·가정/기업 네트워크 특징  
**(🔰 Wi-Fi: RSSI·SNR·채널, 2.4/5 GHz 차이 / ⚙️ 이동통신망·CGNAT·핫스팟/테더링 / ⚙️ 가정 공유기 vs 기업 네트워크: 세그먼트·NAC 비교)**

> 이 글은 **현대 무선·모바일 환경**에서 체감 품질을 좌우하는 요소를 **원리→설계→운영→트러블슈팅** 흐름으로 정리합니다.  
> 코드/명령은 ```로, 간단 수식은 *MathJax* 표기로 제공합니다.

---

## 14.1 Wi-Fi 핵심 개념 (🔰)

### 14.1.1 RSSI, 잡음, SNR
- **RSSI**: 수신 신호 세기(dBm). 일반적으로 **–30(매우 강함) ~ –90(약함)**.
- **Noise Floor(잡음)**: 같은 단위(dBm). 예) –95 dBm.
- **SNR**: \(\text{SNR} = \text{RSSI} - \text{Noise}\) (dB).  
  - **20 dB 이상**: 양호, **10–20 dB**: 경계, **<10 dB**: 취약.
- **예시**: RSSI –58 dBm, 잡음 –92 dBm → SNR \(=34\ \text{dB}\) (양호, 고(MCS) 가능).

> **체감 팁**: “RSSI 절대값”보다 **SNR**이 더 중요한 품질 지표입니다.

### 14.1.2 채널·대역폭·간섭
- **채널 폭**: 20/40/80/160 MHz (폭↑ = 속도↑, **간섭 위험도↑**).
- **간섭 유형**
  - **CCI**(Co-Channel Interference): 같은 채널을 **여러 AP/클라이언트**가 공유 → **경합↑**.
  - **ACI**(Adjacent-Channel Interference): **겹치는 채널** 사용 → **심각한 충돌**.
- **RTS/CTS, EDCA, TXOP, Airtime Fairness**: CSMA/CA 경합을 완화하고 전송 기회를 공정하게 나눔.

### 14.1.3 프레임 오버헤드·에어타임
- 무선은 “**에어타임(전파 점유시간)**”이 자원입니다. 큰 PHY 속도라도 **재전송·제어 프레임**이 많으면 체감 속도↓.
- **AMPDU/AMSDU**(프레임 집계)와 **Block ACK**로 효율↑.

---

## 14.2 2.4 GHz vs 5 GHz (🔰)

| 구분 | 2.4 GHz | 5 GHz |
|---|---|---|
| **장점** | 도달거리↑, 벽 투과↑, **IoT 호환** | 채널 많음, **간섭↓**, 고속(MCS/채널폭↑), 밀집 환경 유리 |
| **단점** | **비혼잡 채널 3개(1/6/11)**, 전자레인지/BLE 간섭 | 도달거리↓, 일부 **DFS 채널 레이더 회피** 필요 |
| **권장** | IoT/저대역폭/장거리 | 노트북·폰·스트리밍·회의, 고용량 트래픽 |
| **채널폭 권장** | **20 MHz**(혼잡 도심) | 40/80 MHz(밀집도·노이즈에 따라), 기업/회의는 20~40 MHz로 안정 추구 |

> **실무 권장**  
> - 2.4 GHz는 **채널 1/6/11 고정 + 20 MHz**.  
> - 5 GHz는 **자동 최적화(RRM)** 또는 **계획 배치**로 비중심/DFS 포함.  
> - **듀얼 SSID**: `Corp-5G`(우선), `Corp-IoT-2G`(IoT 전용)로 역할 분리.

---

## 14.3 Wi-Fi 설계·운영 포인트 (예제 포함)

### 14.3.1 아파트/사무실 간단 현장 체크
```bash
# macOS
airport -s             # 주변 SSID, 채널, 신호세기
# Linux
nmcli dev wifi list    # 스캔 목록, 채널 혼잡도 감
iw dev wlan0 link      # 연결 RSSI/비트레이트
```
- **목표**: 같은 층/인접 AP와 **채널 중복 최소화**.  
- **채널 변경 후**: 속도·지연·재시도율(드라이버 통계) 비교.

### 14.3.2 예제—간섭 완화 미니 시나리오
1) 2.4 GHz에서 **채널 1과 6이 혼잡**, 11은 한적.  
2) AP를 **채널 11 + 20 MHz**로 고정.  
3) 5 GHz는 **자동(DFS 포함)**, **채널폭 40 MHz**로 낮춰 안정성↑.  
4) **IoT 전용 SSID**에 2.4만 노출, 주요 단말은 5 GHz 우선 연결.

### 14.3.3 지표 대시보드(추천)
```
RSSI(dBm), SNR(dB), Retry%, PER(Packet Error Rate), MCS 분포,
Channel Utilization(%), Airtime Top Talkers, DFS events, Client Roam count
```

### 14.3.4 로밍(이동 중 끊김) 최소화
- **AP 전력 균형**: 한 AP가 과도하게 세면 로밍 지연(붙잡힘).  
- **Sticky Client** 방지: `Min RSSI`/`Band Steering`/`11k/v/r` 지원 AP 고려.

---

## 14.4 이동통신망, CGNAT, 테더링/핫스팟 (⚙️)

### 14.4.1 셀룰러 특성(4G/5G)
- 전파 환경·셀 부하·기지국 스케줄러에 따라 **지연·지터 변동**.  
- **Carrier Aggregation**, **5G NSA/SA**, **Dual Connectivity**로 처리량↑.  
- **핸드오버** 중 **임시 패킷 손실/지연 스파이크** 가능.

### 14.4.2 CGNAT(캐리어 그레이드 NAT)
- 모바일/가정 ISP가 **사설 IP(예: 10.x/100.64/10)**를 고객에게 주고 **공유 공인IP**로 NAT. (**NAT444**)
- **영향**:
  - **인바운드 포트포워딩 불가**(대부분), P2P/게임/원격접속 제약.
  - **NAT Type “Strict/Moderate”** 빈번 → 매칭 실패/음성 끊김.
- **대응**: **IPv6** 사용, **TURN/VPN/중계** 활용, 앱의 **ICE/STUN**.

### 14.4.3 핫스팟/테더링 흔한 이슈
- **이중 NAT**(단말 ↔ 폰 ↔ CGNAT) → 포트/타임아웃 문제.  
- **데이터 절약/절전** 정책 → 백그라운드 연결 끊김.  
- 일부 통신사는 **테더링 전용 정책/제한**(포트/프로토콜) 운용.
- **보안상 조언**: 사업자 정책을 우회/회피하려는 설정·행위는 **권장하지 않습니다**(계약/법률 위반 가능).

### 14.4.4 테더링 품질 팁
- 가능하면 **5 GHz AP 모드**(간섭↓), **채널 고정**.  
- 다자 스트리밍은 **핫스팟 대신 휴대 라우터/모뎀** 권장(배터리·열·스케줄러 안정).  
- **NAT Keepalive**(UDP 15–30s), **MTU 1400±**로 보수적 운용(터널/핫스팟 겹칠 때).

---

## 14.5 가정 공유기 vs 기업 네트워크 (⚙️)

### 14.5.1 목적/구성의 차이

| 항목 | 가정 공유기 | 기업 네트워크 |
|---|---|---|
| **목적** | 간편·올인원 | 확장·보안·가용성 |
| **토폴로지** | 단일 NAT + 단일 SSID(게스트 옵션) | **코어/배포/엣지** 계층, L3 코어 |
| **세그먼트** | 단일 브로드캐스트 도메인(기본) | **VLAN/VRF**로 다층 분리(Guest/Corp/IoT/OT 등) |
| **인증** | WPA2/3-PSK | **802.1X(EAP-TLS/PEAP)**, 포트 기반 NAC |
| **정책** | 간단한 포트필터 | **FW·IPS·DLP·프록시** 및 세분화 ACL |
| **관리** | 웹 UI | **컨트롤러/RRM**, 중앙 로그/모니터링(SIEM/NMS) |
| **가용성** | 단일 장비 | **스택/MLAG/VRRP**, 이중화 경로 |
| **주소계획** | 단일 사설대역 | **IPAM**으로 계층별 주소·DHCP 스코프 |

### 14.5.2 NAC(네트워크 접근 제어)
- **802.1X**(포트 레벨 인증) + **RADIUS**: 사용자/디바이스 신원 검증 → **동적 VLAN** 할당.  
- **MAB**(MAC Auth Bypass): 레거시/IoT 장비에 **대체 인증**.  
- **Posture**: OS 패치/안티바이러스/암호화 상태 검사(에이전트 기반).

### 14.5.3 기업형 Wi-Fi 설계 요점
- **커버리지보다 용량 우선**: AP 과밀 배치 금지, **채널 재사용 계획**.  
- **출력 균형**: 2.4는 출력↓, 5 GHz는 밀도·DFS 고려.  
- **RRM**(Radio Resource Management)와 **수동 사이트 서베이** 병행.

---

## 14.6 보안·세그멘테이션 실전 예

### 14.6.1 가정(실용)
- **게스트 SSID 분리 + AP 격리**: 게스트 간 L2 격리 on.  
- **IoT 전용 SSID(2.4 GHz)**: **LAN→인터넷만** 허용, 내부 리소스 접근 차단.  
- **WPA3-SAE**(가능 시), **WPS off**, 기본 관리자 비번 변경.

### 14.6.2 기업(개념 룰)
```text
VLAN 10: Corp      → 내부/인터넷, DNS=Internal, 802.1X 필수
VLAN 20: Guest     → 인터넷만, DNS=Public, L2 Client Isolation
VLAN 30: IoT       → 인터넷과 특정 브로커만(443/8883), mDNS 프록시 제한
VLAN 40: Mgmt      → 점프호스트 경유, ACL 최소 권한
```
- **DHCP Snooping + IP Source Guard + DAI(동적 ARP 검사)**로 L2 공격 방지.  
- **DNS 필터/DoH 정책**으로 데이터 유출 감소.

---

## 14.7 트러블슈팅 런북

### 14.7.1 “와이파이가 느리다”
```text
1) 클라 RSSI/SNR: -65 dBm 이상, SNR ≥ 20 dB ?
2) 물리 속도(MCS) vs TCP 스루풋: 1/2~1/3이면 정상 범위, 과도↓면 재시도↑ 의심
3) 채널 이용률/간섭: 2.4는 1/6/11? 5 GHz DFS 이벤트 빈번?
4) 단말 드라이버/OS 업데이트, 전원 정책(저전력 모드 해제)
5) AP 간 거리/출력 재조정, 채널폭 20/40로 보수화
```

### 14.7.2 “영상회의가 끊긴다”
```text
- 업로드 지연/지터↑? → 가정 라우터에 fq_codel/스마트큐
- 모바일 핫스팟? → 5 GHz로 전환, 동시 사용 단말 축소
- VPN/터널 경로? → MTU/MSS 1360~1400 테스트, ICMP PTB 허용
- 앱 내 전송 모드: UDP 우선, TURN 릴레이 사용률 확인
```

### 14.7.3 “게임 NAT Type Strict”
```text
- 모바일/CGNAT 환경: 인바운드 불가(정상 동작). 해결: IPv6, TURN/VPN(중계), 고정 공인IP 상품
- 가정 NAT: UPnP/PCP 제한적 허용 또는 **정적 포트포워딩**, Hairpin 지원 확인
```

---

## 14.8 계산 감각 & 빠른 체크 (MathJax)

### 14.8.1 경로 손실(자유공간 근사)
\[
\mathrm{FSPL(dB)} \approx 20\log_{10}(d) + 20\log_{10}(f) + 32.44
\]
- \(d\): km, \(f\): MHz. 2.4 GHz보다 5 GHz가 **경로 손실↑**(동일 거리) → 커버리지↓.

### 14.8.2 에어타임 근사
\[
T_{\text{air}} \approx \frac{\text{Payload}}{\text{PHY Rate}} + \text{오버헤드/재시도}
\]
- 재시도율↑ → 에어타임↑ → 다른 단말 체감 속도↓.

---

## 14.9 설정 템플릿(개념)

### 14.9.1 가정 AP 권장(요지)
```
2.4 GHz: 채널 1 또는 6 또는 11 (고정), 폭 20 MHz
5 GHz:  채널 자동(DFS 포함), 폭 40~80 MHz (환경 따라)
보안: WPA2-PSK(AES) 또는 WPA3-SAE, WPS Off
SSID: Main(2.4+5), IoT(2.4 전용), Guest(게스트 격리)
QoS: WMM On, Airtime Fairness On
```

### 14.9.2 기업 컨트롤러 정책(요지)
```
RF 프로파일: 2.4 TxPower Low, 5G Balanced
로밍: 802.11k/v/r On (단말 호환성 주의)
RRM: 5~10분 주기, DFS 이벤트 알림
NAC: 802.1X(EAP-TLS), 실패 시 MAB→VLAN Quarantine
보안: DHCP Snooping, DAI, IP Source Guard, mDNS 게이트웨이 제한
```

---

## 14.10 베스트 프랙티스(요약 카드)

- **Wi-Fi 품질** = **SNR·간섭·에어타임**. 2.4는 **1/6/11 + 20 MHz**, 5 GHz는 **계획/DFS**.  
- **로밍 품질**: AP 출력 균형, 11k/v/r, Sticky 방지.  
- **모바일·CGNAT**: 인바운드 제약은 **정상 현상**. **IPv6/TURN/VPN**으로 보완.  
- **테더링**: 5 GHz, 장시간/다자 이용 시 전용 장비 권장.  
- **가정 vs 기업**: 기능·목표가 다르다—기업은 **세그멘트·NAC·중앙관리·가용성**.  
- **보안**: WPA3(가능 시), 게스트/IoT 분리, L2 보호(DHCP Snooping/DAI).  
- **운영**: 지표 대시보드, 채널/출력 변경은 **A/B 후 기록**.

---

### 부록 A — 빠른 진단 명령 모음
```bash
# Wi-Fi 링크 상태
iw dev wlan0 link

# 주변 혼잡 스캔
nmcli dev wifi list
airport -s            # (macOS)

# 라디오/채널 통계(드라이버 의존)
iw dev wlan0 survey dump

# 네트워크 혼잡/지연
ping -c 20 <gw>
mtr -rwzbc100 <host>
```

### 부록 B — 정책 템플릿(요지)
```text
[SSID/대역] Main(2.4+5), IoT(2.4), Guest(2.4+5)
[보안] WPA3-SAE(지원시) / WPA2-PSK(AES), WPS Off
[무선] 2.4: CH 1/6/11 20MHz, 5G: Auto(DFS) 40~80MHz
[분리] Guest L2 Isolation On, IoT→Broker만 허용(443/8883)
[로밍] 11k/v/r On, Min RSSI -70 dBm, Band Steering On
[관측] RSSI/SNR/Retry/Util/DFS, Roam count, Airtime Top-N
```