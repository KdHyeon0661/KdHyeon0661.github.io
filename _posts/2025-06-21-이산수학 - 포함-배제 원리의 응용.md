---
layout: post
title: 이산수학 - 포함-배제 원리의 응용
date: 2025-06-21 23:20:23 +0900
category: 이산수학
---
# 🎯 포함-배제 원리의 응용

## 📌 개요

**포함-배제 원리**는 단순한 집합 원소의 수 계산에서 출발하지만, 실전 문제에서는 **복잡한 조건이 중첩된 경우**나 **전체 집합의 보수를 구할 때**, **알고리즘 효율화를 위해 비트마스크와 결합될 때** 등으로 확장됩니다.

> "조건이 많고 겹칠 수 있을 때, 각 조건이 배제하는 경우를 분석해 전체 경우에서 제거한다"는 전략.

---

## 🧠 응용 1: 적어도 하나의 조건을 만족하는 경우 계산

### 문제

> 1 이상 100 이하의 정수 중에서 **2, 3, 5 중 적어도 하나의 배수인 수의 개수**는?

### 포함-배제 적용

\[
|A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|
\]

계산:

- \( |A| = \lfloor 100/2 \rfloor = 50 \)  
- \( |B| = \lfloor 100/3 \rfloor = 33 \)  
- \( |C| = \lfloor 100/5 \rfloor = 20 \)  
- \( |A \cap B| = \lfloor 100/6 \rfloor = 16 \)  
- \( |A \cap C| = \lfloor 100/10 \rfloor = 10 \)  
- \( |B \cap C| = \lfloor 100/15 \rfloor = 6 \)  
- \( |A \cap B \cap C| = \lfloor 100/30 \rfloor = 3 \)

결과:

\[
50 + 33 + 20 - 16 - 10 - 6 + 3 = 74
\]

---

## 🧠 응용 2: 전체에서 ‘조건을 **하나도 만족하지 않는 경우**’ 구하기

> 위 문제의 반대: **2, 3, 5 중 어느 것도 배수가 아닌 수의 개수**는?

### 해법

- 전체 수: 100  
- 조건을 만족하는 수: 74  
- 만족하지 않는 수:  
\[
100 - 74 = 26
\]

> ✅ 포함-배제는 "적어도 하나 만족"을 계산하고, 보수를 통해 "전혀 만족하지 않는 경우"를 구할 수 있음.

---

## 🧠 응용 3: 비트마스크와 포함-배제 (알고리즘)

### 문제

> N명의 학생 중 M명은 서로 **서로 다른 언어**들을 사용하는데, **공통 언어를 모르는 학생 조합의 수**를 구하라.

각 언어를 **비트로 표현**하고, 학생의 언어 집합을 **비트마스크로 저장**한다.  
그리고 어떤 언어도 **공통으로 알지 못하는 조합**을 **포함-배제로 역산**한다.

### 전략 요약

- 전체 가능한 조합 수: \( 2^N \)  
- 특정 언어를 공유하는 조합을 **언어별로 필터링 후 포함-배제**  
- **비트마스크 기반 포함-배제**로 최적화

> ✅ 유명한 예: [BOJ 14287 "언어"](https://www.acmicpc.net/problem/14287), [코드포스 포함-배제 DP]

---

## 🧠 응용 4: 서로 다른 숫자로 구성된 수의 개수

### 문제

> 0~9까지의 숫자 중에서 **3자리 수 중 숫자가 모두 다른 경우**는?

전체 3자리 수: \( 900 \)개 (100 ~ 999)

### 포함-배제 방식:

- 전체 3자리 수에서 **중복된 숫자가 있는 수**를 구하고 전체에서 빼기
- 세 자리 수는 \( ABC \)로 생각

- \( A \)는 1~9 → 9가지  
- \( B, C \)는 0~9 중 A와 겹치지 않게 → 9 × 8

→ 서로 다른 숫자로 구성된 3자리 수: \( 9 \times 9 \times 8 = 648 \)

→ 포함-배제 대신 **순열 공식과도 연계 가능**

---

## 🧠 응용 5: 적어도 하나의 항목을 포함하는 문자열 개수

> A, B, C 중 **적어도 하나의 문자가 포함된** 길이 5의 문자열 개수?

### 전체 경우:  
- 가능한 문자: A~Z (26개)  
- 전체 문자열 수: \( 26^5 \)

### 만족하지 않는 경우:

- A, B, C를 **포함하지 않는 경우의 수**  
- 가능한 문자: 23개 → \( 23^5 \)

→ 정답: \( 26^5 - 23^5 \)

> ✅ 이것도 포함-배제를 “조건을 하나도 만족하지 않는 것”으로 뒤집어 사용

---

## 🧠 응용 6: 오일러 피 함수와 포함-배제

> 오일러 피 함수 \( \phi(n) \): \( n \) 이하의 정수 중 \( n \)과 서로소인 수의 개수

\[
\phi(n) = n \left(1 - \frac{1}{p_1}\right) \left(1 - \frac{1}{p_2}\right) \cdots
\]

- 이 식은 사실 포함-배제에 기반함
- \( \phi(30) \) 계산:  
  \( 30 = 2 \cdot 3 \cdot 5 \Rightarrow \phi(30) = 30(1 - \frac{1}{2})(1 - \frac{1}{3})(1 - \frac{1}{5}) = 8 \)

> ✅ 포함-배제가 정수론에 활용되는 대표 사례

---

## 🧠 응용 7: 서브셋 개수에서 겹침 제거

> \( n \)개의 원소 집합의 모든 부분집합 중, **특정 원소를 반드시 포함하는 부분집합**의 수?

- 전체 부분집합 수: \( 2^n \)  
- 특정 원소를 포함하지 않는 부분집합 수: \( 2^{n-1} \)

→ 포함하는 부분집합 수: \( 2^n - 2^{n-1} = 2^{n-1} \)

> ✅ 특정 조건을 만족하지 않는 경우를 계산해 빼는 방식 = 포함-배제 사고방식

---

## 🧠 응용 8: 확률 계산

> 사건 A, B의 발생 확률을 알고 있을 때, A 또는 B가 발생할 확률은?

\[
P(A \cup B) = P(A) + P(B) - P(A \cap B)
\]

→ 확률에서도 포함-배제 원리 적용됨

> ✅ 더 많은 사건의 경우에도 확장 가능

---

## 📚 정리

| 응용 분야 | 설명 |
|-----------|------|
| 수 세기 | 조건이 겹치는 경우의 원소 수 정확히 계산 |
| 조건 보수 | "하나도 만족하지 않는 경우" 역산 |
| 알고리즘 최적화 | 비트마스크 포함-배제 (조합, DP) |
| 정수론 | 오일러 피 함수, 배수 문제 등 |
| 확률 | 사건 A ∪ B 계산 |
| 문자열/수열 문제 | 특정 조건 포함 여부로 수 세기 |
