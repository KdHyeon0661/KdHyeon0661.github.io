---
layout: post
title: Git - Git ì‹¤ìˆ˜ ë³µêµ¬ ì „ëµ
date: 2025-02-11 21:20:23 +0900
category: Git
---
# ğŸ› ï¸ Git ì‹¤ìˆ˜ ë³µêµ¬ ì „ëµ ì´ì •ë¦¬ (reflog ë“±)

---

## â— ì–´ë–¤ ì‹¤ìˆ˜ë¥¼ ë§í•˜ëŠ” ê±¸ê¹Œ?

| ì‹¤ìˆ˜ ìœ í˜• | ì˜ˆì‹œ |
|-----------|------|
| ì»¤ë°‹ ì‚­ì œ | `git reset --hard HEAD~2` |
| ë¸Œëœì¹˜ ì‚­ì œ | `git branch -D feature/login` |
| íŒŒì¼ ì‚­ì œ | `git rm íŒŒì¼ && commit` |
| stash ê¹Œë¨¹ìŒ | `git stash pop` í–ˆëŠ”ë° ì¶©ëŒ í›„ ìƒìŒ |
| rebase ì¤‘ ì¶©ëŒ | `git rebase` ë„ì¤‘ ì†ìƒ |
| force pushë¡œ ë®ì–´ì”€ | `git push --force` |

ì´ëŸ´ ë•Œ **Gitì˜ ë¡œê·¸ì™€ ë‚´ë¶€ êµ¬ì¡°**ë¥¼ ì´ìš©í•˜ë©´ ë³µêµ¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

## ğŸ” 1ï¸âƒ£ `git reflog`: íˆìŠ¤í† ë¦¬ì˜ íˆìŠ¤í† ë¦¬

---

### ğŸ§  ê°œë…

> `reflog`ëŠ” ë¸Œëœì¹˜ê°€ ì´ë™í•œ **ëª¨ë“  ê²½ë¡œ**ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

```bash
git reflog
```

### âœ… ì˜ˆì œ ì¶œë ¥:

```
a3c22fb HEAD@{0}: reset: moving to HEAD~1
7b9d3f2 HEAD@{1}: commit: ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€
adf23f1 HEAD@{2}: commit: ë·° ìˆ˜ì •
```

- `HEAD@{1}` ì€ **ì§ì „ ì»¤ë°‹ ìƒíƒœ**
- `HEAD@{2}` ì€ **ê·¸ ì „ ì»¤ë°‹ ìƒíƒœ**

---

### âœ… ë³µêµ¬ ëª…ë ¹ì–´

```bash
git reset --hard HEAD@{1}
```

ë˜ëŠ”

```bash
git checkout -b rescue-branch HEAD@{2}
```

> ì‹¤ìˆ˜í•˜ê¸° ì „ ìƒíƒœë¥¼ ìƒˆ ë¸Œëœì¹˜ë¡œ ì‚´ë¦¬ëŠ” ê²Œ ê°€ì¥ ì•ˆì „

---

## ğŸ” 2ï¸âƒ£ `git fsck`: ê³ ì•„ ì»¤ë°‹ ì°¾ê¸°

---

> ì»¤ë°‹ì€ ì‚­ì œë¼ë„ **ê°ì²´ë¡œëŠ” ì‚´ì•„ ìˆìŒ!**

```bash
git fsck --lost-found
```

ì¶œë ¥ ì˜ˆ:

```
dangling commit 2e4f9a1d... 
```

â†’ ì´ ì»¤ë°‹ì€ í˜„ì¬ ë¸Œëœì¹˜ì™€ ì—°ê²°ë¼ ìˆì§€ ì•Šì§€ë§Œ, ì—¬ì „íˆ ì¡´ì¬

```bash
git checkout 2e4f9a1d
```

â†’ í™•ì¸ í›„ ìƒˆ ë¸Œëœì¹˜ ìƒì„±:

```bash
git checkout -b recovered-branch
```

---

## ğŸ§³ 3ï¸âƒ£ `git stash` ë³µêµ¬ ì „ëµ

---

- `stash pop` ì¤‘ ì¶©ëŒì´ ë‚˜ë©´, ì¶©ëŒ í•´ê²° ì „ê¹Œì§€ stashëŠ” ì•„ì§ ë‚¨ì•„ ìˆìŒ
- í•˜ì§€ë§Œ ì¤‘ë‹¨ë˜ê±°ë‚˜ ì¤‘ë³µ pop ì‹œ stashê°€ ì‚¬ë¼ì§„ ê²ƒì²˜ëŸ¼ ë³´ì¼ ìˆ˜ ìˆìŒ

### ğŸ” í™•ì¸

```bash
git fsck --lost-found
```

í˜¹ì€ `.git/lost-found/other` ì•ˆì—ì„œ stash í˜•íƒœì˜ blob ê°ì²´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ í™•ì¸í•´ì•¼ í•  ìˆ˜ë„ ìˆìŒ

â†’ ì¼ë°˜ì ìœ¼ë¡  `stash pop`ë³´ë‹¤ëŠ” `stash apply` ì‚¬ìš©ì„ ê¶Œì¥!

---

## ğŸ”„ 4ï¸âƒ£ ë¸Œëœì¹˜ ì‚­ì œ ë³µêµ¬

---

### âœ… ì‚­ì œëœ ë¸Œëœì¹˜ ë˜ì‚´ë¦¬ê¸°

1. `git reflog`ì—ì„œ í•´ë‹¹ ë¸Œëœì¹˜ ì»¤ë°‹ í•´ì‹œ ì°¾ê¸°

```bash
git reflog
# ì˜ˆ: f9c2a01 HEAD@{3}: checkout: moving from feature/login to main
```

2. ë¸Œëœì¹˜ ë³µêµ¬

```bash
git checkout -b feature/login f9c2a01
```

---

## ğŸ§ª 5ï¸âƒ£ rebase ë„ì¤‘ ì¤‘ë‹¨ë˜ì—ˆì„ ë•Œ

---

```bash
git rebase --abort
```

- ì¶©ëŒ í•´ê²°ì´ ì–´ë ¤ìš¸ ë•Œ ì¦‰ì‹œ ì·¨ì†Œ ê°€ëŠ¥
- ì‹¤íŒ¨í•œ rebaseëŠ” `reflog`ë¡œë„ ìƒíƒœ ë³µêµ¬ ê°€ëŠ¥

```bash
git reflog
git reset --hard HEAD@{2}
```

---

## ğŸ”¨ ê¸°íƒ€ ë„êµ¬

| ë„êµ¬ | ì„¤ëª… |
|------|------|
| `.git/refs/original/` | ë³€ê²½ ì „ ì»¤ë°‹ ìƒíƒœ ë°±ì—… ìœ„ì¹˜ |
| `.git/lost-found/` | dangling object(ê³ ì•„ ì»¤ë°‹) ìœ„ì¹˜ |
| `git fsck` | ì†ìƒëœ or ìƒì€ ê°ì²´ íƒì§€ |
| `git log --all --grep=ë©”ì‹œì§€` | ì»¤ë°‹ ë©”ì‹œì§€ ê¸°ë°˜ íƒìƒ‰ |
| `git log --all -- <íŒŒì¼>` | íŠ¹ì • íŒŒì¼ì˜ ì‚­ì œ/ì´ë ¥ ë³µêµ¬ |

---

## âœ… ì‹¤ë¬´ì—ì„œì˜ ë³µêµ¬ ì „ëµ ìš”ì•½

| ì‹¤ìˆ˜ | ë³µêµ¬ ë°©ë²• |
|------|------------|
| reset --hard | `reflog`, `reset --hard HEAD@{n}` |
| ë¸Œëœì¹˜ ì‚­ì œ | `reflog`, `checkout -b` |
| rebase ë„ì¤‘ ì‹¤íŒ¨ | `rebase --abort` ë˜ëŠ” `reflog` |
| stash pop ì‹¤ìˆ˜ | `fsck`, `.git/lost-found` |
| ê°•ì œ í‘¸ì‹œë¡œ ë®ì–´ì”€ | íŒ€ì›ì´ ê°€ì§„ ì´ì „ ì»¤ë°‹ ë³µì› or reflog |

---

## ğŸ” ì˜ˆë°©ì„ ìœ„í•œ íŒ

- `reset --hard` ì „ì— í•­ìƒ `git stash` ë˜ëŠ” `git branch temp` í•´ë‘ê¸°
- `force push`ëŠ” ë§¤ìš° ì‹ ì¤‘íˆ â†’ CI ë¸Œëœì¹˜ì—” ê¸ˆì§€!
- ë³µì¡í•œ rebase ì „ì— `git log`, `git branch backup`ìœ¼ë¡œ ë°±ì—…
- `alias oops="git reflog && echo 'ğŸ’¡ git reset --hard HEAD@{N}'"` ë§Œë“¤ì–´ë‘ê¸°

---

## ğŸ”— ì°¸ê³  ë§í¬

- [Git Reflog ê³µì‹ ë¬¸ì„œ](https://git-scm.com/docs/git-reflog)
- [Git fsck](https://git-scm.com/docs/git-fsck)
- [Pro Git Book - Undoing Things](https://git-scm.com/book/en/v2/Git-Tools-Reset-Demystified)