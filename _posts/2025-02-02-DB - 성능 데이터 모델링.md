---
layout: post
title: DB - 성능 데이터 모델링
date: 2025-02-02 19:20:23 +0900
category: DB
---
# ⚡ 성능 데이터 모델링 개요 (보강 버전)

## ✅ 성능 데이터 모델링이란?

**성능 데이터 모델링(Performance Data Modeling)**이란, 정규화된 논리/물리 모델을 기반으로 시스템 성능(조회/입력/처리 속도 등)을 극대화하기 위해 **선택적으로 구조를 조정**하는 고급 모델링 기법입니다.

단순한 빠른 처리만이 목적이 아니라, **무결성과 성능의 균형**, **운영 환경에서의 병목 제거**, **유지보수성 유지**를 함께 달성하는 것이 목표입니다.

> ✅ 핵심 흐름: 정규화 수행 → 병목 탐지 → 다른 기법 고려 → 반정규화 적용 여부 판단 → 반복 튜닝

---

## 🎯 적용 시점과 필요성

| 적용 시점     | 주요 내용 |
|--------------|-----------|
| 모델 설계 초기 | 데이터 용량 추산, 트랜잭션 유형 분석(읽기 vs 쓰기), SLA 요구사항 반영 |
| 개발 단계     | 주요 쿼리 성능 테스트, 병목 가능성 예측 |
| 운영 단계     | 모니터링 결과를 바탕으로 재설계 및 반정규화 적용 여부 판단 |

> 성능은 설계 후반이 아니라 **설계 초기부터 고려**되어야 함.

---

## 🧩 성능 모델링과 정규화의 관계

✅ 정규화는 다음과 같은 성능적 장점도 존재합니다.

- 데이터 중복 감소 → 저장 공간 효율
- 삽입/수정/삭제 이상(Anomaly) 제거 → 무결성 향상
- 구조의 명확성 → 쿼리 최적화 용이

⚠️ “정규화는 무조건 성능을 낮춘다”는 오해입니다.

> ❗ 성능 모델링은 **정규화를 반드시 수행한 후**, 실제 **병목 지점에서만 선택적으로 반정규화(Denormalization)**를 적용해야 합니다.

무분별한 조기 반정규화는 다음 문제를 유발할 수 있습니다.

- 무결성 훼손
- 데이터 동기화 로직 복잡화
- 장기적 유지보수 리스크 증가

---

## 🔁 성능 모델링 절차 요약

1. **데이터 용량/트랜잭션 유형 분석**
2. **정규화된 논리/물리 모델링 수행**
3. **주요 쿼리의 병목 분석** (예: 조인 수, 필터 조건, 정렬)
4. **우선 인덱스/파티셔닝/튜닝 시도**
5. **그래도 해결되지 않으면 반정규화 적용**
6. **운영 중에도 모니터링과 재튜닝 반복**

---

## 🔧 성능 최적화 기법 정리

| 기법 | 설명 |
|------|------|
| ✅ 반정규화 | 자주 사용하는 컬럼을 테이블 내 중복 저장, 테이블 병합, 요약 테이블 등 |
| ✅ 인덱스 최적화 | 단일/복합/함수 인덱스 구성, 읽기 vs 쓰기 비율 고려 |
| ✅ 파티셔닝 | 수평(날짜 등 기준), 수직(자주 조회 컬럼 중심) 분할 |
| ✅ 캐싱 | 계산결과를 메모리나 결과 테이블로 저장 (Redis, Materialized View 등) |
| ✅ 트랜잭션 분리 | 이력 테이블과 실시간 테이블 분리 |
| ✅ 병렬 처리 | 조회 분산 또는 테이블 샤딩 |
| ✅ 조회 패턴 반영 | 보고서 쿼리 패턴에 맞춘 컬럼 재배치, 중복 컬럼 추가 |

---

## 🎯 반정규화(역정규화) vs 비정규화

| 용어 | 정의 |
|------|------|
| **반정규화(Denormalization)** | 정규화된 모델에서 성능을 이유로 일부 관계/속성을 중복 저장 등으로 되돌리는 것 |
| **비정규화(Non-normalization)** | 아예 정규화를 수행하지 않거나, 처음부터 중복을 허용한 모델링 |

✅ 반정규화는 구조적으로 정규화를 이해한 상태에서 선택적으로 **부분적으로 되돌리는 것**임을 강조.

---

## 📈 성능 모델링 대상 선정 기준

> 무조건 비정규화하지 말고, **다음 조건이 충족된 경우에만 반정규화를 고려**해야 합니다.

- 잦은 조인/복잡한 서브쿼리로 병목 발생
- 대량 데이터의 실시간 응답 지연
- 보고서/집계성 쿼리가 느린 경우
- 대체 기법(인덱스, 파티셔닝 등)으로 해결되지 않는 경우

---

## 🧭 최신 트렌드 및 고려 사항

| 항목 | 설명 |
|------|------|
| 분산 DB/샤딩 | 물리적 데이터 분산으로 트래픽 분산 |
| NoSQL 도입 | 비정형 대량 데이터 처리 (문서형/키-값형 등) |
| CDC | Change Data Capture 기반 변경 추적 성능 최적화 |
| 메모리 캐시 | Redis, Memcached 등 활용 |
| 운영 모니터링 | APM(Application Performance Monitoring) 도구 활용 (예: Prometheus + Grafana) |
| 반복적 튜닝 루프 | 설계-운영-분석-재설계 반복 주기 고려 |

---

## 🧠 일반 데이터 모델링과 성능 중심 모델링 비교

| 항목 | 일반 모델링 | 성능 중심 모델링 |
|------|--------------------|--------------------------|
| 목표 | 무결성, 논리적 정합성 | 응답 속도, 병목 제거 |
| 정규화 | 완전 정규화 우선 | 부분적 반정규화 허용 |
| 유지보수 | 쉬움, 구조적 안정 | 복잡성 증가 가능성 |
| 데이터 중복 | 최소화 | 성능 위해 제한적 허용 |
| 튜닝 관점 | 사후적 조치 | 설계 단계부터 고려 |

---

## ✅ 결론

- 성능 데이터 모델링은 **정규화를 기반으로 성능 병목을 지능적으로 해결**하는 방식입니다.
- 무조건적인 반정규화는 지양하고, **다른 대안 검토 → 실측 → 적용** 순으로 접근해야 합니다.
- 설계, 운영, 모니터링, 재설계의 **반복 사이클**을 내재화하는 것이 성공적인 성능 설계의 핵심입니다.

> 성능과 정합성은 **경쟁 관계가 아닌 균형의 대상**입니다.