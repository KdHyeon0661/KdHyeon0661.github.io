---
layout: post
title: CSS - 실무에서의 CSS 코드 구조
date: 2025-05-20 22:20:23 +0900
category: CSS
---
# 실무에서의 CSS 코드 구조 예시

## 0) 목표와 원칙

- **분리**: 기초(Reset/Normalize) ↔ 토큰(색/타입/간격) ↔ 레이아웃 ↔ 컴포넌트 ↔ 유틸리티 ↔ 페이지 스코프
- **예측 가능성**: BEM(또는 BEM 유사)로 네이밍, 상태 클래스는 `is-*/has-*`
- **재사용성**: 유틸리티/믹스인/함수, 디자인 토큰으로 일관성 유지
- **확장성**: 다크모드/브랜드 테마/프로젝트 확장에 대비
- **검증**: stylelint/DevTools/Lighthouse/Visual Regression(옵션)

---

## 1) 폴더 구조(추천·SCSS)

```bash
src/
├─ styles/
│  ├─ base/            # 브라우저 기본값 정리(Reset/Normalize), HTML 태그 레벨 스타일
│  │  ├─ _reset.scss
│  │  └─ _typography.scss
│  ├─ tokens/          # 디자인 토큰(색, 간격, 폰트, Z-Index, Shadow 등)
│  │  ├─ _colors.scss
│  │  ├─ _spacing.scss
│  │  ├─ _typescale.scss
│  │  ├─ _zindex.scss
│  │  └─ _shadow.scss
│  ├─ utils/           # 믹스인/함수/플레이스홀더, 유틸리티 클래스
│  │  ├─ _mixins.scss
│  │  ├─ _functions.scss
│  │  ├─ _helpers.scss
│  │  └─ _utilities.scss
│  ├─ layout/          # Grid/Flex 레이아웃, 컨테이너, 래퍼, 공통 배치
│  │  ├─ _container.scss
│  │  └─ _grid.scss
│  ├─ components/      # BEM 기반 컴포넌트(버튼/카드/모달/폼/탭 등)
│  │  ├─ _button.scss
│  │  ├─ _card.scss
│  │  ├─ _modal.scss
│  │  └─ _form.scss
│  ├─ pages/           # 페이지 스코프(드물게 필요할 때만)
│  │  ├─ _home.scss
│  │  └─ _dashboard.scss
│  ├─ themes/          # 라이트/다크/브랜드 스킨(커스텀 프로퍼티 기반)
│  │  ├─ _light.scss
│  │  └─ _dark.scss
│  └─ main.scss        # 엔트리: @use/@forward로 모두 집결
└─ index.html
```

> `@import` 대신 **`@use`/`@forward`** 사용 권장(네임스페이스/캐싱/성능/의존성 명확화).

---

## 2) 디자인 토큰(Design Tokens)

### 2.1 색/간격/폰트/층위(Z)/그림자
```scss
/* src/styles/tokens/_colors.scss */
@use "sass:map";

$colors: (
  primary: #2f6feb,
  primary-600: #1f4db4,
  secondary: #6c757d,
  success: #2fbf71,
  danger: #e34f4f,
  warning: #f2b705,
  gray-900: #111,
  gray-700: #444,
  gray-500: #888,
  gray-200: #eaeaea,
  white: #fff,
  black: #000
);

@function color($key) { @return map.get($colors, $key); }
```

```scss
/* src/styles/tokens/_spacing.scss */
$space: (0:0, 1:0.25rem, 2:0.5rem, 3:0.75rem, 4:1rem, 6:1.5rem, 8:2rem);
@function sp($k) { @return map.get($space, $k); }
```

```scss
/* src/styles/tokens/_typescale.scss */
$font-family-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
$font-size: (xs:.75rem, sm:.875rem, base:1rem, lg:1.125rem, xl:1.25rem, "2xl":1.5rem);
@function fs($k){ @return map.get($font-size, $k); }
```

```scss
/* src/styles/tokens/_zindex.scss */
$z: (base:1, header:100, dropdown:1000, modal:10000);
@function z($k){ @return map.get($z, $k); }
```

```scss
/* src/styles/tokens/_shadow.scss */
$shadow-1: 0 1px 2px rgba(0,0,0,.06);
$shadow-2: 0 4px 10px rgba(0,0,0,.1);
```

> **토큰 함수로만** 접근하게 하여 직접 hex/값 남용을 방지, 일관성 유지.

---

## 3) 유틸리티/믹스인/함수

### 3.1 믹스인/함수
```scss
/* src/styles/utils/_mixins.scss */
@use "../tokens/colors" as *;
@use "../tokens/spacing" as *;

@mixin focus-ring($c: color(primary), $w: 2px) {
  outline: $w solid rgba($c, .5);
  outline-offset: 2px;
}

@mixin clamp-text($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

@mixin flex-center {
  display:flex; justify-content:center; align-items:center;
}
```

```scss
/* src/styles/utils/_functions.scss */
@use "sass:math";
@function rem($px){ @return math.div($px, 16) * 1rem; } // 예: rem(20) -> 1.25rem
```

### 3.2 유틸리티 클래스(필수만 최소)
```scss
/* src/styles/utils/_utilities.scss */
@use "../tokens/spacing" as *;
@use "../tokens/colors" as *;

/* spacing */
.mt-1 { margin-top: sp(1); }
.mt-2 { margin-top: sp(2); }
.p-4  { padding: sp(4); }
.mx-auto { margin-inline: auto; }

/* text */
.text-center { text-align:center; }
.text-danger { color: color(danger); }
.truncate { overflow:hidden; white-space:nowrap; text-overflow:ellipsis; }

/* display/flex */
.d-flex { display:flex; }
.items-center { align-items:center; }
.justify-between { justify-content:space-between; }

/* state helpers */
.is-hidden { display:none !important; }
.is-visually-hidden { position:absolute; clip:rect(0 0 0 0); width:1px; height:1px; overflow:hidden; }
```

> **원칙**: 유틸리티는 “빈번·보편·안전”한 것만 두고, 나머지는 컴포넌트 내부로 캡슐화.

---

## 4) 베이스/레이아웃

### 4.1 Reset/Normalize + 베이스
```scss
/* src/styles/base/_reset.scss */
/* Eric Meyer Reset 간략 + box-sizing */
*,
*::before,
*::after { box-sizing: border-box; }
html, body, h1, h2, h3, p, ul, li, figure { margin:0; padding:0; }
ul { list-style:none; }
a { color:inherit; text-decoration:none; }
img, video { max-width:100%; height:auto; display:block; }
```

```scss
/* src/styles/base/_typography.scss */
@use "../tokens/typescale" as *;
@use "../tokens/colors" as *;

html { font-size: 16px; }
body {
  font-family: $font-family-sans;
  font-size: fs(base);
  color: color(gray-900);
  background: color(white);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
```

### 4.2 레이아웃
```scss
/* src/styles/layout/_container.scss */
.container {
  width:min(100% - 2rem, 1200px);
  margin-inline:auto;
}
```

```scss
/* src/styles/layout/_grid.scss */
.grid {
  display:grid;
  gap: 1rem;
  grid-template-columns: repeat(12, 1fr);
}
.col-6 { grid-column: span 6; }
@media (max-width: 768px) {
  .col-6 { grid-column: span 12; }
}
```

---

## 5) 컴포넌트 작성 — BEM + 캡슐화

### 5.1 버튼
```scss
/* src/styles/components/_button.scss */
@use "../tokens/colors" as *;
@use "../tokens/spacing" as *;
@use "../tokens/shadow" as *;
@use "../utils/mixins" as *;

.button {
  --btn-bg: #{color(primary)};
  --btn-fg: #{color(white)};
  display:inline-flex; align-items:center; justify-content:center;
  gap: sp(2);
  padding: sp(2) sp(4);
  border: 1px solid transparent;
  border-radius: .5rem;
  background: var(--btn-bg);
  color: var(--btn-fg);
  box-shadow: $shadow-1;
  cursor:pointer;
  transition: background .2s ease, box-shadow .2s ease;

  &:hover { box-shadow: $shadow-2; }
  &:focus-visible { @include focus-ring(color(primary)); }

  &__icon { width:1em; height:1em; }

  &--outline {
    --btn-bg: #{color(white)};
    --btn-fg: #{color(primary)};
    border-color: color(primary);
  }

  &--danger {
    --btn-bg: #{color(danger)};
  }

  &--sm { padding: sp(1) sp(2); }
  &--lg { padding: sp(3) sp(6); }
}
```

### 5.2 카드
```scss
/* src/styles/components/_card.scss */
@use "../tokens/colors" as *;
@use "../tokens/shadow" as *;
@use "../utils/mixins" as *;
@use "../tokens/spacing" as *;

.card {
  background: color(white);
  color: color(gray-900);
  border: 1px solid color(gray-200);
  border-radius: .75rem;
  box-shadow: $shadow-1;
  overflow:hidden;

  &__header, &__footer { padding: sp(4); }
  &__body { padding: sp(4); }

  &--highlight {
    border-color: color(primary);
    box-shadow: 0 0 0 3px rgba(color(primary), .12);
  }

  /* 긴 제목 클램프 */
  &__title { @include clamp-text(2); font-weight: 700; }
}
```

### 5.3 모달
```scss
/* src/styles/components/_modal.scss */
@use "../tokens/zindex" as *;
@use "../tokens/colors" as *;
@use "../tokens/spacing" as *;
@use "../utils/mixins" as *;

.modal {
  position: fixed; inset:0;
  display:none; /* toggle with .is-open */
  align-items:center; justify-content:center;
  z-index: z(modal);
}
.modal__backdrop {
  position:absolute; inset:0; background: rgba(0,0,0,.45);
}
.modal__dialog {
  position:relative; background: color(white);
  color: color(gray-900);
  width:min(90vw, 640px); border-radius:.75rem; padding: sp(6);
}
.modal.is-open { display:flex; }
```

> **상태는 외부 클래스**(`.is-open`)로 토글 → CSS/JS 책임 분리.

---

## 6) 테마(라이트/다크) — CSS 변수로 스킨 교체

토큰은 SCSS(컴파일 타임)로, **스킨은 CSS Custom Properties(런타임)**로.

```scss
/* src/styles/themes/_light.scss */
:root {
  --bg: #ffffff; --fg: #111111; --border: #eaeaea;
}

/* src/styles/themes/_dark.scss */
:root[data-theme="dark"] {
  --bg: #121212; --fg: #f1f1f1; --border: #404040;
}

/* 베이스 적용 */
body { background: var(--bg); color: var(--fg); }

/* 컴포넌트가 커스텀 프로퍼티를 존중하도록 설계(이미 button은 --btn-bg/fg 사용) */
.card { background: var(--bg); color: var(--fg); border-color: var(--border); }
```

```html
<!-- index.html -->
<body data-theme="light">
  <button id="toggle">Toggle Theme</button>
  <script>
    const html = document.documentElement;
    document.getElementById('toggle').onclick = () => {
      html.dataset.theme = html.dataset.theme === 'dark' ? 'light' : 'dark';
      localStorage.setItem('theme', html.dataset.theme);
    };
    const saved = localStorage.getItem('theme');
    if (saved) html.dataset.theme = saved;
  </script>
</body>
```

---

## 7) 반응형 전략 — Mobile-First + 토큰화

핵심: **브레이크포인트도 토큰화**하고 믹스인으로 캡슐화.

```scss
/* src/styles/utils/_helpers.scss */
$bp: (sm:480px, md:768px, lg:1024px, xl:1280px);
@function bp($k){ @return map.get($bp, $k); }

@mixin up($k) { @media (min-width: bp($k)) { @content; } }
@mixin down($k) { @media (max-width: bp($k)) { @content; } }
```

사용 예:
```scss
.header {
  padding: 1rem;
  @include up(md) { padding: 1.5rem 2rem; }
}
```

> **Mobile-first**: 기본 규칙 → `@include up(...)`로 점진 확장.

---

## 8) 페이지 스코프 — 최소한만, 명확하게

페이지 특수 스타일은 **최소화**하고 **명확한 스코프 클래스**를 루트에 부여.

```scss
/* src/styles/pages/_dashboard.scss */
.page-dashboard {
  .stats { display:grid; gap:1rem; grid-template-columns:repeat(2, 1fr); }
  @include up(lg) { .stats { grid-template-columns:repeat(4, 1fr); } }
}
```

```html
<body class="page-dashboard">
  <section class="stats">...</section>
</body>
```

---

## 9) main.scss — 엔트리에서의 합류 규칙

```scss
/* src/styles/main.scss */
@use "base/reset";
@use "base/typography";
@use "tokens/colors";
@use "tokens/spacing";
@use "tokens/typescale";
@use "utils/functions";
@use "utils/mixins";
@use "utils/helpers";
@use "utils/utilities";
@use "layout/container";
@use "layout/grid";
@use "components/button";
@use "components/card";
@use "components/modal";
@use "components/form";
@use "themes/light";
@use "themes/dark";
@use "pages/home";
@use "pages/dashboard";
```

> **규칙**: 토큰/유틸 → 레이아웃 → 컴포넌트 → 테마 → 페이지 순서(오버라이드 가시성).

---

## 10) HTML 스니펫 — 구조가 드러나는 예제

```html
<div class="container mt-2">
  <div class="card card--highlight">
    <div class="card__header d-flex justify-between items-center">
      <h3 class="card__title truncate">Quarterly Report with Very Long Title</h3>
      <button class="button button--outline button--sm">
        <svg class="button__icon" viewBox="0 0 16 16" aria-hidden="true"><!-- ... --></svg>
        Export
      </button>
    </div>
    <div class="card__body">
      <p class="mb-2">Revenue grew by 18% YoY...</p>
      <button class="button">View Details</button>
    </div>
  </div>
</div>
```

---

## 11) 접근성(A11Y)·상태 클래스·포커스

- 상태는 `is-*`, `has-*` 프리픽스: 예) `.is-open`, `.is-invalid`
- 포커스 표시를 **디자인 토큰+믹스인**으로 통일(`@include focus-ring`)
- **모션 민감성** 존중:

```scss
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: .01ms !important; animation-iteration-count: 1 !important; transition-duration:.01ms !important; }
}
```

---

## 12) Stylelint·빌드 파이프라인(간단 예)

### 12.1 stylelint 설정
```json
// .stylelintrc.json
{
  "extends": ["stylelint-config-standard-scss"],
  "rules": {
    "selector-class-pattern": "^[a-z]([a-z0-9-]|__|--)*$",
    "color-named": "never",
    "declaration-no-important": null
  }
}
```

### 12.2 Vite + Sass 예시
```bash
npm i -D sass stylelint stylelint-config-standard-scss vite
```

```js
// vite.config.js
export default {
  css: { devSourcemap: true },
};
```

빌드 시 **PostCSS(cssnano)**로 압축을 함께 적용하는 것도 권장.

---

## 13) 유틸리티 vs 컴포넌트 — 혼합 전략

- **유틸리티**: 빈번/반복/상호 독립(여백, 정렬, 표시, 글자정렬, 잘림)
- **컴포넌트**: 의미·상태·상호작용을 가진 UI(버튼/카드/모달/탭/폼)
- **경계**: 유틸리티가 너무 많아지면 가독성 저하 → 컴포넌트로 캡슐화  
  컴포넌트가 과도하게 거대하면 상태 조합 비용↑ → 핵심 속성 일부를 유틸로 분리

---

## 14) CSS-in-JS / CSS Modules와의 상호운용

- **CSS Modules**: 위 구조를 그대로 유지하되 **파일 단위 캡슐화**. BEM 네이밍 부담↓
- **CSS-in-JS**: 토큰을 JS 객체로 동기화하거나, CSS 커스텀 프로퍼티를 인터페이스로 노출  
  다크모드/테마 전환은 **`data-theme` + CSS var**가 가장 단순·강력

> 팀/스택에 따라:  
> - 유지보수·디자이너 협업 중심 → SCSS + BEM + 유틸 최소  
> - 컴포넌트 프레임워크/TS 강한 팀 → CSS Modules / CSS-in-JS

---

## 15) 성능·품질·디버깅 루틴(요지)

- **Coverage 탭**(DevTools)으로 미사용 CSS 확인 → `_utilities.scss`/컴포넌트에서 정리
- **Performance**로 Layout/Paint 비중 확인 → 변하는 스타일은 `transform/opacity` 위주
- **Lighthouse**: CLS/LCP 점검(폰트 로딩/이미지 크기/크리티컬 CSS)
- **Network**: CSS 파일 분할(라우트 레벨)과 캐싱 정책 점검

---

## 16) 확장: 폼/유효성/에러 상태

```scss
/* src/styles/components/_form.scss */
@use "../tokens/colors" as *;
@use "../tokens/spacing" as *;
@use "../utils/mixins" as *;

.form-control {
  width:100%; padding: sp(2) sp(3);
  border:1px solid color(gray-200);
  border-radius:.5rem; background: var(--bg); color: var(--fg);

  &:focus { @include focus-ring(color(primary)); }
  &.is-invalid { border-color: color(danger); }
  &.is-valid { border-color: color(success); }
}

.form-help { font-size:.875rem; color: color(gray-700); margin-top:.25rem; }
.form-error { font-size:.875rem; color: color(danger); margin-top:.25rem; }
```

---

## 17) 모범 클립: 프로젝트 온보딩용 README 요약

- **네이밍**: BEM(컴포넌트), `is-*` 상태, 유틸은 kebab-case
- **토큰**: 색/간격/폰트/그림자/지표는 `tokens/*`만 변경
- **파일 배치**: 공통 → 레이아웃 → 컴포넌트 → 페이지 → 테마 순
- **테마**: `data-theme` + CSS variables, 컴포넌트는 var 우선 사용
- **반응형**: `@include up/down(bp)` 믹스인만 사용
- **검증**: stylelint, DevTools Coverage/Performance 루틴

---

## 18) 마이그레이션 체크리스트(레거시 → 구조화)

1. Reset/Normalize 통일 → Base/Typo 정리  
2. **토큰 도입**(hex 직사용 제거), 색/간격/타입 표준화  
3. 글로벌 산재 스타일을 컴포넌트/유틸로 분류  
4. 페이지 스코프는 루트 클래스(`.page-*`) 도입  
5. 다크모드: CSS var로 스킨 이동, `data-theme` 토글  
6. stylelint 적용 → 파편 규칙 자동 감지  
7. DevTools Coverage로 미사용 CSS 제거

---

## 19) 데모 페이지(간단 HTML)

```html
<link rel="stylesheet" href="/dist/main.css" />
<body class="page-home">
  <header class="container d-flex justify-between items-center mt-2">
    <h1>Site</h1>
    <nav class="d-flex items-center" aria-label="Primary">
      <a class="mx-2" href="#">Docs</a>
      <a class="mx-2" href="#">Blog</a>
      <button class="button button--outline button--sm" id="theme-toggle">Theme</button>
    </nav>
  </header>

  <main class="container mt-2">
    <div class="grid">
      <section class="col-6">
        <div class="card card--highlight">
          <div class="card__header">
            <h2 class="card__title">Getting Started</h2>
          </div>
          <div class="card__body">
            <p class="mb-2">Structured CSS for scalable teams.</p>
            <button class="button">Read More</button>
          </div>
        </div>
      </section>

      <section class="col-6">
        <form>
          <label class="d-block mb-2" for="email">Email</label>
          <input id="email" class="form-control" type="email" placeholder="you@example.com" />
          <p class="form-help">We never share your email.</p>
        </form>
      </section>
    </div>
  </main>

  <script>
    const html = document.documentElement;
    document.getElementById('theme-toggle').onclick = () => {
      html.dataset.theme = html.dataset.theme === 'dark' ? 'light' : 'dark';
      localStorage.setItem('theme', html.dataset.theme);
    };
    const saved = localStorage.getItem('theme');
    if (saved) html.dataset.theme = saved;
  </script>
</body>
```

---

## 20) 결론

- **폴더 구조 + 디자인 토큰 + BEM/유틸 혼합**이 실무에서 가장 **예측 가능**하고 **확장 가능한** 접근이다.
- 다크모드/브랜드 스킨/반응형/접근성을 **초기 설계**에 포함시키면, 나중 비용이 급감한다.
- stylelint/DevTools/Lighthouse로 **지속 점검**하는 루틴이 유지보수의 품질을 결정한다.

---

## 참고 링크

- BEM: https://en.bem.info/methodology/  
- SMACSS: https://smacss.com/  
- Stylelint: https://stylelint.io/  
- Sass Guide: https://sass-lang.com/guide  
- CSS Tricks – Architecture: https://css-tricks.com