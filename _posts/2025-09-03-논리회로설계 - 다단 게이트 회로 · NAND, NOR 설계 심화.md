---
layout: post
title: 논리회로설계 - 다단 게이트 회로 · NAND, NOR 설계 심화
date: 2025-09-03 16:25:23 +0900
category: 논리회로설계
---
# 다단 게이트 회로 · NAND/NOR 설계 심화 — **다단 NAND·NOR 회로 설계**, **게이트 심벌 변환(버블 로직)**, **2단(2-level)·다중 출력 회로**, **다중 출력 NAND/NOR 네트워크**

> 표기: \(+\)=OR, \(\cdot\) 또는 생략=AND, \(\overline{X}\)=NOT \(X\), \(X'\)=\(\overline{X}\), \(\oplus\)=XOR.  
> 목표: (1) 임의의 부울식을 **NAND-only**, **NOR-only** 다단 회로로 체계적으로 구현, (2) **게이트 심벌의 다른 표기(ANSI/IEC, 버블 로직)**를 오가며 회로를 변환, (3) **2단(2-level)**과 **다중 출력** 설계 절차를 완비, (4) **다중 출력 NAND/NOR** 네트워크를 실제 예제로 완성합니다.

---

## 1) 다단 NAND와 NOR 게이트 회로 설계

### 1.1 보편성(Functional Completeness)과 기본 치환
- **NAND만으로**
  \[
  \overline{A}=A\ \text{NAND}\ A,\quad
  AB=\overline{(A\ \text{NAND}\ B)},\quad
  A+B=\overline{\overline{A}\cdot \overline{B}}=\overline{(A\ \text{NAND}\ A)\ (B\ \text{NAND}\ B)}
  \]
- **NOR만으로**
  \[
  \overline{A}=A\ \text{NOR}\ A,\quad
  A+B=\overline{A\ \text{NOR}\ B},\quad
  AB=\overline{\overline{A}+\overline{B}}=\overline{(A\ \text{NOR}\ A)\ +\ (B\ \text{NOR}\ B)}
  \]

> 핵심: **드모르간 + 분산 인버전(버블 푸시)** 로 모든 연산을 NAND 또는 NOR로 흡수합니다.

### 1.2 다단(N-level) NAND-only 설계 절차
1) **식 구조 파악/인수화**: SOP 혹은 계층형으로 최적 인수화를 선행  
   예: \(F=(A+B)C+\overline{A}D\) → 그대로 쓰기보다 \(F=C(A+B)+\overline{A}D\).
2) **모든 AND/OR를 NAND로 치환**:  
   - AND: \(X\cdot Y=\overline{(X\ \text{NAND}\ Y)}\) (출력에 보수 생김)  
   - OR: \(X+Y=\overline{(\overline{X}\cdot \overline{Y})}\) → 입력을 먼저 반전(입력 NAND-인버터) 후 NAND
3) **보수의 균형 맞추기**: 경로별 보수 개수를 맞추거나 **마지막에 한 번만 보수 제거**(출력 인버터 1개).
4) **팬인/지연 조정**: 큰 NAND(팬인↑)는 두 단계로 쪼개거나 인수화로 분할.

**예시 1 — NAND-only(다단)**
\[
F=(A+B)C+\overline{A}D
\]
- 보조 노드:
  \[
  N_1=\text{NAND}(A,B)=\overline{A+B},\quad
  N_2=\text{NAND}(N_1,C)=\overline{\overline{A+B}\cdot C}=A+B\overline{\vphantom{X}}+ \overline{C}\ (\text{보수 상태})
  \]
  직관적으론 \(N_2=\overline{(A+B)C}\).  
- \(\overline{A}=\text{NAND}(A,A)\), \(N_3=\text{NAND}(\overline{A},D)=\overline{\overline{A}D}\).  
- 최종: \(F=\overline{N_2\cdot N_3}=\text{NAND}(N_2,N_3)\).  
→ **모든 게이트가 NAND**. 출력은 **참값**(보수 균형 완료).

**예시 2 — 인수화로 단계/팬인 최적화**
\[
G=AB+AC+AD=A(B+C+D)
\]
- \(S=B+C\) 를 먼저 NAND-NOR 유사로 만들지 말고 **두 NAND로**:
  \[
  \overline{B}=\text{NAND}(B,B),\ \overline{C}=\text{NAND}(C,C),\ S=\overline{\ \text{NAND}(\overline{B},\overline{C})\ }
  \]
- \(S+D\)도 동일, 마지막에 \(A\cdot(S+D)\)를 NAND 두 번으로.  
→ 큰 팬인 하나보다 **작은 팬인 여러 단계**가 CMOS에서 유리.

### 1.3 다단 NOR-only 설계 절차 (쌍대)
- OR, AND 역할만 바꿔 동일하게 진행.  
- 예시: \(F=(A+B)C+\overline{A}D\) 를 NOR-only로  
  1) OR는 1단 NOR로 보수 생성,  
  2) AND는 입력 보수 후 NOR,  
  3) 출력 보수 균형 맞춤.

> 설계에서 **NAND는 일반적으로 NOR보다 빠른 경향**(같은 팬인) — pMOS 직렬이 느린 탓. 팬인이 커질수록 NAND를 선호.

---

## 2) **다른 형태의 게이트 심벌**을 사용한 회로 변환 (버블 로직 & 표기법)

### 2.1 ANSI vs IEC 심벌
- **ANSI(미국)**: OR는 곡선, AND는 평평, **작은 원(버블)**은 **부정**.  
- **IEC(국제)**: 직사각형 블록 + 입력/출력의 **버블**로 극성 표기.
- **액티브-로우(active-low) 단자**: 핀명에 **오버바**(\(\overline{RESET}\)) 또는 접미 **\*_L**(RESET\_L) 표기.

### 2.2 버블 푸시(bubble pushing) 규칙
- **버블-to-버블 연결**은 **인버터 상쇄**.  
- 게이트 **입력에 버블**을 붙이면 그 입력이 **보수로 들어온 것과 동일**.  
- **드모르간 시각화**:  
  - **NAND** = AND 게이트 + **출력 버블**.  
  - **NOR**  = OR 게이트 + **출력 버블**.  
  - **AND with input bubbles** = **NOR** 동등.  
  - **OR with input bubbles** = **NAND** 동등.

**예시 — OR→NAND 변환(버블만 이동)**
- OR 출력에 버블을 달고, **모든 입력에도 버블**을 달면 **NAND와 동치**.  
- 회로도에서 **인버터를 그리지 않고 버블만 이동**해 게이트 종류를 바꾸면 **게이트 수/딜레이**를 유지하면서 **NAND-only/NOR-only**로 정규화 가능.

### 2.3 네거티브 로직(negative logic) 해석
- 신호의 ‘참’을 **저전압**으로 정의하는 관점.  
- 동일 물리 회로를 **양/음 로직의 이중성**으로 다른 게이트로 해석 가능(예: **NAND(양로직)=OR(음로직)**).

---

## 3) **2단(2-level) 회로 설계** — 표준 매핑

### 3.1 SOP → **NAND–NAND** (OR-of-AND ⟶ NAND-of-NAND)
1) 최소 SOP \(F=P_1+P_2+\cdots+P_k\) 를 구한다.  
2) 각 \(P_i\)를 NAND로 만들어 \(\overline{P_i}\) 생성(1단).  
3) 1단들을 최종 NAND로 결합(2단):
   \[
   F=\overline{\overline{P_1}\cdot\overline{P_2}\cdots\overline{P_k}}
   \]
4) 입력 보수 리터럴은 **입력 버블**(인버터)만으로 해결.

### 3.2 POS → **NOR–NOR** (AND-of-OR ⟶ NOR-of-NOR)
1) 최소 POS \(F=S_1 S_2 \cdots S_t\).  
2) 각 \(S_i\)를 NOR로 \(\overline{S_i}\) 생성(1단).  
3) 1단들을 최종 NOR로 결합(2단):
   \[
   F=\overline{\overline{S_1}+\overline{S_2}+\cdots+\overline{S_t}}
   \]

### 3.3 2단 설계 체크리스트
- [ ] **공유 곱항/합항**은 1단에서 **한 번만 생성**(다중 출력 시 필수).  
- [ ] 팬인 제한(예: 4-입력)을 넘으면 **곱항을 분할**하거나 **다단화**.  
- [ ] **해저드** 우려 시 K-map으로 **합의항** 추가해 중첩을 만든다.

---

## 4) **다중 출력 회로 설계** (Multi-output)

### 4.1 기본 전략
- 다중 출력 \(\{F_1,F_2,\dots\}\) 의 최소 SOP/POS를 구한 뒤, **공통 항(임플리컨트)** 을 1단에서 **공유**한다.
- **PLA 관점**: 1단 = **공유된 곱항 배열**(product-term plane), 2단 = 출력별 **선택/OR**.

### 4.2 다중 출력 **2단 NAND–NAND** (SOP 기반)
- 1단: 각 **곱항 \(P_i\)** 를 **NAND**(출력= \(\overline{P_i}\))로 한 번만 만든다.  
- 2단: 출력 \(F_k\) 는 필요한 곱항의 **보수들**을 **NAND**로 결합:
  \[
  F_k=\overline{\prod_{i\in \mathcal{S}_k}\overline{P_i}}=\bigvee_{i\in \mathcal{S}_k} P_i
  \]
  (여기서 \(\mathcal{S}_k\) = \(F_k\)에 사용되는 곱항 인덱스 집합)

### 4.3 다중 출력 **2단 NOR–NOR** (POS 기반)
- 1단: 각 **합항 \(S_j\)** 를 **NOR**(출력= \(\overline{S_j}\))로 한 번만 만든다.  
- 2단: 출력 \(F_k=\overline{\sum_{j\in \mathcal{T}_k}\overline{S_j}}=\bigwedge_{j\in \mathcal{T}_k} S_j\).

### 4.4 다중 출력의 장점·주의
- 장점: **게이트 공유**로 면적/전력/배선 감소, 타이밍 일관성↑.  
- 주의: 공유 노드의 **팬아웃** 증가(버퍼링 고려), 출력 간 **커플링 글리치** 가능 — 필요 시 **레지스터**로 분리.

---

## 5) **다중 출력 NAND/NOR 회로 — 완전 예제**

### 5.1 문제 정의(공유 항이 있는 예)
\[
\begin{aligned}
F_1 &= AB + AC + \overline{B}D \\
F_2 &= \overline{A}C + BD
\end{aligned}
\]
- **공통 곱항**: \(AC,\ BD\)

### 5.2 1단 곱항 집합(공유)
\[
\begin{aligned}
P_1&=AB,\quad
P_2=AC,\quad
P_3=\overline{B}D,\quad
P_4=\overline{A}C,\quad
P_5=BD
\end{aligned}
\]
- **NAND 1단 출력**: \(N_i=\overline{P_i}\) 로 생성  
  (보수 리터럴: \(\overline{A}=\text{NAND}(A,A)\), \(\overline{B}=\text{NAND}(B,B)\))

### 5.3 2단 출력별 결합(NAND–NAND)
- \(F_1 = P_1 + P_2 + P_3 = \overline{N_1 N_2 N_3}\)  
- \(F_2 = P_4 + P_5 = \overline{N_4 N_5}\)

**게이트 수 요약**
- 1단 NAND: 5개 (각 곱항 1개씩)  
- 입력 인버터(NAND로): 2개(\(\overline{A},\overline{B}\))  
- 2단 NAND: 2개 (출력별 1개)  
→ 총 9개. **공유가 없으면** \(F_1\)에 3, \(F_2\)에 2, 합계 5개의 1단을 **중복 생성**해 더 커짐.

### 5.4 동일 사양의 **NOR–NOR** (POS 기반)도 가능
- 각 출력의 POS를 만들고(예: 드모르간), **공유 합항**을 1단 NOR로 한 번만 생성 후 2단 NOR로 결합.

### 5.5 타이밍·해저드 점검
- 공유 노드 \(N_2(=\overline{AC}), N_5(=\overline{BD})\) 의 **팬아웃=2** → 필요 시 **버퍼**.  
- \(F_1\) 의 \(AB\)↔\(AC\) 경계에서 **정적-1 해저드** 가능 → **합의항 \(BC\)** 추가 고려: \(F_1'=AB+AC+\underline{BC}+\overline{B}D\).  
  NAND-NAND에서는 **1단에 \(BC\) 추가** 후 \(F_1\) 2단 입력에만 연결하면 됨(다른 출력 영향 없음).

---

## 6) 다단 NAND/NOR에서 **회로 변환(버블 로직) 실전**

### 6.1 “게이트 종류는 유지, 버블만 이동”
- OR → (출력 버블 추가) → 입력 버블 추가 → **NAND**  
- AND → (출력 버블 추가) → 입력 버블 추가 → **NOR**
- **연속 게이트 사이 마주보는 버블**은 **상쇄**(인버터 제거와 동일).

**텍스트 변환 예**
```
원식: F = (A + B) · (C + D)
POS → NOR–NOR 기본형
1단: M1 = NOR(A,B) = (A+B)'
     M2 = NOR(C,D) = (C+D)'
2단: F  = NOR(M1', M2')'  (버블 푸시로 입력 버블을 2단으로 이동)
→ 실제 배치: 1단 NOR 2개, 2단 NOR 1개 (입력/출력 버블로 극성 일치)
```

### 6.2 네거티브 로직 변환 포인트
- **NAND(양로직)** ≡ **OR(음로직)**, **NOR(양로직)** ≡ **AND(음로직)**  
- 복잡한 극성 네트워크를 음/양 로직 교차 해석으로 단순화 가능(문서화 시 극성 아이콘/버블을 명확히).

---

## 7) 구현 디테일: 팬인/팬아웃·지연·전력

1) **팬인 제한**: 셀 라이브러리의 입력수 제한(예: NAND3까지). 큰 곱항/합항은 **분할** 또는 **다단 인수화**.  
2) **지연 모델**: \(t_{pd}\approx \sum t_{gate}+t_{wire}\). **NOR의 큰 팬인**은 특히 느림 → 가능하면 NAND 위주.  
3) **팬아웃 관리**: 공유 노드의 부하↑ → 버퍼 삽입, 혹은 출력별 **분기점에서 재생성**(면적↑ vs 속도↑ 트레이드오프).  
4) **전력/글리치**: 합의항으로 중첩을 만들면 글리치↓, 불필요 토글↓(전력↓).  
5) **테스트/가시성**: 중요한 내부 노드는 **탭-아웃**해 디버깅 신호로 노출.

---

## 8) 설계 체크리스트 (빠른 점검)

- [ ] 최소 SOP/POS 산출(공유 항 표시).  
- [ ] **SOP→NAND–NAND**, **POS→NOR–NOR** 기본형으로 스케치.  
- [ ] **보수 리터럴=입력 버블**만으로 해결(중간 인버터 최소화).  
- [ ] **공유 1단**(product/sum term) 구성 후 출력별 선택.  
- [ ] 팬인/팬아웃, 경로 지연, 글리치(합의항) 점검.  
- [ ] 심벌(ANSI/IEC, active-low 핀) 일관 표기, 버블 푸시로 변환 검증.

---

## 9) 미니 실습(정답 스케치 포함 서술)

1) **2단 NAND–NAND**  
   \(F=AB+\overline{A}C+BC\).  
   - 1단: \(N_1=(AB)'\), \(N_2=(\overline{A}C)'\), \(N_3=(BC)'\)  
   - 2단: \(F=\overline{N_1 N_2 N_3}\).  
   - 필수 인버터: \(\overline{A}\) 1개.

2) **2단 NOR–NOR(동일 함수의 POS)**  
   \(F=(A+B)(\overline{A}+C)(B+C)\).  
   - 1단: 각각 NOR로 보수 생성  
   - 2단: NOR로 결합.  
   - 버블 푸시로 중간 인버터 제거.

3) **다중 출력 공유**  
   \(F_1=AB+AC+\overline{B}D,\ F_2=\overline{A}C+BD\).  
   - 공유 곱항: \(AC,\ BD\) — 1단 한 번 생성, 각 출력 2단에서 선택.

4) **심벌 변환**  
   AND 게이트 입력에 버블 2개 + 출력 버블 1개는 **NOR**와 동치임을 버블 푸시로 보이라.
