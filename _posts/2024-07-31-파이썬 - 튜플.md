---
layout: post
title: 파이썬 - 튜플
date: 2024-07-31 19:20:23 +0900
category: Python
---
# 튜플(Tuple)

- **튜플(tuple)**은 **순서가 있는 불변(immutable) 시퀀스**입니다.
- 리스트와 유사하지만, **생성 후 요소 변경/추가/삭제가 불가능**합니다.
- **안전한(읽기 전용) 데이터 보관**, **딕셔너리 키/집합 요소** 등 **해시 가능한 컨테이너**가 필요할 때 적합합니다.
- 표기는 **소괄호 `()`**(선택적)와 **쉼표 `,`**가 핵심입니다. 즉 *괄호보다 쉼표가 튜플을 만듭니다*.

---

## 1. 튜플 생성 방법

### (1) 소괄호 사용
```python
t = (1, 2, 3)
```

### (2) 쉼표만 사용(괄호 생략 가능)
```python
t = 1, 2, 3          # 튜플
u = (1, 2, 3,)       # 끝에 쉼표 허용(가독성/자동 포맷 편의)
```

### (3) 단일 요소 튜플(쉼표 필수)
```python
one = (1,)           # tuple
not_tuple = (1)      # int — 괄호는 단순한 그룹화일 뿐
```

### (4) 빈 튜플
```python
empty = ()
empty2 = tuple()
```

### (5) 내장 생성자
```python
tuple("abc")                 # ('a', 'b', 'c')
tuple([1, 2, 3])             # (1, 2, 3)
tuple(x*x for x in range(3)) # (0, 1, 4)
```

> **주의(자주 하는 실수)**
> `(x for x in ...)`는 “튜플 내포”가 아니라 **제너레이터 표현식**입니다.
> 튜플이 필요하면 `tuple(...)`로 감싸 변환하세요.

---

## 2. 튜플 주요 특징

| 특징 | 설명 |
|---|---|
| **불변성** | 요소 재할당/추가/삭제 불가. 단, 내부에 **가변 객체**(예: 리스트)가 있으면 그 내부는 변할 수 있음. |
| **순서/중복** | 순서를 유지하고, 중복을 허용합니다. |
| **인덱싱/슬라이싱** | 리스트와 동일한 규칙을 가집니다. |
| **해시 가능성** | **모든 요소가 해시 가능**해야만 튜플 자체도 해시 가능합니다 → 딕셔너리 키/집합 요소로 사용 가능. |
| **메모리/속도** | 일반적으로 리스트보다 **메모리 사용이 적고** 읽기 전용 시나리오에서 **의도를 명확히 표현**합니다. |

```python
t = (1, [2, 3], 4)
t[1].append(99)      # OK: 내부 리스트는 가변
print(t)             # (1, [2, 3, 99], 4)

# t[0] = 10          # TypeError: 불변
```

---

## 3. 튜플 관련 주요 메서드

튜플은 불변이라 **변경 메서드가 없고**, 검색용 2개만 있습니다.

| 메서드 | 설명 | 예제 |
|---|---|---|
| `count(x)` | 값 `x`의 개수 반환 | `(1,2,2,3).count(2)  # 2` |
| `index(x[, start[, stop]])` | 첫 번째 인덱스 반환(없으면 `ValueError`) | `('a','b','a').index('a', 1)  # 2` |

---

## 4. 기본 사용 예시

```python
# 튜플 생성
t = (1, 2, 3)

# 인덱싱
print(t[0])            # 1
print(t[-1])           # 3

# 슬라이싱
print(t[1:3])          # (2, 3)
print(t[::-1])         # (3, 2, 1)

# 중첩 튜플
nested = (1, (2, 3), 4)
print(nested[1][1])    # 3
```

---

## 5. 불변성 확인(패턴)

```python
t = (1, 2, 3)
# t[0] = 10            # TypeError
t2 = (10,) + t[1:]     # 새 튜플을 만들어 치환
print(t2)              # (10, 2, 3)
```

---

## 6. 언패킹(Unpacking)과 다중 대입

### (1) 기본 언패킹 / 스왑
```python
a, b, c = (10, 20, 30)
x, y = 1, 2
x, y = y, x
print(x, y)            # 2 1
```

### (2) 스타(`*`) 언패킹
```python
head, *mid, tail = (1, 2, 3, 4, 5)
print(head, mid, tail) # 1 [2, 3, 4] 5
```

### (3) 병렬 순회
```python
points = [(1, 2), (3, 4), (5, 6)]
for x, y in points:
    print(x + y)       # 3, 7, 11
```

---

## 7. 변환(리스트 ↔ 튜플)

```python
# 튜플 → 리스트
t = (1, 2, 3)
lst = list(t)            # [1, 2, 3]

# 리스트 → 튜플
lst = [4, 5, 6]
t2 = tuple(lst)          # (4, 5, 6)
```

---

## 8. 튜플의 활용

### (1) 불변 데이터 저장
설정값, 좌표, RGB 색상 등 **변경이 불필요한 데이터**에 적합합니다.
```python
origin = (0.0, 0.0)
rgb    = (255, 128, 64)
```

### (2) 딕셔너리 키/집합 요소
모든 요소가 해시 가능해야 합니다(예: 숫자/문자열/튜플).
```python
location = {(37.7749, -122.4194): "San Francisco"}
print(location[(37.7749, -122.4194)])  # San Francisco

visited = {("GET", "/"), ("POST", "/login")}
```

### (3) 함수의 복수 반환값
파이썬 함수는 **여러 값을 튜플로 반환**하는 관용이 있습니다.
```python
def get_dimensions():
    return 1920, 1080   # (1920, 1080)

width, height = get_dimensions()
print(width, height)    # 1920 1080
```

### (4) 정렬/그룹핑에서의 레코드
튜플은 레코드처럼 취급되어 정렬/그룹핑에 자주 쓰입니다.
```python
records = [
    ("kim",  30),
    ("lee",  25),
    ("park", 25),
]
# 나이 오름 → 이름 오름
records.sort(key=lambda r: (r[1], r[0]))
print(records)  # [('lee',25),('park',25),('kim',30)]
```

---

## 9. 비교(사전식, lexicographic)

튜플 비교는 **왼쪽부터 차례로 요소 비교**합니다. 길이가 다르면 공통 접두사를 기준으로 결정합니다.
```python
print((1, 2) < (1, 3))         # True
print((1, 2, 9) > (1, 2, 1))   # True
print(("a", 2) < ("b", 1))     # True  ('a' < 'b')
```

---

## 10. 성능/메모리 간단 비교

일반적으로 동일한 요소를 담을 때 **튜플이 리스트보다 작게** 메모리를 사용합니다(환경마다 수치는 다릅니다).
```python
import sys
print(sys.getsizeof([1,2,3]), sys.getsizeof((1,2,3)))  # 예: 72 56 (플랫폼/버전별 상이)
```
- **목적이 읽기 전용**이라면 튜플 선택이 **의도 전달**과 **약간의 성능 이득**을 동시에 줍니다.

---

## 11. 함수 인자와 튜플

### (1) `*args`는 튜플
```python
def f(*args):
    print(args, type(args))   # (...), <class 'tuple'>
f(1, 2, 3)                    # (1, 2, 3)
```

### (2) 시퀀스 언패킹 호출
```python
args = (10, 20)
def add(a, b): return a + b
print(add(*args))             # 30
```

---

## 12. 패턴 매칭(3.10+)

튜플은 **구조적 패턴 매칭**에서 매우 유용합니다.
```python
def handle(msg):
    match msg:
        case ("MOVE", x, y):
            return f"move to {x},{y}"
        case ("QUIT",):
            return "quit"
        case _:
            return "unknown"

print(handle(("MOVE", 3, 4)))   # move to 3,4
```
- **형태/길이**가 맞아야 매칭됩니다.

---

## 13. 타입 힌트(PEP 585)

현대 파이썬에서는 `typing` 없이도 매개화가 가능합니다.
```python
def f(pt: tuple[float, float]) -> None:
    ...
def g(xs: tuple[int, ...]) -> int:  # 가변 길이(모든 요소 int)
    return sum(xs)
```

---

## 14. 흔한 함정과 모범 사례

1) **단일 요소 쉼표 누락**
```python
t = (1)     # int
t = (1,)    # tuple
```

2) **튜플의 해시 가능성 오해**
```python
# 요소 중 하나라도 비해시(예: list)면 튜플 전체가 해시 불가
# {(1, [2,3])}  # TypeError
```

3) **튜플 내포 오해**
```python
g = (x*x for x in range(3))   # 제너레이터
t = tuple(g)                  # (0, 1, 4)
```

4) **괄호=그룹화 vs 튜플 생성**
```python
(1 + 2)        # 3 (그룹화)
(1 + 2,)       # (3,) (튜플)
```

5) **불변≠깊은 불변**
```python
t = ([],)       # 튜플은 불변이지만 내부 리스트는 가변
t[0].append(1)  # OK
```

---

## 15. 실전 스니펫

### (1) 좌표/색상/설정값
```python
pos = (1280, 720)
rgb = (34, 139, 34)          # forest green
db_cfg = ("postgres", "localhost", 5432)
```

### (2) 안전한 반환 계약
```python
def parse_int(s: str) -> tuple[int | None, str | None]:
    try:
        return (int(s), None)
    except ValueError as e:
        return (None, str(e))

val, err = parse_int("42")    # (42, None)
```

### (3) 정렬 키로 활용
```python
files = [
    ("report.txt", 2048),
    ("readme.md",  1024),
    ("data.csv",   4096),
]
# 크기 내림 → 이름 오름
files.sort(key=lambda x: (-x[1], x[0]))
```

### (4) `enumerate`/`zip`와 조합
```python
cols = ("id", "name", "age")
row  = (101,  "Kim",  30)
print(dict(zip(cols, row)))    # {'id': 101, 'name': 'Kim', 'age': 30}

for i, v in enumerate(("a","b","c"), start=1):
    print(i, v)
```

---

## 16. 요약 체크리스트

- **수정 불가**: 새 튜플로 재구성(연결/슬라이싱)해야 함.
- **단일 요소는 쉼표 필수**: `(1,)`.
- **딕셔너리 키/집합 요소**로 쓰려면 **내부 요소까지 해시 가능**이어야 함.
- **패킹/언패킹/패턴 매칭**으로 **가독성 좋은 구조**를 만들 수 있음.
- “튜플 내포”는 없음 → **제너레이터 + `tuple(...)`** 패턴 사용.
- 읽기 전용/레코드/반환 다중 값 → **튜플이 관용적이고 간결**.
