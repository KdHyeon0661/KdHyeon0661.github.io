---
layout: post
title: 형식언어와 오토마타 - 무제한 문법
date: 2025-08-05 17:20:23 +0900
category: 형식언어와 오토마타
---
# 무제한 문법(Unrestricted / Type-0 / Phrase-Structure Grammar) — 정의, 표현력, 튜링 기계와의 동치, 정규화, 폐포·결정 성질, 설계 패턴

**무제한 문법**(Type-0, phrase-structure grammar)은 생성 규칙 형태에 사실상 제약이 없는 가장 강력한 문법이다.  
표현력은 **튜링 기계(TM)** 와 정확히 일치하여, **재귀적 열거 가능(RE)** 언어 전체를 생성한다.  
아래에서는 형식적 정의, 튜링 기계와의 동치 구성, Post/Thue 재작성 시스템과의 관련, 폐포·결정 성질, 실전 설계 패턴을 정리한다.

---

## 1) 형식적 정의

무제한 문법 \(G\)는 4-튜플
\[
G=(V,\Sigma,R,S)
\]
- \(V\): 비단말(Nonterminals) 유한 집합  
- \(\Sigma\): 터미널(알파벳) 유한 집합, \(V\cap\Sigma=\varnothing\)  
- \(S\in V\): 시작기호  
- \(R\subseteq (V\cup\Sigma)^+ \times (V\cup\Sigma)^*\): **재작성 규칙** \(\alpha\to\beta\)

**요건(관례)**  
- 좌변 \(\alpha\) 는 길이 \( \ge 1\) 이고 **최소 한 개의 비단말**을 포함(순수 단말 좌변을 금지).  
- \(\varepsilon\) 생성이 필요하면 보통 **\(S\to\varepsilon\)** 만 허용하고 \(S\)를 다른 규칙의 우변에 올리지 않는다.

**언어**
\[
L(G) = \{\, w\in \Sigma^* \mid S \Rightarrow^* w \,\},
\]
여기서 \(\Rightarrow\) 는 한 번의 규칙 적용(어디서나 치환 가능), \(\Rightarrow^*\) 는 그 폐포.

> Type-0는 **문맥/길이 제약이 전혀 없다**는 점에서 Type-1(문맥 인식: 비축약), Type-2(문맥 자유), Type-3(정규)보다 위에 위치한다.

---

## 2) 표현력: **RE 언어 = Type-0 언어**

\[
\boxed{ \textbf{Type-0 언어} \;=\; \textbf{RE}(=\text{recursively enumerable}) }
\]

즉, **어떤 TM이 수용(accept)하는 모든 언어**를 무제한 문법이 생성하고, 반대로 **무제한 문법이 생성하는 모든 언어**를 어떤 TM이 수용한다.

### 2.1 \(G\Rightarrow\) TM (문법 → 인식기/열거기)
아이디어 두 가지:

**(a) 인식기(Recognizer)**  
입력 \(w\) 가 주어지면, TM이 **비결정적으로** \(S\Rightarrow^* w\) 유도를 시도한다.  
- 한 단계 유도는 국소 패턴 \(\alpha\to\beta\) 매칭 후 치환.  
- 유도 성공 경로가 하나라도 있으면 수용 ⇒ \(L(G)\) 는 **RE**.

**(b) 열거기(Enumerator)**  
유도 트리를 폭넓게 펼쳐 모든 \(w\) 를 사전식으로 출력(중복 제거 가능).  
- 어떤 \(w\in L(G)\) 는 **언젠가** 나옴 ⇒ RE의 “열거 가능” 의미와 합치.

### 2.2 TM \(\Rightarrow G\) (기계 → 문법)
두 방식이 표준적이다.

**(i) 구성(instantaneous description, ID) 재작성**  
TM의 구성을 문자열로 부호화한다(예: 좌측 내용·현재상태·우측 내용).
```
... a q b ...    # 상태 q가 b 위를 가리킴
```
한 TM 전이 \((q,b)\mapsto(q',c,D)\)를 **문법 규칙**으로 모사:
```
# D = R 예
a q b  ->  a c q'      # 헤드가 오른쪽으로 이동했다고 표현되는 적절한 국소 치환
# 경계/좌이동도 유사
```
- 시작규칙은 “초기 구성”으로 변환을 시작하게 하고,  
- 수용 상태 도달 후 “계산 이력” 장식을 제거하여 **순수 출력**만 남기도록 추가 규칙/동형사상(호모모르피즘)을 붙인다.  
=> \(G\) 가 정확히 \(M\) 이 수용하는 문자열을 생성.

**(ii) Post/Thue 시스템 경유**  
- **반Thue(semi-Thue) 시스템**: 알파벳 \(\Sigma\) 와 규칙 \(\alpha\to\beta\) 로 재작성.  
- **Post 정규 시스템/정식(Post canonical system)**: RE 집합을 정확히 기술.  
- 무제한 문법은 이러한 재작성 시스템과 **동치**이므로 TM ↔ Post ↔ Grammar 간 상호 변환이 가능.

---

## 3) 정규화(스킵 가능한 참고)

Type-0에는 Type-2의 CNF 같은 보편 정규형은 없지만, 분석·증명 편의를 위한 **제한된 형태**로의 변환이 가능하다.
- 좌변에 **비단말을 반드시 포함**하도록 만들기(단말 좌변 제거).  
- 테이프 마커/상태기호를 도입한 **국소 치환 규칙**만으로 전이를 표현(“TM-스타일 국소화”).  
- 연구 문헌에는 **Geffert normal form**, **weak Greibach-like form** 등 특수 정규형이 쓰인다(세부는 생략).

핵심은: **적당한 마킹·분해만으로도** TM 전이를 문법 규칙에 **지역화**할 수 있다는 점.

---

## 4) 폐포(Closure) 성질

RE(=Type-0) 언어는 다음 연산에 닫혀 있다.

- **합집합** \(\cup\), **교집합** \(\cap\)  
- **연접** \( \cdot \), **Kleene★**  
- **호모모르피즘**, **역호모모르피즘**  
- **정규 언어와의 교집합**

닫혀 있지 않은 대표 연산:

- **보수(Complement)** — 일반적으로 **닫혀 있지 않음**.  
  (보수까지 닫히는 건 **재귀적(결정 가능)** 언어 계층.)

---

## 5) 결정(Decidability) 성질

Type-0/RE 층위에선 많은 자연스러운 결정 문제가 **불가능**하다.

- **멤버십** \(w\in L(G)?\) — **RE-완전**(반결정 가능; “아니오”일 때 무한 루프 가능).  
- **공백성** \(L(G)=\varnothing?\) — **결정 불가능**.  
- **보편성** \(L(G)=\Sigma^*?\) — **결정 불가능**.  
- **포함성/동치성** \(L(G_1)\subseteq L(G_2)?\), \(= ?\) — **결정 불가능**.  
- **유한성**, **정규성 여부**, **문맥자유성 여부**, **모호성 여부** — 대부분 **결정 불가능**.

> 직관: Type-0은 TM와 동치이므로, **정지 문제**·**Rice 정리**류의 한계가 그대로 적용된다.  
> (RE 언어의 **비자명한 의미 속성** 전반은 결정 불가능.)

---

## 6) 예시와 설계 직관

### 6.1 “계산 이력”을 생성하는 문법
고정된 TM \(M\) 이 있을 때, \(M\) 의 **수용 계산 이력**을 생성하는 문법을 만든다.
- 문자열은 `#` 로 구분된 **연속 구성열**:
  \[
  \# C_0 \# C_1 \# \cdots \# C_t \#
  \]
- 규칙들은 **인접 두 구성 \(C_i \to C_{i+1}\)** 가 TM 전이에 의해 합법적임을 보장하는 **지역 검사**를 수행.  
- 마지막에 보조 기호/마커를 **삭제하는 규약**(호모모르피즘)으로 실제 출력만 남긴다.

이 패턴으로 임의 TM의 수용 언어를 **직접** Type-0 문법으로 구현할 수 있다.

### 6.2 간단 스니펫(전이 모사의 감각)
아래는 “상태 \(q\) 가 \(b\) 를 읽고 \(c\) 를 쓰며 오른쪽 이동, \(q'\)로”를 **국소 재작성**으로 나타내는 예(개념적).

```
# 테이프 세그먼트 표기: x q b y   (q가 b를 읽고 있음)
x q b y   ->   x c q' y
# 경계/왼쪽 이동은 별도 규칙군으로 처리
```

실제 구현에서는 좌우 경계/공백/마커(⊢, ⊣), 다중 트랙 등을 사용해 모든 전이를 **유한 개** 규칙으로 포괄한다.

---

## 7) 다른 계층과의 관계(요약)

\[
\text{REG} \subsetneq \text{CFL} \subsetneq \text{CSL} \subsetneq \textbf{RE} \quad(\subsetneq \mathcal{P}(\Sigma^*))
\]

- Type-0/RE 는 촘스키 계층의 **최상위**.  
- RE 내부에서 **재귀적(Recursive)** 은 진부분집합: 모든 입력에서 정지하는 결정기가 존재하는 언어들.

---

## 8) 자주 묻는 질문(FAQ)

- **Q. Type-0은 왜 보수에 닫히지 않나요?**  
  A. RE가 보수에 닫히면 RE=coRE가 되고, 도베일링으로 모든 RE가 **결정 가능**해져 정지 문제와 모순.

- **Q. “명시적”으로 CSL이 아닌 RE 언어를 줄 수 있나요?**  
  A. 존재성은 **공간 계층 정리**로 확실(예: 더 큰 공간이 필요한 결정 언어들).  
  구체 예시는 보통 **기계 인코딩 언어**(예: \(\textsf{A\_TM}=\{\langle M\rangle\#w\mid M(w)\text{ 수용}\}\))를 든다. 이는 RE이지만 결정/CSL은 아니다.

- **Q. 문맥 자유/인식 문법과 비교한 실무적 차이는?**  
  A. Type-0는 **정적 분석 가능성**이 거의 없어, 실제 언어 설계는 보통 **CFL/CSL 이하**에서 이뤄진다. Type-0는 주로 **이론적 상한**을 논할 때 등장.

---

## 9) 한 페이지 요약

- **정의**: 좌변에 비단말을 포함하는 임의 재작성 \(\alpha\to\beta\) 를 허용하는 문법.  
- **표현력**: \(\boxed{\text{Type-0}=\text{RE}}\) — **튜링 기계와 동치**.  
- **구성법**: TM의 **구성(상태·헤드·테이프)** 을 문자열로 코딩하고, 전이를 **국소 규칙**으로 모사.  
- **폐포**: \(\cup,\cap,\cdot,★\), 호모/역호모, 정규와의 교집합에 닫힘; **보수는 No**.  
- **결정 성질**: 멤버십 RE-완, 공백/보편/포함/동치 등 **Undecidable** 다수.  
- **의미**: “문법 = 프로그램” 관점의 정점. 계산 가능성의 **최상위 표현력**을 갖지만, 자동 분석은 근본적 한계가 있다.
