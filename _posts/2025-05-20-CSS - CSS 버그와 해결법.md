---
layout: post
title: CSS - CSS 버그와 해결법
date: 2025-05-20 21:20:23 +0900
category: CSS
---
# 자주 겪는 CSS 버그와 해결법 정리

## 0) 빠른 사용법 — “버그 처방전” 인덱스

- [margin 겹침(Margin collapsing)](#1-margin-겹쳐서-사라지는-현상-margin-collapsing)
- [float 자식 때문에 부모 높이 0](#2-height가-안-잡히는-부모-요소-자식이-float일-때)
- [인라인 요소 width/height 미적용](#3-인라인-요소에-width-height-적용-안됨)
- [이미지 하단 여백](#4-이미지-아래에-이상한-간격-생김)
- [absolute 기준점 오류](#5-position-absolute-요소가-이상한-위치에-배치됨)
- [z-index 적용 안 됨](#6-z-index가-적용되지-않음)
- [Flex 줄바꿈 안 됨](#7-flex-item이-한-줄로-안-감싸짐-줄바꿈-안-됨)
- [긴 텍스트 줄바꿈 실패](#8-white-space-문제로-텍스트가-줄바꿈-안됨)
- [input/button 브라우저별 스타일 편차](#9-input--button-요소가-브라우저마다-다르게-보임)
- [overflow 숨김 불능](#10-overflow-hidden이-안-먹히는-경우)
- [추가 빈발 이슈 묶음](#11-추가-빈발-이슈-요약표)
- [Flex/Safari 특유 이슈 모음](#12-flex-및-safari-특유-이슈-심화)
- [스택 컨텍스트·혼합 모드 관련](#13-스택-컨텍스트-혼합-모드-필터-트랜스폼)
- [뷰포트·스크롤·모바일 키보드](#14-뷰포트vh-스크롤-모바일-키보드-연동-버그)
- [타이포·라인박스·서브픽셀](#15-타이포그래피-라인-박스-서브픽셀-라운딩)
- [디버깅 레시피](#16-디버깅-레시피-10단계)
- [체크리스트 & 스니펫](#17-체크리스트--스니펫-모음)

---

## 1) margin 겹쳐서 사라지는 현상 (margin collapsing)

**증상**: 인접 블록의 상하 margin이 겹쳐져 하나만 적용된다.

**원인**: 블록 포맷팅 컨텍스트(BFC)에서 인접한 수직 마진은 **collapsing** 규칙을 따른다. 부모와 첫/마지막 자식 사이에서도 발생.

**해결**

- 부모에 BFC 생성: `overflow: hidden|auto|clip`, `display: flow-root`, `contain: layout` 등
- 혹은 부모에 상단 `padding-top`/`border-top` 부여

```html
<div class="parent">
  <div class="child"></div>
</div>
```

```css
.parent {
  background: #eee;
  /* BFC 생성 */
  display: flow-root; /* 또는 overflow: hidden; */
}
.child {
  margin-top: 20px;
  height: 60px;
  background: #bbb;
}
```

---

## 2) height가 안 잡히는 부모 요소 (자식이 float일 때)

**증상**: float 자식만 있는 부모의 높이가 0으로 보인다.

**원인**: float은 정상 흐름에서 제외된다.

**해결**

- clearfix 가상요소
- 부모에 `overflow: hidden/auto` (BFC)
- float 대신 Flex/Grid로 대체

```css
.container::after { content: ""; display: block; clear: both; }
```

또는

```css
.container { overflow: hidden; }
```

---

## 3) 인라인 요소에 width/height 적용 안됨

**증상**: `span`, `a`에 폭/높이를 줘도 무시.

**원인**: inline은 내용 크기에 맞고 `width/height` 미지원.

**해결**: `display: inline-block|block|flex` 로 승격.

```css
a.btn {
  display: inline-block;
  width: 120px;
  height: 36px;
  line-height: 36px;
}
```

---

## 4) 이미지 아래에 이상한 간격 생김

**증상**: 이미지 하단에 빈 공간.

**원인**: `img`는 inline 요소로 **baseline** 정렬. 글꼴의 descender 공간이 생김.

**해결**

- `img { display: block; }`
- 또는 `vertical-align: middle|bottom|top;`

```css
.gallery img { display: block; }
```

---

## 5) position: absolute 요소가 이상한 위치에 배치됨

**증상**: 의도한 부모가 아닌 문서/뷰포트 기준으로 배치.

**원인**: absolute는 **가장 가까운 position 지정 조상**을 기준으로 한다. 조상들이 모두 `static`이면 초기 포함 블록이 기준.

**해결**: 기준 조상에 `position: relative|absolute|fixed|sticky`.

```css
.parent { position: relative; }
.child {
  position: absolute;
  inset: 0; /* top:0; right:0; bottom:0; left:0; */
}
```

---

## 6) z-index가 적용되지 않음

**증상**: 숫자를 키워도 위로 올라오지 않음.

**원인**: z-index는 **포지셔닝 컨텍스트**(position != static)에서만 의미. 또한 **새 스택 컨텍스트**가 중간에 생기면 격리됨(예: `position`+`z-index`, `opacity<1`, `transform`, `filter`, `mix-blend-mode`, `will-change`, `isolation:isolate` 등).

**해결**

- 대상에 `position: relative` 부여
- 중간에 스택 컨텍스트 만드는 속성 제거/위치 조정
- 필요한 요소에만 새 스택 컨텍스트를 명시적으로 생성

```css
.overlay { position: fixed; inset: 0; z-index: 9999; }
```

---

## 7) Flex item이 한 줄로 안 감싸짐 (줄바꿈 안 됨)

**증상**: flex 컨테이너가 좁아져도 아이템이 줄바꿈되지 않음.

**원인**: 기본 `flex-wrap: nowrap`.

**해결**:

```css
.flex {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}
```

---

## 8) white-space 문제로 텍스트 줄바꿈 안됨

**증상**: 긴 문자열이 박스를 삐져나감.

**원인**: `white-space: nowrap` 또는 긴 단어/URL.

**해결**:

```css
.long-text{
  white-space: normal;
  overflow-wrap: break-word; /* 최신 권장 */
  word-break: break-word;    /* 레거시 호환 */
  min-width: 0;              /* flex item일 때 필요 */
}
```

---

## 9) input / button 요소가 브라우저마다 다르게 보임

**증상**: 플랫폼/브라우저마다 기본 스타일 편차가 큼.

**해결 전략**

- Reset/Normalize 사용
- 최소화된 초기화 + 접근성 유지

```css
button, input, select, textarea {
  font: inherit;
  color: inherit;
  background: none;
  border: 1px solid #ddd;
  border-radius: .375rem;
  -webkit-appearance: none;
  appearance: none;
}
```

> iOS 확대 방지: 텍스트 입력 컨트롤 폰트 크기를 **16px 이상** 유지.

```css
input, textarea, select, button { font-size: 16px; }
```

---

## 10) overflow: hidden이 안 먹히는 경우

**증상**: 자식이 튀어나오거나 그림자/변형이 잘림.

**원인**:
- 자식이 `position: absolute/fixed`로 다른 컨텍스트 기준
- `transform`/`filter`로 레이어 분리 → 부모 `overflow`의 클리핑을 벗어남

**해결**:
- 부모에 `position: relative`로 클리핑 기준 명시
- 클리핑 컨테이너를 한 단계 상위로 조정
- Box-shadow가 잘리면 `filter: drop-shadow()` 혹은 래퍼 추가

```css
.clipper {
  position: relative;
  overflow: hidden;
}
.child {
  position: absolute; inset: 0;
}
```

---

## 11) 추가 빈발 이슈 (요약표)

| 증상 | 원인 | 해결 |
|---|---|---|
| inline-block 사이 공백 | HTML 공백 문자 | 부모 `font-size:0;` 후 자식에서 복구, 주석/줄바꿈 제거, Flex로 대체 |
| 스크롤바로 인해 레이아웃 흔들림 | 플랫폼 별 스크롤바 너비 차 | `scrollbar-gutter: stable;`(지원 브라우저), padding 보정 |
| 배경 고정 패럴랙스 버그 | iOS `background-attachment: fixed` 미지원/문제 | `position: fixed` 래퍼 사용, transform 패럴랙스 대체 |
| sticky 작동 안 함 | 조상 `overflow`/`transform` 영향 | 조상 `overflow: visible`로, `top` 지정, 변형 제거 |
| transform 후 텍스트 흐림 | 서브픽셀 스케일 | 정수 배율, `translateZ(0)`/`will-change` 제한적 사용 |
| 클릭 안 먹힘 | 상위 투명 레이어 | `pointer-events: none` 확인, z-index/스택 컨텍스트 점검 |
| box-shadow 안보임 | `overflow: hidden`에 잘림 | 래퍼 분리, `filter: drop-shadow()` 대체 |
| 배경색/블렌딩 이상 | `mix-blend-mode`/`opacity` | 스택 컨텍스트/혼합 모드 제거 또는 분리 |

---

## 12) Flex 및 Safari 특유 이슈 (심화)

### 12.1 Flex 아이템 축소 불가 문제

**증상**: 긴 텍스트/이미지가 Flex 컨테이너 너비를 밀어넘김.

**원인**: 일부 브라우저에서 Flex item의 기본 `min-width:auto`가 **내용 크기**를 존중.

**해결**:

```css
.flex-item {
  min-width: 0;      /* 텍스트 래핑 허용 */
  min-height: 0;     /* 세로 축도 유사 상황일 때 */
}
```

```css
.text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
```

### 12.2 이미지의 내재 크기 때문에 넘침

```css
figure {
  display: flex;
  min-width: 0;
}
img {
  max-width: 100%;
  height: auto;
}
```

### 12.3 Safari에서 `gap` 지원 상황

- Flex `gap`은 최신 Safari에서 지원. 구형 대응 필요 시 margin 방식으로 폴백.

```css
.flex { display:flex; gap:1rem; }
@supports not (gap: 1rem) {
  .flex { margin:-.5rem; }
  .flex > * { margin:.5rem; }
}
```

---

## 13) 스택 컨텍스트, 혼합 모드, 필터 & 트랜스폼

**원리**: 새 스택 컨텍스트를 만드는 속성(아래)이 있으면 z-index 비교가 **그 컨텍스트 내부**로 한정된다.

- `position` + `z-index`(값 존재), `opacity < 1`, `transform`, `filter`, `mix-blend-mode`, `isolation:isolate`, `will-change`, `perspective` 등

**디버깅 절차**

1. DevTools에서 레이어/스택 컨텍스트 미리보기 활성화
2. 의심 요소 상위에 새 컨텍스트 만드는 속성 제거/이동
3. 최상위 오버레이는 **형제 중 최상단**에 배치 + `position: fixed; z-index: 큰값`

```css
.modal {
  position: fixed; inset: 0; z-index: 9999;
  /* 부모에 transform 있으면 참조가 꼬일 수 있다 → modal는 DOM 루트 쪽으로 이동 */
}
```

---

## 14) 뷰포트(vh), 스크롤, 모바일 키보드 연동 버그

### 14.1 iOS Safari `100vh` 변동

```css
.hero {
  height: 100vh;               /* 기본 */
  height: 100dvh;              /* 동적 뷰포트 (신규) */
  min-height: -webkit-fill-available; /* 구형 iOS 대응 */
}
```

필요 시 JS 보정(주소창 변동 포함):

```js
const setVH = () =>
  document.documentElement.style.setProperty('--vh', `${window.innerHeight*0.01}px`);
window.addEventListener('resize', setVH);
setVH();

/* CSS */
.hero { height: calc(var(--vh, 1vh) * 100); }
```

### 14.2 모바일 가상 키보드와 fixed 요소 튐

- 입력 포커스 시 `position: fixed`가 의도와 다르게 보일 수 있음
- 해결: 뷰포트 보정, 입력 시 fixed 헤더 숨김/압축, 스크롤 잠금/복원

```js
let y=0;
function lock(){ y=scrollY; document.body.style.position='fixed'; document.body.style.top=`-${y}px`; }
function unlock(){ document.body.style.position=''; window.scrollTo(0,y); }
```

---

## 15) 타이포그래피, 라인 박스, 서브픽셀 라운딩

### 15.1 라인 높이/정렬로 인한 미세 흔들림

- `line-height`는 단위 없는 값 권장(상속 안정)
- 아이콘 정렬: `vertical-align: middle;` 또는 Flex 정렬

```css
:root { --lh: 1.5; }
body { line-height: var(--lh); }
.icon { vertical-align: middle; }
```

### 15.2 서브픽셀 라운딩으로 1px 틈

- 그리드/칼럼 계산이 소수점이면 브라우저마다 반올림이 달라 **hairline gap** 발생
- 해결: `calc()`로 누적 오차 줄이기, `outline` 대신 `box-shadow` 사용, 배경에 선을 그리면 틈 감소

```css
.col { width: calc(100% / 3); } /* 33.3333% 유지 */
```

---

## 16) 디버깅 레시피 (10단계)

1. **최소 재현 케이스(MRE)**로 축소한다. (HTML/CSS 20~30줄)
2. DevTools Elements → **Computed**에서 최종 값과 **Specificity** 확인
3. **Box Model** 시각화로 margin/padding/border 확인
4. 레이아웃 오버레이: Grid/Flex overlay 토글
5. 의심 요소에 일시적으로 `outline:1px solid red;`로 위치 확인
6. 부모 체인의 `position/overflow/transform/filter` 탐색 (스택 컨텍스트)
7. display 전환: `inline ↔ inline-block ↔ block ↔ flex` 테스트
8. BFC 생성: `display: flow-root` 혹은 `overflow: hidden` 적용 테스트
9. @supports/feature detection으로 신기능과 폴백 경로 분기
10. 브라우저 스위치: Safari/Firefox에서 동일 현상 여부 비교

---

## 17) 체크리스트 & 스니펫 모음

### 17.1 “안 깨지는 카드” 스니펫

```html
<section class="cards">
  <article class="card">
    <img class="card__img" src="..." alt="">
    <h3 class="card__title">제목</h3>
    <p class="card__desc">긴 텍스트가 와도 레이아웃이 안전합니다.</p>
  </article>
</section>
```

```css
.cards { display: grid; gap: 1rem; }
@supports (display: grid) {
  .cards { grid-template-columns: repeat(auto-fill, minmax(240px,1fr)); }
}
@supports not (display: grid) {
  .cards { display:flex; flex-wrap:wrap; margin:-.5rem; }
  .card { flex:1 0 240px; margin:.5rem; }
}
.card { display:flex; flex-direction:column; border:1px solid #e5e7eb; border-radius:.5rem; overflow:hidden; }
.card__img { width:100%; aspect-ratio: 16/9; object-fit:cover; display:block; }
.card__title, .card__desc { margin: .75rem 1rem 0; }
.card__desc {
  margin-bottom: 1rem;
  min-height: 0;
  overflow-wrap: break-word;
}
```

### 17.2 “안 흔들리는 헤더 + sticky + 안전영역”

```css
:root { --elev: 8px; }
.header {
  position: sticky; top: 0; z-index: 1000;
  padding-block: max(.5rem, env(safe-area-inset-top)) .5rem;
  background: rgba(255,255,255,.85);
  backdrop-filter: blur(8px);
  border-bottom: 1px solid #e5e7eb;
}
@supports not (backdrop-filter: blur(1px)) {
  .header { background: #fff; }
}
```

### 17.3 iOS 확대 방지/폰트/폼 안정화

```css
html { -webkit-text-size-adjust: 100%; }
input, select, textarea, button { font-size: 16px; }
```

### 17.4 스크롤바 폭 안정화(지원 브라우저)

```css
:root { scrollbar-gutter: stable; }
```

---

## 18) 케이스 스터디 — “3단 컬럼이 Safari에서 1px 깨진다”

**상황**: `grid-template-columns: repeat(3, 1fr)` 사용. Safari에서 간혹 우측 1px 라인이 비거나 튀어나옴.

**원인**: 서브픽셀 라운딩 + 보더/갭 조합.

**처방**:
- `gap` 사용 시 카드에 `border` 대신 `box-shadow`로 음영 처리
- 컬럼 최소 폭을 `minmax(240px, 1fr)`로 바꿔 불필요한 서브픽셀 분할 감소
- 카드에 `overflow: hidden`과 라운드 고정

```css
.grid { display:grid; gap: 1rem; grid-template-columns: repeat(3, minmax(0, 1fr)); }
.card { border-radius: .5rem; box-shadow: 0 1px 3px rgba(0,0,0,.08); overflow: hidden; }
```

---

## 19) 케이스 스터디 — “모달 뒤 배경이 스크롤된다(모바일)”

**원인**: 모바일 브라우저의 뷰포트/바운스/주소창 변동, `position: fixed`의 한계.

**처방**: 스크롤 잠금 + 위치 보존

```js
let scrollY = 0;
export function lockBody(){
  scrollY = window.scrollY;
  document.body.style.position = 'fixed';
  document.body.style.top = `-${scrollY}px`;
  document.body.style.width = '100%';
}
export function unlockBody(){
  document.body.style.position = '';
  document.body.style.top = '';
  window.scrollTo(0, scrollY);
}
```

---

## 20) 샘플 “버그 헌터” 유틸 CSS

```css
/* 레이아웃 경계 가시화 */
* { outline: 0 solid transparent; }
.debug *:hover { outline: 1px dashed rgba(200,0,0,.6); }

/* 이미지/비디오 안전 */
img, video { max-width: 100%; height: auto; display:block; }

/* 플로우 루트 생성으로 margin-collapsing/float 영향 최소화 */
.flow-root { display: flow-root; }

/* 플렉스 안전 설정 */
.flex-safe > * { min-width: 0; min-height: 0; }

/* 텍스트 오버플로우 */
.ellipsis { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* 클릭 히트 영역/반응 개선 */
.clickable { cursor:pointer; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
```

---

## 결론

CSS 버그는 **규칙을 모르면 기묘**하지만, **원리를 알면 반복 패턴**이다.  
- **BFC/스택 컨텍스트/포맷팅 컨텍스트**를 먼저 의심하라.  
- **`min-width:0`/`overflow-wrap`/`display:flow-root`/`position` 기준**만 올바르면, 대부분 해결된다.  
- iOS Safari의 **뷰포트·입력·sticky·overflow**는 항상 별도 검증하라.

---

## 참고 링크

- MDN: Common layout issues  
- CSS-Tricks: Collapsing margins  
- Chrome DevTools: CSS debugging techniques  
- WebKit/Safari quirks (검색 키워드: “Safari sticky overflow transform”)