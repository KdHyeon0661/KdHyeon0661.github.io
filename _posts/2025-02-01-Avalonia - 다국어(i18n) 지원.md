---
layout: post
title: Avalonia - ë‹¤êµ­ì–´(i18n) ì§€ì› ë° ë¦¬ì†ŒìŠ¤ ë¡œë”© êµ¬ì¡°
date: 2025-02-01 21:20:23 +0900
category: Avalonia
---
# ğŸŒ Avalonia ë‹¤êµ­ì–´(i18n) ì§€ì› ë° ë¦¬ì†ŒìŠ¤ ë¡œë”© êµ¬ì¡°

---

## ğŸ§© ì§€ì› ë°©ì‹ ê°œìš”

| ë°©ì‹ | ì„¤ëª… |
|------|------|
| `.resx` ë¦¬ì†ŒìŠ¤ ê¸°ë°˜ | Visual Studio ê¸°ë³¸, WPFì™€ ë™ì¼ |
| JSON/CSV ê¸°ë°˜ | ë™ì  ë¡œë”©/ìˆ˜ì • ê°€ëŠ¥, ê²½ëŸ‰í™” ê°€ëŠ¥ |
| Community Toolkit | [Localization.Extensions](https://github.com/AvaloniaCommunity/Localization.Extensions) í™œìš© ê°€ëŠ¥ |

ì´ ê¸€ì—ì„œëŠ” **í‘œì¤€ .NET ë°©ì‹ì¸ `.resx ë¦¬ì†ŒìŠ¤ ë°©ì‹`**ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•˜ê³ , í•„ìš” ì‹œ JSON ë°©ì‹ìœ¼ë¡œ í™•ì¥í•˜ëŠ” íŒë„ ì¶”ê°€í•©ë‹ˆë‹¤.

---

## ğŸ“ ê¸°ë³¸ êµ¬ì¡° ì˜ˆì‹œ

```
MyApp/
â”œâ”€â”€ Resources/
â”‚   â”œâ”€â”€ Strings.resx
â”‚   â”œâ”€â”€ Strings.ko.resx
â”‚   â””â”€â”€ Strings.en.resx
â”œâ”€â”€ Services/
â”‚   â””â”€â”€ LocalizationService.cs
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ MainViewModel.cs
â”œâ”€â”€ Views/
â”‚   â””â”€â”€ MainView.axaml
```

---

## 1ï¸âƒ£ ë¦¬ì†ŒìŠ¤ íŒŒì¼ êµ¬ì„± (.resx)

### ğŸ“„ `Strings.resx` (ê¸°ë³¸)
| Name | Value |
|------|-------|
| App_Title | Avalonia ì˜ˆì œ |
| Hello     | ì•ˆë…•í•˜ì„¸ìš” |

### ğŸ“„ `Strings.en.resx`
| Name | Value |
|------|-------|
| App_Title | Avalonia Sample |
| Hello     | Hello |

> ìë™ ë¹Œë“œ ì‹œ `Strings.resources.dll`ë¡œ ìƒì„±ë¨ (ìœ„ì¹˜: `bin/{lang}/` í•˜ìœ„ í´ë”)

---

## 2ï¸âƒ£ LocalizationService êµ¬í˜„

### ğŸ“„ LocalizationService.cs

```csharp
using System.Globalization;
using System.Resources;
using System.Threading;

public static class LocalizationService
{
    private static ResourceManager? _resourceManager;

    public static void Initialize()
    {
        _resourceManager = new ResourceManager("MyApp.Resources.Strings", typeof(LocalizationService).Assembly);
    }

    public static string GetString(string key)
    {
        return _resourceManager?.GetString(key, CurrentCulture) ?? $"!!{key}!!";
    }

    public static CultureInfo CurrentCulture { get; private set; } = CultureInfo.CurrentUICulture;

    public static void SetCulture(string cultureName)
    {
        CurrentCulture = new CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = CurrentCulture;
        Thread.CurrentThread.CurrentCulture = CurrentCulture;
    }
}
```

> âœ… `Initialize()`ëŠ” ì•± ì‹œì‘ ì‹œ í•œ ë²ˆë§Œ í˜¸ì¶œ  
> âœ… `SetCulture("en")` ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì–¸ì–´ ë³€ê²½ ê°€ëŠ¥

---

## 3ï¸âƒ£ ì•± ì´ˆê¸°í™” ì‹œ ë¦¬ì†ŒìŠ¤ ì´ˆê¸°í™”

### ğŸ“„ App.xaml.cs

```csharp
public override void OnFrameworkInitializationCompleted()
{
    LocalizationService.Initialize();
    LocalizationService.SetCulture("ko"); // ì´ˆê¸° ì–¸ì–´ ì„¤ì •

    ...
    base.OnFrameworkInitializationCompleted();
}
```

---

## 4ï¸âƒ£ ViewModelì—ì„œ ë‹¤êµ­ì–´ ë¬¸ìì—´ ì‚¬ìš©

### ğŸ“„ MainViewModel.cs

```csharp
public class MainViewModel : ReactiveObject
{
    public string Title => LocalizationService.GetString("App_Title");
    public string Greeting => LocalizationService.GetString("Hello");
}
```

---

## 5ï¸âƒ£ XAMLì—ì„œ ë‹¤êµ­ì–´ ë°”ì¸ë”©

AvaloniaëŠ” `StaticResource`ë¡œ ì§ì ‘ ë‹¤êµ­ì–´ ë¬¸ìì—´ ë°”ì¸ë”©ì„ í•˜ì§„ ì•Šì§€ë§Œ, **ViewModelì„ í†µí•œ ë°”ì¸ë”©** ë˜ëŠ” **MarkupExtension í™œìš©** ë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤.

### ë°©ë²• A: ViewModel ê²½ìœ 

```xml
<TextBlock Text="{Binding Title}" />
<TextBlock Text="{Binding Greeting}" />
```

---

### ë°©ë²• B: Custom MarkupExtension êµ¬í˜„ (ê³ ê¸‰)

```csharp
public class LocExtension : MarkupExtension
{
    public string Key { get; set; }

    public LocExtension(string key)
    {
        Key = key;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return LocalizationService.GetString(Key);
    }
}
```

### ë“±ë¡ í›„ ì‚¬ìš©

```xml
<Window xmlns:local="clr-namespace:MyApp.Markup">
  <TextBlock Text="{local:Loc App_Title}" />
</Window>
```

---

## 6ï¸âƒ£ ì‹¤ì‹œê°„ ì–¸ì–´ ì „í™˜ ì§€ì› (ì„ íƒì )

- `LocalizationService.SetCulture("en")` í˜¸ì¶œ
- `INotifyPropertyChanged`ë¡œ ViewModel ë°”ì¸ë”©ëœ ì†ì„± ê°•ì œ ê°±ì‹ 
- ë˜ëŠ” ì´ë²¤íŠ¸ íŒ¨í„´ ì‚¬ìš©

```csharp
public class MainViewModel : ReactiveObject
{
    public string Title => LocalizationService.GetString("App_Title");

    public void OnLanguageChanged()
    {
        this.RaisePropertyChanged(nameof(Title));
        this.RaisePropertyChanged(nameof(Greeting));
    }
}
```

---

## ğŸ§ª ì–¸ì–´ ì „í™˜ ë²„íŠ¼ ì˜ˆì‹œ

```xml
<Button Content="ğŸ‡ºğŸ‡¸ English" Command="{Binding SwitchToEnglishCommand}" />
<Button Content="ğŸ‡°ğŸ‡· í•œêµ­ì–´" Command="{Binding SwitchToKoreanCommand}" />
```

```csharp
public void SwitchToEnglish() {
    LocalizationService.SetCulture("en");
    OnLanguageChanged();
}
```

---

## ğŸŒ í™•ì¥ ë°©ì‹: JSON ê¸°ë°˜ ë‹¤êµ­ì–´ ì§€ì› (ì„ íƒ)

- JSON êµ¬ì¡° ì˜ˆì‹œ:

```json
{
  "App_Title": "Avalonia Sample",
  "Hello": "Hello"
}
```

- ê° ì–¸ì–´ë³„ JSON íŒŒì¼ ê´€ë¦¬ (`ko.json`, `en.json`)
- `Dictionary<string, string>` í˜•íƒœë¡œ ë¡œë”©í•˜ì—¬ `GetString("key")` ë°˜í™˜

> JSON ë°©ì‹ì€ ë™ì  ë¡œë”©, ì™¸ë¶€ ë²ˆì—­ í”Œë«í¼ ì—°ë™ì´ ìš©ì´í•˜ë‚˜ ë¦¬ì†ŒìŠ¤ DLLë³´ë‹¤ ëŠë¦½ë‹ˆë‹¤.

---

## âœ… ì •ë¦¬

| í•­ëª© | êµ¬í˜„ ë°©ë²• |
|------|-----------|
| ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ | `.resx` ë˜ëŠ” JSON |
| ì–¸ì–´ ì „í™˜ | `SetCulture()` + ViewModel ê°•ì œ ì—…ë°ì´íŠ¸ |
| View ë°”ì¸ë”© | ViewModel ê²½ìœ  or MarkupExtension |
| ì‹¤ì‹œê°„ ì „í™˜ | `RaisePropertyChanged` ë˜ëŠ” ì´ë²¤íŠ¸ |
| í…ŒìŠ¤íŠ¸ ìš©ì´ì„± | Mock LocalizationService ê°€ëŠ¥ |

---

## ğŸ“˜ ë‹¤ìŒ í™•ì¥ ì£¼ì œ ì¶”ì²œ

- ğŸ§¬ ë‹¤êµ­ì–´ Enum ë°”ì¸ë”© (`IValueConverter`)
- ğŸŒ ì™¸ë¶€ ë²ˆì—­ íŒŒì¼ ìë™ ë¹Œë“œ (CI/CD í†µí•©)
- ğŸ“¦ ë¡œì»¬ ì„¤ì • ì €ì¥ (`Settings.json`ì— ì–¸ì–´ ê¸°ì–µ)
- ğŸ–¥ï¸ ë¬¸í™”ê¶Œë³„ í¬ë§· ì²˜ë¦¬ (ë‚ ì§œ/ìˆ«ì í‘œì‹œ ë“±)
