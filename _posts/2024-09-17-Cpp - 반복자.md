---
layout: post
title: C++ - 반복자
date: 2024-09-17 20:20:23 +0900
category: Cpp
---
# C++ 반복자(iterator) 종류

---

## 1. 반복자란?

- 반복자(iterator)는 STL 컨테이너의 원소를 **순회하는 포인터 유사 객체**
- 일반 포인터처럼 `*`, `++`, `--` 연산 등을 사용할 수 있음
- 컨테이너마다 어떤 반복자를 제공하는지 다르기 때문에 **반복자의 종류를 이해하는 것이 매우 중요**

---

## 2. 반복자 분류: 5가지 카테고리

| 반복자 종류               | 특징                             | 사용 가능한 연산                  |
|---------------------------|----------------------------------|----------------------------------|
| Input Iterator            | 읽기 전용, 전진만 가능           | `*`, `++`, `==`, `!=`           |
| Output Iterator           | 쓰기 전용, 전진만 가능           | `*`, `++` (쓰기 연산만 가능)     |
| Forward Iterator          | 여러 번 읽기 가능, 전진만 가능   | `*`, `++`, `==`, `!=`           |
| Bidirectional Iterator    | 앞뒤 이동 가능                   | `*`, `++`, `--`, `==`, `!=`     |
| Random Access Iterator    | 임의 위치 접근 가능              | `*`, `++`, `--`, `+`, `-`, `[]` |

---

## 3. Input Iterator

- **읽기 전용** 순방향 반복자
- 한 번만 순회 가능 (읽은 후 재사용 불가)

```cpp
std::istream_iterator<int> it(std::cin);
int x = *it;  // 입력 스트림으로부터 정수 읽기
```

---

## 4. Output Iterator

- **쓰기 전용** 순방향 반복자
- 값을 컨테이너에 삽입하거나 스트림에 출력할 때 사용

```cpp
std::ostream_iterator<int> out(std::cout, " ");
*out = 10;  // 출력: 10
```

---

## 5. Forward Iterator

- Input과 Output 기능 모두 가짐
- **여러 번 읽기 가능**
- 연결 리스트(`std::forward_list`)에 사용됨

```cpp
std::forward_list<int> fl = {1, 2, 3};
auto it = fl.begin();
++it;       // 이동 가능
std::cout << *it;  // 읽기 가능
```

---

## 6. Bidirectional Iterator

- 전진(`++`)과 후진(`--`)이 모두 가능
- **양방향 연결 리스트**, `std::list`, `std::set`, `std::map` 등에서 사용

```cpp
std::list<int> lst = {1, 2, 3};
auto it = lst.end();
--it;
std::cout << *it;  // 3
```

---

## 7. Random Access Iterator

- **배열처럼 인덱스를 통한 임의 접근 가능**
- 연산: `+`, `-`, `[]`, `<`, `>=`, `<=`
- `std::vector`, `std::deque`, 배열 등에서 사용

```cpp
std::vector<int> v = {10, 20, 30};
auto it = v.begin();
std::cout << *(it + 2);    // 30
std::cout << it[1];        // 20
```

---

## 8. 반복자 계층 구조 (개념도)

```
         RandomAccessIterator
              ↑
   BidirectionalIterator
              ↑
     ForwardIterator
     ↑           ↑
InputIterator  OutputIterator
```

- 위로 갈수록 **기능이 많아지고 유연**
- 아래 반복자는 위 반복자의 대체가 가능 (ex. RandomAccess → Forward)

---

## 9. 정리 요약

| 반복자 종류        | 읽기 | 쓰기 | 전진 | 후진 | 임의 접근 |
|-------------------|------|------|------|------|------------|
| Input Iterator     | ✅   | ❌   | ✅   | ❌   | ❌         |
| Output Iterator    | ❌   | ✅   | ✅   | ❌   | ❌         |
| Forward Iterator   | ✅   | ✅   | ✅   | ❌   | ❌         |
| Bidirectional      | ✅   | ✅   | ✅   | ✅   | ❌         |
| Random Access      | ✅   | ✅   | ✅   | ✅   | ✅         |

---

## 10. 마무리

- 컨테이너마다 어떤 반복자를 제공하는지 파악하고, 목적에 따라 적절한 반복자 알고리즘을 사용하세요.
- `std::advance`, `std::distance`, `std::next`, `std::prev` 등의 알고리즘은 반복자의 범용성을 높입니다.
- **이해가 깊어질수록** 사용자 정의 반복자(iterator adaptor) 구현도 가능해집니다.