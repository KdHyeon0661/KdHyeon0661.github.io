---
layout: post
title: Docker - 개요
date: 2024-12-28 19:20:23 +0900
category: Docker
---
# 🐳 Docker란? 왜 쓰는가?

## ✅ Docker란?

Docker는 컨테이너(Container)를 이용해 애플리케이션을 **패키징하고 실행**할 수 있도록 도와주는 **오픈소스 플랫폼**입니다. 도커는 코드, 런타임, 시스템 툴, 라이브러리 등을 **하나의 단일 이미지**로 묶어 어디서든 실행 가능하도록 합니다.

### 핵심 개념

- **이미지 (Image)**: 컨테이너를 실행하기 위한 불변의 템플릿. OS, 애플리케이션, 의존성을 포함.
- **컨테이너 (Container)**: 이미지를 기반으로 실행되는 **격리된 실행 환경**.
- **레지스트리 (Registry)**: 이미지를 저장하고 배포하는 장소. (ex: Docker Hub)
- **Docker Engine**: 컨테이너를 실행하는 백그라운드 데몬.

---

## 💡 왜 Docker를 사용하는가?

### 1. **환경 일치 (Environment Parity)**

"내 PC에서는 되는데 서버에서는 안 돼요"를 없앱니다. Docker는 **개발, 테스트, 운영 환경**을 일치시킵니다.

### 2. **빠른 배포와 롤백**

컨테이너는 **초 단위로 실행/종료**되므로 빠르게 애플리케이션을 배포하거나 롤백할 수 있습니다.

### 3. **가벼움과 효율성**

가상머신보다 훨씬 가볍고 **리소스 효율이 좋습니다.** 수백 개의 컨테이너를 하나의 머신에서 실행할 수 있습니다.

### 4. **이식성과 확장성**

한 번 만든 이미지는 **어디서든 실행** 가능합니다. 클라우드 환경이나 쿠버네티스 등 다양한 인프라와도 쉽게 통합됩니다.

---

# 🤔 Docker vs VM (가상머신과의 차이)

| 항목 | Docker (컨테이너) | VM (가상머신) |
|------|--------------------|----------------|
| **가상화 방식** | 운영체제 수준 가상화 (OS 가상화) | 하드웨어 수준 가상화 (Hypervisor 기반) |
| **부팅 속도** | 수 초 | 수 분 |
| **리소스 사용** | 매우 적음 (공유 커널) | 무거움 (게스트 OS 포함) |
| **실행 단위** | 프로세스 수준 | 전체 OS |
| **이식성** | 높음 (어디서든 실행) | 낮음 (환경 의존적) |
| **이미지 크기** | 수백 MB 수준 | 수 GB 이상 |
| **관리 편의성** | 간단 (Dockerfile, Compose 등) | 복잡 (가상 디스크, OS 설정 등) |

---

## 📌 시각화

```
[ VM 구조 ]
--------------------------
| 물리 서버             |
|------------------------|
| 하이퍼바이저          |
|------------------------|
| 게스트 OS1  | 게스트 OS2 |
|   앱1       |    앱2     |

[ Docker 구조 ]
--------------------------
| 물리 서버             |
|------------------------|
| 운영체제 (호스트 OS)  |
|------------------------|
| Docker Engine        |
|------------------------|
| 컨테이너1 | 컨테이너2 |
|   앱1     |    앱2    |
```

---

# 🐳 Docker의 단점

Docker는 경량화된 컨테이너 기반 가상화 기술로 많은 장점이 있지만, 완벽한 해결책은 아닙니다. 아래는 주요 단점입니다.

---

## ⚠️ 1. 운영체제 커널 공유 → 보안 취약

Docker 컨테이너는 **호스트 OS의 커널을 공유**합니다.  
→ 하나의 컨테이너에서 **커널 취약점**이 악용되면 **전체 시스템에 위협**이 될 수 있습니다.

> 반면 VM은 완전히 분리된 OS를 사용하므로 보안 격리 수준이 더 높습니다.

---

## ⚠️ 2. GUI 기반 앱 또는 전체 OS 필요할 때 부적절

Docker는 **CLI 또는 서버 사이드 앱**에는 적합하지만,  
**GUI 기반 앱이나 데스크탑 환경**, **완전한 운영체제 테스트**에는 **VM이 더 적합**합니다.

---

## ⚠️ 3. 시스템 자원 격리가 VM보다 약함

컨테이너는 자원(CPU, 메모리 등)을 제한할 수 있지만,  
**하드웨어 수준의 자원 격리**는 하이퍼바이저 기반 VM만큼 강력하지 않습니다.

---

## ⚠️ 4. 네트워크 구성 복잡성

Docker의 네트워크 드라이버 구조는 초보자에게 **이해하기 어렵고**,  
실제 서버 환경에서는 **DNS, 포트 충돌, NAT** 설정이 **복잡**할 수 있습니다.

---

## ⚠️ 5. Windows 및 macOS에서의 제한

Docker는 **Linux 커널을 기반**으로 작동합니다.  
따라서 macOS, Windows에서는 **가상머신 위에 Docker를 띄우는 방식**이 필요합니다.  
→ 이로 인해 **성능 저하** 및 **복잡성 증가** 가능성이 있습니다.

---

# 🔍 Docker Engine vs 하이퍼바이저 차이점

## 🔸 1. 하이퍼바이저(Hypervisor)란?

**하드웨어 가상화 계층**으로, **물리 서버 위에 여러 개의 VM을 실행**할 수 있도록 해주는 소프트웨어입니다.

- **Type 1 (Bare Metal)**: 하드웨어 바로 위에 설치 (ex. VMware ESXi, Hyper-V)
- **Type 2 (Hosted)**: 운영체제 위에서 실행 (ex. VirtualBox, VMware Workstation)

## 🔸 2. Docker Engine이란?

**운영체제 커널 위에서 컨테이너를 실행**하고 관리하는 **엔진**입니다.  
컨테이너는 **호스트의 커널을 공유**하여 실행되며, 격리는 사용자 공간 수준입니다.

---

## 📊 구조 비교

### 💡 VM 구조 (하이퍼바이저 기반)

```
[물리 서버]
 └── Hypervisor (ex. KVM, ESXi)
      ├── Guest OS 1 (전체 OS 포함)
      │    └── App A
      ├── Guest OS 2
      │    └── App B
      └── ...
```

- 각 VM은 **자신만의 커널과 파일 시스템**을 가짐
- 더 강력한 **보안 및 자원 격리**
- **무겁고 느림**

---

### 💡 Docker 구조 (Docker Engine 기반)

```
[물리 서버]
 └── Host OS
      └── Docker Engine
           ├── Container A
           │    └── App A
           ├── Container B
           │    └── App B
           └── ...
```

- 컨테이너는 **커널 공유** (같은 OS 기반이어야 함)
- **가볍고 빠름**
- **보안 격리 수준은 낮음**

---

## ✅ 요약

| 항목 | Docker Engine | 하이퍼바이저 |
|------|----------------|-----------------|
| 작동 계층 | OS 위에서 실행 | 하드웨어 위에서 실행 |
| 격리 수준 | 사용자 공간 (가벼움) | 커널 및 하드웨어 수준 (완전 격리) |
| 속도 | 매우 빠름 (초 단위) | 느림 (분 단위) |
| 자원 사용 | 적음 | 많음 |
| 보안 | 낮음 (커널 공유) | 높음 (완전 분리된 OS) |
| 유연성 | 애플리케이션 컨테이너에 적합 | 전체 OS 환경 필요 시 적합 |

---

## 🧠 핵심 요약

- Docker는 **빠르게 실행**되는 가볍고 **이식성 높은 실행 환경**입니다.
- VM은 완전한 운영체제를 포함하므로 **무겁고 느리지만 완전한 격리성**을 제공합니다.
- Docker는 **마이크로서비스**, **CI/CD**, **클라우드 네이티브 앱** 개발과 같은 **애플리케이션 단위 배포와 경량 실행**에 매우 효과적이며, 빠른 개발과 배포에 유리합니다.
- VM은 **완벽한 격리와 보안**이 필요한 환경(예: 보안 테스트, 여러 OS 환경 구성)에 유리합니다.
- 둘은 경쟁 관계가 아니라 **서로 보완적인 기술**입니다. 실제로 Docker를 VM이나 클라우드 VM 위에 띄워 사용하는 경우도 많습니다.