---
layout: post
title: 논리회로설계 - ROM, PLD, CPLD, FPGA
date: 2025-09-03 20:25:23 +0900
category: 논리회로설계
---
# 읽기 전용 메모리(ROM) · 프로그래머블 논리소자(PLD) · 복합 프로그래머블 논리소자(CPLD) · 필드 프로그래머블 게이트어레이(FPGA) — 완전 정리

> 표기: \(+\)=OR, \(\cdot\) 또는 생략=AND, \(\overline{X}\)=NOT \(X\).  
> 목표: **개념·구조·동작**, **프로그래밍(구성) 기술**, **지연·전력·해저드·보안**, **설계 흐름**과 **실전 예**까지 생략 없이 정리합니다.

---

## 1) 읽기 전용 메모리(ROM: Read-Only Memory)

### 1.1 무엇을 하나?
- **입력** \(n\)비트(주소) → **출력** \(m\)비트(데이터).  
- 내부는 사실상 **진리표 테이블**. 임의의 조합논리 \(F:\{0,1\}^n\to\{0,1\}^m\)를 **그대로 저장**해 구현합니다.

### 1.2 구조(개념 모식)
- **주소 디코더**: \(n\to 2^n\) one-hot 라인 생성  
- **메모리 셀 어레이**: 각 행(주소)에 \(m\)비트 저장  
- **비트라인 센스**: 선택된 행의 \(m\)비트를 읽어 출력
- **지연**: \(t_{\text{ROM}} \approx t_{\text{decode}} + t_{\text{cell}} + t_{\text{sense}}\)

### 1.3 ROM 종류 & 프로그래밍(제조/현장)
- **Mask ROM**: 포토마스크 단계에서 패턴 고정(저가 대량, NRE 큼, 변경 불가)
- **PROM(퓨저블 링크)**: 1회 프로그래밍(OTP). 레이저/전기적으로 링크를 끊어 0/1 설정
- **EPROM(전기 소거 불가시 재프로그래밍 가능/UV 소거)**: 창 있는 패키지, UV로 전체 소거 후 재기록
- **EEPROM/Flash**: **전기적** 소거/쓰기. 일부/블록 단위 갱신 가능(비휘발성, 임베디드 ROM 대체로 흔함)
- **FPGA의 초기화 ROM**: 구성 메모리(SRAM 기반)에 **비트스트림 로딩 시** BRAM/분산RAM에 초기값 미리 적재

### 1.4 ROM으로 **임의 조합논리 구현**
- 복수 출력 \(m\)개를 한 번에 제공 → **다중 출력에 유리**
- 필요한 비트 수: \(\boxed{2^n \times m}\)  
  예) 4비트 입력 → 7세그먼트 디스플레이(7출력): 16×7=112bit 저장으로 전 기능 구현
- **장점**: 설계 단순, 기능 변경은 **내용만 갱신**  
- **단점**: \(2^n\)의 **지수적 크기**(희소 진리표면 비효율), **디코더 글리치** 주의

### 1.5 타이밍·해저드·전력
- **글리치**: 주소가 바뀌는 동안 **디코더의 일시 다중 선택** → 짧은 글리치 가능  
  → **동기식 샘플링(레지스터)**, **주소 안정 구간 확보** 권장
- **전력**: 랜덤 접근 시 행/열 충·방전 → 동적전력 ↑, 순차 접근은 프리패치/파이프라인 유리

---

## 2) 프로그래머블 논리소자(PLD)

> PLA/PAL/GAL 등: “**AND-OR 배열**”에 **퓨즈/메모리**로 연결 가능성을 지정해 임의의 **SOP(곱의 합)** 논리를 구현.

### 2.1 PLA vs PAL (핵심 비교)
- **PLA(Programmable Logic Array)**: **AND 배열 가변 + OR 배열 가변**  
  - **자유도↑**(제품항·출력 맵핑 자유), **지연↑/면적↑**
- **PAL(Programmable Array Logic)**: **AND 배열 가변 + OR 배열 고정(제한된 제품항 수)**  
  - **빠름**, **예측 가능한 타이밍**, 그러나 복잡한 함수는 제품항 부족 가능
- **GAL(Generic Array Logic)**: 재프로그래밍 가능한 PAL 호환 디바이스(EEPROM/Flash 저장)

### 2.2 내부 구조(개념)
- **입력 버퍼/보수선**: 각 입력과 그 보수(\(X,\overline{X}\))를 AND 어레이로 공급
- **AND 어레이(제품항)**: 선택된 입력 리터럴들의 AND(미니텀·임플리컨트)
- **OR 어레이(합산)**: 여러 제품항을 OR → 출력 함수 형성
- **매크로셀**: 출력에 **선택적 플립플롭(등록)**, 출력/피드백 옵션, 폴라리티 제어 포함

### 2.3 프로그래밍 방식
- **퓨저블 링크/안티퓨즈**: OTP(1회)  
- **EEPROM/Flash**: 재프로그래밍 가능, **비휘발성**(전원 꺼져도 유지)

### 2.4 타이밍·해저드
- **PLA/PAL은 SOP 물리구현**이라 **정적-1 해저드**는 **합의항**을 제품항으로 추가해 제거 가능  
- **지연 모델**: 입력→AND(1단)→OR(1단)→(선택)FF → 대체로 **2단** 조합 지연 + 라우팅

### 2.5 언제 쓰나?
- **주소 디코딩, 상태 펄스 생성, glue logic**, 소형 **다중 출력** 조합 논리에 최적  
- ROM 대비 **희소 진리표**에서 효율적(필요한 제품항만 사용)

---

## 3) 복합 프로그래머블 논리소자(CPLD)

> “**큰 PAL 여러 개 + 전역 인터커넥트**”에 가깝다. **비휘발성(대개 Flash/E²)**, **결정적 타이밍**, **넓은 팬인 제품항**이 강점.

### 3.1 구조 요약
- **함수 블록(Function Block)**: 다수의 **매크로셀**(각각: 제품항 OR + 옵션 FF)
- **제품항 공유/할당기(Product-Term Allocator)**: 매크로셀 간 제품항 분배
- **전역 인터커넥트 매트릭스**: 블록 간 신호 연결(지연 거의 고정적/결정적)
- **I/O 블록**: slew/drive/표준 선택, OE 제어, 선택적 레지스터

### 3.2 특징
- **결정적(prop.) 타이밍**: 경로 길이 변화가 적어 **타이밍 분석이 단순**  
- **비휘발성**: 구성 저장 내장 → **전원 인가 즉시 동작**  
- **제품항 기반**이라 **넓은 OR**/디코딩/주소 해석에 유리  
- **밀도/주파수**는 대형 SRAM FPGA보다 낮지만 **응답 지연이 일정**하고 **전력↓**

### 3.3 용도
- **고속 주소/칩 선택, 버스 프로토콜 변환, 레거시 인터페이스 glue**, 보드 레벨 **핀 스와핑/리메핑**

---

## 4) 필드 프로그래머블 게이트어레이(FPGA)

> **미세 입자형(fine-grain)** 논리(LUT) + **거대한 라우팅** + **전용 하드 블록(DSP/BRAM/PHY)**. **현장(필드)**에서 로직을 자유롭게 재구성.

### 4.1 기본 구성
- **LUT(룩업 테이블)**: \(K\)-입력(보통 4~6) → 임의의 \(K\)-변수 조합논리 구현(내부는 작은 ROM)  
  - LUT는 **MUX 트리**로 동작, **카리 체인**/XOR/소형 RAM/시프트레지스터(SRL)로도 사용
- **FF/레지스터**: 각 LUT 옆에 배치(짧은 경로로 파이프라인 용이)
- **블록 RAM(BRAM)/URAM**: 대용량 동기식 메모리  
- **DSP 슬라이스**: 곱셈기/누산기/프리어디더 등 고정기능  
- **클록 네트워크**: 글로벌/리전/분할, PLL/MMCM  
- **I/O/PHY**: DDR/SerDes, LVDS 등 고속 인터페이스  
- **라우팅 패브릭**: 스위치 매트릭스/채널/장거리 라우팅 리소스

### 4.2 구성(Configuration) 기술
- **SRAM 기반**(가장 일반): **비휘발성 아님** → 전원 시 외부/내부 Flash에서 **비트스트림 로딩** 필요  
  - 장점: **무한 재구성**, **부분 재구성(PR)** 가능  
  - 보안: **비트스트림 암호화(AES)**, 인증(해시/서명)  
- **Flash·E² 기반**(일부 기종): **비휘발성**, 즉시 부팅, 보안↑  
- **안티퓨즈 OTP**: 1회 프로그래밍, **보안/복제 방지↑**, 지연↓(스위치 저항 낮음), 재구성 불가

### 4.3 타이밍·전력·해저드
- **타이밍**: 라우팅 길이에 크게 의존 → **배치배선(P&R)** 품질 핵심  
- **해저드**: 조합 깊이/재수렴 경로 많아 글리치 가능 → **레지스터 파이프라인**/동기화가 표준  
- **전력**: 동적전력(토글) 지배적, 클록 게이팅/CE 활용, 저전력 모드/전압 선택

### 4.4 설계 스택
- **HDL(RTL)** → 합성(synthesis) → **P&R** → 타이밍 닫기(Static Timing Analysis) → **비트스트림** 생성 → 다운로드  
- **IP 통합**: DDR, PCIe, 이더넷 등 하드/소프트 IP  
- **디버그**: ILA/SignalTap(내장 논리 분석기) 삽입

---

## 5) ROM vs PLA/PAL vs CPLD vs FPGA — **선택 가이드**

| 항목 | ROM/EPROM/Flash | PLA/PAL/GAL(PLD) | **CPLD** | **FPGA** |
|---|---|---|---|---|
| 핵심 구조 | 디코더+메모리 | AND-OR 배열 | 다수의 매크로셀 + 전역 인터커넥트 | LUT+라우팅+하드블록 |
| 비휘발성 | Mask/PROM/EEPROM/Flash: 예 | 보통 예(Flash/E²) | 예(대부분) | SRAM형: 아니오(외부 구성 필요), Flash/안티퓨즈형: 예 |
| 지연 특성 | 일정(디코더+센스) | 2단(SOP) 근사 | 결정적·예측 용이 | 라우팅 의존·가변 |
| 규모/유연성 | \(2^n m\) 제한(테이블) | 소·중규모 SOP 다중출력 | 중규모 glue·디코딩 | 대규모·고성능·DSP/메모리 포함 |
| 재구성 | PROM/Mask는 불가, (E)EPROM/Flash 가능 | 가능(GAL/Flash) | 가능 | 매우 자유(부분 재구성 가능) |
| 대표 용도 | 진리표·마이크로코드·상수맵 | 주소해독·상태/펄스·소형 컨트롤 | 보드 인터페이스/버스 제어 | 가속기/영상/통신/SoC |

---

## 6) 설계·검증 흐름(요약)

1) **기능 명세** → **조합논리/상태** 분리  
2) **타깃 선택**: (희소/넓은 제품항=PLD/CPLD) vs (대규모/가속=FPGA) vs (순수 진리표=ROM)  
3) **합성 단서**  
   - ROM: HDL `case`/`readmemh`로 **동기 ROM/BRAM 추론**  
   - PLD/CPLD: **SOP 최소화**(K-map/Quine–McCluskey/Espresso), **제품항 수** 예산  
   - FPGA: **LUT 친화**(인수화·파이프라인), 카리 체인/DSP/BRAM 적극 사용  
4) **타이밍 전략**:  
   - CPLD: 레벨 제한·제품항 수 제어  
   - FPGA: 클록 분할/지역화, 파이프라인, 멀티클럭 CDC  
5) **검증**: 기능 시뮬 → 타이밍(게이트/SDF) → 온보드 ILA

---

## 7) 실전 예제

### 7.1 ROM으로 7-세그먼트 디코더(동기 ROM, Verilog)
```verilog
module seg7_rom(input  logic        clk,
                input  logic  [3:0] bin,   // 0..F
                output logic  [6:0] seg);  // abcdefg (1=on)
  logic [6:0] mem [0:15];
  initial begin
    mem[4'h0]=7'b1111110; mem[4'h1]=7'b0110000; // ...
    mem[4'hA]=7'b1110111; mem[4'hF]=7'b1000111;
  end
  always_ff @(posedge clk)
    seg <= mem[bin];
endmodule
```
- **장점**: 조합식 최소화 필요 없음, 모양 변경도 테이블만 수정

### 7.2 PLA 스타일(제품항)로 다중 출력
- 목표:  
  \[
  F_1=AB+\overline{A}C,\quad
  F_2=AC+BC
  \]
- 공통 **제품항**: \(P_1=AB,\ P_2=\overline{A}C,\ P_3=AC,\ P_4=BC\)  
- **OR 배선**: \(F_1=P_1+P_2,\ F_2=P_3+P_4\)  
- **CPLD**에서는 \(P_i\)를 **매크로셀 공유**로 한 번만 생성

### 7.3 FPGA LUT 매핑 감각
- 6-LUT 하나는 **임의의 6변수 조합논리** 구현  
- 예) \(Y=A\cdot(B\oplus C) + D\cdot E \cdot \overline{F}\) → **단일 LUT** 가능(6입력)  
- 넓은 OR/AND는 **균형 트리 + 카리 체인**으로 고속화

---

## 8) 보안·신뢰성·현장 운용

- **보안**:  
  - FPGA SRAM형: **비트스트림 암호화/인증** 필수  
  - 안티퓨즈/Flash형: 자연스레 난독화·복제 방지↑
- **업데이트**:  
  - CPLD/FPGA: 현장 펌웨어 업데이트 가능(리모트 갱신), **롤백/듀얼이미지** 설계 권장  
- **신뢰성**:  
  - SEU(단일사건 뒤집힘) 완화: **TMR, CRC**, 주기적 재구성  
  - 전원 시퀀싱/리셋, I/O 보호, 온도/전압 범위 확인

---

## 9) 자주 하는 실수 & 체크리스트

- [ ] ROM로직에서 **주소 글리치**를 **레지스터로 샘플링**했는가?  
- [ ] PLD/CPLD의 **제품항 한도**를 넘지 않았는가(리터럴/팬인 예산)?  
- [ ] CPLD에서 **핀-핀 지연**은 일정하지만 **팬아웃/배선 길이**는 점검했는가?  
- [ ] FPGA에서 **내부 tri-state 금지**(MUX로 대체) 이해하고 RTL을 썼는가?  
- [ ] **클록·리셋·CE** 네트워크를 전용 자원에 매핑했는가?  
- [ ] 보드에서 **구성 메모리 보호/암호화** 설정했는가?

---

## 10) 연습문제(해설 원하면 이어서 제공)

1) 5입력 함수 \(F:\{0,1\}^5\to\{0,1\}^3\) 를 **ROM**과 **PLA**로 각각 구현할 때 필요한 **비트 수**와 **제품항 수**를 추정하고, 어느 쪽이 유리한지 논하라(희소/밀집 두 경우).  
2) CPLD에서 \(F_1=AB+AC+AD,\ F_2=\overline{A}C+BD\) 의 제품항 공유 전략을 설계하라(제품항 한도: 매크로셀당 5).  
3) FPGA(6-LUT)에서 10입력 OR을 고속으로 구현하는 두 방법(균형 트리, 카리-체인 기반)을 설계하고 타이밍을 비교하라(정성적 설명).  
4) SRAM FPGA의 **부분 재구성(PR)** 시나리오를 제시하고, PR 파티션/경계 신호 요구조건을 정리하라.  
5) ROM 기반 7-세그 디코더와 PLA 기반 디코더의 **해저드/타이밍** 차이를 설명하라.

---

### 포켓 요약
- **ROM**: 진리표 테이블 그 자체. \(2^n m\) 저장으로 임의 조합논리·다중출력에 간단히 대응.  
- **PLD(PLA/PAL/GAL)**: **제품항(AND) + 합산(OR)** 구조. 희소 논리에 효율, 소형·결정적 지연.  
- **CPLD**: 다수 매크로셀+전역 인터커넥트. 비휘발성·결정적 타이밍·glue logic 강자.  
- **FPGA**: LUT/라우팅/BRAM/DSP/PHY. 대규모·재구성·고성능, P&R·타이밍 닫기가 핵심.