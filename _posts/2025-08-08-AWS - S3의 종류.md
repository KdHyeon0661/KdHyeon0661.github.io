---
layout: post
title: AWS - S3의 종류
date: 2025-08-08 19:20:23 +0900
category: AWS
---
# Amazon S3의 **"종류"**(Storage classes · 기능 · 운영 옵션) 완전 정리

짧게 말하면, S3는 **하나의 서비스(객체 스토리지)**지만, 목적·비용·내구성·복구속도에 따라 여러 **스토리지 클래스(저장 계층)**와 **특화 기능**들을 제공합니다.  
아래는 S3의 다양한 *종류*와 관련 기능들을 실무 관점에서 정리한 문서입니다 — 선택 기준, 비용/성능/복구 트레이드오프, 실습용 CLI 예제까지 포함합니다.

---

## 1. 개요 — "S3의 여러 종류"가 의미하는 것
- **스토리지 클래스(Storage classes)**: 객체가 저장되는 방식/티어(예: Standard, Standard-IA, Glacier 등). 비용·복구시간·가용성 차이가 있음.  
- **배포/호스팅/인터페이스 옵션**: S3 on Outposts, Transfer Acceleration, Multi-Region Access Points 등.  
- **관리/보호 기능**: 버전 관리, Object Lock(불변성), 수명 주기(Lifecycle), 암호화 옵션, 복제(Replication) 등.  
- **데이터 처리/성능 기능**: S3 Select, Object Lambda, Multipart Upload, Requester Pays 등.

---

## 2. S3 스토리지 클래스 요약표 (한눈에 비교)

| 클래스 | 용도(권장) | 내구성 | 가용성 / 특성 | 검색/복구 시간 | 최소 보관 기간 / 요금 유의점 |
|---|---:|---:|---|---|---|
| **Standard** | 자주 접근하는 핫 데이터 | 11 9s (광범위 표기) | 높은 가용성, 다중 AZ | 즉시(마찰 없음) | 없음(유연) |
| **Intelligent-Tiering** | 접근 패턴 불확실, 비용 자동 최적화 | Standard 수준 | 자동 티어 이동 | 즉시(자동) | 모니터링 요금 / 소액 요청 요금 |
| **Standard-IA** (Infrequent Access) | 자주 접근 안하지만 즉시 필요 | 11 9s | 낮은 저장비용, 읽기 비용 발생 | 즉시 | 최소 저장 기간(예: 30일) |
| **One Zone-IA** | 비용 최우선, 재해 내구성 낮음 | 11 9s (단일 AZ) | 단일 AZ에만 저장 | 즉시 | 최소 보관 기간(예: 30일) |
| **Glacier Instant Retrieval** | 자주는 아니지만 빠른 액세스가 필요한 아카이브 | 11 9s | 저비용 아카이브 (즉시 검색 가능) | 밀리/초-밀리 ~ 즉시 | 최소 보관 기간 존재 |
| **Glacier Flexible Retrieval** (예전 Glacier) | 저비용 장기 아카이브(표준/신속/대량 검색 옵션) | 11 9s | 복구 유형에 따라 시간 차등 | 몇 분 ~ 몇 시간 | 최소 보관 기간(예: 90일 등) |
| **Glacier Deep Archive** | 최저 비용 장기 보관 (오래 걸려도 괜찮을 때) | 11 9s | 아주 저렴(오랜 복구 시간) | 표준 복구: 몇 시간(예: 12시간 수준) | 긴 최소 보관 기간(예: 180일) |
| **S3 on Outposts** | 온프레 연계 로컬 S3 API 제공 | 지역적 H/W 의존 | 온프레/로컬 가용성 | 즉시(로컬) | 아웃포스트 요금체계 |

> **메모**: `11 9s`는 S3 객체 **내구성**(durability)을 표현하는 업계 표준 간단 표기입니다. 각 클래스의 **요금·최소 보관 기간·정확한 복구 시간**은 리전·시점별로 달라질 수 있으니, 실제 비용 산정은 AWS 요금표·계산기 확인을 권장합니다.

---

## 3. 각 스토리지 클래스 상세 설명

### S3 Standard
- **사용처**: 웹 애플리케이션, 모바일, 빅데이터의 핫 데이터
- **특징**: 낮은 요청 지연, 높은 처리량, 높은 가용성
- **비용**: 저장비용 중간~높음, 읽기/쓰기 비용 적음

### S3 Intelligent-Tiering
- **사용처**: 접근 패턴이 불규칙하고 분석하기 어려운 데이터
- **특징**: AWS가 자동으로 빈번/비빈번 티어로 이동시켜 비용 절감
- **주의**: 소액의 자동 모니터링 요금이 있음

### S3 Standard-IA (Infrequent Access)
- **사용처**: 자주 접근하지 않지만 즉시 복구가 필요한 데이터(백업/DR 등)
- **특징**: 저장비용 절감(대신 GET 요금 존재), 다중 AZ 복제

### S3 One Zone-IA
- **사용처**: 재해 복구가 필요 없고 비용을 더 줄이려는 비핵심 데이터
- **특징**: 단일 AZ에 저장 → 리전 장애에는 데이터 손실 가능성 있음(저비용)

### S3 Glacier Instant Retrieval
- **사용처**: 아카이브 중에서 빠른 조회가 필요한 경우(예: 로그 조회)
- **특징**: 아카이브 계층이지만 즉시 검색 가능(수초 수준)

### S3 Glacier Flexible Retrieval
- **사용처**: 대규모 장기 아카이브(규정 보관 등)
- **특징**: 표준/대량/신속(Expedited) 같은 복구 옵션 존재 → 비용·시간 균형 조정 가능

### S3 Glacier Deep Archive
- **사용처**: 규정 준수 아카이브, 장기 보관(예: 법적 문서)
- **특징**: 가장 저렴, 복구 지연(표준 복구 몇 시간 이상) 있음

### S3 on Outposts
- **사용처**: 엄격한 로컬 데이터 처리 요구(규제/저지연)
- **특징**: 온프레 하드웨어에서 S3 API 사용, 리전 S3와는 다른 배포/요금

---

## 4. S3의 주요 기능(스토리지 '종류' 외 핵심 기능들)

### 1) 버전 관리(Versioning)
- 객체의 모든 버전을 저장 → 실수 삭제/덮어쓰기 대비
- 활성화:
```bash
aws s3api put-bucket-versioning \
  --bucket my-bucket \
  --versioning-configuration Status=Enabled
```

### 2) 수명 주기(Lifecycle) — 티어 전환 & 만료 자동화
- 예: 최근 30일 이후 → Standard-IA, 365일 이후 → Glacier Deep Archive
- 설정 예(lifecycle.json):
```json
{
  "Rules": [
    {
      "ID": "ArchiveOldObjects",
      "Status": "Enabled",
      "Filter": { "Prefix": "logs/" },
      "Transitions": [
        { "Days": 30, "StorageClass": "STANDARD_IA" },
        { "Days": 365, "StorageClass": "GLACIER" }
      ],
      "Expiration": { "Days": 1825 }
    }
  ]
}
```
- 적용:
```bash
aws s3api put-bucket-lifecycle-configuration \
  --bucket my-bucket \
  --lifecycle-configuration file://lifecycle.json
```

### 3) 암호화 옵션
- **SSE-S3**: S3가 키 관리
- **SSE-KMS**: KMS CMK로 암호화(권한 제어 가능)
- **SSE-C**: 고객이 제공한 키
- **클라이언트 사이드 암호화(CSE)**: 애플리케이션 측에서 암호화
- 버킷 기본 암호화 설정 예:
```bash
aws s3api put-bucket-encryption \
  --bucket my-bucket \
  --server-side-encryption-configuration '{
    "Rules":[{"ApplyServerSideEncryptionByDefault":{"SSEAlgorithm":"aws:kms","KMSMasterKeyID":"arn:aws:kms:...:key/xxxx"}}]
  }'
```

### 4) Object Lock (WORM) — 불변성 보장
- 규정 준수나 금융 로그 등에서 사용
- **버킷 생성 시** `--object-lock-enabled-for-bucket` 필요
- 보존 기간(Compliance/ Governance mode) 설정 가능

### 5) 복제(Replication)
- **CRR (Cross-Region Replication)**: 리전 간 복제(재해복구, 지리적 근접성)
- **SRR (Same-Region Replication)**: 같은 리전 내 복제(제거 대비, 분리)
- 복제 규칙으로 버전, 메타데이터, 암호화 전파 등 제어

### 6) 액세스 관리
- **Bucket policy**, **IAM policy**, **ACL**, **S3 Block Public Access**
- **Access Points**: 대규모 환경에서 애플리케이션 단위로 접근 제어
- **Multi-Region Access Points**: 글로벌 가용성/자동 라우팅

### 7) 성능·전송 기능
- **Multipart Upload**: 큰 파일 업로드 안정성·병렬성 향상
- **Transfer Acceleration**: 전세계에서 업로드 시 엣지 경유로 속도 개선
- **S3 Select**: 객체에서 필요한 행/컬럼만 쿼리(데이터 처리 비용 절감)
- **S3 Object Lambda**: S3 객체에 대한 응답을 런타임에 변환해서 전달

### 8) 관리·분석 툴
- **S3 Inventory**: 수십만 객체 목록 생성(CSV/Parquet)
- **S3 Storage Lens**: 계정/버킷 수준 스토리지 분석 대시보드
- **S3 Batch Operations**: 대량 객체에 대해 복사/클로닝/메타데이터 변경 수행

---

## 5. S3 vs 다른 스토리지 비교 (간단)
- **EBS**: 블록 스토리지, EC2 전용, 단일 AZ, IOPS 최적화
- **EFS**: 파일 스토리지, 다중 EC2에서 공유, POSIX
- **S3**: 객체 스토리지, HTTP 기반, 높은 내구성·확장성

---

## 6. 선택 & 운영 가이드 — 언제 어떤 클래스를 쓸까?
1. **핫 데이터(자주 접근)** → `Standard` 또는 `Intelligent-Tiering`  
2. **백업/재해 복구(즉시 필요)** → `Standard-IA`  
3. **비용 최우선·재해복구 불필요** → `One Zone-IA`  
4. **아카이브(장기·저비용)** → `Glacier Flexible Retrieval` / `Glacier Deep Archive`  
5. **접근 패턴 불확실** → `Intelligent-Tiering` 사용해 자동 최적화

**수명 주기 정책으로 자동 전환**을 구성하면 사람 실수 없이 비용 최적화 가능.

---

## 7. 비용 최적화 팁(실무)
- **Parquet/열형 포맷**으로 저장 → Athena/Redshift Spectrum 쿼리 비용 절감  
- **Lifecycle 이용**: 일정기간 지난 로그 자동으로 IA/Glacier로 이동  
- **Intelligent-Tiering**은 모니터링 비용이 있으니 소량·짧은 생명주기의 데이터에는 오히려 불리할 수 있음  
- **Multipart Upload**로 실패 재전송 비용 절감  
- **S3 Storage Lens**로 비효율(작은 객체·중복 객체 등) 발견

---

## 8. 실전 CLI 예제 모음

### 1) 버전 관리 활성화
```bash
aws s3api put-bucket-versioning \
  --bucket my-bucket \
  --versioning-configuration Status=Enabled
```

### 2) 버킷 기본 암호화(SSE-KMS) 설정
```bash
aws s3api put-bucket-encryption \
  --bucket my-bucket \
  --server-side-encryption-configuration '{
    "Rules":[
      {"ApplyServerSideEncryptionByDefault":{
         "SSEAlgorithm":"aws:kms",
         "KMSMasterKeyID":"arn:aws:kms:ap-northeast-2:123456789012:key/abcd-ef01"
      }}
    ]
  }'
```

### 3) Lifecycle 구성 적용 (파일: lifecycle.json)
```bash
aws s3api put-bucket-lifecycle-configuration \
  --bucket my-bucket \
  --lifecycle-configuration file://lifecycle.json
```

### 4) S3 객체 복제(간단한 복사, 새 키로 재암호화)
```bash
aws s3api copy-object \
  --bucket destination-bucket \
  --copy-source source-bucket/path/to/object \
  --key path/to/object \
  --server-side-encryption aws:kms \
  --ssekms-key-id arn:aws:kms:...:key/NEWKEY
```

---

## 9. 주의사항 및 운영 체크리스트
- **공개 액세스 차단(Block Public Access)** 옵션 검토 — 실수로 데이터가 공개되는 사고 방지.  
- **버전관리와 수명 주기 규칙**을 함께 설계(버전이 있으면 Lifecycle에서 버전별 규칙 설정 필요).  
- **Object Lock과 버킷 생성**: Object Lock은 버킷 생성 시 활성화해야 하며, 나중에 활성화 불가.  
- **데이터 복구 요구(RPO/RTO)**에 따라 클래스 선택(One Zone 사용 주의).  
- **암호화(키 정책)**와 S3 버킷 정책을 함께 맞춰서 권한 누수 방지.  
- **큰 비용 유발 요인**: 불필요한 GET 요청, 데이터 전송(egress), 복제 설정(특히 CRR), 수많은 작은 객체(관리 비용).

---

## 10. 결론 & 권장 순서
1. **데이터 접근 패턴(핫/웜/콜드)**을 파악한다.  
2. **수명 주기 정책**으로 자동 전환 플로우 설계.  
3. **버전 관리 + 백업/보존(필요 시 Object Lock)** 정책 수립.  
4. **암호화 + 접근 제어**(SSE-KMS, Bucket policy, Block Public Access) 적용.  
5. **모니터링(S3 Storage Lens, CloudWatch, Inventory)**으로 운영 중 지속 최적화.

---

원하시면 다음 단계로 아래 항목 중 하나를 더 깊게 만들어 드릴게요.
- S3 Lifecycle 정책 템플릿(로그/이미지/데이터 레이크 용) — JSON 예제 포함  
- S3 버킷 정책 + KMS 완전 예제(강제 암호화 + 세부 권한) — 스크립트 포함  
- S3 성능·전송 튜닝(Transfer Acceleration, multipart, Requester Pays) 실무 가이드
